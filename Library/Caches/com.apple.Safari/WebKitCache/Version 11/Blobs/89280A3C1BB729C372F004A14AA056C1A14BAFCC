function SurveyManager(a){function b(){for(var a=0;a<Q.length;a++){var b=Q[a];try{i(b.e,b.ev,b.cb)}catch(c){}}Q=[]}function c(){this.dispose();for(var a=0;a<R.length;a++)try{R[a].innerHTML="";R[a].parentNode&&R[a].parentNode.removeChild(R[a])}catch(b){}R=[]}function d(){if(N.childNodes)for(var a=0;a<N.childNodes.length;a++)N.removeChild(N.childNodes[a]);N.className=V.info;N.style.display="none"}function e(b){u(b||a.successText,V.success)}function f(b){u(b||a.errorText,V.error)}function g(){var b,c=S.validateSurvey(!0);if(c.surveyValid){d();b=S.getJSONSurvey();if(a.callback&&"function"==typeof a.callback)try{a.callback(b)}catch(e){}}else{t(c.questionsNeeded);f()}return b}function h(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c);Q.push({e:a,ev:b,cb:c})}function i(a,b,c){a.addEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)}function j(a,b){var c=document.getElementById(a);if(c&&k(b,c.className)){for(var d=c.className.split(" "),e="",f=0;f<d.length;f++){d[f]=d[f].replace(/^[\s*\n*\r*\t\*]$[\s*\n*\r*\t\*]/g,"");if(d[f]!=b&&d){f>0&&(e+=" ");e+=d[f]}}c.className=e}}function k(a,b){var c=b.split(" "),d=!1;a=a.replace(/^[\s*\n*\r*\t\*]$[\s*\n*\r*\t\*]/g,"");for(var e=0;e<c.length;e++)d||a!=c[e]||(d=!0);return d}function l(a){for(var b=0;b<a.length;b++)m(a[b])}function m(a){var b=document.getElementById(T.question+a);b&&(b.style.display="block")}function n(a){for(var b=0;b<a.length;b++)m(a[b].id)}function o(a){for(var b=0;b<a.length;b++)p(a[b].id)}function p(a){var b=document.getElementById(T.question+a);b&&(b.style.display="none")}function q(a){return a+Math.floor(1e4*Math.random())+"_"+Math.floor(1e4*Math.random())}function r(a,b){S.submitTextAnswer(b,a.value);j(T.question+b,U)}function s(a,b){var c=S.submitAnswerGetNextQuestions(a,b);c.questionsToShow&&n(c.questionsToShow);c.questionIdsToHide&&o(c.questionIdsToHide);j(T.question+a,U)}function t(a){for(var b=0;b<a.length;b++){var c=document.getElementById(T.question+a[b].id),d=c.className;k(U,d)||(c.className+=" "+U)}}function u(a,b){N.className=V.info+" "+b;if(N.childNodes)for(var c=0;c<N.childNodes.length;c++)N.removeChild(N.childNodes[c]);N.appendChild(document.createTextNode(a));N.style.display="block";N.focus()}function v(){a.rootElem&&1!==a.rootElem.nodeType&&"string"==typeof a.rootElem&&(M=document.getElementById(a.rootElem));B(S.header);x();y(a.buttonText||"Submit",a.buttonContainer);A();l(S.getActiveQuestionsIds());setTimeout(w,100)}function w(){var a=S.getQuestionByIndex(0);if(a&&a.id){var b=document.getElementById(T.question+a.id);switch(a.type){case S.questionTypes.SELECT:b.getElementsByTagName("SELECT")[0].focus();break;case S.questionTypes.RADIOH:case S.questionTypes.RADIO:case S.questionTypes.CHECKBOX:case S.questionTypes.TEXTF:b.getElementsByTagName("INPUT")[0].focus();break;case S.questionTypes.TEXT:b.getElementsByTagName("TEXTAREA")[0].focus()}b=null}}function x(){N=M.querySelector("."+V.info);N.setAttribute("tabIndex",P);N.style.display="none"}function y(a,b){b&&1!==b&&"string"==typeof b&&(b=document.getElementById(b));var c=b.getElementsByTagName("BUTTON")[0];c.setAttribute("tabIndex",z());c.innerHTML=a;h(c,"click",g);R.push(c)}function z(){var a=O;O+=1;return a}function A(){M.appendChild(W)}function B(a){if("undefined"!=typeof a){var b=M.getElementsByTagName("H2")[0];b.innerHTML=a}}function C(b){var c=document.createElement("SELECT");c.className="select-field";c.setAttribute("tabIndex",z());c.setAttribute("aria-labelledby",T.label+b.id);if(b.mandatory){c.setAttribute("aria-required","true");c.setAttribute("required","true")}var d=[{value:a.defaultSelect||"pick one..."}];d=d.concat(b.entry);for(var e=0;e<d.length;e++){var f=d[e],g=document.createElement("OPTION");g.setAttribute("value",f.value);g.innerHTML=f.value;(f.checked===!0||"true"==f.checked)&&g.setAttribute("selected","selected");c.appendChild(g)}h(c,"change",function(a){D(a,c,b.id)});return c}function D(a,b,c){var d=b.value;s(c,d)}function E(a,b){for(var c=0;c<a.entry.length;c++){var d=a.entry[c],e=document.createElement("div");e.className="radio-button";var f=q("rb"),g=document.createElement("input");g.setAttribute("type","radio");g.setAttribute("value",d.value);g.setAttribute("name",T.radioButton+a.id);g.setAttribute("id",f);g.setAttribute("aria-describedby",T.label+a.id);g.setAttribute("tabIndex",z());(d.checked===!0||"true"==d.checked)&&g.setAttribute("checked","checked");if(a.mandatory){g.setAttribute("aria-required","true");g.setAttribute("required","true")}e.appendChild(g);var i=document.createElement("LABEL");void 0!==d.displayValue?i.innerHTML=d.displayValue:i.innerHTML=d.value;i.setAttribute("for",f);e.appendChild(i);b.appendChild(e)}h(b,"click",function(b){F(b,a.id)});return b}function F(a,b){a=a||event;var c,d=a.target||a.srcElement;d.value?c=d.value:"LABEL"===d.nodeName&&(c=document.getElementById(d.getAttribute("for")).value);c&&s(b,c)}function G(a){var b=document.createElement("TEXTAREA");b.className="textarea-field";b.setAttribute("tabIndex",z());b.setAttribute("aria-labelledby",T.label+a.id);if(a.mandatory){b.setAttribute("aria-required","true");b.setAttribute("required","true")}a.lastKnownValue&&(b.value=a.lastKnownValue);h(b,"keyup",function(){r(b,a.id)});return b}function H(a){var b=document.createElement("INPUT");b.className="input-field";b.setAttribute("tabIndex",z());b.setAttribute("aria-labelledby",T.label+a.id);if(a.mandatory){b.setAttribute("aria-required","true");b.setAttribute("required","true")}a.validationType===S.validationTypes.EMAIL?b.setAttribute("type","email"):b.setAttribute("type","text");a.lastKnownValue&&(b.value=a.lastKnownValue);h(b,"keyup",function(){r(b,a.id)});return b}function I(a,b){for(var c=0;c<a.entry.length;c++){var d=a.entry[c],e=document.createElement("div");e.className="checkbox-button";var f=q("cb"),g=document.createElement("input");g.setAttribute("type","checkbox");g.setAttribute("value",d.value);g.setAttribute("name",T.checkbox+a.id);g.setAttribute("id",f);g.setAttribute("aria-describedby",T.label+a.id);g.setAttribute("tabIndex",z());if(a.mandatory){g.setAttribute("aria-required","true");g.setAttribute("required","true")}(d.checked===!0||"true"==d.checked)&&g.setAttribute("checked","checked");e.appendChild(g);var i=document.createElement("LABEL");i.innerHTML=d.value;i.setAttribute("for",f);e.appendChild(i);b.appendChild(e)}h(b,"click",function(b){J(a.id)});return b}function J(a){for(var b=[],c=document.getElementsByName(T.checkbox+a),d=0;d<c.length;d++)(c[d].checked||c[d].getAttribute("checked")===!0||"checked"==c[d].getAttribute("checked"))&&b.push(c[d].value);s(a,b)}function K(a){var b=document.createElement("DIV");b.style.display="none";b.className="lp_question";b.setAttribute("id",T.question+a.id);var c=document.createElement("LABEL");c.setAttribute("id",T.label+a.id);c.className="lp_question_label";c.appendChild(document.createTextNode(a.label));if(a.mandatory){var d=document.createElement("SPAN");d.innerHTML="*";d.className="mandatory";c.appendChild(d)}b.appendChild(c);R.push(b);return b}function L(a){for(var b=document.createDocumentFragment(),c=0;c<a.length;c++){var d=a[c],e=K(d);switch(d.type){case S.questionTypes.SELECT:e.appendChild(C(d));break;case S.questionTypes.CHECKBOX:I(d,e);break;case S.questionTypes.RADIO:case S.questionTypes.RADIOH:E(d,e);break;case S.questionTypes.TEXT:e.appendChild(G(d));break;case S.questionTypes.TEXTF:e.appendChild(H(d))}b.appendChild(e)}return b}if(this===window||!a||!a.rootElem||!a.survey)return!1;var M,N,O=a&&a.startTabIndex||500,P=z(),Q=[],R=[],S=new lpTag.taglets.SurveyLogic(a.survey),T={question:"q_",checkbox:"cb_",radioButton:"rb_",select:"sel_",textArea:"txar_",input:"txt_",label:"lbl_"},U="error",V={info:"lp_survey_info",error:"lp_error",success:"lp_success"},W=L(S.getAllQuestions());document&&"complete"===document.readyState?v():h(window,"load",v);return{validateSurvey:g,showErrorMessage:f,showSuccessMessage:e,hideMessage:d,dispose:b,clearSurveyDOM:c}}function _stateChanged(a){var b=this.getFirstElement(this.LPViewMap.confirmButton),c=a.newValue;c===lpTag.unifiedWindow.State.CONNECTION_ISSUE?b.setAttribute("disabled","disabled"):b.removeAttribute("disabled")}window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.log=lpTag.unifiedWindow.log||function(){function a(a){i=lpTag.taglets.lpUtil;var c=i.getURLParams(window.location.search),d=c.lpDebug;if(a.debug||"1"===d||"2"===d){g("INFO");b()}}function b(){window.lpTaglogListeners=window.lpTaglogListeners||[];window.lpTaglogListeners.push(function(a,b,d){window.console&&b&&k[b]<=m&&-1===i.indexOf(l,d)&&console.log(c()+" "+d+" : "+a+" LEVEL: "+b)})}function c(){var a=new Date;return a.getHours()+":"+(a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes())+":"+(a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds())}function d(a,b){h(a,"ERROR",b||j)}function e(a,b){h(a,"INFO",b||j)}function f(a,b){h(a,"DEBUG",b||j)}function g(a){k[a]&&(m=k[a])}function h(a,b,c){window.lpTag&&lpTag.log&&a&&lpTag.log(a,b,c||j)}var i,j="UnifiedWindowLogger",k={ERROR:1,INFO:2,DEBUG:3},l=["lp_SMT","lp_monitoringSDK","LP_OFFER"],m=k.ERROR;return{init:a,error:d,info:e,debug:f,setLogLevel:g,logLevels:k}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.apps={AUTHENTICATION:"authenticationDelegate",CHAT:"API",CHAT_STATE:"ChatStateManager",APPLICATION:"EmbeddedWindowApplication",HEARTBEAT:"HeartBeatManager",UISTATE:"UIStateManager",UNIFIED_WINDOW:"lpUnifiedWindow",SECURE_FORM:"leSecureForm",WINDOW_SDK:"windowSDK",COBROWSE:"cobrowse",RICH_CONTENT:"richContent"};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.events={chat:{ERROR:"error",INITIALIZED:"initialized",BLOD:"blueLightOfDeath(Ended)",CHATTING:"chatting",STATE:"state",CONVERSATION_STATE:"conversationState",CONVERSATION_CLOSED:"conversationClosed",CHAT_INFO:"chatInfo",USER_INFO:"userInfo",USER_LEFT:"userLeft",ENGAGEMENT_DATA:"engagementData",LINE:"line",COLLABORATION:"collaboration",SECURE_FORM:"leSecureForm",FINISHED_EVENTS_BULK:"finishEventsBulk",AGENT_TYPING:"agentIsTyping",AVAILABILITY:"availability",SURVEY_ERROR:"surveyError",EMAIL_TRANSCRIPT_SUCCESS:"emailTranscriptSuccess",EMAIL_TRANSCRIPT_ERROR:"emailTranscriptError",AUTHENTICATION_ERROR:"authenticationError",START_CHAT_INFO:"startChatInfo",TTR_INFO:"ttrInfo",CSAT_INFO:"csatInfo",BRAND_INFO:"brandInfoReceived",CONVERSATION_CONTENT:"conversationContent",SUBSCRIBE_MESSAGING_EVENTS_RESPONSE:"subscribeMessagingEventsResponse",CONVERSATION_HISTORY:"conversationHistory",NEW_CONVERSATION_REQUESTED:"newConversationRequested",NEW_CONVERSATION_CREATED:"newConversationCreated",MULTIPLE_CHANNELS_REQUESTED:"multipleChannelsRequested",SESSION_DATA:"sessionData",NO_SESSION:"noSession",FAILED_START_CONVERSATION:"failedStartConversation",FORGET_ME:"forgetMe"},socket:{CONNECTED:"socketConnected",INITIALIZED:"socketInitialized",DISCONNECTED:"socketDisconnected",NON_RESPONSIVE:"socketNonResponsive",PING_SUCCESS:"pingSuccess"},application:{PROCESSING:"processing",OFFLINE_SURVEY:"offlineSurvey",PRE_CHAT_SURVEY:"preChatSurvey",POST_CHAT_SURVEY:"postChatSurvey",END_CHAT:"endChat",END_SURVEY:"endSurvey",ENDED:"appEnded",DO_HARAKIRI:"doHaraKiri(Seppuku)"},heartBeat:{INIT:"init",FAILED:"failed",RESUMED:"resumed"},uiState:{POP_OUT:"popOut",EMBEDDED_CHANGED:"embeddedChanged",MAXIMIZED:"maximized",MINIMIZED:"minimized",ACTIONS_TOGGLE:"actionsToggle"},chatState:{ENDED:"ended"},unifiedWindow:{MAXIMIZE:"maximize"},viewController:{INITIATE_END_CHAT:"endChatInitiate",CLICKED:"clicked",DIALOG:"dialog",DIALOG_CLOSED:"dialogClosed",DIALOG_STATE_CHANGED:"dialogStateChanged",SLIDER_CLOSED:"sliderClosed",SLIDER_VIEW_CHANGE:"sliderViewChange",CLOSE_ACTIONS:"closeActions",VISITOR_HAS_TYPED:"visitorHasTyped",MAXIMIZE_VISIBLE:"maximizeVisible",MINIMIZE_VISIBLE:"minimizeVisible",LINE_ADDED:"lineAdded",LINES_VIEWED:"linesViewed",CONVERSATIONS_VIEWED:"conversationsViewed",RETRY_GET_HISTORY:"retryGetHistory",CB_OFFER:"cbOffer",THANK_YOU_PAGE:"thankYouPage",SHOW_FORGET_ME:"forgetMeDialog"},coBrowseEvents:{OFFERED:"cobrowseOffered",ACCEPTED:"cobrowseAccepted",DECLINE:"cobrowseDeclined",TIMEOUT:"cobrowseTimeout",INVITED:"cobrowseInvited",STARTED:"sessionStarted",CANCELED:"cobrowseCanceled",DIALOG_CREATED:"cobrowseDialogCreated"},widgetSDK:{INIT:"init",PARTICIPANTS:"participants",MESSAGES:"messages",WIDGET_AREA_STATE:"widgetAreaState",CONVERSATION_STATE:"conversationState",CONVERSATION_INFO:"conversationInfo",NOTIFICATION:"notification",VISITOR_TYPING:"visitorTyping",AGENT_TYPING:"agentTyping",DISPOSED_WIDGET_ID:"disposedWidgetID",INITIATED_WIDGET_ID:"initiatedWidgetID",WIDGET_NOTIFICATION:"widgetNotification"}};lpTag.unifiedWindow.publicEvents=lpTag.unifiedWindow.publicEvents||{API:{state:[{appName:"lpUnifiedWindow",eventName:"state",data:{state:"data"}},{appName:"ChatAPIV3",eventName:"state",data:"data"}],chatInfo:{appName:"lpUnifiedWindow",eventName:"conversationInfo",data:{agentName:"data.agentName",agentId:"data.agentId",conversationId:"data.rtSessionId",state:"data.chatState",monitoringSessionId:"data.monitoringSessionId",visitorId:"data.visitorId",skill:"data.skill",skillName:"data.skillName",engagementId:"data.engagementId",campaignId:"data.campaignId",language:"data.language",engagementName:"data.engagementName"}}}};lpTag.unifiedWindow.SurveyType={PRE_CHAT:"PreChatSurvey",EXIT_CHAT:"ExitSurvey",OFFLINE:"OfflineSurvey"};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.consts={dialog:{actions:{CONFIRM:"confirm",CANCEL:"cancel"}},views:{TOP_MENU:"topMenu",ACTION_MENU:"actionMenu"},chatEvents:{LINE:"line",INFO:"info",COBROWSE:"cobrowse",SECURE_FORM:"leSecureForm",RICH_CONTENT:"richContent"},errorTypes:{CONNECTION_UNAVAILABLE:"CONNECTION_UNAVAILABLE",AUTH_ERROR:"AUTH_ERROR",FAILED_START_CONVERSATION_ERROR:"FAILED_START_CONVERSATION_ERROR"},authErrorsTypes:{EXPIRED:"expired",INVALID_SESSION:"invalidSession"},SecureForm:{LINK_CLICKED:"secureFormClicked"},RichContent:{ACTION:"richContentAction",RICH_CONTENT_LINE:"rich-content"},engagementContainerClass:"LPMcontainer",reCaptchaContainerClass:"reCaptchaContainer",authConnectorTypes:{S2S:0,OAUTH_IMPLICIT:1,OAUTH_CODE:2},defaultRedirectUri:"https://liveperson.net",slider:{viewType:{widgetSDKView:"widgetSDKView",PCIFormView:"pciFormView",CoBrowseInvite:"cobrowseInviteView"}},widgetSDK:{WIDGET_NAME:"widgetName",AGENT:"agent",AGENT_ID:"agentId",VISITOR:"visitor",VISITOR_ID:"visitorId",SESSION_ID:"sessionId",MONTORING_SESSION_ID:"monitoringSessionId",ACCOUNT_ID:"accountId",CHANNEL_TYPE_MESSAGING:"messaging",CHANNEL_TYPE_CHAT:"chat",contentType:{text:"text/message"}},csatStatus:{FILLED:"FILLED",PARTIALLY_FILLED:"PARTIALLY_FILLED",SKIPPED:"SKIPPED",EMPTY:"EMPTY"},coBrowse:{acceptedCoBrowseModes:["view","shared","follow"],coBrowseChannelName:"COBROWSE"},engagementTypes:{CHAT_ENGAGEMENT:"chat",MESSAGING_ENGAGEMENT:"messaging"},richContentActionTypes:{LINK:"link",NAVIGATE:"navigate",PUBLISH_TEXT:"publishText",CAROUSEL_OFFSET_CHANGE:"carouselOffsetChange"}};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.hooks={BEFORE_SUBMIT_SURVEY:"BEFORE_SUBMIT_SURVEY",AFTER_GET_SURVEY:"AFTER_GET_SURVEY",BEFORE_SEND_VISITOR_LINE:"BEFORE_SEND_VISITOR_LINE",AFTER_GET_LINES:"AFTER_GET_LINES"};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.CsatDataGenerator=function(a){return{id:0,title:"",header:"",questions:{question:[{type:"CSAT",validationType:"csat",label:a.translate("csatRatingQuestion"),id:0,order:0,mandatory:!1}]}}};lpTag.unifiedWindow.contentTypes={TEXT_PLAIN:"text/plain",EXTERNAL_FILE:"external/file",HOSTED_FILE:"hosted/file",SECURE_FORM_INVITATION:"forms/secure-invitation",SECURE_FORM_SUBMISSION:"forms/secure-submission",SECURE_FORM_UPDATE:"forms/secure-update"};lpTag.unifiedWindow.MessageTypes={CONTENT:"ContentEvent",RICH_CONTENT:"RichContentEvent"};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.State={INIT:"init",INITIALIZED:"initialised",PRE_CHAT:"preChat",REQUESTED:"startChat",CHATTING:"chatting",POST_CHAT:"postChat",OFFLINE:"offline",WAITING:"waiting",PENDING:"pending",ENDED:"ended",NOT_FOUND:"notfound",APP_ENDED:"applicationEnded",ERROR:"error",RESUME:"resume",PAUSED:"paused",RESUME_PAUSED:"resumepaused",AUTH_ERROR:"authenticationError",CONNECTION_ISSUE:"connectionIssue",RESTART_AUTHENTICATION:"restartAuthentication",INTERACTIVE:"interactive"};lpTag.unifiedWindow.Priority=function(){var a=lpTag.unifiedWindow.State,b={},c=0;b[a.INIT]=c++;b[a.INITIALIZED]=c++;b[a.PRE_CHAT]=c;b[a.OFFLINE]=c++;b[a.REQUESTED]=c++;b[a.WAITING]=c;b[a.PENDING]=c;b[a.RESUME]=c;b[a.PAUSED]=c;b[a.RESUME_PAUSED]=c;b[a.CHATTING]=c++;b[a.ENDED]=c++;b[a.POST_CHAT]=c++;b[a.NOT_FOUND]=c++;b[a.ERROR]=c++;b[a.APP_ENDED]=c;return b}();lpTag.unifiedWindow.MessageState={ERROR:"ERROR",PENDING:"PENDING",SENT:"SENT",VIEWED:"VIEWED",ACCEPT:"ACCEPT",READ:"READ",FAILED:"FAILED"};lpTag.unifiedWindow.MessagePriority=function(){var a=lpTag.unifiedWindow.MessageState,b={},c=0;b[a.ERROR]=c;b[a.PENDING]=c++;b[a.SENT]=c++;b[a.VIEWED]=c++;b[a.ACCEPT]=c++;b[a.READ]=c++;b[a.READ]=c++;b[a.FAILED]=c++;return b}();lpTag.unifiedWindow.secureFormStates={SEND:"send",RECEIVED:"received",VIEWED:"viewed",VIEWED_ON_ANOTHER_TAB:"viewedOnAnotherTab",ABORTED:"aborted",SUBMIT:"submit",ERROR:"error"};lpTag.unifiedWindow.richContentStates={ACTION_EVENT:"actionEvent",PUBLISH_TEXT:"publishText",DISPLAYED:"contentDisplayed"};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ChatModelPath=lpTag.unifiedWindow.ChatModelPath||function(){if(!lpTag.unifiedWindow.chatModelPath){var a={name:"chatModel"},b=window.liveperson.uiframework.latest.LPModel;a.LINES=b.createPath("chat.lines",null,a.name);a.SECURE_FORMS=b.createPath("chat.secureForms",null,a.name);a.AGENT_NAME=b.createPath("chat.agentName",null,a.name);a.VISITOR_NAME=b.createPath("chat.visitorName",null,a.name);a.PARTICIPANTS=b.createPath("chat.participants",null,a.name);a.AGENT_ID=b.createPath("chat.agentId",null,a.name);a.CHAT_ID=b.createPath("chat.chatId",null,a.name);a.AGENT_IS_TYPING=b.createPath("chat.agentIsTyping",null,a.name);a.SURVEYS_PRECHAT=b.createPath("chat.surveys.preChat",null,a.name);a.SURVEYS_EXIT=b.createPath("chat.surveys.exit",null,a.name);a.SURVEYS_OFFLINE=b.createPath("chat.surveys.offline",null,a.name);a.TTR=b.createPath("chat.ttr",null,a.name);a.TRANSCRIPT_LOADED=b.createPath("chat.transcriptLoaded",null,a.name);a.SDK_NOTIFICATIONS=b.createPath("windowsdk.notifications",null,a.name);a.SDK_BUTTON_ENABLE=b.createPath("windowsdk.buttonEnable",null,a.name);lpTag.unifiedWindow.chatModelPath=a}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.UIModelPath=lpTag.unifiedWindow.UIModelPath||function(){if(!lpTag.unifiedWindow.uiModelPath){var a={name:"uiModel"},b=window.liveperson.uiframework.latest.LPModel;a.STATE=b.createPath("chat.state",null,a.name);a.CONVERSATION_DATA=b.createPath("chat.conversationData",null,a.name);a.AGENT_PICTURE_URL=b.createPath("chat.agentPicUrl",null,a.name);a.VISITOR_TYPING=b.createPath("chat.isVisitorTyping",null,a.name);a.WINDOW_MAXIMIZED=b.createPath("window.maximized",null,a.name);a.ACTIONS_VISIBLE=b.createPath("window.actionsVisible",null,a.name);a.WINDOW_POSITION=b.createPath("window.position",null,a.name);a.WINDOW_SOUND=b.createPath("window.sound",null,a.name);a.WINDOW_EMBEDDED=b.createPath("window.embedded",null,a.name);a.LAST_LINE_VIEWED=b.createPath("window.lastLineViewed",null,a.name);a.ACTION_POPOUT_ENABLE=b.createPath("popout.enable",null,a.name);a.SECURE_FORMS_TAB_HANDLER=b.createPath("collaboration.secureFormsTabHandler",null,a.name);a.IDNV_DATA=b.createPath("collaboration.idnvData",null,a.name);a.WIDGET_SLIDER_VISIBLE=b.createPath("windowsdk.sliderVisible",null,a.name);a.SELECTED_WIDGET_ID=b.createPath("windowsdk.selectedWidgetId",null,a.name);a.DISPOSED_WIDGETS_IDS=b.createPath("windowsdk.disposedWidgetsIds",null,a.name);a.INITIATED_WIDGETS_IDS=b.createPath("windowsdk.InitiatedWidgetsIds",null,a.name);a.WIDGETS_NOTIICATIONS=b.createPath("windowsdk.widgetsNotifications",null,a.name);lpTag.unifiedWindow.uiModelPath=a}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.WidgetModelPath=lpTag.unifiedWindow.WidgetModelPath||function(){if(!lpTag.unifiedWindow.widgetModelPath){var a={name:"WidgetModelPath"},b=window.liveperson.uiframework.latest.LPModel;a.CONVERSATION=b.createPath("conversation",null,a.name);a.DIALOGS=b.createPath("conversation.dialogs",null,a.name);a.WINDOW_UI=b.createPath("ui.window",null,a.name);lpTag.unifiedWindow.widgetModelPath=a}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ChatDelegate=lpTag.unifiedWindow.ChatDelegate||function(a,b){function c(){var b=window.location.hostname.indexOf("liveperson.net")>0?["xhr","postmessage","rest2jsonp"]:["postmessage","rest2jsonp"],c={transportOrder:b,lpNumber:a.accountId,appKey:a.appKey,domain:a.domain||"",secureStorageLocation:a.secureStorageLocation,sessionUID:a.sessionId,useSecureStorage:a.useSecureStorage,failureTolerance:a.failureTolerance,reconnectTimeout:a.reconnectTimeout,onInfo:G,onInit:I,onState:O,onEventList:J,onSessionData:L,onAgentTyping:K,onAuthentication:h,onAuthenticationFail:i};M();V=new lpTag.taglets.ChatOverRestAPI(c);aa.info("createChatInstance",Z)}function d(){V=null;ga={}}function e(c,d){var e={};if(a.agent&&"string"==typeof a.agent)e.agent=a.agent;else{a.skill&&"string"==typeof a.skill&&(e.skill=a.skill);a.maxWaitTime&&"number"==typeof a.maxWaitTime&&(e.maxWaitTime=a.maxWaitTime)}e.success=function(a){b.trigger({appName:$,eventName:ca.AVAILABILITY,data:a});c&&c(a)};e.error=P(d);V.getAvailabilty(e)}function f(b,c){var d={};a.preSurveyId?d.surveyApiId=a.preSurveyId:a.visitorProfile?d.visitorProfile=a.visitorProfile:a.surveyName?d.surveyName=a.surveyName:a.visitorIp&&(d.visitorIp=a.visitorIp);a.skill&&(d.skill=a.skill);k(d);aa.info("getPreChatSurvey, configuration="+JSON.stringify(d),Z);d.success=function(a){F(ba.PRE_CHAT,!0);b&&b(a)};d.error=P(c,!0);V.getPreChatSurvey(d)}function g(a,b,c){X=b;Y=c;V.authenticate({authChatConnId:a.connectorId,ssoKey:a.ssoKey,redirectUri:a.redirectUri,engagementId:a.engConf.eid,contextId:a.engConf.scid,sessionId:a.engConf.ssid,visitorId:a.engConf.svid})}function h(a){X&&X(a||{})}function i(a){Y&&Y(a||{})}function j(b,c,d){var e=b&&b.surveyData,f=b&&b.conversationData,g={};if(a||e||f){if(a.agent)g.agent=a.agent;else if(a.skill)g.skill=a.skill;else if(a.serviceQueue&&!isNaN(a.maxWaitTime)){g.serviceQueue=a.serviceQueue;g.maxWaitTime=a.maxWaitTime}a.interactionTimeout&&(g.interactionTimeout=a.interactionTimeout);a.queuePriority&&(g.queuePriority=a.queuePriority);(a.availabilityPolicy===da.OFFLINE||a.availabilityPolicy===da.CHAT)&&(g.availabilityPolicy=a.availabilityPolicy);a.preChatLines&&"object"==typeof a.preChatLines&&(g.preChatLines=Object.keys(a.preChatLines).map(function(b){return a.preChatLines[b]}));"string"==typeof a.ssoKey&&(g.ssoKey=a.ssoKey);e&&"object"==typeof e&&e.survey&&e.survey.question&&e.survey.question.length>0&&(g.survey=e.survey);if(f&&"object"==typeof f){g.participantId=f.participantId;g.conversationId=f.conversationId}k(g);g.engagementId=a.eid;g.campaignId=a.cid;g.language=a.lang;Q()&&T(g)}aa.info("startChat="+JSON.stringify(g),Z);g.success=function(a){c&&c(a)};g.error=P(d);V.requestChat(g)}function k(b){if(a){"string"==typeof a.svid&&(b.LETagVisitorId=a.svid);"string"==typeof a.ssid&&(b.LETagSessionId=a.ssid);"string"==typeof a.scid&&(b.LETagContextId=a.scid)}}function l(a,b,c){V.addLine({text:a.text,success:b,error:c});aa.info("sendLine="+JSON.stringify(ka.excludeAttributes(ka.clone(a),["text"])),Z)}function m(a,b,c,d){var e={subType:ca.SECURE_FORM,command:a,info:c};d&&(e.text=d);S(o).call(this,e)}function n(a,b){lpTag.taglets.lpUtil.runCallback(b,null,{submitOtk:a&&a.submitOtk,formOtk:a&&a.getOtk})}function o(a,b,c){if(a){a.success=b;a.error=c;V.sendCollaboration(a)}aa.info("sendCollaboration="+JSON.stringify(a),Z)}function p(a,b,c){if(W&&(W===ba.CHATTING||W===ba.INTERACTIVE)){V.setVisitorTyping({typing:a,success:b,error:c});aa.info("setVisitorTyping="+a,Z)}}function q(a,b,c,d){var e=6e4*(new Date).getTimezoneOffset();V.requestTranscript({email:a,subject:b,success:c,error:d,timezoneOffset:e});aa.info("emailTranscript="+JSON.stringify(a),Z)}function r(){aa.info("resumingPauseChat",Z);V.getState()===V.chatStates.PAUSECHAT&&V.resumePausedChat()}function s(){aa.info("pausingChat",Z);V.pauseChat()}function t(a,b){V.endChat({success:function(b){a&&a(b)},error:b});aa.info("endChat",Z)}function u(a,b,c){if(a&&a.survey&&a.survey.question&&a.survey.question.length>0)V.submitExitSurvey({survey:a.survey,success:function(a){F(ba.APP_ENDED,!0);b&&b(a)},error:c});else{c({error:"Missing survey data"});aa.error("submitExitChatSurvey, No Survey Data",Z);v()}}function v(){V.cancelSurvey()}function w(b,c){var d={windowSurveyEnabled:!0,success:function(a){F(ba.OFFLINE,!0);b&&b(a)},error:P(c)};a.surveyOfflineId?d.surveyApiId=a.surveyOfflineId:a.visitorProfile?d.visitorProfile=a.visitorProfile:a.visitorId?d.visitorId=a.visitorId:a.surveyName&&(d.surveyName=a.surveyName);a.skill&&(d.skill=a.skill);a.skillId&&(d.engSkillId=a.skillId);k(d);V.getOfflineSurvey(d)}function x(b,c,d){var e={success:function(a){F(ba.APP_ENDED,!0);c&&c(a)},error:d};if(b&&b.survey&&b.survey.question&&b.survey.question.length>0){"string"==typeof a.svid&&(e.LETagVisitorId=a.svid);"string"==typeof a.ssid&&(e.LETagSessionId=a.ssid);"string"==typeof a.scid&&(e.LETagContextId=a.scid);"string"==typeof a.offsiteEngContext&&(e.offsiteEngContext=a.offsiteEngContext);"string"==typeof a.skill&&(e.skill=a.skill);Q()&&T(e);e.survey=b.survey;V.submitOfflineSurvey(e);aa.info("submitOfflineSurvey, survey"+JSON.stringify(b.survey),Z)}else{d({error:"Missing survey data"});e=null;aa.error("submitOfflineSurvey, ERROR",Z);v()}}function y(b,c,d){var e={windowSurveyEnabled:!!b,success:function(a){F(ba.POST_CHAT,!0);c&&c(a)},error:P(d,!0)};a.exitSurveyId?e.surveyApiId=a.exitSurveyId:a.surveyName&&(e.surveyName=a.surveyName);a.skillId&&(e.engSkillId=a.skillId);V.getExitSurvey(e);aa.info("getExitSurvey, id="+a.exitSurveyId,Z)}function z(){V.disposeVisitor()}function A(){V.reInit()}function B(){return V.getSessionKey()}function C(){return ea}function D(){return fa.agent&&fa.visitor}function E(a,b){aa.info("richContentRequest with body: "+JSON.stringify(a)+" and data: "+JSON.stringify(b),Z);a&&a.sequenceId&&a.state&&V.addLineStatusEvent({status:a.state,metadata:b,refSequenceId:a.sequenceId})}function F(c,d){W=c;ba.NOT_FOUND===W&&(W=ba.APP_ENDED);b.trigger({appName:$,eventName:ca.STATE,data:W,global:!0});ba.CHATTING===W&&b.trigger({appName:_,eventName:ca.ENGAGEMENT_DATA,global:!0,data:{engagementName:a.ename,state:W}});if(d||ba.WAITING===W||ba.ENDED===W){ga.chatState=W;H()}ba.ENDED===W&&b.trigger({appName:$,eventName:ca.BLOD,data:{engagementName:a.ename}})}function G(b){if("object"==typeof b){ga=ga||{};ga.agentName=b&&b.agentName||"";ga.agentId=b&&b.agentId||"";ga.agentPictureUrl=b&&b.agentPictureUrl||"";ga.skillName=b&&b.skillName||"";ga.rtSessionId=b&&b.rtSessionId||ga.rtSessionId||"";ga.chatState=b&&b.chatState||ga.chatState||"";ga.monitoringSessionId=a&&a.ssid||ga.monitoringSessionId||"";ga.visitorId=a&&a.svid||ga.visitorId||"";ga.visitorName=b&&b.visitorName||ga.visitorName||"";ga.skill=a&&a.skill||ga.skill||"";ga.engagementId=a&&a.eid||ga.engagementId||"";ga.campaignId=a&&a.cid||ga.campaignId||"";ga.language=a&&a.lang||ga.language||"";ga.engagementName=a&&a.ename||ga.engagementName||"";ga.lastUpdate=b.lastUpdate||ga.lastUpdate||"";H()}}function H(){b.trigger({appName:$,eventName:ca.CHAT_INFO,data:ga})}function I(a){if(!a||a.error||"ERROR"===a)b.trigger({appName:$,eventName:ca.ERROR,data:{errorType:la.CONNECTION_UNAVAILABLE}});else if(!ea){R();F(ba.INIT);b.trigger({appName:$,eventName:ca.INITIALIZED});ea=!0}}function J(a){for(var c,d=Array.isArray(a)?a:[a],e=0;e<d.length;e++){c=d[e];ka.indexOf(ha,c[ia])>=0&&b.trigger({appName:$,eventName:c[ia]===ja?c.subType:c[ia],data:c})}b.trigger({appName:$,eventName:ca.FINISHED_EVENTS_BULK})}function K(a){b.trigger({appName:$,eventName:ca.AGENT_TYPING,data:a})}function L(a){b.trigger({appName:$,eventName:ca.SESSION_DATA,data:a})}function M(){fa.bindId=b.bind({appName:$,eventName:ca.LINE,func:N})}function N(a){switch(a.source){case"visitor":fa.visitor=!0;break;case"agent":fa.agent=!0}if(fa.agent&&fa.visitor){F(fa.state,!0);b.unbind(fa.bindId)}}function O(a){F(a.state)}function P(a,c){return function(d){a&&a(d);c||d&&d.error&&(5===d.error.internalCode||32===d.error.internalCode||Q()&&10===d.error.internalCode)||b.trigger({appName:$,eventName:ca.ERROR,data:{errorType:la.CONNECTION_UNAVAILABLE}})}}function Q(){return window.recaptchaRenderer}function R(){if(window.recaptchaRendererV2&&V.isCaptchaV2Supported&&V.isCaptchaV2Supported()){window.recaptchaRenderer=window.recaptchaRendererV2;window.recaptchaRenderer.renderCaptcha(a);window.recaptchaRendererV1.removeFromPage()}else window.recaptchaRendererV1&&(window.recaptchaRenderer=window.recaptchaRendererV1)}function S(a){return function(){V&&a.apply(null,arguments)}}function T(a){var b=window.recaptchaRenderer.getRecaptchaProps()||{};Object.keys(b).forEach(function(c){a[c]=b[c]})}function U(){}var V,W,X,Y,Z="ChatDelegate",$=lpTag.unifiedWindow.apps.CHAT,_=lpTag.unifiedWindow.apps.UNIFIED_WINDOW,aa=lpTag.unifiedWindow.log,ba=lpTag.unifiedWindow.State,ca=lpTag.unifiedWindow.events.chat,da=(lpTag.taglets.postmessage,{OFFLINE:0,CHAT:1}),ea=!1,fa={state:ba.INTERACTIVE,agent:!1,visitor:!1,bindId:null},ga={},ha=["line","leCollaboration"],ia="@type",ja="leCollaboration",ka=lpTag.unifiedWindow.applicationUtils,la=lpTag.unifiedWindow.consts.errorTypes;return{createChatInstance:c,isInitialized:C,isInteractive:D,dispose:d,resumePolling:S(r),stopPolling:S(s),getAvailability:S(e),getPreChatSurvey:S(f),startConversation:S(g),startChat:S(j),sendLine:S(l),sendCollaboration:S(o),sendStatesUpdate:S(U),setVisitorTyping:S(p),emailTranscript:S(q),endChat:S(t),getExitSurvey:S(y),submitExitChatSurvey:S(u),getOfflineSurvey:S(w),submitOfflineSurvey:S(x),cancelSurvey:S(v),disposeVisitor:S(z),reInit:S(A),getSessionKey:B,secureFormRequest:m,getSecureFormOTKs:n,richContentRequest:S(E)}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.MessagingDelegate=lpTag.unifiedWindow.MessagingDelegate||function(a,b){function c(a,b,c,d){var e=p(a,b,c,d);Z=!0;Y?Y.reInit(e):Y=new lpTag.UMSClientAPI(e);aa.info("createMessagingInstance",$)}function d(){var a={};a.success=function(){};a.error=function(){};Y.getMyUserProfile(a);aa.info("getMyUserProfile, configuration="+JSON.stringify(a),$)}function e(a,b){aa.info("getOTK "+JSON.stringify(a),$);var c={uploadable:{dialogId:na.id}};"object"==typeof a&&(c.uploadable=ja.cloneExtend(c.uploadable,a));Y.generateUploadToken({success:b,error:b},c)}function f(a){a&&(a.contentType?Y.sendPCIMessage(a):Y.markMessagesState(a))}function g(a){aa.info("richContentRequest with body: "+JSON.stringify(a),$);a&&Y.markMessagesState(a)}function h(){var b={brandId:a.accountId};Y.getBrandProfile(b);aa.info("getBrandProfile, brandId= "+a.accountId,$)}function i(a){aa.info("_onBrandProfile, info="+JSON.stringify(a),$);b.trigger({appName:_,eventName:ha.BRAND_INFO,data:a})}function j(a,b){var c={};c.success=a;c.error=b;Y.subscribeConversations(c);aa.info("subscribeConversations, configuration="+JSON.stringify(c),$)}function k(a,b,c){var d={};d.subscriptionId=a;d.success=b;d.error=c;Y.unsubscribeConversations(d);aa.info("unsubscribeConversations, configuration="+JSON.stringify(d),$)}function l(a){var b={};if(na.isActive){b.conversationId=na.id;
b.success=a;b.error=a;Y.closeConversation(b)}else ja.runCallback(a);aa.info("closeConversation, configuration="+JSON.stringify(b),$)}function m(a,b,c){na.isActive?o(a,b,c):n(a,b,c)}function n(c,d,e){var f={conversationContext:{type:"SharkContext",lang:a.lang||ma},campaignInfo:{}};f.channelType=ga.MESSAGING;a.skillId&&"number"==typeof a.skillId&&(f.skillId=a.skillId);"string"==typeof a.svid&&(f.conversationContext.visitorId=a.svid);"string"==typeof a.ssid&&(f.conversationContext.sessionId=a.ssid);"string"==typeof a.scid&&(f.conversationContext.interactionContextId=a.scid);f.campaignInfo.campaignId=a.cid;f.campaignInfo.engagementId=a.eid;f.success=function(a){b.trigger({appName:_,eventName:ha.NEW_CONVERSATION_CREATED,data:a});U(a&&a.conversationId);o(c,d,e)};f.error=e;b.trigger({appName:_,eventName:ha.NEW_CONVERSATION_REQUESTED});Y.createConversation(f);aa.info("createConversation, configuration="+JSON.stringify(f),$)}function o(a,b,c){if(a){var d={};d.conversationId=na.id;d.success=q(b);d.error=c;d.text=a.text;Y.sendMessage(d);aa.info("_sendLine="+JSON.stringify(a),$)}}function p(b,c,d,e){return{domain:a.asyncMessagingDomain,IDPDomain:a.idpDomain,connectorId:a.connectorId,historyDomain:a.messagingHistoryDomain,authCode:b,redirect_uri:c||a.redirect_uri,authType:d,hasAuthentication:!0,accountId:a.accountId,memberType:ca.USER||"",storageConf:{useSecureStorage:a.useSecureStorage,secureStorageLocation:a.secureStorageLocation,lpNumber:a.accountId,appName:$},queryParameters:{appName:"webAsync",features:["AUTO_MESSAGES","RICH_CONTENT","CO_BROWSE"]},onSocketConnected:w,onSocketInitialized:x,onSubscribeMessagingResponse:J,onUserInfo:D,onConversationList:F,onParticipantJoined:G,onParticipantLeft:H,onContent:I,onConversationState:L,onDialogStateChanged:M,onDialogCreated:N,onTTRUpdated:O,onCSATUpdated:P,onBrandProfile:i,onSessionInvalidated:z,onSocketClosed:y,onAuthenticationError:A,onServiceNonResponsive:B,onPingSuccess:C,pingTimeout:e,resendTimedOutRequests:!0,appVersion:lpTag.unifiedWindow.Application.v}}function q(a){return function(b){var c;"function"==typeof a&&b&&!isNaN(b.sequence)&&(c={"@id":b.sequence,convId:na.id});a(c)}}function r(a){var b={dialogId:na.id,dialogState:a?fa.COMPOSING:fa.ACTIVE};Y.setDialogState(b)}function s(a){Y.setTTR({conversationId:na.id,ttrType:a?ea.urgent:ea.normal})}function t(a){return Y.subscribeMessagingEvents(a)}function u(a,b,c){var d,e={success:b,error:c,conversationId:na.id||a.convId,CSAT:{}};a=a||{};e.CSAT.status=a.status;d=a.survey&&a.survey.question[0]&&a.survey.question[0].answer;d&&(e.CSAT.csatRate=+d||0);Y.setCSAT(e)}function v(){Y&&Y.dispose();Y=null}function w(a){if(a&&200===a.statusCode){Z=!1;b.trigger({appName:_,eventName:ia.CONNECTED,data:a})}else E();aa.info("_onSocketConnected, data="+JSON.stringify(a),$)}function x(a){a&&200===a.code?b.trigger({appName:_,eventName:ia.INITIALIZED,data:a}):E();aa.info("_onSocketInitialized, data="+JSON.stringify(a),$)}function y(a){Z=!0;aa.info("_onSocketClosed, data="+JSON.stringify(a),$);b.trigger({appName:_,eventName:ia.DISCONNECTED,data:a})}function z(a){b.trigger({appName:_,eventName:ha.AUTHENTICATION_ERROR,data:{error:la.EXPIRED,data:a}});aa.info("_onSessionInvalidated, data="+JSON.stringify(a),$)}function A(a){b.trigger({appName:"*",eventName:ha.AUTHENTICATION_ERROR,data:{error:la.INVALID_SESSION,data:a}});aa.info("_onAuthenticationError, data="+JSON.stringify(a),$)}function B(a){aa.info("_onServiceNonResponsive, data="+JSON.stringify(a),$);b.trigger({appName:_,eventName:ia.NON_RESPONSIVE,data:a})}function C(a){b.trigger({appName:_,eventName:ia.PING_SUCCESS,data:a})}function D(a){b.trigger({appName:_,eventName:ha.USER_INFO,data:a});aa.info("_onUserInfo, info="+JSON.stringify(a),$)}function E(){b.trigger({appName:_,eventName:ha.ERROR,data:{errorType:ka.CONNECTION_UNAVAILABLE}})}function F(a){a=a&&a.data||a;var c=a.filter(function(a){return a.conversationDetails.state===da.OPEN}),d=c[0]&&c[0].convId;d&&U(d);b.trigger({appName:_,eventName:ha.CONVERSATION_HISTORY,data:a})}function G(a){for(var c=a.data||a,d=0;d<c.length;d++)b.trigger({appName:_,eventName:ha.USER_INFO,data:c[d]})}function H(a){for(var c=a.data||a,d=0;d<c.length;d++)b.trigger({appName:_,eventName:ha.USER_LEFT,data:c[d]})}function I(a){b.trigger({appName:_,eventName:ha.CONVERSATION_CONTENT,data:a})}function J(a){b.trigger({appName:_,eventName:ha.SUBSCRIBE_MESSAGING_EVENTS_RESPONSE,data:a})}function K(a,b){var c=ja.groupByKeyValue(a,"convId");for(var d in c)"undefined"!==d&&S(c[d],b,d)}function L(a){var c;a=a&&a.data||a;for(var d=0;d<a.length;d++)if(a[d].convId===na.id){if(a[d].state===da.OPEN)c=ba.CHATTING;else{c=ba.ENDED;na.isActive=!1}b.trigger({appName:_,eventName:ha.CONVERSATION_STATE,data:{state:a[d].state,time:a[d].ts,closeReason:a[d].closeReason,convId:a[d].convId}});b.trigger({appName:_,eventName:ha.STATE,data:c,global:!0})}}function M(a){var c;a=Array.isArray(a)?a:[];for(var d=0;d<a.length;d++)if(a[d].dialogId===na.id){c=ja.getPropertyFromObject(a[d],"event.chatState");b.trigger({appName:_,eventName:ha.AGENT_TYPING,data:{agentTyping:c===fa.COMPOSING.toUpperCase(),originatorId:a[d].originatorId}})}}function N(a){if(a&&a.data)for(var c=0;c<a.data.length;c++){var d=a.data[c];d&&d.channelType===lpTag.unifiedWindow.consts.coBrowse.coBrowseChannelName&&b.trigger({appName:_,eventName:lpTag.unifiedWindow.events.coBrowseEvents.DIALOG_CREATED,data:d})}}function O(a){R(a,"ttr","TTR_INFO")}function P(a){var c=Q(a.data||a);c&&c.csat&&b.trigger({appName:_,eventName:ha.CSAT_INFO,data:c})}function Q(a){var b,c=0;a=a.data||a;for(var d=0;d<a.length;d++)if(ja.getPropertyFromObject(a[d],"csat.endTs")>c){c=a[d].csat.endTs;b=a[d]}return b}function R(a,c,d){a=a&&a.data||a;for(var e=0;e<a.length;e++)a[e].convId===na.id&&b.trigger({appName:_,eventName:ha[d],data:a[e][c]})}function S(a,b,c){var d=c,e=T(a),f={conversationId:d,state:b,sequenceList:e};Y.markMessagesState(f)}function T(a){var b=a.map(function(a){return a["@id"]});return b}function U(a){na.id=a;na.isActive=!0}function V(a){return function(){return Y?a.apply(null,arguments):void 0}}function W(){return na&&na.id}function X(){return Y.getTimeDiff()}var Y,Z,$="MessagingDelegate",_=lpTag.unifiedWindow.apps.CHAT,aa=lpTag.unifiedWindow.log,ba=lpTag.unifiedWindow.State,ca=lpTag.AMSStatics.memberTypes,da=lpTag.AMSStatics.conversation.states,ea=lpTag.AMSStatics.effectiveTTRTypes,fa=lpTag.AMSStatics.dialogStates,ga=lpTag.AMSStatics.channelTypes,ha=lpTag.unifiedWindow.events.chat,ia=lpTag.unifiedWindow.events.socket,ja=lpTag.unifiedWindow.applicationUtils,ka=lpTag.unifiedWindow.consts.errorTypes,la=lpTag.unifiedWindow.consts.authErrorsTypes,ma="en-US",na={id:null,isActive:!1};return{createMessagingInstance:c,getMyUserProfile:V(d),getBrandProfile:V(h),subscribeConversations:V(j),unsubscribeConversations:V(k),createConversation:V(n),closeConversation:V(l),sendLine:V(m),sendStatesUpdate:V(K),setVisitorTyping:r,setConversationUrgency:V(s),subscribeMessagingEvents:V(t),submitExitChatSurvey:V(u),getOTK:V(e),secureFormRequest:V(f),richContentRequest:V(g),getTimeDiff:V(X),getSessionKey:W,dispose:v}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ChatStateManager=lpTag.unifiedWindow.ChatStateManager||function(a,b,c,d){function e(a,b,c,d){Aa.info("init",ya);ma=c||{};na=ma.engConf||{};x(a);ra=b.uiModel;sa=b.chatModel;o(d);var e=pa.conf.authConf;e&&(Ka=!0);D();C()}function f(){return ta}function g(a,b){a&&qa.emailTranscript(a,b,A,B)}function h(a){if(a){wa=a;var b={surveyData:a};da()?i(b):qa.startChat(b,T,z)}else{t(null,Ea.APP_ENDED);m()}}function i(a){var b=j();if(!b||pa.authenticationManager.isErroneous())W();else{L({context:"prechat"});if(b)qa.startChat(Ca.cloneExtend(a,{conversationData:b}),T,z);else{va=function(b){qa.startChat(Ca.cloneExtend(a,{conversationData:b.newValue}),T,z)};ra.bind(Ha.CONVERSATION_DATA,va)}}}function j(){return ra.get(Ha.CONVERSATION_DATA)}function k(a){if(a)qa.submitExitChatSurvey(a,y,y);else{t(null,Ea.APP_ENDED);m()}}function l(a){if(a)qa.submitOfflineSurvey(a,y,y);else{t(null,Ea.APP_ENDED);m()}}function m(){qa.cancelSurvey()}function n(){ra.unbind(Ha.STATE,u);try{ra.unbind(Ha.CONVERSATION_DATA,va)}catch(a){}oa.unbind({appName:za,eventName:Da.STATE,func:_});oa.unbind({appName:za,eventName:Da.INITIALIZED,func:r});oa.unbind({appName:za,eventName:Da.BLOD,func:s});oa.unbind({appName:"SessionManager",eventName:Da.NO_SESSION,func:p});oa.unbind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.END_CHAT,func:ea});oa.unbind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.END_SURVEY,func:m});oa.unbind({appName:Fa.UISTATE,eventName:Ba.uiState.EMBEDDED_CHANGED,func:H});oa.unbind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.PRE_CHAT_SURVEY,func:h});oa.unbind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.POST_CHAT_SURVEY,func:k});oa.unbind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.OFFLINE_SURVEY,func:l});oa.unbind({appName:za,eventName:Da.CHAT_INFO,func:I})}function o(a){qa=a.apiDelegate;pa=a.appContext;oa=a.events}function p(){t(null,Ea.APP_ENDED)}function q(a){Aa.info("_tryResume",ya);var b=ra.get(Ha.STATE);(!ua||b&&Ga[b]>Ga[ua])&&a(Ga[b],Ga[Ea.ENDED])&&v(null,b,!0)}function r(){Aa.info("_tryInitResume",ya);q(function(a,b){return b>=a})}function s(){Aa.info("_tryEndResume",ya);q(function(a,b){return a>b})}function t(a,b){Aa.info("_handleNewState newState= "+b+" err= "+JSON.stringify(a),ya);var c=ra.get(Ha.STATE);if(!c||Ga[c]<=Ga[b]&&c!==b){ua=b;ra.modify({splitKey:Ha.STATE,updateData:b,onSuccess:function(){(!ta||Ga[b]>=Ga[ta]&&ta!==b)&&v(a,b)}})}}function u(a){Aa.info("_handleNewStateFromModel newState= "+a.newValue,ya);var b=ta;ua&&ta!==ua&&(b=ua);if(qa.isInitialized()){var c=!1;if(b){if(b!==a.newValue){if(Ga[b]>Ga[a.newValue])return;if(b===Ea.PRE_CHAT){qa.reInit();return}}}else c=!0;v(null,a.newValue,c)}}function v(a,b,c){if(ta!==b){ta=b;switch(b){case Ea.INIT:break;case Ea.INITIALIZED:E();break;case Ea.PRE_CHAT:w(c);break;case Ea.WAITING:case Ea.RESUME:case Ea.PAUSED:case Ea.RESUME_PAUSED:case Ea.CHATTING:break;case Ea.ENDED:ba();break;case Ea.POST_CHAT:c&&ba();break;case Ea.OFFLINE:w(c);break;case Ea.NOT_FOUND:ga(a);break;case Ea.ERROR:ga(a);break;case Ea.APP_ENDED:fa();break;default:w(c)}}}function w(a){a&&E({resuming:!0})}function x(a){Ja=a.surveyPreChatEnabled||!1;La=a.surveyPostChatEnabled||!1;Aa.info("_initSurveyParameters usePreChat= "+Ja+" useExitSurvey= "+La,ya)}function y(a){Aa.info("_submitFinalSurveyCallback: data="+JSON.stringify(a),ya);a&&a.error&&5===a.error.internalCode?oa.trigger({appName:ya,eventName:Ba.chat.SURVEY_ERROR,data:a}):a&&a.error&&10===a.error.internalCode?la()&&F({isInvalid:!0}):t(null,Ea.APP_ENDED)}function z(a){if(a&&a.error){if(32===a.error.internalCode){W();return}if(5===a.error.internalCode){oa.trigger({appName:ya,eventName:Ba.chat.SURVEY_ERROR,data:a});return}if(10===a.error.internalCode){la()&&F({isInvalid:!0});return}}aa(a)}function A(a){oa.trigger({appName:ya,eventName:Ba.chat.EMAIL_TRANSCRIPT_SUCCESS,data:a})}function B(a){oa.trigger({appName:ya,eventName:Ba.chat.EMAIL_TRANSCRIPT_ERROR,data:a})}function C(){Aa.info("_startFlow",ya);qa.createChatInstance()}function D(){oa.bind({appName:za,eventName:Da.STATE,func:_});oa.bind({appName:za,eventName:Da.INITIALIZED,func:r});oa.bind({appName:za,eventName:Da.BLOD,func:s});oa.bind({appName:"SessionManager",eventName:Da.NO_SESSION,func:p});oa.bind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.PRE_CHAT_SURVEY,func:h});oa.bind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.POST_CHAT_SURVEY,func:k});oa.bind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.OFFLINE_SURVEY,func:l});oa.bind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.END_CHAT,func:ea});oa.bind({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.END_SURVEY,func:m});ma.window&&ma.window.embedded&&oa.bind({appName:Fa.UISTATE,eventName:Ba.uiState.EMBEDDED_CHANGED,func:H});oa.bind({appName:za,eventName:Da.CHAT_INFO,func:I});ra.bind(Ha.STATE,u)}function E(a){a=a||{};Aa.info("_handleInit",ya);!a.resuming&&la()?F():G()}function F(a){a=a||{};window.recaptchaRenderer.showCaptcha({isInvalid:a.isInvalid,themer:pa.themer,translator:pa.translator,callback:G})}function G(){c.engConf.isOffline?W():qa.getAvailability(J,aa)}function H(a){if(a){Aa.info("resumingPolling",ya);qa.resumePolling()}else{Aa.info("stopPolling",ya);qa.stopPolling()}}function I(a){var b;if(a.agentPictureUrl&&a.agentName){b=ra.get(Ha.AGENT_PICTURE_URL)||{};b[a.agentName]=a.agentPictureUrl;ra.modify(Ha.AGENT_PICTURE_URL,b)}a.skillName&&(xa=a.skillName)}function J(a){Aa.info("_availabilitySuccess data="+JSON.stringify(a),ya);a&&a.availability?da()&&!K()?M():Ja?qa.getPreChatSurvey(U,V):qa.startChat(null,T,z):W()}function K(){return ra.get(Ha.STATE)===Ea.PRE_CHAT&&ra.get(Ha.CONVERSATION_DATA)}function L(a){Aa.info("_triggerProcessingEvent data="+JSON.stringify(a),ya);oa.trigger({appName:Fa.UNIFIED_WINDOW,eventName:Ba.application.PROCESSING,data:a})}function M(){Aa.info("_startAuthentication",ya);L({context:"onload"});Ja&&qa.getPreChatSurvey(U,aa);pa.authenticationManager.authenticate(N,P)}function N(a){Aa.info("_startConversation data="+JSON.stringify(a),ya);var b;if(a&&a.ssoKey){var c=j();if(c)qa.startChat({conversationData:c},T,z);else{b={domain:pa.conf.unifiedConf.domain,appKey:pa.keys.appKey,connectorId:pa.conf.authConf.connector.id,ssoKey:a.ssoKey,redirectUri:a.redirect_uri||null,engConf:pa.conf.engConf};qa.startConversation(b,O(),Q)}}}function O(){return Ja?function(a){Aa.info("_startConversationSuccess data="+JSON.stringify(a),ya);ra.modify(Ha.CONVERSATION_DATA,a)}:function(a){Aa.info("_startConversationSuccess data="+JSON.stringify(a),ya);qa.startChat({conversationData:a},T,z)}}function P(a){Aa.info("_ssoKeyError data="+JSON.stringify(a),ya);R()}function Q(a){Aa.info("_startConversationError data="+JSON.stringify(a),ya);R()}function R(){f()!==Ea.PRE_CHAT&&S()}function S(){W()}function T(a){oa.trigger({appName:ya,eventName:Ba.chat.START_CHAT_INFO,data:a.info});Aa.info("_startChatSuccess data="+JSON.stringify(a),ya)}function U(a){Aa.info("_getPreChatSuccess data="+JSON.stringify(a),ya);a&&a.survey?$(Ba.application.PRE_CHAT_SURVEY,Ia.SURVEYS_PRECHAT,a.survey):qa.startChat(null,T,z)}function V(a){Aa.info("_getPreChatError data="+JSON.stringify(a),ya);qa.startChat(null,T,z)}function W(){qa.getOfflineSurvey(X,aa)}function X(a){Aa.info("_getOfflineSurveyCallback data="+JSON.stringify(a),ya);a&&!a.error&&a.survey?$(Ba.application.OFFLINE_SURVEY,Ia.SURVEYS_OFFLINE,a.survey):aa()}function Y(a){Aa.info("_getPostChatSurveyCallback, survey="+JSON.stringify(a),ya);a&&!a.error&&a.survey?$(Ba.application.POST_CHAT_SURVEY,Ia.SURVEYS_EXIT,a.survey):aa()}function Z(a){Aa.info("_getExitSurveyError, survey="+JSON.stringify(a),ya);t(null,Ea.APP_ENDED)}function $(a,b,c){var d;if(lpTag.hooks&&lpTag.hooks.exec){d=lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.AFTER_GET_SURVEY,data:{surveyType:a,surveyData:c}});c=d&&d.data&&d.data.surveyData||c}sa.modify(b,c)}function _(a){Aa.info("_stateListener state="+a,ya);t(null,a)}function aa(a){Aa.info("_changeToError err= "+JSON.stringify(a),ya);t(a,Da.ERROR)}function ba(){Aa.info("_checkForPostChatSurvey",ya);ca()?qa.getExitSurvey(La,Y,Z):t(null,Ea.APP_ENDED)}function ca(){var b;b=La||na.skill!==xa?a.postChatSurveyOnNonInteractiveChat===!0||qa.isInteractive():!1;return b}function da(){return Ka}function ea(){qa.setVisitorTyping(!1);qa.endChat(null,aa)}function fa(){Aa.info("_disposeApplication",ya);qa.disposeVisitor();oa.trigger({appName:ya,eventName:Ba.chatState.ENDED});n()}function ga(){Aa.info("_handleError",ya);t(null,Ea.APP_ENDED)}function ha(a,b){return qa.getOTK(a,b)}function ia(a,b,c,d){return qa.secureFormRequest(a,b,c,d)}function ja(a){return JSON.stringify({siteId:lpTag.site,chatId:qa.getSessionKey&&qa.getSessionKey()})}function ka(a,b){Aa.info("richContentRequest info: "+JSON.stringify(a),ya);b=b||[];qa.richContentRequest(a,b)}function la(){return window.recaptchaRenderer}var ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya="ChatStateManager",za=lpTag.unifiedWindow.apps.CHAT,Aa=lpTag.unifiedWindow.log,Ba=lpTag.unifiedWindow.events,Ca=lpTag.unifiedWindow.applicationUtils,Da=Ba.chat,Ea=lpTag.unifiedWindow.State,Fa=lpTag.unifiedWindow.apps,Ga=lpTag.unifiedWindow.Priority,Ha=lpTag.unifiedWindow.uiModelPath,Ia=lpTag.unifiedWindow.chatModelPath,Ja=!1,Ka=!1,La=!1;e(a,b,c,d);this.emailTranscript=g;this.getCurrentState=f;this.getOTK=ha;this.richContentRequest=ka;this.secureFormRequest=ia;this.getOtkJson=ja;this.dispose=n};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ConversationManager=lpTag.unifiedWindow.ConversationManager||function(a,b,c,d){function e(a){gb.info("init",eb);Za=b.uiModel;$a=b.chatModel;i(a);j();k();if(cb){cb.type=Rb.getPropertyFromObject(a,"appContext.conf.authConf.connector.type");w(cb)}else M()}function f(){Xa.unbind({appName:"SessionManager",eventName:kb.NO_SESSION,func:Oa});Xa.unbind({appName:fb,eventName:qb.CONNECTED,func:l});Xa.unbind({appName:fb,eventName:qb.INITIALIZED,func:m});Xa.unbind({appName:fb,eventName:qb.DISCONNECTED,func:p});Xa.unbind({appName:fb,eventName:qb.NON_RESPONSIVE,func:q});Xa.unbind({appName:fb,eventName:qb.PING_SUCCESS,func:n});Xa.unbind({appName:fb,eventName:kb.USER_INFO,func:x});Xa.unbind({appName:fb,eventName:kb.USER_LEFT,func:y});Xa.unbind({appName:nb.UNIFIED_WINDOW,eventName:hb.application.POST_CHAT_SURVEY,func:Ia});Xa.unbind({appName:nb.UNIFIED_WINDOW,eventName:hb.application.END_CHAT,func:Ka});Xa.unbind({appName:fb,eventName:kb.CONVERSATION_STATE,func:O});Xa.unbind({appName:fb,eventName:kb.CONVERSATION_CONTENT,func:W});Xa.unbind({appName:fb,eventName:kb.SUBSCRIBE_MESSAGING_EVENTS_RESPONSE,func:X});Xa.unbind({appName:fb,eventName:kb.CONVERSATION_HISTORY,func:ya});Xa.unbind({appName:fb,eventName:kb.CSAT_INFO,func:I});Xa.unbind({appName:"*",eventName:kb.AUTHENTICATION_ERROR,func:L});Xa.unbind({appName:fb,eventName:kb.NEW_CONVERSATION_REQUESTED,func:Na});Xa.unbind({appName:"*",eventName:lb.CONVERSATIONS_VIEWED,func:za});Xa.unbind({appName:"*",eventName:lb.RETRY_GET_HISTORY,func:$});Xa.unbind({appName:"*",eventName:kb.FORGET_ME,func:J})}function g(a){_a.setConversationUrgency(a)}function h(a){return Nb[a]&&Nb[a].state===rb.OPEN}function i(a){_a=a.apiDelegate;Ya=a.appContext;Xa=a.events;cb=a.authenticationData}function j(){Xa.bind({appName:"SessionManager",eventName:kb.NO_SESSION,func:Oa});Xa.bind({appName:fb,eventName:qb.CONNECTED,func:l});Xa.bind({appName:fb,eventName:qb.INITIALIZED,func:m});Xa.bind({appName:fb,eventName:qb.DISCONNECTED,func:p});Xa.bind({appName:fb,eventName:qb.NON_RESPONSIVE,func:q});Xa.bind({appName:fb,eventName:qb.PING_SUCCESS,func:n});Xa.bind({appName:fb,eventName:kb.USER_INFO,func:x});Xa.bind({appName:fb,eventName:kb.USER_LEFT,func:y});Xa.bind({appName:nb.UNIFIED_WINDOW,eventName:hb.application.POST_CHAT_SURVEY,func:Ia});Xa.bind({appName:nb.UNIFIED_WINDOW,eventName:hb.application.END_CHAT,func:Ka});Xa.bind({appName:fb,eventName:kb.CONVERSATION_STATE,func:O});Xa.bind({appName:fb,eventName:kb.CSAT_INFO,func:I});Xa.bind({appName:fb,eventName:kb.CONVERSATION_CONTENT,func:W});Xa.bind({appName:fb,eventName:kb.SUBSCRIBE_MESSAGING_EVENTS_RESPONSE,func:X});Xa.bind({appName:fb,eventName:kb.CONVERSATION_HISTORY,func:ya});Xa.bind({appName:"*",eventName:kb.AUTHENTICATION_ERROR,func:L});Xa.bind({appName:fb,eventName:kb.NEW_CONVERSATION_REQUESTED,func:Na});Xa.bind({appName:"*",eventName:lb.CONVERSATIONS_VIEWED,func:za});Xa.bind({appName:"*",eventName:lb.RETRY_GET_HISTORY,func:$});Xa.bind({appName:"*",eventName:kb.FORGET_ME,func:J})}function k(){ab={agent:!1,visitor:!1}}function l(){gb.info("_handleSocketConnected",eb);n();r()}function m(){gb.info("_handleSocketInitialized",eb);if(Kb)s(Wa);else if(!Gb){Gb=!0;H()}}function n(){if(Fb){Fb=!1;o()}}function o(){Ua&&Za.get(ib.STATE)===mb.CONNECTION_ISSUE&&R(Ua)}function p(){gb.info("_handleSocketDisconnected",eb);Kb=!1;Wb=!0;Wa=null;Va||Fb||(Va=setTimeout(function(){q()},Hb))}function q(){if(!Fb){Fb=!0;O({convId:Q(),state:mb.CONNECTION_ISSUE});r();Ua=Za.get(ib.STATE);Lb?R(mb.CONNECTION_ISSUE):N()}}function r(){clearTimeout(Va);Va=null}function s(a){a&&_a.unsubscribeConversations(a);_a.subscribeConversations(A)}function t(){Ya.conf.unifiedConf.poppedOut||Ya.conf.unifiedConf.external?v():u()}function u(){if(zb>=Ab)M();else{zb++;gb.info("_restartAuthentication",eb);Ya.authenticationManager.reAuthenticate(w,u)}}function v(){Kb?R(mb.RESTART_AUTHENTICATION,null):window.location.href=Ya.appConfigurationManager.getExternalResourceURL(Ya.conf.engConf,Ya.conf.unifiedConf,Ya.conf.unifiedConf.poppedOut,!0)}function w(a){gb.info("_ssoKeySuccess data="+JSON.stringify(a),eb);var b=a&&a.ssoKey||null,c=a&&a.redirect_uri||null,d=a&&a.type||Rb.getPropertyFromObject(Ya,"conf.authConf.connector.type")||null;_a.createMessagingInstance(b,c,d,Hb)}function x(a){C(a);if(!Kb){s(Wa);Kb=!0;Gb=!1}}function y(a){z(a)&&D()}function z(a){return a&&a.type===tb.ASSIGNED_AGENT&&a.convId&&h(a.convId)?!0:!1}function A(a){zb=0;Wa=a.subscriptionId}function B(){if(!db){db=!0;wa([{source:Eb.AGENT,by:Ya.translator.translate("info"),textKey:"welcomeMessage"}])}}function C(a){if(a){var b={id:a.userId,type:E(a),name:a.name,imgUrl:a.imgUrl},c=!1;b.name||(b.type===Eb.VISITOR?b.name=a.firstName||a.lastName?a.firstName+" "+a.lastName:Ya.translator.translate("you"):b.name=Ya.translator.translate("agent"));F(b);switch(b.type){case Eb.VISITOR:$a.get(jb.VISITOR_NAME)||(c=!0);break;case Eb.AGENT:z(a)&&(c=!0)}c&&G(b)}}function D(){Xa.trigger({appName:fb,eventName:kb.CHAT_INFO,data:{resetAgentInfo:!0}})}function E(a){var b,c="CONTROLLER",d="CONSUMER";if("string"==typeof a.type)switch(a.type){case c:b=Eb.SYSTEM;break;case d:b=Eb.VISITOR;break;default:b=Eb.AGENT}else b=a.role?Eb.AGENT:Eb.VISITOR;return b}function F(a){var b=$a.get(jb.PARTICIPANTS)||{};b[a.id]=a;$a.modify(jb.PARTICIPANTS,b)}function G(a){var b;if(a&&a.name&&a.id){b={};b[a.type+"Name"]=a.name;b[a.type+"Id"]=a.id;Xa.trigger({appName:fb,eventName:kb.CHAT_INFO,data:b})}}function H(){Xa.trigger({appName:fb,eventName:kb.INITIALIZED});Lb=!0;_a.getMyUserProfile();_a.getBrandProfile();R(mb.REQUESTED,null)}function I(a){if(!Ta||a.convId===Ta[0].convId){bb=a;$a.get(jb.SURVEYS_EXIT)&&K(a.csat)&&Ja()}}function J(){Vb=!0;var a=Za.get(ib.STATE);(a===mb.WAITING||a===mb.CONNECTION_ISSUE&&Ua===mb.WAITING)&&Ma()}function K(a){return a.csatRate||a.status&&(a.status===ob.csatStatus.SKIPPED||a.status===ob.csatStatus.PARTIALLY_FILLED)}function L(a){switch(a&&a.error){case vb.EXPIRED:t();break;case vb.INVALID_SESSION:M()}}function M(a){gb.info("_endAppOnInvalidSession"+(a?" err="+JSON.stringify(a):""),eb);var b=Rb.getPropertyFromObject(Ya,"conf.engConf.allowUnauthMsg");if(b){R(mb.ERROR,null);Xa.trigger({appName:fb,eventName:kb.ERROR,data:{errorType:ub.FAILED_START_CONVERSATION_ERROR,keepError:!0}})}else{R(mb.AUTH_ERROR,null);Xa.trigger({appName:fb,eventName:kb.ERROR,data:{errorType:ub.AUTH_ERROR,keepError:!0}})}_a.dispose()}function N(){gb.info("_endAppAndShowFailedConnectionError",eb);R(mb.ERROR);Rb.isEmpty(Sb)&&Lb?Xa.trigger({appName:fb,eventName:kb.FAILED_START_CONVERSATION}):Xa.trigger({appName:fb,eventName:kb.ERROR,data:{errorType:ub.FAILED_START_CONVERSATION_ERROR,keepError:!0}});_a.dispose()}function O(a){if(Nb[a.convId]&&Nb[a.convId].state!==a.state){Nb[a.convId].state=a.state;switch(a.state){case rb.OPEN:Mb=!1;R(mb.CHATTING,null);break;case rb.CLOSE:S(a);if(!Mb&&!P(a)){Mb=!0;wa([va(a.convId)])}Xa.trigger({appName:fb,eventName:kb.CONVERSATION_CLOSED,data:{convId:a.convId}})}}}function P(a){return a.closeReason===Jb.SYSTEM}function Q(){for(var a in Nb)if(Nb.hasOwnProperty(a)&&Nb[a].state===rb.OPEN)return a}function R(a,b){var c=Za.get(ib.STATE),d=c===mb.POST_CHAT&&a===mb.WAITING,e=!c||c!==a;if(e&&!d){Za.modify({splitKey:ib.STATE,updateData:a,onSuccess:b});if(a===mb.WAITING){D();k()}}}function S(a){var b;Nb[a.convId].endTime=a.time;Nb[a.convId].closeReason=a.closeReason;b=T(a);b||R(mb.APP_ENDED,Ma)}function T(b){var c,d,e,f=!1;if(a.surveyPostChatEnabled){e=Rb.getPropertyFromObject(bb,"csat.endTs")+_a.getTimeDiff()+Ib;c=b&&!P(b)&&ia(b.convId);d=bb&&!U(bb)&&ia(bb.convId)&&Date.now()<e&&!Q()&&!P(Nb[bb.convId]);Rb.getPropertyFromObject(Ya,"conf.engConf.allowUnauthMsg")&&(d=!1);if(c||d){R(mb.POST_CHAT,V);f=!0}}return f}function U(a){return Rb.getPropertyFromObject(a,"csat.csatRate")||"SKIPPED"===Rb.getPropertyFromObject(a,"csat.status")}function V(){var a,b,c=$a.get(jb.AGENT_NAME)||Ya.translator.translate("csatTheAgent");Ya.translator.extendDictionary({agentName:c},{locale:Ya.conf.engConf.lang});b=lpTag.unifiedWindow.CsatDataGenerator(Ya.translator);$a.removeKey(jb.SURVEYS_EXIT,!1);if(lpTag.hooks&&lpTag.hooks.exec){a=lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.AFTER_GET_SURVEY,data:{surveyType:hb.application.POST_CHAT_SURVEY,surveyData:b}});b=a&&a.data&&a.data.surveyData||b}$a.modify(jb.SURVEYS_EXIT,b)}function W(a){var b;if(a&&!Rb.isEmpty(a)){if(a&&a.requestId){b=Ob[a.requestId]&&Ob[a.requestId].resubscribe;Z(a.requestId)}aa(a,b)}ca(b)}function X(a){var b,c,d,e,f;if(a&&a.reqId)if(200!=a.code)Y(a);else{b=Ob[a.reqId].convId;e=1;if(!Rb.isEmpty(Qb)&&Qb[b]){e=Qb[b].retries;delete Qb[b]}c=Ob[a.reqId].endTs;f=Ob[a.reqId].resubscribe;Z(a.reqId);_(b);d=setTimeout(function(){Qb[b]||(Qb[b]={retries:e});Y({reqId:b})},Hb);Ob[b]={convId:b,endTs:c,timeoutId:d,resubscribe:f}}}function Y(a){var b,c,d=a&&a.reqId;if(d&&Ob[d]){b=Ob[d].convId;c=Ob[d].endTs;if(Qb[b]&&Qb[b].retries>=Cb){Z(d,!0);if(h(b))N();else{ca();if(0===Object.keys(Ob).length&&Pb[Ta[0].convId]){Ya.conf.unifiedConf.failedToLoadHistory=!0;ca(!0)}}}else{Qb[b]?Qb[b].retries++:Qb[b]={retries:1};var e=Fa(b,c);e!==d&&Z(d)}}}function Z(a,b){if(a&&Ob&&Ob[a]&&Ob[a].timeoutId){clearTimeout(Ob[a].timeoutId);delete Ob[a].timeoutId}b&&Ob[a]&&Ob[a].convId&&(Pb[Ob[a].convId]=Ob[a]);delete Ob[a]}function $(){if(Rb.isEmpty(Pb))za();else for(var a in Pb)if(Pb.hasOwnProperty(a)){var b=Pb[a].endTs;Fa(a,b)}}function _(a){delete Pb[a]}function aa(a,b){for(var c in a){if(Tb!==c&&a.hasOwnProperty(c)&&!ba(Sb,a[c])){a[c].resubscribed=b;Sb.push(a[c])}a[c].sequence&&Nb[a[c].dialogId].lastMessageId<a[c].sequence&&(Nb[a[c].dialogId].lastMessageId=a[c].sequence)}}function ba(a,b){var c=a.filter(function(a){return a.dialogId===b.dialogId&&a.sequence===b.sequence});return!!c&&c.length>0}function ca(a){if(0===Object.keys(Ob).length&&!Rb.isEmpty(Sb)||a){var b=Q()?mb.CHATTING:mb.WAITING,c=da();R(b,null);wa(c,!0);T();Sb=[]}}function da(){var a,b=[];Array.isArray(Sb)&&Sb.forEach(function(c,d){a=na(c);b.push(a);Sb[d].event&&la(c)&&b.push(va(c.dialogId));xa(a);ga(a)});return b}function ea(a){return!Xb[a.sequence]||a.state!==wb.VIEWED&&a.state!==wb.ERROR?!1:!0}function fa(a,b){var c=b===sb.SUBMIT?a.eventId:a.sequence,d=Xb[c]||{};return a.event&&a.event.message||d.info}function ga(a){Array.isArray(a)||(a=[a]);a.forEach(function(a){if(ha(a)&&h(a.convId))switch(a.source){case Eb.VISITOR:ab.visitor=!0;break;case Eb.AGENT:ab.agent=!0}})}function ha(a){switch(a.type){case pb.LINE:return a.text?!0:!1;case pb.RICH_CONTENT:case pb.SECURE_FORM:return!0;default:return!1}}function ia(a){for(var b=$a.get(jb.LINES)||[],c=!1,d=!1,e=0;e<b.length;e++)if(b[e].convId===a){c=c||b[e].source===Eb.VISITOR;d=d||b[e].source===Eb.AGENT;if(c&&d)break}return c&&d}function ja(a){return Nb[a.dialogId]&&Nb[a.dialogId].history}function ka(a){return ma(a)&&Db&&Ta[Db]&&a.dialogId===Ta[Db].convId&&Db!==Ta.length-1?!0:!1}function la(a){if(ma(a)&&!P(Nb[a.dialogId])){if(a.resubscribed){var b=$a.get(jb.LINES)||[],c=va(a.dialogId),d=b.filter(function(a){return a.time===c.time&&a.type===c.type&&a.textKey===c.textKey}),e=!!d&&d.length>0;return!e}return!0}return!1}function ma(a){return Nb[a.dialogId]&&Nb[a.dialogId].lastMessageId===a.sequence&&Nb[a.dialogId].state===rb.CLOSE?!0:!1}function na(a){var b=oa(a);ta(b,a);return b}function oa(a){var b=a&&a.event||{};switch(b.type){case yb.RICH_CONTENT:return qa(b.content,pb.RICH_CONTENT);default:return pa(a)}}function pa(a){var b=a&&a.event||{};ea(a)&&(b.contentType=xb.SECURE_FORM_UPDATE);switch(b.contentType){case xb.HOSTED_FILE:case xb.EXTERNAL_FILE:return qa(Ya.translator.translate("transcriptForPhotoSharingImage"));case xb.TEXT_PLAIN:return qa(b.message||"");case xb.SECURE_FORM_INVITATION:return ra(a,sb.SEND);case xb.SECURE_FORM_SUBMISSION:return ra(a,sb.SUBMIT);case xb.SECURE_FORM_UPDATE:return ra(a,a.state);default:return qa("string"==typeof b.message?b.message:"")}}function qa(a,b){return{type:b||pb.LINE,subType:"REGULAR",text:a,textType:"plain"}}function ra(a,b){var c,d,e=sa(a,b);c=fa(a,b);c&&(d={type:pb.SECURE_FORM,subType:pb.SECURE_FORM,formState:e,command:e,info:{secureFormId:c.formId||c.secureFormId,secureFormName:c.title||c.secureFormName,invitationId:c.invitationId,uniqueId:c.invitationId}});return d}function sa(a,b){var c;switch(a.state){case wb.VIEWED:c=sb.VIEWED;break;case wb.ERROR:c=sb.ERROR;break;default:c=b}return h(a.dialogId)?c:sb.ERROR}function ta(a,b){var c=ua(b)||{};a[Ub]=b.sequence;a.sequenceId=b.sequence;a.originatorId=c.id;a.by=c.name;a.source=c.type;a.time=b.serverTimestamp;a.convId=b.dialogId;a.track=ka(b);a.history=ja(b);a.resubscribed=b.resubscribed;a.state=b.state}function ua(a){var b=$a.get(jb.PARTICIPANTS)||{};return b[a.originatorId]}function va(a){return{type:pb.INFO,textKey:Nb[a].closeReason===Jb.AGENT?"transcriptConvResolvedByAgent":"transcriptConvResolvedByVisitor",time:Nb[a].endTime,history:Nb[a].history,source:"system",hasSeparator:!0}}function wa(a,b){if(a&&a.length>0){b&&(a=Rb.sortByKeyValue(a,"time"));a.forEach(function(a){Xa.trigger({appName:fb,eventName:Yb[a.type]?a.type:kb.LINE,data:a})});Xa.trigger({appName:fb,eventName:kb.FINISHED_EVENTS_BULK})}}function xa(a){a&&a[Ub]&&a.type===pb.SECURE_FORM&&(Xb[a[Ub]]={info:a.info})}function ya(a){if(Array.isArray(a)&&a.length>0){a=Ga(a);if(Ta){var b=Aa(a);Ba(a);if(Wb){Wb=!1;b&&b.length||Ea(Ta,0,0,!1,!0)}}else{Ta=a;za()}}else Ta||Ha()}function za(){var a,b,c=!1;if(Ta){if(null===Db){a=0;b=Ta.length<Bb?Ta.length-1:Bb-1}else if(Db<Ta.length-1){a=Db+1;b=a;c=!0}Db=b;Ea(Ta,a,b,c)}}function Aa(a){a=Ca(a);if(a.length>0){Ea(a,0,a.length-1,!1);Ta=a.concat(Ta);Db+=a.length}return a}function Ba(a){a=Da(a);if(a.length>0){Ta=Ta.concat(a);za()}}function Ca(a){var b,c,d=[];b=Ta&&Ta.length>0&&Ta[0]&&Ta[0].convId;c=b&&Ta[0].conversationDetails&&Ta[0].conversationDetails.startTs||0;for(var e=0;e<a.length&&(a[e].convId!==b&&a[e].conversationDetails&&a[e].conversationDetails.startTs>c);e++)d.push(a[e]);return d}function Da(a){var b,c,d;b=Ta&&Ta.length>0&&Ta[Ta.length-1];c=b&&b.conversationDetails&&b.conversationDetails.startTs;d=a.filter(function(a){return a.conversationDetails&&a.conversationDetails.startTs<c||!c});return d}function Ea(a,b,c,d,e){var f;a=a||Ta;for(var g=b;c>=g;g++)if(Nb[a[g].convId])e&&Fa(a[g].convId,a[g].conversationDetails.endTs,!0);else{f=a[g].conversationDetails.state!==rb.OPEN?a[g].conversationDetails.state:"";Nb[a[g].convId]={state:f,endTime:a[g].conversationDetails.endTs,lastMessageId:0,closeReason:a[g].conversationDetails.closeReason,history:d};Fa(a[g].convId,a[g].conversationDetails.endTs)}}function Fa(a,b,c){var d=_a.subscribeMessagingEvents({conversationId:a,endTs:b});Ob[d]={convId:a,endTs:b,resubscribe:c};return d}function Ga(a){var b=a.sort(function(a,b){return a.conversationDetails.endTs?b.conversationDetails.endTs?b.conversationDetails.endTs-a.conversationDetails.endTs:1:-1});return b}function Ha(){R(mb.WAITING,null);B()}function Ia(a){if(a&&(a.survey&&a.survey.question[0]||a.status)){bb&&(a.convId=bb.convId);_a.submitExitChatSurvey(a,null,q)}bb=null;Ja()}function Ja(){$a.removeKey(jb.SURVEYS_EXIT,!1);Za.get(ib.STATE)!==mb.CONNECTION_ISSUE?R(mb.APP_ENDED,Ma):Vb?Ma():Ua=mb.WAITING}function Ka(){La(!1);_a.setVisitorTyping(!1);_a.closeConversation()}function La(a){"boolean"==typeof a&&Xa.trigger({appName:fb,eventName:kb.AGENT_TYPING,data:{agentTyping:a}})}function Ma(){if(Vb){R(mb.APP_ENDED);_a.dispose()}else R(mb.WAITING)}function Na(){R(mb.PENDING)}function Oa(){
gb.info("_disposeApplication",eb);Xa.trigger({appName:eb,eventName:hb.chatState.ENDED});f()}function Pa(a){return lpTag.site+":"+(a&&a.invitationId)}function Qa(a,b){return _a.getOTK({formId:a.secureFormId,invitationId:a.invitationId,type:"SecureForm"},b)}function Ra(a,b,c){gb.info("secureFormRequest status: "+a+" info:"+JSON.stringify(c),eb);_a.secureFormRequest({conversationId:_a.getSessionKey(),state:a,submissionId:c.formUuid,invitationId:b,sequenceList:[c.sequenceId],contentType:a===sb.SUBMIT?xb.SECURE_FORM_SUBMISSION:""})}function Sa(a,b){if(a){gb.info("richContentRequest info: "+JSON.stringify(a),eb);_a.richContentRequest({state:a.state,conversationId:_a.getSessionKey(),sequenceList:[a.sequenceId],metadata:b||[]})}}var Ta,Ua,Va,Wa,Xa,Ya,Za,$a,_a,ab,bb,cb,db,eb="ConversationManager",fb=lpTag.unifiedWindow.apps.CHAT,gb=lpTag.unifiedWindow.log,hb=lpTag.unifiedWindow.events,ib=lpTag.unifiedWindow.uiModelPath,jb=lpTag.unifiedWindow.chatModelPath,kb=hb.chat,lb=hb.viewController,mb=lpTag.unifiedWindow.State,nb=lpTag.unifiedWindow.apps,ob=lpTag.unifiedWindow.consts,pb=lpTag.unifiedWindow.consts.chatEvents,qb=lpTag.unifiedWindow.events.socket,rb=lpTag.AMSStatics.conversation.states,sb=lpTag.unifiedWindow.secureFormStates,tb=lpTag.AMSStatics.participant.roles,ub=lpTag.unifiedWindow.consts.errorTypes,vb=lpTag.unifiedWindow.consts.authErrorsTypes,wb=lpTag.unifiedWindow.MessageState,xb=lpTag.unifiedWindow.contentTypes,yb=lpTag.unifiedWindow.MessageTypes,zb=0,Ab=4,Bb=2,Cb=3,Db=null,Eb={SYSTEM:"system",AGENT:"agent",VISITOR:"visitor"},Fb=!1,Gb=!1,Hb=15e3,Ib=3e5,Jb=lpTag.AMSStatics.conversation.closeReasons,Kb=!1,Lb=!1,Mb=!1,Nb={},Ob={},Pb={},Qb={},Rb=lpTag.unifiedWindow.applicationUtils,Sb=[],Tb="requestId",Ub="@id",Vb=!1,Wb=!1,Xb={},Yb={};Yb[pb.SECURE_FORM]=!0;e(d);this.setConversationUrgency=g;this.isCurrentConversation=h;this.getOtkJson=Pa;this.getOTK=Qa;this.secureFormRequest=Ra;this.richContentRequest=Sa;this.dispose=f};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.LineStatesManager=function(a){function b(a){B.info("init",u);if("object"==typeof a){t=a.events;p=a.lpModel;q=a.lppModel;r=a.apiDelegate;s=a.browserStateManager;g()}else B.error("init: missing mandatory dependencies.",u)}function c(a){var b=h(a);d(b);return b}function d(a){var b,c=k(),d=[];a=a||m();Array.isArray(a)&&a.forEach(function(a){if(!o(a)&&l(a,c)){a.state=c;d.push(a)}});b=D.groupByKeyValue(d,"state");for(var e in b)r.sendStatesUpdate(b[e],e)}function e(a){for(var b,c,d=a.length-1;d>=0;d--){b=a[d];if(!o(b)&&n(b)&&!b.history)break;c||!o(b)||b.history||(c=b)}return c||b}function f(){t.unbind({appName:"*",eventName:y.LINES_VIEWED,func:d})}function g(){t.bind({appName:"*",eventName:y.LINES_VIEWED,func:d})}function h(a){var b,c=m(),d=[];Array.isArray(a)&&a.forEach(function(a){b=i(a,c);b&&d.push(b)});return d}function i(a,b){var c,d=a;c=j(b,a);if(c&&"undefined"!=typeof a.state)if(l(c,a.state,a.originatorId,a.source,a.resubscribed)){d=c;d.state=a.state;d.update=!0}else d=null;return d}function j(a,b){var c=null;Array.isArray(a)&&a.some(function(a){if(a[C]===b[C]&&a.convId===b.convId){c=a;return!0}});return c}function k(){var a=q.get(A.WINDOW_MAXIMIZED);return s.isFocus()&&a?w.READ:w.ACCEPT}function l(a,b,c,d,e){var f=d?a.source!==d:!0;if(e){f=!0;c=null}return(a.state!==w.FAILED&&!a.originatorId&&a.source===v.VISITOR||a.originatorId&&a.originatorId!==c)&&a.state!==b&&f&&x[a.state]<x[b]}function m(){return p.get(z.LINES)||[]}function n(a){return a.state===w.READ?!0:!1}function o(a){return a.source===v.VISITOR?!0:!1}var p,q,r,s,t,u="LineStatesManager",v={AGENT:"agent",VISITOR:"visitor"},w=lpTag.unifiedWindow.MessageState,x=lpTag.unifiedWindow.MessagePriority,y=lpTag.unifiedWindow.events.viewController,z=lpTag.unifiedWindow.chatModelPath,A=lpTag.unifiedWindow.uiModelPath,B=lpTag.unifiedWindow.log,C="@id",D=lpTag.unifiedWindow.applicationUtils;b(a);this.verifyLineStates=c;this.sendStatesUpdate=d;this.getLastReadLine=e;this.dispose=f};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.TtrManager=function(a){function b(a){L.info("init",E);if("object"==typeof a){C=a.events;A=a.lpModel;B=a.lppModel;z=a.conversationManager;D=a.features;d()}else L.error("init: missing mandatory dependencies.",E)}function c(){C.unbind({appName:F,eventName:G.BRAND_INFO,func:i});B.unbind(K.STATE,h);A.unbind(J.TRANSCRIPT_LOADED,l);f()}function d(){C.bind({appName:F,eventName:G.BRAND_INFO,func:i});g();B.bind(K.STATE,h);A.bind(J.TRANSCRIPT_LOADED,l)}function e(){S.published=!1;S.urgencyInfo=null;Q=0;R=0;P=null;f()}function f(){A.unbind(J.LINES,n);O=!1;C.unbind({appName:F,eventName:G.TTR_INFO,func:j});N=!1}function g(){if(!N){N=!0;C.bind({appName:F,eventName:G.TTR_INFO,func:j})}}function h(a){var b=a.newValue;switch(b){case lpTag.unifiedWindow.State.APP_ENDED:case lpTag.unifiedWindow.State.POST_CHAT:e();break;case lpTag.unifiedWindow.State.REQUESTED:case lpTag.unifiedWindow.State.PENDING:case lpTag.unifiedWindow.State.CHATTING:g()}}function i(a){if(!S.brandInfo||!V.isSameObject(a,S.brandInfo)){S.brandInfo=a;l()}}function j(a){if(!S.urgencyInfo||!V.isSameObject(a,S.urgencyInfo)){k(a);l()}}function k(a){S.urgencyInfo=S.urgencyInfo||{};var b=a.ttrType!==S.urgencyInfo.ttrType,c=a.manualETTR!==S.urgencyInfo.manualETTR;S.urgencyInfo.manualETTR&&!a.manualETTR&&(P&&P.source===T.VISITOR||(R=0));S.urgencyInfo=a;S.urgencyInfo.hasDataChanged=c||b}function l(){S.brandInfo&&S.urgencyInfo&&A.get(J.TRANSCRIPT_LOADED)&&m()}function m(){if(O)n();else{O=!0;A.bind(J.LINES,n)}}function n(a){setTimeout(function(){var b=p(S.brandInfo),c=r(S.urgencyInfo,S.brandInfo.delay,a);w(b,c);(!S.published||S.urgencyInfo.hasDataChanged)&&o(b,c)},0)}function o(a,b){var c;if(b&&b.time&&a){c=v(b.time,a.onOffHours);x(c);S.published=!0;S.urgencyInfo.hasDataChanged=!1}}function p(a){var b={},c=V.getPropertyFromObject(a,"timeDiff")||0;b.delay=V.getPropertyFromObject(a,"delay.tillWhen")||0;b.onOffHours=q(b.delay,c);return b}function q(a,b){var c=(new Date).getTime()-b,d="number"==typeof a&&a>c;if(d){var e=a-c;setTimeout(l,e)}return d}function r(a,b,c){var d=a.value||0,e=a.delay||b&&b.tillWhen||0,f=a.timeDiff||0,g=s(c,a.manualETTR),h=(new Date).getTime(),i=g+f,j=e>i?e:i,k=1e3*d+j,l=a.manualETTR?a.manualETTR+f:k;g&&Math.abs(l-R)>U?R=l:l=0;return{time:"number"==typeof l&&l>h?l:0,isUrgent:a.ttrType===I.urgent,isPrioritized:a.ttrType===I.prioritized,isManual:!!a.manualETTR}}function s(a,b){for(var c=a&&a.newValue||[],d=0;d<c.length;d++)if(0===Q&&t(c[d],T.VISITOR)){Q=u(c[d]);P=c[d]}else if(0!==Q&&t(c[d],T.AGENT)){Q=0;b||(R=0);P=c[d]}return b||Q}function t(a,b){var c=a.source===b&&!a.history&&(!a.convId||z.isCurrentConversation(a.convId)),d=u(a)>u(P);return c&&d}function u(a){return a&&"string"==typeof a.time?new Date(a.time).getTime():a&&"number"==typeof a.time?a.time:0}function v(a,b){return{type:H.chatEvents.INFO,textKey:b?"transcriptTtrOffHoursMessage":"transcriptTtrMessage",source:"system",time:a}}function w(a,b){var c={isUrgent:b.isUrgent,markUrgencyEnabled:!a.onOffHours&&!b.isManual&&!b.isPrioritized};A.modify(J.TTR,c)}function x(a){if(a&&!y(M)){C.trigger({appName:F,eventName:G.LINE,data:{lines:[a]}});C.trigger({appName:F,eventName:G.FINISHED_EVENTS_BULK})}}function y(a){return!!D&&!!D.getFeature&&!!D.getFeature(a)}var z,A,B,C,D,E="TtrManager",F=lpTag.unifiedWindow.apps.CHAT,G=lpTag.unifiedWindow.events.chat,H=lpTag.unifiedWindow.consts,I=lpTag.AMSStatics.effectiveTTRTypes,J=lpTag.unifiedWindow.chatModelPath,K=lpTag.unifiedWindow.uiModelPath,L=lpTag.unifiedWindow.log,M="Messaging.Auto_Messages",N=!1,O=!1,P=null,Q=0,R=0,S={brandInfo:null,urgencyInfo:null,published:!1},T={VISITOR:"visitor",AGENT:"agent"},U=15e3,V=lpTag.unifiedWindow.applicationUtils;b(a);this.dispose=c};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.HeartBeatManager=lpTag.unifiedWindow.HeartBeatManager||function(a,b){function c(a,b){S.info("init",U);if("object"==typeof a&&a.accountId&&a.storageKey&&a.secureStorageLocation&&"object"==typeof b){E=a.accountId;I=a.storageKey;F=a.poppedOut;R=a.secureStorageLocation;Q=b.events;P=b.browserStateManager;g();if(F)j();else{s();q()}}else S.error("No configuration received on init",U)}function d(){e();h();E=null;I=null;F=null;R=null;Q=null;P=null}function e(a){S.info("_stop ,preserveTimestamps: "+a,U);L=!0;m();F||a||n();K=!1}function f(a){S.info("_start, preserveTimestamps: "+a,U);D=(new Date).getTime();e(a);o();p()}function g(){Q.bind({appName:T.UISTATE,eventName:V.uiState.EMBEDDED_CHANGED,func:i})}function h(){Q&&Q.unbind&&Q.unbind({appName:T.UISTATE,eventName:V.uiState.EMBEDDED_CHANGED,func:i})}function i(a){S.debug("_handleEmbeddedStateChange: embedded="+a,U);a?e():f(!0)}function j(){f(!0);l(V.heartBeat.INIT)}function k(){l(F?V.heartBeat.FAILED:V.application.DO_HARAKIRI)}function l(a,b){Q.trigger({appName:U,eventName:a,data:b})}function m(){S.info("_clearTimeouts",U);J&&clearTimeout(J);M&&clearTimeout(M)}function n(){S.info("_clearTimestamps",U);r();t()}function o(){S.info("_resolveApps: initializing apps value - poppedOut = "+F,U);if(F){G=W;H=X}else{G=X;H=W}S.info("_resolveApps: resolvedGetApp = "+G+", resolvedSetApp = "+H,U)}function p(){S.info("_startBeating",U);L=!1;K=!0;w(x);A()}function q(){S.info("_fetchPopOutBeat",U);lpTag.taglets.lpSecureStorage.getValue({key:I,site:E,app:ba,success:r,appName:X,domain:R})}function r(a){S.info("_initPopOutBeat: "+JSON.stringify(a),U);if(!a||!a.timestamp){S.info("_initPopOutBeat: initializing popout beat value",U);lpTag.taglets.lpSecureStorage.setValue({key:I,site:E,app:ba,value:C(0),success:v,error:v,appName:X,domain:R})}}function s(){S.info("_fetchEmbeddedBeat",U);lpTag.taglets.lpSecureStorage.getValue({key:I,site:E,app:ba,success:u,appName:W,domain:R})}function t(){lpTag.taglets.lpSecureStorage.setValue({key:I,site:E,app:ba,value:C(0),success:v,error:v,appName:W,domain:R})}function u(a){S.info("_initEmbeddedBeat: data="+JSON.stringify(a),U);if(!a||!a.timestamp){S.info("_initEmbeddedBeat: initializing embedded beat value",U);t()}}function v(){S.info("_emptyCallback",U)}function w(a){S.info("_getBeat: got beat",U);J&&clearTimeout(J);L||(F||P.visibilitySupported()&&!P.isHidden()?lpTag.taglets.lpSecureStorage.getValue({key:I,site:E,app:ba,success:a,appName:G,domain:R}):J=setTimeout(z(a),aa))}function x(a){S.info("_validateBeat: data="+JSON.stringify(a),U);var b=(new Date).getTime();if(!L)if(F||a&&a.timestamp||!(b-D>Z)){if(F&&(!a||!a.timestamp)||a&&a.timestamp&&y(b,a.timestamp)){S.info("_validateBeat: timed out data= "+JSON.stringify(a)+" session="+I,U);k();K=!1}else if(!K){S.info("_validateBeat: resumed",U);K=!0;l(V.heartBeat.RESUMED)}O=N;J=setTimeout(z(x),aa)}else{S.info("_validateBeat: timed out from start data= "+JSON.stringify(a)+" session="+I,U);k()}}function y(a,b){S.debug("_isTimeout: now="+a+", currentTime="+b+", prevRecordedWriteTime="+O+", lastWriteTime="+N,U);return O===N?a-b>Y:F?a-b>_:a-b>$}function z(a){return function(){w(a)}}function A(){S.info("_setBeat",U);M&&clearTimeout(M);L||(F||P.visibilitySupported()&&!P.isHidden()?lpTag.taglets.lpSecureStorage.setValue({key:I,site:E,app:ba,value:C((new Date).getTime()),success:B,error:v,appName:H,expires:108e5,domain:R}):M=setTimeout(A,aa))}function B(a){S.info("_setBeatCallBack: new data="+JSON.stringify(a),U);N=a.timestamp;M=setTimeout(A,aa)}function C(a){return{timestamp:a}}var D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S=lpTag.unifiedWindow.log,T=lpTag.unifiedWindow.apps,U=T.HEARTBEAT,V=lpTag.unifiedWindow.events,W="UIHeartBeatEmbedded",X="UIHeartBeatPopOut",Y=6e4,Z=15e3,$=15e3,_=2e3,aa=1e3,ba=T.UNIFIED_WINDOW;c(a,b);this.dispose=d};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.SecureFormManager=function(a){function b(a){V.info("init",N);if("object"==typeof a){J=a.lpModel;K=a.lppModel;G=a.events;H=a.apiManager;I=a.browserStateManager;X=a.appContext.conf.engConf.lang||X;L=lpTag.unifiedWindow.helpers.SecureFormStyleHelper(a.appContext);F=a.appContext.conf.unifiedConf.poppedOut?-1:lpTag.storageMethods.getSessionData("lpTabId");M="true"===a.appContext.conf.windowConf.hidePCILogo||a.appContext.conf.windowConf.hidePCILogo===!0;d()}else V.error("init: missing mandatory dependencies.",N)}function c(){G.unbind({appName:R,eventName:U.FINISHED_EVENTS_BULK,func:m});G.unbind({appName:R,eventName:U.SECURE_FORM,func:e});G.unbind({appName:S,eventName:ba.SUBMIT,func:w});G.unbind({appName:S,eventName:ba.VIEWED,func:u});G.unbind({appName:S,eventName:ba.ERROR,func:v});G.unbind({appName:R,eventName:U.CONVERSATION_CLOSED,func:k});$=!0}function d(){G.bind({appName:R,eventName:U.FINISHED_EVENTS_BULK,func:m});G.bind({appName:R,eventName:U.SECURE_FORM,func:e});G.bind({appName:S,eventName:ba.SUBMIT,func:w});G.bind({appName:S,eventName:ba.VIEWED,func:u});G.bind({appName:S,eventName:ba.ERROR,func:v});G.bind({appName:R,eventName:U.CONVERSATION_CLOSED,func:k})}function e(a){var b;if(a&&f(a)){b=o(a);switch(a.command){case ba.SEND:g(a,b);break;case ba.VIEWED:i(b,a.source);Q[b.info.uniqueId].visualState=aa.OPEN;break;case ba.SUBMIT:j(a,b);Q[b.info.uniqueId].visualState=aa.CLOSED;break;case ba.ERROR:h(b,b);Q[b.info.uniqueId].visualState=aa.CLOSED}y(b.info.uniqueId,a.command);$||J.modify(D(b),Q[b.info.uniqueId])}}function f(a){var b=Q[a&&a.info&&a.info.uniqueId],c=b&&a.command===ba.SEND,d=b&&b.formState===ba.VIEWED&&a.command===ba.ERROR,e=b&&b.formState===ba.SUBMIT&&a.command===ba.SUBMIT,f=b&&a.command===ba.VIEWED&&"agent"===a.source;return!(c||d||e||f)}function g(a,b){if(b){b.info=a.info;p(b);A(a,b,ba.SEND);t(b)}}function h(a,b){var c=Q[a&&a.info&&a.info.uniqueId];c&&!c.firedLine&&A(a,b,ba.SEND)}function i(a,b){var c=a&&"visitor"===b&&!$&&a.formState!==ba.VIEWED&&a.formState!==ba.ERROR;c&&y(a.info.uniqueId,ba.VIEWED_ON_ANOTHER_TAB)}function j(a,b){b&&A(a,b,ba.SUBMIT)}function k(a){var b;if(a&&a.convId){b=l(a.convId);if(b){Q[b].command=ba.ERROR;Q[b].formState=ba.ERROR;J.modify(D(Q[b]),Q[b])}}}function l(a){for(var b in Q)if(Q[b].visualState===aa.OPEN&&Q[b].convId===a)return Q[b].info.uniqueId}function m(){if($){n();J.modify(T.SECURE_FORMS,Q)}$=!1}function n(){for(var a in Q)if(Q.hasOwnProperty(a))switch(Q[a].formState){case ba.VIEWED:x(Q[a].info.uniqueId,ba.ABORTED);break;case ba.SEND:x(Q[a].info.uniqueId,ba.RECEIVED)}}function o(a){var b=a&&a.info;if(b&&b.uniqueId){Q[b.uniqueId]=Q[b.uniqueId]||a;return Q[b.uniqueId]}}function p(a){a&&a.info&&(_[a.info.uniqueId]=q(a.info))}function q(a){return function(b){var c={siteid:lpTag.site,redirect:encodeURIComponent(P),css:encodeURIComponent(L.getCompressedCSS()),hideLogo:M,otkJson:H.getOtkJson(a),lang:X};if(a&&a.submitOtk&&a.getOtk){c.otk=a.submitOtk;c.formOtk=a.getOtk;lpTag.taglets.lpUtil.runCallback(b,null,r(O,c))}else a&&a.invitationId&&H.getOTK(a,function(a){var d,e=a&&a.token;if(e&&e.writeOtk&&e.readOtk){c.otk=e.writeOtk;c.formOtk=e.readOtk;d=r(O,c)}lpTag.taglets.lpUtil.runCallback(b,null,d)})}}function r(a,b){return lpTag.taglets.lpUtil.addQueryParams(a,b)}function s(a,b){lpTag.taglets.lpUtil.runCallback(_[a],null,b)}function t(a){$||a.command!==ba.SEND||x(a.info.uniqueId,ba.RECEIVED)}function u(a){if(!B(a.uniqueId)){C(a.uniqueId);z(ba.VIEWED,a.uniqueId);y(a.uniqueId,ba.VIEWED)}}function v(a){z(ba.ERROR,a.uniqueId,{errorReason:a.message.errorReason||"unknown",failedCommand:ba.VIEWED})}function w(a){z(ba.SUBMIT,a.uniqueId,{formUuid:a.message.token,gatewayDomain:a.message.gatewayDomain},a.text)}function x(a,b){z(b,a);y(a,b)}function y(a,b){if(Q[a]){Q[a].events=Q[a].events||[];if(W.indexOf(Q[a].events,b)<0){Q[a].events.push(b);Q[a].formState=B(a)?ba.VIEWED_ON_ANOTHER_TAB:b}}}function z(a,b,c,d){var e=Q[b];if(e&&!B(b)){c=c||{};c.uniqueId=b;c.secureFormName=e.info.secureFormName;c.secureFormId=e.info.secureFormId;c.sequenceId=e["@id"];H.secureFormRequest(a,b,c,d)}}function A(a,b,c){Q[b.info.uniqueId].firedLine=!0;G.trigger({appName:R,eventName:U.LINE,data:E(a,b,c)})}function B(a){if(Q[a].formState===ba.VIEWED_ON_ANOTHER_TAB)return!0;var b=K.get(Y.SECURE_FORMS_TAB_HANDLER);return b&&"undefined"!=typeof b[a]&&b[a]!==F}function C(a){var b=K.get(Y.SECURE_FORMS_TAB_HANDLER)||{};if("undefined"==typeof b[a]){b[a]=F;K.modify(Y.SECURE_FORMS_TAB_HANDLER,b)}}function D(a){var b=T.SECURE_FORMS;return{name:b.name,path:b.path+"."+a.info.uniqueId}}function E(a,b,c){var d={"@id":a["@id"],source:"agent",by:b.by,time:a.time||new Date,type:U.SECURE_FORM,textKey:Z+c,dictionaryKey:{secureFormName:b.info.secureFormName},uniqueId:b.info.uniqueId,formName:b.info.secureFormName,history:a.history,track:a.track};if(a.state){d.state=a.state;d.convId=a.convId;d.originatorId=a.originatorId}return d}var F,G,H,I,J,K,L,M,N="SecureFormManager",O="https://"+lpTag.csds.getDomain("tokenizer")+"/pcigw/pci_dynamic_le.jsp",P="https://"+lpTag.csds.getDomain("tokenizer")+"/pcigw/pci_dynamic_submitted_le.html",Q={},R=lpTag.unifiedWindow.apps.CHAT,S=lpTag.unifiedWindow.apps.SECURE_FORM,T=lpTag.unifiedWindow.chatModelPath,U=lpTag.unifiedWindow.events.chat,V=lpTag.unifiedWindow.log,W=lpTag.unifiedWindow.applicationUtils,X="en-US",Y=lpTag.unifiedWindow.uiModelPath,Z="secureForm_line_",$=!0,_={},aa={OPEN:"OPEN",CLOSED:"CLOSED"},ba=lpTag.unifiedWindow.secureFormStates;b(a);this.getFormUrl=s;this.dispose=c};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.RichContentManager=function(a){function b(a){o.info("init",l);if("object"==typeof a){j=a.lpModel;k=a.lppModel;h=a.appContext;i=a.apiManager;d()}else o.error("init: missing mandatory dependencies.",l)}function c(){h.events.unbind({appName:n,eventName:m.ACTION_EVENT,func:f});h.events.unbind({appName:n,eventName:m.PUBLISH_TEXT,func:g});h.events.unbind({appName:n,eventName:m.DISPLAYED,func:e})}function d(){h.events.bind({appName:n,eventName:m.ACTION_EVENT,func:f});h.events.bind({appName:n,eventName:m.PUBLISH_TEXT,func:g});h.events.bind({appName:n,eventName:m.DISPLAYED,func:e})}function e(a){if(a){var b={sequenceId:a.uniqueId||a.sequenceId,state:q};i.richContentRequest(b)}}function f(a){if(a){var b={sequenceId:a.uniqueId||a.sequenceId,state:p};i.richContentRequest(b,a.metadata||[])}}function g(a){if(a&&a.metadata&&a.metadata.text){var b={text:a.metadata.text};h.transcriptManager.sendLine(b)}}var h,i,j,k,l="RichContentManager",m=lpTag.unifiedWindow.richContentStates,n=lpTag.unifiedWindow.apps.RICH_CONTENT,o=lpTag.unifiedWindow.log,p="ACTION",q="ACCEPT";b(a);this.dispose=c};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.CoBrowseManager=function(a){function b(a){u.info("init",s);if("object"==typeof a){o=a.events;p=a.lpModel;q=a.appContext;r=q.conf.engConf;k()}else u.error("init: missing mandatory dependencies.",s)}function c(a){i(a)&&e(w.INVITED,j(a));a.type=y.INFO;a.text=g(A+D,a.by);a.by=q.translator.translate("info");a.source="system";return a}function d(a){return a&&a.text&&a.text.indexOf&&a.text.indexOf(t)>=0?!0:!1}function e(a,b){o.trigger({appName:z,eventName:a,data:{ssid:r.ssid,svid:r.svid,scid:r.scid,cid:r.cid,eid:r.eid,agentId:p.get(v.AGENT_ID),serviceId:b,chatId:p.get(v.CHAT_ID),visitorName:p.get(v.VISITOR_NAME)||""},global:!0});f(a)}function f(a){var b=q.conf.unifiedConf.isMessaging;if(a!==w.STARTED&&a!==w.INVITED&&a!==w.CANCELED&&(a!==w.OFFERED||b)){var c=A+a,d=g(c);o.trigger({appName:x,eventName:y.LINE,data:{source:"system",by:q.translator.translate("info"),time:new Date,type:y.INFO,text:d}});o.trigger({appName:x,eventName:y.FINISHED_EVENTS_BULK})}}function g(a,b){b=b||p.get(v.AGENT_NAME);q.translator.extendDictionary({agentName:b},{locale:r.lang});var c=q.translator.translate(a),d=h();d&&(c=d[a]||c);return c}function h(){var a=q.conf.unifiedConf,b=q.conf.engConf.lang;return a&&a.cobrowseCustomization&&a.cobrowseCustomization[b]}function i(a){var b=new Date(a.time);return Date.now()-b.getTime()<B}function j(a){var b=a.text.match(/data-lp-serviceid="([\w\d#]*)"/);return b.length>1?b[1]:""}function k(){o.bind({appName:lpTag.unifiedWindow.apps.CHAT,eventName:lpTag.unifiedWindow.events.coBrowseEvents.DIALOG_CREATED,func:l})}function l(a){m(a)?e(w.INVITED,a.metaData.serviceId):n(a)&&e(w.CANCELED)}function m(a){var b=a&&a.metaData,c=!1;if(b){var d=-1!==C.indexOf(b.mode),e="INVITED"===b.sessionState,f=Date.now()/1e3<b.expires;c=d&&e&&f}return c}function n(a){var b=a&&a.metaData;return b&&"CLOSED"===b.sessionState}var o,p,q,r,s="CoBrowseManager",t='data-lp-point="cb-offer"',u=lpTag.unifiedWindow.log,v=lpTag.unifiedWindow.chatModelPath,w=lpTag.unifiedWindow.events.coBrowseEvents,x=lpTag.unifiedWindow.apps.CHAT,y=lpTag.unifiedWindow.events.chat,z=lpTag.unifiedWindow.apps.UNIFIED_WINDOW,A="cobrowseLine_",B=115e3,C=lpTag.unifiedWindow.consts.coBrowse.acceptedCoBrowseModes,D="cobrowseOffered";b(a);this.isCoBrowseLineEvent=d;this.processCoBrowseLineObj=c;this.publishCoBrowseEvent=e;this.customizeTranslation=g;this.COBROWSE_OFFER_TIMEOUT=B};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.TranscriptManager=function(a){function b(a){U.info("init",L);if("object"==typeof a){H=a.events;A=a.lpModel;B=a.lppModel;C=a.apiDelegate;D=a.coBrowseManager;E=a.idnvManager;F=a.browserStateManager;G=a.lineStatesManager;I=a.appContext;g()}else U.error("init: missing mandatory dependencies.",L)}function c(a){var b,c;U.info("sendLine: visitor sent line",L);if("object"==typeof a){if(lpTag.hooks&&lpTag.hooks.exec){c=lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.BEFORE_SEND_VISITOR_LINE,data:{line:a}});a=c&&c.data&&c.data.line||a}h(a);Z++;r([a]);Y++;b=q().length-1;C.sendLine(a,p(b,P.SENT),p(b,P.ERROR))}}function d(a,b){U.info("sendLine: send visitor line: "+JSON.stringify(a),L);if("object"==typeof a){h(a);C.sendLine(a,b&&b.success,b&&b.error)}}function e(a){U.info("setVisitorTyping: isTyping="+a,L);if("boolean"==typeof a&&J!==a&&B.get(T.STATE)===V.CHATTING&&z(a)){J=a;C.setVisitorTyping(a);B.modify(T.VISITOR_TYPING,a)}}function f(){H.unbind({appName:M,eventName:Q.LINE,func:j});H.unbind({appName:M,eventName:Q.CHAT_INFO,func:v});H.unbind({appName:M,eventName:Q.AGENT_TYPING,func:t});H.unbind({appName:M,eventName:Q.FINISHED_EVENTS_BULK,func:m});H.unbind({appName:"*",eventName:R.LINES_VIEWED,func:n})}function g(){H.bind({appName:M,eventName:Q.LINE,func:j});H.bind({appName:M,eventName:Q.CHAT_INFO,func:v});H.bind({appName:M,eventName:Q.AGENT_TYPING,func:t});H.bind({appName:M,eventName:Q.FINISHED_EVENTS_BULK,func:m});H.bind({appName:"*",eventName:R.LINES_VIEWED,func:n})}function h(a){a.source=O.VISITOR;a.time=new Date;a.state=P.PENDING;a[W]=Y}function i(a){var b=!1,c=A.get(S.TRANSCRIPT_LOADED);a=a||[];if(!c){for(var d=0;d<a.length;d++)if(!isNaN(a[d][X])){b=!0;break}b&&A.modify(S.TRANSCRIPT_LOADED,!0)}}function j(a){var b,c,d,e=a.lines||a;U.info("_collectLines: lines="+JSON.stringify($.excludeAttributes($.clone(e),["text"])));if(a){c=$.isArray(a.lines)?a.lines:[a];for(var f=0;f<c.length;f++){b=c[f];d=k(b);if(!d){b=l(b);b&&_.push(b)}}}}function k(a){if(a.source===O.VISITOR&&Z>0){Z--;return!0}return!1}function l(a){D.isCoBrowseLineEvent(a)?a=D.processCoBrowseLineObj(a):E.isIdnvLineObj(a)?a=E.processIdnvLineObj(a):a.type=a.type||N.chatEvents.LINE;return a}function m(){var a;G&&(_=G.verifyLineStates(_));r(_);_=[];a=q();x(a);i(a)}function n(){var a=q();x(a)}function o(a,b,c){for(var d,e=q(),f=0;f<e.length;f++)if(e[f].localId===b){d=e[f];d.state=c;d.update=!0;if(a&&!isNaN(a[X])&&a.convId){d[X]=a[X];d.convId=a.convId;d.originatorId=K}break}r([d])}function p(a,b){return function(c){o(c,a,b)}}function q(){return A.get(S.LINES)||[]}function r(a,b){var c;a=s(a);if(lpTag.hooks&&lpTag.hooks.exec){c=lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.AFTER_GET_LINES,data:{lines:a}});a=c&&c.data&&c.data.lines||a}U.info("_storeChatLines: store chat lines in the model, lines="+JSON.stringify($.excludeAttributes($.clone(a),["text"])),L);A.modify(S.LINES,a,W,b)}function s(a){return a.map(function(a){a[W]="undefined"!=typeof a[W]?a[W]:Y++;return a})}function t(a){if(u(a)){a&&"boolean"==typeof a.agentTyping&&A.modify(S.AGENT_IS_TYPING,a.agentTyping);U.info("_setAgentTyping: data="+JSON.stringify(a),L)}}function u(a){var b=A.get(S.PARTICIPANTS)||[];a=a||{};return!a.originatorId||b[a.originatorId].type===O.AGENT}function v(a){if("object"==typeof a){a.agentName&&A.modify(S.AGENT_NAME,a.agentName);a.agentId&&A.modify(S.AGENT_ID,a.agentId);a.visitorName&&A.modify(S.VISITOR_NAME,a.visitorName);a.rtSessionId&&A.modify(S.CHAT_ID,a.rtSessionId);a.resetAgentInfo&&w();a.visitorId&&(K=a.visitorId)}}function w(){A.removeKey(S.AGENT_NAME,!0);A.removeKey(S.AGENT_ID)}function x(a){var b,c=B.get(T.WINDOW_MAXIMIZED),d=B.get(T.LAST_LINE_VIEWED),e={};G?b=G.getLastReadLine(a):c&&(b=y(a));if(b){e[X]=b[X];e[W]=b[W];b.convId&&(e.convId=b.convId)}$.isEmpty(e)||$.isSameObject(d,e)||B.modify(T.LAST_LINE_VIEWED,e)}function y(a){for(var b,c=a.length-1;c>=0;c--){b=a[c];if(!isNaN(b[W]))break}return b}function z(a){return a===!0||a===!1&&"boolean"==typeof B.get(T.VISITOR_TYPING)}var A,B,C,D,E,F,G,H,I,J,K,L="TranscriptManager",M="API",N=lpTag.unifiedWindow.consts,O={AGENT:"agent",VISITOR:"visitor"},P=lpTag.unifiedWindow.MessageState,Q=lpTag.unifiedWindow.events.chat,R=lpTag.unifiedWindow.events.viewController,S=lpTag.unifiedWindow.chatModelPath,T=lpTag.unifiedWindow.uiModelPath,U=lpTag.unifiedWindow.log,V=lpTag.unifiedWindow.State,W="localId",X="@id",Y=0,Z=0,$=lpTag.unifiedWindow.applicationUtils,_=[];b(a);this.sendLine=c;this.sendLineSkipLocal=d;this.setVisitorTyping=e;this.dispose=f};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.UIStateManager=function(a){function b(a){C.info("init",x);r=a.lpModel;s=a.lppModel;t=a.events;u=a.browserStateManager;w=a.NativeSDK;i()}function c(){s.clear();j();clearTimeout(v)}function d(a){var b=!w;if("boolean"==typeof a&&s.get(B.WINDOW_MAXIMIZED)!==a){C.info("setWindowState: Window maximized="+a,x);b&&s.modify(B.WINDOW_MAXIMIZED,a);t.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:a?z.uiState.MAXIMIZED:z.uiState.MINIMIZED,global:!0})}}function e(a,b){C.info("setWindowPosition: position="+JSON.stringify(a),x);s.modify(B.WINDOW_POSITION,a,null,b)}function f(a){C.info("setActionsVisibility: visibility="+a,x);"boolean"==typeof a&&s.modify(B.ACTIONS_VISIBLE,a)}function g(a){C.info("setSoundState: enable="+a,x);"boolean"==typeof a&&s.modify(B.WINDOW_SOUND,a)}function h(a){s.modify({splitKey:B.WINDOW_EMBEDDED,updateData:a,onSuccess:q,context:this})}function i(){t.bind({appName:y.HEARTBEAT,eventName:z.heartBeat.FAILED,func:l});t.bind({appName:y.HEARTBEAT,eventName:z.heartBeat.RESUMED,func:m});t.bind({appName:y.UNIFIED_WINDOW,eventName:z.unifiedWindow.MAXIMIZE,func:k});u.on(u.EVENT_NAME.FOCUS_CHANGE,n,this);u.on(u.EVENT_NAME.VISIBILITY_CHANGE,o,this);s.bind(B.WINDOW_EMBEDDED,p)}function j(){t.unbind({appName:y.HEARTBEAT,eventName:z.heartBeat.FAILED,func:l});t.unbind({appName:y.HEARTBEAT,eventName:z.heartBeat.RESUMED,func:m});t.unbind({appName:y.UNIFIED_WINDOW,eventName:z.unifiedWindow.MAXIMIZE,func:k});u.off(u.EVENT_NAME.FOCUS_CHANGE,n);u.off(u.EVENT_NAME.VISIBILITY_CHANGE,o);s.unbind(B.WINDOW_EMBEDDED,p)}function k(){d(A.MAXIMIZED)}function l(){s.modify(B.ACTION_POPOUT_ENABLE,!1)}function m(){s.modify(B.ACTION_POPOUT_ENABLE,!0)}function n(a){if(a.focus){C.info("_refreshModelOnFocusChange: model refreshed",x);s.load()}else{v&&clearTimeout(v);v=setTimeout(o,D)}}function o(){if(!u.isFocus()&&!u.isHidden()){C.info("_refreshModelOnVisibility: model refreshed",x);s.load();v&&clearTimeout(v);v=setTimeout(o,D)}}function p(a){t.trigger({appName:y.UISTATE,eventName:z.uiState.EMBEDDED_CHANGED,data:a&&a.newValue})}function q(a){t.trigger({appName:y.UISTATE,eventName:z.uiState.POP_OUT,data:{popOut:!a.window.embedded}})}var r,s,t,u,v,w,x="UIStateManager",y=lpTag.unifiedWindow.apps,z=lpTag.unifiedWindow.events,A={MAXIMIZED:!0,MINIMIZED:!1},B=lpTag.unifiedWindow.uiModelPath,C=lpTag.unifiedWindow.log,D=1e3;b(a);this.WINDOW_STATE=A;this.setWindowState=d;this.setEmbeddedState=h;this.setWindowPosition=e;this.setActionsVisibility=f;this.setSoundState=g;this.clear=c};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.IdnvManager=function(a){function b(a){w.info("init",v);if("object"==typeof a){t=a.appContext;u=a.lppModel}else w.error("init: missing mandatory dependencies.",v)}function c(a){return a.text&&a.text.indexOf&&(a.text.indexOf(C.attrs.questionType)>-1||a.text.indexOf(C.attrs.answerType)>-1)?!0:!1}function d(a){if("visitor"===a.source){a=h(a);a.source="system"}else a=g(a);return a}function e(a){var b=k(a);p(b);n(z.lineId,C.states.CANCELLED);z={}}function f(a){var b=j(a);p(b);n(z.lineId,C.states.SUBMITTED);z={}}function g(a){var b,c=a["@id"],d=o(c);d||(d=m(c));if(d===C.states.PENDING){b=r(a.text);if(b){z={lineId:c,encodedFields:b.encodedFields};s.call(this,lpTag.unifiedWindow.events.viewController.DIALOG,b)}}return a}function h(a){var b=a.text.indexOf(C.attrs.action)>-1?!0:!1,c=r(a.text);if(c.encodedFields===z.encodedFields){s.call(this,lpTag.unifiedWindow.events.viewController.DIALOG_STATE_CHANGED,{});z={}}b?a.text=i(c.fields):a.text=k(c.encodedFields);return a}function i(a){var b=t.translator.translate("idnvFormSubmitted",!0);return x.injectTextObj(b,{idnvChar1:a.firstChar,idnvChar2:a.secondChar,idnvType:a.typeField})}function j(a){var b=t.translator.translate("idnvAnswer",!0);b=x.injectTextObj(b,{idnvAnswer1:a.firstChar,idnvAnswer2:a.secondChar});return l(b,a.idnvData.encodedFields,!0)}function k(a){return l(t.translator.dictionary.getString("idnvFormCancelled"),a,!1)}function l(a,b,c){var d;c&&(d=C.attrs.action+'="mask"');return x.injectTextObj(B,{payload:b,mask:d,text:a})}function m(a){var b;b=z.lineId&&a!==z.lineId?C.states.SKIPPED:C.states.PENDING;n(a,b);return b}function n(a,b){u.modify(A.IDNV_DATA.path+"."+a+".state",b)}function o(a){return u.get(A.IDNV_DATA.path+"."+a+".state")}function p(a){var b={text:a},c={error:q()};t.transcriptManager.sendLineSkipLocal(b,c)}function q(){return function(){t.events.trigger({appName:"tooltip",eventName:"show",data:{text:t.translator.translate("idnvSendLineError"),tooltipTimeout:y}})}}function r(a){var b,c,d=a.match(/<span.*<\/span>/g);if(d&&d[0]){b=lpTag.lpUtils.getAttrValue(d[0],C.attrs.payload);if(b){c=JSON.parse(decodeURIComponent(b));return{encodedFields:b,fields:c}}}return null}function s(a,b){var c={context:this,data:{ControllerName:lpTag.unifiedWindow.IdnvDialogViewController.ControllerName,idnvData:b,dialogOpenedFrom:this}};t.events.trigger({appName:v,eventName:a,data:c})}var t,u,v="IdnvManager",w=lpTag.unifiedWindow.log,x=lpTag.unifiedWindow.applicationUtils,y=3e3,z={},A=lpTag.unifiedWindow.uiModelPath,B='<span data-lp-collab-type="idnv_answer" data-lp-collab-payload={{payload}} {{mask}}>{{text}}</span>',C={attrs:{type:"data-lp-collab-type",payload:"data-lp-collab-payload",action:"data-lp-action",questionType:"idnv_question",answerType:"idnv_answer"},states:{PENDING:"pending",CANCELLED:"cancelled",SUBMITTED:"submitted",SKIPPED:"skipped"}};b(a);this.isIdnvLineObj=c;this.processIdnvLineObj=d;this.sendIdnvCancelLine=e;this.sendIdnvSubmitLine=f};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow.WidgetManager=window.lpTag.unifiedWindow.WidgetManager||function(a){function b(a){T.info("init",S);H=a.lpModel;I=a.lppModel;J=a.wsdkModel;K=lpTag.LPWidgetSDK.API;L=a.events;M=a.windowSDKEvents;N=a.appContext;O=lpTag.unifiedWindow.consts.widgetSDK;Q=U.getPropertyFromObject(N,"conf.engConf.async");R=lpTag.unifiedWindow.State;d()}function c(){M.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:W.widgetSDK.INIT})}function d(){L.bind({appName:"*",eventName:W.widgetSDK.INIT,context:this,func:c});X.push(L.bind({appName:"*",eventName:W.widgetSDK.VISITOR_TYPING,context:this,func:z}));X.push(L.bind({appName:"*",eventName:W.chat.LINE,context:this,func:B}));X.push(L.bind({appName:"*",eventName:W.chat.CHAT_INFO,context:this,func:n}));X.push(L.bind({appName:"*",eventName:W.chat.STATE,func:u}));X.push(L.bind({appName:"slider",
eventName:W.viewController.SLIDER_VIEW_CHANGE,context:this,func:v}));X.push(L.bind({appName:"slider",eventName:W.viewController.SLIDER_CLOSED,context:this,func:w}));X.push(L.bind({appName:"WrapperWindowExtender",eventName:W.viewController.MINIMIZE_VISIBLE,context:this,func:function(){A(!1)}}));X.push(L.bind({appName:"WrapperWindowExtender",eventName:W.viewController.MAXIMIZE_VISIBLE,context:this,func:function(){A(!0)}}));M.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.NOTIFICATION,context:this,func:i});M.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.INITIATED_WIDGET_ID,context:this,func:e});H.bind(lpTag.unifiedWindow.chatModelPath.AGENT_IS_TYPING,y)}function e(a){var b=I.get(lpTag.unifiedWindow.uiModelPath.INITIATED_WIDGETS_IDS)||{};b[a]=!0;I.modify(lpTag.unifiedWindow.uiModelPath.INITIATED_WIDGETS_IDS,b);H.modify(lpTag.unifiedWindow.chatModelPath.SDK_BUTTON_ENABLE,!0)}function f(a){var b,c=I.get(lpTag.unifiedWindow.uiModelPath.DISPOSED_WIDGETS_IDS)||{},d=!1;c[a]=!1;I.modify(lpTag.unifiedWindow.uiModelPath.DISPOSED_WIDGETS_IDS,c);b=g();for(var e in b)if(b[e]===!0){d=!0;break}d||H.modify(lpTag.unifiedWindow.chatModelPath.SDK_BUTTON_ENABLE,!1)}function g(){var a=I.get(lpTag.unifiedWindow.uiModelPath.INITIATED_WIDGETS_IDS),b=I.get(lpTag.unifiedWindow.uiModelPath.DISPOSED_WIDGETS_IDS);if(b&&a)for(var c in b)a[c]=!1;return a||{}}function h(){var a=I.get(lpTag.unifiedWindow.uiModelPath.SELECTED_WIDGET_ID),b=I.get(lpTag.unifiedWindow.uiModelPath.WIDGET_SLIDER_VISIBLE);return a&&b?a:void 0}function i(a){"number"==typeof a&&a>=0&&H.modify(lpTag.unifiedWindow.chatModelPath.SDK_NOTIFICATIONS,a)}function j(){return I.get(lpTag.unifiedWindow.uiModelPath.WIDGETS_NOTIICATIONS)||{}}function k(){return I.get(lpTag.unifiedWindow.uiModelPath.WIDGET_SLIDER_VISIBLE)}function l(){return I.get(lpTag.unifiedWindow.uiModelPath.WINDOW_MAXIMIZED)}function m(a){I.removeKey(lpTag.unifiedWindow.uiModelPath.WIDGETS_NOTIICATIONS);I.modify(lpTag.unifiedWindow.uiModelPath.WIDGETS_NOTIICATIONS,a)}function n(a){if(a){a.rtSessionId&&!P&&(P=a.rtSessionId);if(P){o(a);p(a,t(P));(a.agentName&&a.agentId||a.visitorId&&a.visitorName)&&q(a)}}}function o(a){var b=J.get(V.CONVERSATION)||{},c=!1;if(!b.id&&a.rtSessionId){b.id=a.rtSessionId;c=!0}if(!b.sessionId&&a.monitoringSessionId){b.sessionId=a.monitoringSessionId;c=!0}c&&J.modify(V.CONVERSATION,b)}function p(a,b){var c=J.get(V.CONVERSATION),d=!1;if(b&&a){if(a.chatState&&b.state!==F(a.chatState)){b.state=F(a.chatState);d=!0}if(!b.startTime&&a.lastUpdate){b.startTime=a.lastUpdate;d=!0}if(a.skill&&b.skill!==a.skill){b.skill={name:a.skill,id:""};d=!0}if(a.typing){b.typing=a.typing;d=!0}if(d){J.modify(V.DIALOGS,[b],"id");M.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:W.widgetSDK.CONVERSATION_INFO,data:{conversationId:c.id,sessionId:c.sessionId,dialogId:b.id,startTime:b.startTime,state:b.state,dialogType:b.dialogType,channelType:b.channelType,skill:b.skill,typing:b.typing}})}}}function q(a){a.agentName&&a.agentId&&r({id:a.agentId,name:a.agentName,type:O.AGENT,imgPath:U.getPropertyFromObject(N,"conf.windowConf.agentUrl")||"",description:U.getPropertyFromObject(N,"conf.windowConf.description")||""});a.visitorId&&a.visitorName&&r({id:a.visitorId,name:a.visitorName,type:O.VISITOR})}function r(a){for(var b,c=t(P),d=!1,e=0;e<c.participants.length;e++)if(c.participants[e].id===a.id){b=c.participants[e];break}if(b){if(!b.name){b.name=a.name;d=!0}if(a.type===O.AGENT){if(!b.imgPath&&a.imgPath){b.imgPath=a.imgPath;d=!0}if(!b.description&&a.description){b.description=a.description;d=!0}}d&&s(c)}else{c.participants.push(a);s(c)}}function s(a){J.modify(V.DIALOGS,[a],"id");M.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:W.widgetSDK.PARTICIPANTS,data:a.participants})}function t(a){var b,c;if(a){b=J.get(V.DIALOGS);c={id:a,startTime:null,state:null,dialogType:null,channelType:Q?O.CHANNEL_TYPE_MESSAGING:O.CHANNEL_TYPE_CHAT,messages:[],participants:[],typing:{agent:!1,visitor:!1}};if(b)for(var d=0;d<b.length;d++)b[d].id===a&&(c=b[d]);return c}}function u(a){var b,c;if(a!==lpTag.unifiedWindow.State.INIT&&a!==lpTag.unifiedWindow.State.INITIALIZED){b=F(a);c=t(P);c&&c.state!==b&&p({state:b},c);M.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:W.widgetSDK.CONVERSATION_STATE,data:b})}}function v(a){var b=a.type===lpTag.unifiedWindow.consts.slider.viewType.widgetSDKView;b?I.modify(lpTag.unifiedWindow.uiModelPath.SELECTED_WIDGET_ID,a.id):I.removeKey(lpTag.unifiedWindow.uiModelPath.SELECTED_WIDGET_ID);x(a,!0)}function w(a){x(a,!1)}function x(a,b){M.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:W.widgetSDK.WIDGET_AREA_STATE,data:{isOpened:b,type:a.type}});I.modify(lpTag.unifiedWindow.uiModelPath.WIDGET_SLIDER_VISIBLE,b)}function y(a){var b,c;if(a&&"boolean"==typeof a.newValue){b=t(P);c=b.typing;if(c.agent!==a.newValue){c.agent=a.newValue;p({typing:c},b)}}}function z(a){var b,c;if("boolean"==typeof a){b=t(P);c=b.typing;if(c.visitor!==a){c.visitor=a;p({typing:c},b)}}}function A(a){var b=J.get(V.WINDOW_UI),c=b&&b.isMaximized;("boolean"!=typeof c||"boolean"==typeof a&&a!==c)&&J.modify(V.WINDOW_UI,{isMaximized:a})}function B(a){var b,c=C(a,W.chat.LINE);if(c){E(c);b=t(P);b.messages.push(c);J.modify(V.DIALOGS,[b],"id");M.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:W.widgetSDK.MESSAGES,data:c})}}function C(a,b){var c;if(a)switch(b){case W.chat.LINE:if(a.type===W.chat.SECURE_FORM)return null;c={};c.type=O.contentType.text;c.id=a["@id"]||a.id;c.ts=a.time;c.content=D(a.text);c.originator={type:a.source,name:a.by};break;case W.chat.CHAT_INFO:}return c}function D(a){var b="";if("string"==typeof a){Z.lastIndex=null;b=a.replace(Z,"<img alt='filteredImg'>")}return b}function E(a){var b=t(P);if(b&&b.state===lpTag.WindowSDKAPI.states.ACCEPTED){a.source===O.VISITOR?Y.visitor=!0:a.source===O.AGENT&&(Y.agent=!0);Y.agent&&Y.visitor&&p({state:lpTag.LPWidgetSDK.API.states.INTERACTIVE},b)}}function F(a){var b=lpTag.unifiedWindow.State,c=lpTag.LPWidgetSDK.API.states;switch(a){case b.PRE_CHAT:return c.PRE_CONVERSATION;case b.WAITING:case b.REQUESTED:return c.PENDING;case b.CHATTING:return c.ACCEPTED;case b.POST_CHAT:return c.POST_CONVERSATION;case b.ENDED:return c.CONVERSATION_ENDED;case b.OFFLINE:return c.OFFLINE;case b.ERROR:case b.NOT_FOUND:return c.ERROR;default:return a}}function G(){T.info("dispose",S);X.forEach(function(a){L.unbind(a)});M.unbind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.NOTIFICATION,context:this,func:i})}var H,I,J,K,L,M,N,O,P,Q,R,S="WidgetManager",T=lpTag.unifiedWindow.log,U=lpTag.taglets.lpUtil,V=lpTag.unifiedWindow.widgetModelPath,W=lpTag.unifiedWindow.events,X=[],Y={agent:!1,visitor:!1},Z=/(<img.*?>)/g;b(a);this.dispose=G;this.getWidgetsStatus=g;this.getLastShownWidgetId=h;this.getWidgetsNotifications=j;this.getLastSliderState=k;this.isWindowMaximized=l;this.setWIdgetsNotifications=m;this.handleWidgetDisposal=f};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow.AuthenticationManager=window.lpTag.unifiedWindow.AuthenticationManager||function(a){function b(a){i=a.appContext}function c(a,b){k.info("authenticate",j);var c=i.conf.unifiedConf.authToken||i.conf.unifiedConf.poppedOut,f=i.conf.engConf.async&&i.conf.authConf&&i.conf.authConf.ssoKey;if(l){var g=d();c?m.runCallback(a,null,{ssoKey:i.conf.unifiedConf.authToken,redirect_uri:g}):f?m.runCallback(a,null,{ssoKey:i.conf.authConf.ssoKey,redirect_uri:g}):l.getSSOKey(i.conf.authConf&&i.conf.authConf.connector,e(a),b)}else{k.error("Not authenticator",j);m.runCallback(b)}}function d(){var a=null,b=i.conf.unifiedConf.useOAuth2Standard||i.conf.authConf&&i.conf.authConf.connector&&i.conf.authConf.connector.configuration&&i.conf.authConf.connector.configuration.rfcCompliance;a=i.conf.authConf&&i.conf.authConf.redirect_uri?i.conf.authConf.redirect_uri:b&&i.conf.unifiedConf.external?lpTag.lpUtils.getCurrentUrlWithoutParams():lpTag.unifiedWindow.consts.defaultRedirectUri;return a}function e(a){return function(b){b&&(b.redirect_uri=b.redirect_uri||d());a(b)}}function f(a,b){k.info("reAuthenticate",j);l&&l.getSSOKey(i.conf.authConf&&i.conf.authConf.connector,e(a),b)}function g(){if(l)return l.isErroneous();k.error("Not authenticator",j);return void 0}function h(){k.info("dispose",j)}var i,j="AuthenticationManager",k=lpTag.unifiedWindow.log,l=lpTag.taglets.authenticator,m=lpTag.taglets.lpUtil;b(a);this.authenticate=c;this.reAuthenticate=f;this.isErroneous=g;this.dispose=h};lpTag.unifiedWindow.webViewPlugin=lpTag.unifiedWindow.webViewPlugin||function(a){function b(){if(i&&"function"==typeof i.unbind)for(var b=0;b<p.length;b++)i.unbind(p[b]);a=null;i=null;j=null;p.length=0}function c(){if(i&&"function"==typeof i.bind){d(k.INITIALIZED,"onInit");d(k.STATE,"onConversationStateChanged");d(k.LINE,"onConversationLine");d(k.CHAT_INFO,"onConversationInfo");d(m.DO_HARAKIRI,"onApplicationEnded");d(l.MINIMIZED,"onBackClicked");d(k.SESSION_DATA,"onSessionData")}else j.error("No events object found",g)}function d(b,c){var d,f;a.IOS&&o?d=function(a,b){a=e(b.appName,b.eventName,a);o[c].postMessage(a)}:n&&"function"==typeof n[c]&&(d=function(a,b){a=e(b.appName,b.eventName,a);n[c].call(n,"string"!=typeof a?JSON.stringify(a):a)});if(d){f=i.bind({eventName:b,func:d,context:n,async:!0});p.push(f)}else j.error("No callback defined, missing android object",b)}function e(a,b,c){var d=c,e=c&&r&&r[a]&&r[a][b];if(e){e=Array.isArray(e)?e[0]:e;d=f({data:c},e.data)}return d}function f(a,b){var c={};if("object"==typeof b)for(var d in b)c[d]=q.getPropertyFromObject(a,b[d]);else c=q.getPropertyFromObject(a,b);return c}var g="webViewPlugin",h=lpTag.unifiedWindow.events,i=a&&a.events,j=a&&a.log,k=h.chat,l=h.uiState,m=h.application,n=window.android,o=window.webkit&&window.webkit.messageHandlers,p=[],q=lpTag.taglets.lpUtil,r=q.getPropertyFromObject(lpTag,"unifiedWindow.publicEvents");c();return{dispose:b}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.helpers=lpTag.unifiedWindow.helpers||{};lpTag.unifiedWindow.helpers.LocalizationHelper=lpTag.unifiedWindow.helpers.LocalizationHelper||function(a){function b(a){return i[a]===!0}function c(a,b,c){var d=e(c),i=f(c),k=g(d,b);if(k){h.addClass(a,j[d]);h.removeClass(a,j[i])}else{h.addClass(a,j[i]);h.removeClass(a,j[d])}}function d(a){h=a.util}function e(a){return b(a)?"RTL":"LTR"}function f(a){return b(a)?"LTR":"RTL"}function g(a,b){var c,d="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿Ⰰ-﬜﷾-﹯﻽-￿",e="֑-߿יִ-﷽ﹰ-ﻼ";c="rtl"===a.toLowerCase()?new RegExp("^[^"+e+"]*["+d+"]"):new RegExp("^[^"+d+"]*["+e+"]");return!c.test(b)}var h,i={"he-IL":!0,"ar-AE":!0},j={LTR:"lp_ltr",RTL:"lp_rtl"};d(a);return{applyDirOnElement:c,isLanguageRTL:b}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.helpers=lpTag.unifiedWindow.helpers||{};lpTag.unifiedWindow.helpers.SecureFormStyleHelper=lpTag.unifiedWindow.helpers.SecureFormStyleHelper||function(a){function b(a){g=a}function c(){var a=d(),b=e(a),c=JSON.stringify(b);return encodeURIComponent(c)}function d(){var a={};for(var b in h)h.hasOwnProperty(b)&&(a[b]=g.themer.getStyle(b));return a}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[h[c]]=f(a[c],i));return b}function f(a,b){var c={};if(a)for(var d in a)a.hasOwnProperty(d)&&(c[b[d]]=a[d]);return c}var g,h={surveyArea:1,button:2},i={"background-color":"bc",color:"c","font-family":"f"};b(a);return{getCompressedCSS:c}};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,b){for(var d,e=a.getElementsByClass(document.body,a.appConsts.engagementContainerClass,[]),f=0;f<e.length;f++){d=c(e[f],b);if(d)return!0}return!1}function b(a){return document.body.className===a.appConsts.reCaptchaContainerClass}function c(a,b){return b===a||a.contains(b)}var d;lpTag.unifiedWindow.BaseViewController=window.liveperson.uiframework.latest.ViewController.extend({ControllerName:"BaseViewController",logger:lpTag.unifiedWindow.log,util:lpTag.taglets.lpUtil,uiPath:lpTag.unifiedWindow.uiModelPath,chatPath:lpTag.unifiedWindow.chatModelPath,EventName:lpTag.unifiedWindow.events,appConsts:lpTag.unifiedWindow.consts,VCEvents:lpTag.unifiedWindow.events.viewController,State:lpTag.unifiedWindow.State,prefixPlaceHolder:"{{PREFIX}}",customAnimationDurations:{},animationClasses:{bounce:"lpBounceClass",shakeX:"lpShakeXClass",shakeY:"lpShakeYClass"},initialize:function(a){this.uiPath=lpTag.unifiedWindow.uiModelPath;this.chatPath=lpTag.unifiedWindow.chatModelPath;this.appContext=a.appContext;if(!d.animationCreated&&this.appContext.deviceDetector.isAnimationSupported()){d.animationPrefix=this.appContext.deviceDetector.getAnimationData().preFix;d.animationsSupported=!0;d.cssAnimation=document.createElement("style");d.cssAnimation.type="text/css";document.getElementsByTagName("head")[0].appendChild(d.cssAnimation);this.createDefaultAnimations()}}});d=lpTag.unifiedWindow.BaseViewController.prototype;d.templateString=function(a,b){var c=window.liveperson.uiframework.latest.ViewController.prototype.templateString.call(this,a,b);return this.customize(c)};d.createDefaultAnimations=function(){if(!d.animationCreated){this.createKeyframe(this.animationClasses.bounce,[{percent:0,animate:this.prefixPlaceHolder+"transform: scale(1, 1);"},{percent:40,animate:this.prefixPlaceHolder+"transform: scale(1.15, 1.1);"},{percent:100,animate:this.prefixPlaceHolder+"transform: scale(1, 1);"}],500);this.createKeyframe(this.animationClasses.shakeX,[{percent:0,animate:this.prefixPlaceHolder+"transform: translateX(0px);"},{percent:20,animate:this.prefixPlaceHolder+"transform: translateX(-15px);"},{percent:40,animate:this.prefixPlaceHolder+"transform: translateX(15px); "},{percent:60,animate:this.prefixPlaceHolder+"transform: translateX(-10px);"},{percent:80,animate:this.prefixPlaceHolder+"transform: translateX(10px);"},{percent:100,animate:this.prefixPlaceHolder+"transform: translateX(0px);"}],400);this.createKeyframe(this.animationClasses.shakeY,[{percent:0,animate:this.prefixPlaceHolder+"transform: translateY(0px);"},{percent:20,animate:this.prefixPlaceHolder+"transform: translateY(-15px);"},{percent:40,animate:this.prefixPlaceHolder+"transform: translateY(15px); "},{percent:60,animate:this.prefixPlaceHolder+"transform: translateY(-10px);"},{percent:80,animate:this.prefixPlaceHolder+"transform: translateY(10px);"},{percent:100,animate:this.prefixPlaceHolder+"transform: translateY(0px);"}],400);d.animationCreated=!0}};d.createKeyframe=function(a,b,c){if(d.cssAnimation){for(var e="."+a+" {"+d.animationPrefix+"animation: lpanim_"+a+" "+c/1e3+"s 0s 1 ease-in-out;}@"+d.animationPrefix+"keyframes lpanim_"+a+" {",f=0;f<b.length;f++)e+=""+b[f].percent+"% {"+b[f].animate+"}";e+="}";var g=new RegExp(this.prefixPlaceHolder,"g");e=e.replace(g,this.animationPrefix);d.customAnimationDurations[a]=c;this.cssAnimation.appendChild(document.createTextNode(e))}};d.bounce=function(a,b){this.animateKeyframe({view:a,classname:this.animationClasses.bounce,callback:b,showAnimation:!0})};d.shakeX=function(a,b){this.animateKeyframe({view:a,classname:this.animationClasses.shakeX,callback:b,showAnimation:!0})};d.shakeY=function(a,b){this.animateKeyframe({view:a,classname:this.animationClasses.shakeY,callback:b,showAnimation:!0})};d.animateKeyframe=function(a){var b=a.classname,c=a.callback,e=a.showBefore,f=a.hideAfter,g=a.view,h=a.showAnimation,i=d.customAnimationDurations[b];"number"!=typeof i&&(i=0);"string"==typeof g&&(g=this.getFirstElement(g));if(h&&this.animationsSupported&&g&&!this.animationInProgress&&this.animationCreated){this.animationInProgress=!0;var j=this;this.addClass(g,b);e&&this.show(g);setTimeout(function(){j.animationInProgress=!1;j.removeClass(g,b);f&&j.hide(g);c&&"function"==typeof c&&c.call(j)},i)}else{f?this.hide(g):e&&this.show(g);c&&"function"==typeof c&&c.call(this)}};d.focusOnElement=function(a,b){var c=b||this.view,d=this.getFirstElement(a,c);d&&1===d.nodeType&&d.focus()};d.isFocusInsideApp=function(){var c=document.activeElement,d=this.appContext.wrapperWindow.getChatWrapperElement();return!c||c&&d&&d.contains(c)||c===document.body||a(this,c)||b(this,c)?!0:!1};d.getMonthNames=function(){return[this.translate("monthJanuary"),this.translate("monthFebruary"),this.translate("monthMarch"),this.translate("monthApril"),this.translate("monthMay"),this.translate("monthJune"),this.translate("monthJuly"),this.translate("monthAugust"),this.translate("monthSeptember"),this.translate("monthOctober"),this.translate("monthNovember"),this.translate("monthDecember")]}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){if(a)for(var c,d=b(a),e=0;e<d.length;e++){c=this.translate(d[e])||"";a=a.replace("{{"+d[e]+"}}",c)}return a}function b(a){var b=[],c="string"==typeof a&&a.match(e);if(c)for(var d=0;d<c.length;d++)"string"==typeof c[d]&&b.push(c[d].substring(2,c[d].length-2));return b}var c,d="en-US",e=/({{\w+)(?![{])}}/gi;lpTag.unifiedWindow.Translator=function(a){function b(){this.dictionary=lpTag.unifiedWindow.language;this.dictionary.setLocale(a)}b.call(this,a)};c=lpTag.unifiedWindow.Translator.prototype;c.extendDictionary=function(a,b){b=b||{};b.locale=b.locale||d;this.dictionary.add(a,b)};c.translate=function(b,c){var d=this.dictionary.getString(b);c||(d=a.call(this,d));return d}}();window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.applicationUtils=lpTag.unifiedWindow.applicationUtils||function(){function indexOf(a,b){if("function"==typeof[].indexOf&&"function"==typeof a.indexOf)return a.indexOf(b);if(a.constructor===Array)for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1}function trim(a){return"string"!=typeof a?a:a.trim?a.trim():a.replace(/^\s+|\s+$/gm,"")}function trimAndLower(a){if("string"!=typeof a)return a;var b=trim(a);return b.toLowerCase()}function injectTextObj(a,b){function c(a,b,c,d){for(var e,f,g=-1,h=c,i=a.length,j=b.length,k=h.indexOf(a);k>-1;){k+=i;g=h.substring(k).indexOf(b);if(g>-1){e=h.substring(k,k+g);f=d&&d[e];d&&"undefined"!=typeof d[e]&&(f=d[e]);void 0!==f&&(c=c.replace(a+e+b,f));h=h.substring(k+g+j)}else h=h.substring(k+j);g=-1;k=h.indexOf(a)}return c}a=c("{{","}}",a,b);return a}function getDomain(a,b){var c=new RegExp(/((?:http|ftp|ws){1}s{0,1}?:\/\/){0,1}([^\/\?\/:]+)(\/?)/gi),d=c.exec(a),e=null;if(d&&d.length>=3&&""!==d[2]){e=d[2].toLowerCase();b&&(e=d[1]+e)}return e}function getURLParams(a){var b,c,d={};if("string"==typeof a){b=a.substr(1).split("&");for(var e=0;e<b.length;e++)if(b[e].indexOf("=")>-0){c=b[e].split("=");2==c.length&&(d[decodeURIComponent(c[0])]=decodeURIComponent(c[1]))}}return d}function getParentDomain(a){a=""+a;var b,c,d=null,e={top:null,country:null};a=getDomain(a);b=a.split(".");if(b.length<3)return a;for(var f=b.length-1,g=f;g>-1;g--){_getIndexOfDomainPart(b[g],e,g);if(null!==e.country&&null!==e.top)break}if(null!==e.top||null!==e.country){d=e.top;(null===d||null!==e.country&&e.country<d&&d-1===e.country)&&(d=e.country);c=d>0?d-1:d;return _rebuildHostName(b.slice(c))}return a}function _rebuildHostName(a){return a.join(".")}function _getIndexOfDomainPart(a,b,c){a=""+a;null===b.top&&(IANADomains.topLevelDomain[a]||IANADomains.customTopLevelDomain[a])?b.top=c:null===b.country&&IANADomains.countryTopLevelDomain[a]&&(b.country=c)}function cloneExtend(a,b,c){var d;if(!a||"object"!=typeof a)return a;if(!b)return clone(a);d=b||a.constructor()||{};for(var e in a)d[e]!==a[e]&&a.hasOwnProperty(e)&&(d[e]=c?cloneExtend(a[e],void 0,c):a[e]);return d}function clone(a){try{return JSON.parse(stringify(a))}catch(b){lpTag.log("unable to clone object:"+JSON.stringify(b),"ERROR",name);return}}function convertConfig(conf,_config){if("undefined"!=typeof _config){if(conf)for(var i=0;i<conf.length;i++){var val=conf[i].value;if("string"==typeof val&&""!==val)if("true"===val)val=!0;else if("false"===val)val=!1;else if("["==val.charAt(0)||"{"==val.charAt(0))try{val="undefined"!=typeof JSON&&JSON.parse?JSON.parse(val):eval("("+val+")")}catch(e){lpTag.log("unable to parse JSON:"+JSON.stringify(e),"ERROR",name)}_config[conf[i].id]=val}}else lpTag.log("_config is passed as undefined","ERROR",name)}function addStyleTag(a,b){if(a&&"string"==typeof a){b=b||{};var c,d=b.document||window.document,e=b.id;if("undefined"!=typeof e){c=d.getElementById(e)||d.createElement("style");c.id=e}else c=d.createElement("style");c.type="text/css";d.getElementsByTagName("head")[0].appendChild(c);c.styleSheet?c.styleSheet.cssText=a:c.appendChild(document.createTextNode(a));return c}}function objectKeys(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=c);return b}function waitForBody(a,b){function c(){e.body?runCallback(a,d):setTimeout(c,50)}b=b||{};var d=b.context,e=b.document||window.document;c()}function stringify(a){var b,c;if("function"==typeof Array.prototype.toJSON){c=Array.prototype.toJSON;delete Array.prototype.toJSON;try{b=JSON.stringify(a)}catch(d){Array.prototype.toJSON=c;throw d}Array.prototype.toJSON=c}else b=JSON.stringify(a);return b}function getUID(){var a="tttttttt-tttt-4ttt-fttt-t7ttttttttttt".replace(/[tf]/g,function(a){var b=16*Math.random()|0,c="t"==a?b:3&b|8;return c.toString(16)});return a+"-"+Math.floor(1e5*Math.random())}function runCallback(a,b){b=b||window;if("function"==typeof a){var c=Array.prototype.slice.call(arguments,2);try{return a.apply(b,c)}catch(d){lpTag.log("Failed to execute callback exc= "+d.message,"ERROR",name)}}}function runCallbackByObject(a,b,c){if("function"==typeof getPropertyFromObject){a=a||{};var d=getPropertyFromObject(window,a.jsContext),e=getPropertyFromObject(window,a.jsMethodName);if("function"!=typeof e){lpTag.log("runCallbackByObject err=function "+a.jsMethodName+" was not found","ERROR","utils");c()}else{lpTag.log("runCallbackByObject calling function "+a.jsMethodName,"DEBUG","utils");e.call(d,b)}}else lpTag.log("lpTag.taglets.lpUtil.getPropertyFromObject is not a function","ERROR","utils")}function registerEvent(a,b,c){a&&b&&c&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c))}function unregisterEvent(a,b,c){a&&b&&c&&(a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c))}function buildClassString(a,b,c){var d,e;a="string"==typeof a?a:"";d=a.split(" ");e=b&&b.constructor===Array?b:"string"==typeof b?[b]:[];c=c&&c.constructor===Array?c:"string"==typeof c?[c]:[];for(var f=0;f<d.length;f++)indexOf(c,d[f])<0&&indexOf(e,d[f])<0&&e.push(d[f]);return e.join(" ").replace(/$\s/gi,"")}function isEmpty(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function _removeSpaces(a){return trim(a.replace(/\s\s*/g," "))}function isDomNode(a){return"object"==typeof a&&1===a.nodeType}function isNodeList(a){return"undefined"!=typeof a.length&&"undefined"!=typeof a.item}function hasClass(a,b){return a.className.indexOf(b)>-1}function groupByKeyValue(a,b){var c={};a.forEach(function(a){var d=a[b];c[d]=c[d]||[];c[d].push(a)});return c}function isArray(a){return"undefined"!=typeof a&&a.constructor===Array}function sortByKeyValue(a,b){var c=a;Array.isArray(a)&&(c=a.sort(function(a,c){return!a[b]||a[b]<c[b]?-1:!c[b]||a[b]>c[b]?1:0}));return c}function cloneObj(a){return JSON.parse(JSON.stringify(a))}function isEmptyLiteral(a){for(var b in a)return!1;return!0}function isSameObject(a,b){var c=null===a&&null===b,d=a===b,e=typeof a==typeof b,f=e&&"undefined"==typeof a,g=e&&"function"==typeof a&&""+a==""+b,h=e&&"object"==typeof a&&null!==a&&null!==b,i=h&&Object.keys(a).length===Object.keys(b).length;return c||f||d||g||i&&_isSameObject(a,b)}function _isSameObject(a,b){var c=!0;for(var d in a){a.hasOwnProperty(d)&&b.hasOwnProperty(d)&&(c="object"==typeof a[d]&&null!==a[d]&&a[d].constructor===Array?stringify(a[d])===stringify(b[d]):isSameObject(a[d],b[d]));if(!c)break}return c}function addClassByArray(a,b){if(isArray(b))for(var c=0;c<b.length;c++)addClassByArray(a,b[c]);else{if(hasClass(a,b))return;var d=a.className?[a.className]:[];d.push(b);a.className=d.join(" ")}}function objectKeysAsArray(a){a=a||{};var b=[];for(var c in a)b.push(c);return b}function removeClassByArray(a,b){if(isArray(b))for(var c=0;c<b.length;c++)removeClassByArray(a,b[c]);else{a.className=a.className.replace(new RegExp(b,"g"),"");a.className=_removeSpaces(a.className)}}function getWindowSize(){var a=document.documentElement,b=document.getElementsByTagName("body")[0],c=a.clientWidth||b.clientWidth||window.innerWidth,d=window.outerHeight||a.clientHeight||b.clientHeight;return{width:c,height:d}}function getPropertyFromObject(a,b,c){var d,e=a;if("string"==typeof b){d=b.split(".");for(var f=0;f<d.length;f++){if("undefined"==typeof e||null===e||"undefined"==typeof e[d[f]]||null===e[d[f]]){e="undefined"!=typeof c?c:void 0;break}e=e[d[f]]}}else lpTag.log("Empty path sent to lookup getPropertyFromObject","DEBUG","utils");return e}function excludeAttributes(a,b){function c(a){Array.isArray(b)&&b.forEach(function(b){"string"==typeof b&&b.length>0&&delete a[b]})}a&&(Array.isArray(a)?a.forEach(function(a){a&&c(a)}):"object"==typeof a&&c(a));return a}var name="ApplicationUtils",IANADomains={customTopLevelDomain:{aero:"aero",asia:"asia",bike:"bike",biz:"biz",camera:"camera",cat:"cat",clothing:"clothing",coop:"coop",equipment:"equipment",estate:"estate",eus:"eus",gallery:"gallery",graphics:"graphics",guru:"guru",info:"info","int":"int",holdings:"holdings",jobs:"jobs",lighting:"lighting",mobi:"mobi",museum:"museum",name:"name",photography:"photography",plumbing:"plumbing",post:"post",pro:"pro",singles:"singles",tel:"tel",travel:"travel",ventures:"ventures",xxx:"xxx"},topLevelDomain:{ac:"ac",co:"co",com:"com",edu:"edu",gov:"gov",mil:"mil",net:"net",org:"org"},countryTopLevelDomain:{ac:"ac",ad:"ad",ae:"ae",af:"af",ag:"ag",ai:"ai",al:"al",am:"am",an:"an",ao:"ao",aq:"aq",ar:"ar",as:"as",at:"at",au:"au",aw:"aw",ax:"ax",az:"az",ba:"ba",bb:"bb",bd:"bd",be:"be",bf:"bf",bg:"bg",bh:"bh",bi:"bi",bj:"bj",bm:"bm",bn:"bn",bo:"bo",bq:"bq",br:"br",bs:"bs",bt:"bt",bv:"bv",bw:"bw",by:"by",bz:"bz",bzh:"bzh",ca:"ca",cc:"cc",cd:"cd",cf:"cf",cg:"cg",ch:"ch",ci:"ci",ck:"ck",cl:"cl",cm:"cm",cn:"cn",co:"co",cr:"cr",cs:"cs",cu:"cu",cv:"cv",cw:"cw",cx:"cx",cy:"cy",cz:"cz",dd:"dd",de:"de",dj:"dj",dk:"dk",dm:"dm","do":"do",dz:"dz",ec:"ec",ee:"ee",eg:"eg",eh:"eh",er:"er",es:"es",et:"et",eu:"eu",fi:"fi",fj:"fj",fk:"fk",fm:"fm",fo:"fo",fr:"fr",ga:"ga",gb:"gb",gd:"gd",ge:"ge",gf:"gf",gg:"gg",gh:"gh",gi:"gi",gl:"gl",gm:"gm",gn:"gn",gp:"gp",gq:"gq",gr:"gr",gs:"gs",gt:"gt",gu:"gu",gw:"gw",gy:"gy",hk:"hk",hm:"hm",hn:"hn",hr:"hr",ht:"ht",hu:"hu",id:"id",ie:"ie",il:"il",im:"im","in":"in",io:"io",iq:"iq",ir:"ir",is:"is",it:"it",je:"je",jm:"jm",jo:"jo",jp:"jp",ke:"ke",kg:"kg",kh:"kh",ki:"ki",km:"km",kn:"kn",kp:"kp",kr:"kr","krd:":"krd",kw:"kw",ky:"ky",kz:"kz",la:"la",lb:"lb",lc:"lc",li:"li",lk:"lk",lr:"lr",ls:"ls",lt:"lt",lu:"lu",lv:"lv",ly:"ly",ma:"ma",mc:"mc",md:"md",me:"me",mg:"mg",mh:"mh",mk:"mk",ml:"ml",mm:"mm",mn:"mn",mo:"mo",mp:"mp",mq:"mq",mr:"mr",ms:"ms",mt:"mt",mu:"mu",mv:"mv",mw:"mw",mx:"mx",my:"my",mz:"mz",na:"na",nc:"nc",ne:"ne",nf:"nf",ng:"ng",ni:"ni",nl:"nl",no:"no",np:"np",nr:"nr",nu:"nu",nz:"nz",om:"om",pa:"pa",pe:"pe",pf:"pf",pg:"pg",ph:"ph",pk:"pk",pl:"pl",pm:"pm",pn:"pn",pr:"pr",ps:"ps",pt:"pt",pw:"pw",py:"py",qa:"qa",re:"re",ro:"ro",rs:"rs",ru:"ru",rw:"rw",sa:"sa",sb:"sb",sc:"sc",sd:"sd",se:"se",sg:"sg",sh:"sh",si:"si",sj:"sj",sk:"sk",sl:"sl",sm:"sm",sn:"sn",so:"so",sr:"sr",ss:"ss",st:"st",su:"su",sv:"sv",sx:"sx",sy:"sy",sz:"sz",tc:"tc",td:"td",tf:"tf",tg:"tg",th:"th",tj:"tj",tk:"tk",tl:"tl",tm:"tm",tn:"tn",to:"to",tp:"tp",tr:"tr",tt:"tt",tv:"tv",tw:"tw",tz:"tz",ua:"ua",ug:"ug",uk:"uk",us:"us",uy:"uy",uz:"uz",va:"va",vc:"vc",ve:"ve",vg:"vg",vi:"vi",vn:"vn",vu:"vu",wf:"wf",ws:"ws",ye:"ye",yt:"yt",yu:"yu",za:"za",zm:"zm",zr:"zr"}},cookieActions={delimiter:"|",set:function(a,b,c){if("string"==typeof a&&b.join&&"function"==typeof b.join){var d=encodeURIComponent(a)+"="+encodeURIComponent(b.join(this.delimiter))+";path=/";"undefined"!=typeof c&&(d+=";domain="+c);document.cookie=d;return!0}},get:function(a){var b="\\$&";if("string"==typeof a){var c=document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,b)+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1")||null;if("string"==typeof c){var d=decodeURIComponent(c);if(d)return d.split(this.delimiter)}}},remove:function(a,b){if("string"==typeof a){this.set(a,["null"],b);return!0}}};return{indexOf:indexOf,trim:trim,trimAndLower:trimAndLower,injectTextObj:injectTextObj,getDomain:getDomain,getURLParams:getURLParams,getParentDomain:getParentDomain,cloneExtend:cloneExtend,clone:clone,convertConfig:convertConfig,addStyleTag:addStyleTag,objectKeys:objectKeys,waitForBody:waitForBody,stringify:stringify,cookieActions:cookieActions,getUID:getUID,runCallback:runCallback,runCallbackByObject:runCallbackByObject,registerEvent:registerEvent,unregisterEvent:unregisterEvent,buildClassString:buildClassString,isEmpty:isEmpty,isDomNode:isDomNode,isNodeList:isNodeList,hasClass:hasClass,groupByKeyValue:groupByKeyValue,isArray:isArray,sortByKeyValue:sortByKeyValue,cloneObj:cloneObj,isEmptyLiteral:isEmptyLiteral,isSameObject:isSameObject,addClassByArray:addClassByArray,objectKeysAsArray:objectKeysAsArray,removeClassByArray:removeClassByArray,getWindowSize:getWindowSize,getPropertyFromObject:getPropertyFromObject,excludeAttributes:excludeAttributes}}();window.lpTag=window.lpTag||{};(function(){this.JsonPollock=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="/dist/",b(b.s=65)}([function(a,b,c){"use strict";function d(a,b){b=b||{};for(var c in a)b[c]=a[c];return b}function e(a,b,c){var d=c?" !== ":" === ",e=c?" || ":" && ",f=c?"!":"",g=c?"":"!";switch(a){case"null":return b+d+"null";case"array":return f+"Array.isArray("+b+")";case"object":return"("+f+b+e+"typeof "+b+d+'"object"'+e+g+"Array.isArray("+b+"))";case"integer":return"(typeof "+b+d+'"number"'+e+g+"("+b+" % 1)"+e+b+d+b+")";default:return"typeof "+b+d+'"'+a+'"'}}function f(a,b){switch(a.length){case 1:return e(a[0],b,!0);default:var c="",d=h(a);d.array&&d.object&&(c=d["null"]?"(":"(!"+b+" || ",c+="typeof "+b+' !== "object")',delete d["null"],delete d.array,delete d.object),d.number&&delete d.integer;for(var f in d)c+=(c?" && ":"")+e(f,b,!0);return c}}function g(a,b){if(Array.isArray(b)){for(var c=[],d=0;d<b.length;d++){var e=b[d];z[e]?c[c.length]=e:"array"===a&&"array"===e&&(c[c.length]=e)}if(c.length)return c}else{if(z[b])return[b];if("array"===a&&"array"===b)return["array"]}}function h(a){for(var b={},c=0;c<a.length;c++)b[a[c]]=!0;return b}function i(a){return"number"==typeof a?"["+a+"]":A.test(a)?"."+a:"['"+j(a)+"']"}function j(a){return a.replace(B,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function k(a,b){b+="[^0-9]";var c=a.match(new RegExp(b,"g"));return c?c.length:0}function l(a,b,c){return b+="([^0-9])",c=c.replace(/\$/g,"$$$$"),a.replace(new RegExp(b,"g"),c+"$1")}function m(a){return a.replace(C,"").replace(D,"").replace(E,"if (!($1))")}function n(a,b){var c=a.match(F);return c&&2==c.length&&(a=b?a.replace(H,"").replace(K,L):a.replace(G,"").replace(I,J)),c=a.match(M),c&&3===c.length?a.replace(N,""):a}function o(a,b){if("boolean"==typeof a)return!a;for(var c in a)if(b[c])return!0}function p(a,b,c){if("boolean"==typeof a)return!a&&"not"!=c;for(var d in a)if(d!=c&&b[d])return!0}function q(a){return"'"+j(a)+"'"}function r(a,b,c,d){return u(a,c?"'/' + "+b+(d?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):d?"'[' + "+b+" + ']'":"'[\\'' + "+b+" + '\\']'");
}function s(a,b,c){return u(a,q(c?"/"+x(b):i(b)))}function t(a,b,c){var d,e,f,g;if(""===a)return"rootData";if("/"==a[0]){if(!O.test(a))throw new Error("Invalid JSON-pointer: "+a);e=a,f="rootData"}else{if(!(g=a.match(P)))throw new Error("Invalid JSON-pointer: "+a);if(d=+g[1],"#"==(e=g[2])){if(d>=b)throw new Error("Cannot access property/index "+d+" levels up, current level is "+b);return c[b-d]}if(d>b)throw new Error("Cannot access data "+d+" levels up, current level is "+b);if(f="data"+(b-d||""),!e)return f}for(var h=f,j=e.split("/"),k=0;k<j.length;k++){var l=j[k];l&&(f+=i(y(l)),h+=" && "+f)}return h}function u(a,b){return'""'==a?b:(a+" + "+b).replace(/' \+ '/g,"")}function v(a){return y(decodeURIComponent(a))}function w(a){return encodeURIComponent(x(a))}function x(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}function y(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")}a.exports={copy:d,checkDataType:e,checkDataTypes:f,coerceToTypes:g,toHash:h,getProperty:i,escapeQuotes:j,equal:c(3),ucs2length:c(36),varOccurences:k,varReplace:l,cleanUpCode:m,finalCleanUpCode:n,schemaHasRules:o,schemaHasRulesExcept:p,toQuotedString:q,getPathExpr:r,getPath:s,getData:t,unescapeFragment:v,unescapeJsonPointer:y,escapeFragment:w,escapeJsonPointer:x};var z=h(["string","number","integer","boolean","null"]),A=/^[a-z$_][a-z$_0-9]*$/i,B=/'|\\/g,C=/else\s*{\s*}/g,D=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,E=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g,F=/[^v.]errors/g,G=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,H=/var errors = 0;|var vErrors = null;/g,I="return errors === 0;",J="validate.errors = null; return true;",K=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,L="return data;",M=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,N=/if \(rootData === undefined\) rootData = data;/,O=/^\/(?:[^~]|~0|~1)*$/,P=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/},function(a,b,c){"use strict";function d(a){this.message="validation failed",this.errors=a,this.ajv=this.validation=!0}function e(a,b,c){this.message=c||e.message(a,b),this.missingRef=g.url(a,b),this.missingSchema=g.normalizeId(g.fullPath(this.missingRef))}function f(a){return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a}var g=c(2);a.exports={Validation:f(d),MissingRef:f(e)},e.message=function(a,b){return"can't resolve reference "+b+" from id "+a}},function(a,b,c){"use strict";function d(a,b,c){var f=this._refs[c];if("string"==typeof f){if(!this._refs[f])return d.call(this,a,b,f);f=this._refs[f]}if((f=f||this._schemas[c])instanceof s)return h(f.schema,this._opts.inlineRefs)?f.schema:f.validate||this._compile(f);var g,i,j,k=e.call(this,b,c);return k&&(g=k.schema,b=k.root,j=k.baseId),g instanceof s?i=g.validate||a.call(this,g.schema,b,void 0,j):void 0!==g&&(i=h(g,this._opts.inlineRefs)?g:a.call(this,g,b,void 0,j)),i}function e(a,b){var c=p.parse(b,!1,!0),d=l(c),e=k(this._getId(a.schema));if(d!==e){var h=m(d),i=this._refs[h];if("string"==typeof i)return f.call(this,a,i,c);if(i instanceof s)i.validate||this._compile(i),a=i;else{if(!((i=this._schemas[h])instanceof s))return;if(i.validate||this._compile(i),h==m(b))return{schema:i,root:a,baseId:e};a=i}if(!a.schema)return;e=k(this._getId(a.schema))}return g.call(this,c,e,a.schema,a)}function f(a,b,c){var d=e.call(this,a,b);if(d){var f=d.schema,h=d.baseId;a=d.root;var i=this._getId(f);return i&&(h=n(h,i)),g.call(this,c,h,f,a)}}function g(a,b,c,d){if(a.hash=a.hash||"","#/"==a.hash.slice(0,2)){for(var f=a.hash.split("/"),g=1;g<f.length;g++){var h=f[g];if(h){if(h=r.unescapeFragment(h),void 0===(c=c[h]))break;var i;if(!u[h]&&(i=this._getId(c),i&&(b=n(b,i)),c.$ref)){var j=n(b,c.$ref),k=e.call(this,d,j);k&&(c=k.schema,d=k.root,b=k.baseId)}}}return void 0!==c&&c!==d.schema?{schema:c,root:d,baseId:b}:void 0}}function h(a,b){return!1!==b&&(void 0===b||!0===b?i(a):b?j(a)<=b:void 0)}function i(a){var b;if(Array.isArray(a)){for(var c=0;c<a.length;c++)if("object"==typeof(b=a[c])&&!i(b))return!1}else for(var d in a){if("$ref"==d)return!1;if("object"==typeof(b=a[d])&&!i(b))return!1}return!0}function j(a){var b,c=0;if(Array.isArray(a)){for(var d=0;d<a.length;d++)if(b=a[d],"object"==typeof b&&(c+=j(b)),c==1/0)return 1/0}else for(var e in a){if("$ref"==e)return 1/0;if(v[e])c++;else if(b=a[e],"object"==typeof b&&(c+=j(b)+1),c==1/0)return 1/0}return c}function k(a,b){return!1!==b&&(a=m(a)),l(p.parse(a,!1,!0))}function l(a){var b=a.protocol||"//"==a.href.slice(0,2)?"//":"";return(a.protocol||"")+b+(a.host||"")+(a.path||"")+"#"}function m(a){return a?a.replace(w,""):""}function n(a,b){return b=m(b),p.resolve(a,b)}function o(a){var b=m(this._getId(a)),c={"":b},d={"":k(b,!1)},e={},f=this;return t(a,{allKeys:!0},function(a,b,g,h,i,j,k){if(""!==b){var l=f._getId(a),n=c[h],o=d[h]+"/"+i;if(void 0!==k&&(o+="/"+("number"==typeof k?k:r.escapeFragment(k))),"string"==typeof l){l=n=m(n?p.resolve(n,l):l);var s=f._refs[l];if("string"==typeof s&&(s=f._refs[s]),s&&s.schema){if(!q(a,s.schema))throw new Error('id "'+l+'" resolves to more than one schema')}else if(l!=m(o))if("#"==l[0]){if(e[l]&&!q(a,e[l]))throw new Error('id "'+l+'" resolves to more than one schema');e[l]=a}else f._refs[l]=o}c[b]=n,d[b]=o}}),e}var p=c(66),q=c(3),r=c(0),s=c(5),t=c(60);a.exports=d,d.normalizeId=m,d.fullPath=k,d.url=n,d.ids=o,d.inlineRef=h,d.schema=e;var u=r.toHash(["properties","patternProperties","enum","dependencies","definitions"]),v=r.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]),w=/#\/?$/},function(a,b,c){"use strict";a.exports=function d(a,b){if(a===b)return!0;var c,e=Array.isArray(a),f=Array.isArray(b);if(e&&f){if(a.length!=b.length)return!1;for(c=0;c<a.length;c++)if(!d(a[c],b[c]))return!1;return!0}if(e!=f)return!1;if(a&&b&&"object"==typeof a&&"object"==typeof b){var g=Object.keys(a);if(g.length!==Object.keys(b).length)return!1;var h=a instanceof Date,i=b instanceof Date;if(h&&i)return a.getTime()==b.getTime();if(h!=i)return!1;var j=a instanceof RegExp,k=b instanceof RegExp;if(j&&k)return a.toString()==b.toString();if(j!=k)return!1;for(c=0;c<g.length;c++)if(!Object.prototype.hasOwnProperty.call(b,g[c]))return!1;for(c=0;c<g.length;c++)if(!d(a[g[c]],b[g[c]]))return!1;return!0}return!1}},function(a,b,c){var d,e,d,f;!function(a,c){"use strict";d=[],e=function(){return c(a,a,!0)}.apply(b,d)}("undefined"==typeof ChronosRoot?this:ChronosRoot,function(a,b,c){"use strict";function d(a,b,c){var d=[];if(a[b]&&a[b].length)for(var e=0;e<a[b].length;e++)c&&"*"!==a[b][e].appName&&a[b][e].appName!==c||d.push(a[b][e]);if(a["*"])for(var f=0;f<a["*"].length;f++)c&&"*"!==a["*"][f].appName&&a["*"][f].appName!==c||d.push(a["*"][f]);return d}function e(b,c,d){a&&"function"==typeof a.log&&a.log(b,c,d)}function f(a){var b,c=a.unbindObj[a.attrName],d=!1;if(!a.unbindObj)return e("CMD listen id not spec for unbind","ERROR",a.loggerName),null;if("string"==typeof a.unbindObj)return j(a.lstnrs,a.unbindObj);if(!a.unbindObj.func&&!a.unbindObj.context&&!a.unbindObj.appName)return!1;var f=a.lstnrs;c&&(f={},f[c]=a.lstnrs[c]);for(var g in f)f.hasOwnProperty(g)&&f[g]&&f[g].length&&(b=k(f[g],a.unbindObj.func,a.unbindObj.context,a.unbindObj.appName),b.length!==f[g].length&&(a.lstnrs[g]=b,d=!0));return d}function g(a){var b={};if(a.constructor===Object)for(var c in a)a.hasOwnProperty(c)&&null!==a[c]&&void 0!==a[c]&&("object"==typeof a[c]&&a[c].constructor!==Array?b[c]=g(a[c]):a[c].constructor===Array?b[c]=a[c].slice(0)||[]:"function"!=typeof a[c]&&(b[c]=null!==a[c]&&void 0!==a[c]?a[c]:""));else a.constructor===Array?b=a.slice(0)||[]:"function"!=typeof a&&(b=a);return b}function h(a,b,c){if((void 0===c||"*"===c)&&"*"===b)return a;for(var d=[],e=0;e<a.length;e++)a[e].eventName!==c&&"*"!==c||(b&&b===a[e].appName||!a[e].appName||"*"===a[e].appName||"*"===b)&&d.push(a[e]);return d}function i(a){if(0===a.eventBufferLimit||a.triggerData.data&&a.triggerData.data.doNotStore)a=null;else{var b={eventName:a.triggerData[a.attrName],appName:a.triggerData.appName};b.data=a.triggerData.passDataByRef?a.triggerData.data:g(a.triggerData.data),a.eventBufferLimit>0?(a.index>=a.eventBufferLimit&&(a.index=0),a.fired[a.index]=b,a.index++):a.fired.push(b),a=null}}function j(a,b){var c=!1;if(!b)return e("Ev listen id not spec for unregister","ERROR","Events"),null;for(var d in a)if(a.hasOwnProperty(d))for(var f=0;f<a[d].length;f++)if(a[d][f].id==b){a[d].splice(f,1),e("Ev listen="+b+" and name="+d+" unregister","DEBUG","Events"),c=!0;break}return c||e("Ev listen not found "+b+" unregister","DEBUG","Events"),c}function k(a,b,c,d){var f=[];if(a&&a.length)for(var g=0;g<a.length;g++)try{var h=!c&&a[g].func===b,i=!b&&c&&a[g].context===c,j=b&&c&&a[g].func===b&&a[g].context===c,k=d&&d===a[g].appName,l="*"===a[g].appName;if(h||i||j){if(k||l)continue;if(i)continue}else if(!b&&!c&&k)continue;f.push(a[g])}catch(a){e("Error in unbind e="+a.message,"ERROR","Events")}return f}var l={getListeners:d,log:e,unbind:f,hasFired:h,cloneEventData:g,storeEventData:i};return c||(b.EventsUtil=b.EventsUtil||l),l}),function(c,g){"use strict";d=[e],void 0!==(f=function(a){return g(c,c,a,!0)}.apply(b,d))&&(a.exports=f)}("undefined"==typeof ChronosRoot?this:ChronosRoot,function(a,b,c,d){"use strict";function e(a){function b(a){return a?(a.triggerOnce=!0,d(a)):null}function d(a,b,e){var f=a;if("string"==typeof a&&(f={appName:a,eventName:b,func:e}),f.appName=f.appName||l,"*"!==l&&("string"!=typeof a||"function"!=typeof b&&void 0!==b||(f.eventName=a)),!f.eventName||!f.func||"function"!=typeof f.func&&f.func.constructor!==Array)return c.log("Ev listen has invalid params: evName=["+f.eventName+"]","ERROR","Events"),null;if(f.func.constructor===Array){for(var g,h,i=[],j=0;j<f.func.length;j++)g=c.cloneEventData(f),g.func=f.func[j],h=d(g),i.push(h);return i}var k=r+o++,m={id:k,func:f.func,context:f.context||null,aSync:!!f.aSync,appName:f.appName,triggerOnce:f.triggerOnce||!1};return p[f.eventName]=p[f.eventName]||[],p[f.eventName].push(m),c.log("Ev listen rgstr: evName=["+f.eventName+"] aSync="+m.aSync+" appName="+m.name,"DEBUG","Events"),f=null,a=null,k}function e(a){return"*"!==l&&(a.appName=a.appName||l),c.unbind({unbindObj:a,attrName:n,loggerName:m,lstnrs:p})}function f(a,b){return void 0===b&&(b=a,a=l),c.hasFired(q,a,b)}function g(a,b,d){var e=a;if("string"==typeof a&&(e={eventName:b,appName:a,data:d}),"*"!==l&&(e.appName=e.appName||l,"string"!=typeof a||"object"!=typeof b&&void 0!==b||(e.eventName=a)),!e||void 0===e.eventName)return c.log("Ev name not spec for publish","ERROR","Events"),e=null,null;e.passDataByRef=e.passDataByRef||!j,i(e);var f=c.getListeners(p,e.eventName,e.appName);if(f.length>0)for(var g=0;g<f.length;g++){var k=e.passDataByRef?e.data:c.cloneEventData(e.data),m={appName:e.appName,eventName:e.eventName},n=f[g];n.aSync||k&&k.aSync?setTimeout(h(n,k,m),0):h(n,k,m)()}return e=null,f.length>0}function h(a,b,d){return function(){try{a.func.call(a.context,b,d),b=null,a.triggerOnce&&e(a),a=null}catch(b){c.log("Error executing "+d.eventName+" eventId: "+a.id+"e="+b.message,"ERROR","Events")}}}function i(a){c.storeEventData({triggerData:a,eventBufferLimit:k,attrName:n,fired:q,index:s})}var j,k,l,m="Events",n="eventName",o=0,p={},q=[],r="evId_",s=0;l=a&&a.appName||"*",j=!(!a||"boolean"!=typeof a.cloneEventData)&&a.cloneEventData,k=a&&!isNaN(a.eventBufferLimit)?a.eventBufferLimit:-1,this.once=b,this.hasFired=f,this.trigger=g,this.publish=g,this.bind=d,this.register=d,this.unbind=e,this.unregister=e}return d||(b.Events=b.Events||e),e})},function(a,b,c){"use strict";function d(a){e.copy(a,this)}var e=c(0);a.exports=d},function(a,b,c){"use strict";a.exports=function(a,b,c){var d,e,f=" ",g=a.level,h=a.dataLevel,i=a.schema[b],j=a.schemaPath+a.util.getProperty(b),k=a.errSchemaPath+"/"+b,l=!a.opts.allErrors,m="data"+(h||""),n=a.opts.$data&&i&&i.$data;n?(f+=" var schema"+g+" = "+a.util.getData(i.$data,h,a.dataPathArr)+"; ",e="schema"+g):e=i;var o="maximum"==b,p=o?"exclusiveMaximum":"exclusiveMinimum",q=a.schema[p],r=a.opts.$data&&q&&q.$data,s=o?"<":">",t=o?">":"<",d=void 0;if(r){var u=a.util.getData(q.$data,h,a.dataPathArr),v="exclusive"+g,w="exclType"+g,x="exclIsNumber"+g,y="op"+g,z="' + "+y+" + '";f+=" var schemaExcl"+g+" = "+u+"; ",u="schemaExcl"+g,f+=" var "+v+"; var "+w+" = typeof "+u+"; if ("+w+" != 'boolean' && "+w+" != 'undefined' && "+w+" != 'number') { ";var d=p,A=A||[];A.push(f),f="",!1!==a.createErrors?(f+=" { keyword: '"+(d||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(k)+" , params: {} ",!1!==a.opts.messages&&(f+=" , message: '"+p+" should be boolean' "),a.opts.verbose&&(f+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+m+" "),f+=" } "):f+=" {} ";var B=f;f=A.pop(),f+=!a.compositeRule&&l?a.async?" throw new ValidationError(["+B+"]); ":" validate.errors = ["+B+"]; return false; ":" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",f+=" } else if ( ",n&&(f+=" ("+e+" !== undefined && typeof "+e+" != 'number') || "),f+=" "+w+" == 'number' ? ( ("+v+" = "+e+" === undefined || "+u+" "+s+"= "+e+") ? "+m+" "+t+"= "+u+" : "+m+" "+t+" "+e+" ) : ( ("+v+" = "+u+" === true) ? "+m+" "+t+"= "+e+" : "+m+" "+t+" "+e+" ) || "+m+" !== "+m+") { var op"+g+" = "+v+" ? '"+s+"' : '"+s+"=';"}else{var x="number"==typeof q,z=s;if(x&&n){var y="'"+z+"'";f+=" if ( ",n&&(f+=" ("+e+" !== undefined && typeof "+e+" != 'number') || "),f+=" ( "+e+" === undefined || "+q+" "+s+"= "+e+" ? "+m+" "+t+"= "+q+" : "+m+" "+t+" "+e+" ) || "+m+" !== "+m+") { "}else{x&&void 0===i?(v=!0,d=p,k=a.errSchemaPath+"/"+p,e=q,t+="="):(x&&(e=Math[o?"min":"max"](q,i)),q===(!x||e)?(v=!0,d=p,k=a.errSchemaPath+"/"+p,t+="="):(v=!1,z+="="));var y="'"+z+"'";f+=" if ( ",n&&(f+=" ("+e+" !== undefined && typeof "+e+" != 'number') || "),f+=" "+m+" "+t+" "+e+" || "+m+" !== "+m+") { "}}d=d||b;var A=A||[];A.push(f),f="",!1!==a.createErrors?(f+=" { keyword: '"+(d||"_limit")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(k)+" , params: { comparison: "+y+", limit: "+e+", exclusive: "+v+" } ",!1!==a.opts.messages&&(f+=" , message: 'should be "+z+" ",f+=n?"' + "+e:e+"'"),a.opts.verbose&&(f+=" , schema:  ",f+=n?"validate.schema"+j:""+i,f+="         , parentSchema: validate.schema"+a.schemaPath+" , data: "+m+" "),f+=" } "):f+=" {} ";var B=f;return f=A.pop(),f+=!a.compositeRule&&l?a.async?" throw new ValidationError(["+B+"]); ":" validate.errors = ["+B+"]; return false; ":" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",f+=" } ",l&&(f+=" else { "),f}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d,e,f=" ",g=a.level,h=a.dataLevel,i=a.schema[b],j=a.schemaPath+a.util.getProperty(b),k=a.errSchemaPath+"/"+b,l=!a.opts.allErrors,m="data"+(h||""),n=a.opts.$data&&i&&i.$data;n?(f+=" var schema"+g+" = "+a.util.getData(i.$data,h,a.dataPathArr)+"; ",e="schema"+g):e=i;var o="maxItems"==b?">":"<";f+="if ( ",n&&(f+=" ("+e+" !== undefined && typeof "+e+" != 'number') || "),f+=" "+m+".length "+o+" "+e+") { ";var d=b,p=p||[];p.push(f),f="",!1!==a.createErrors?(f+=" { keyword: '"+(d||"_limitItems")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(k)+" , params: { limit: "+e+" } ",!1!==a.opts.messages&&(f+=" , message: 'should NOT have ",f+="maxItems"==b?"more":"less",f+=" than ",f+=n?"' + "+e+" + '":""+i,f+=" items' "),a.opts.verbose&&(f+=" , schema:  ",f+=n?"validate.schema"+j:""+i,f+="         , parentSchema: validate.schema"+a.schemaPath+" , data: "+m+" "),f+=" } "):f+=" {} ";var q=f;return f=p.pop(),f+=!a.compositeRule&&l?a.async?" throw new ValidationError(["+q+"]); ":" validate.errors = ["+q+"]; return false; ":" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",f+="} ",l&&(f+=" else { "),f}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d,e,f=" ",g=a.level,h=a.dataLevel,i=a.schema[b],j=a.schemaPath+a.util.getProperty(b),k=a.errSchemaPath+"/"+b,l=!a.opts.allErrors,m="data"+(h||""),n=a.opts.$data&&i&&i.$data;n?(f+=" var schema"+g+" = "+a.util.getData(i.$data,h,a.dataPathArr)+"; ",e="schema"+g):e=i;var o="maxLength"==b?">":"<";f+="if ( ",n&&(f+=" ("+e+" !== undefined && typeof "+e+" != 'number') || "),f+=!1===a.opts.unicode?" "+m+".length ":" ucs2length("+m+") ",f+=" "+o+" "+e+") { ";var d=b,p=p||[];p.push(f),f="",!1!==a.createErrors?(f+=" { keyword: '"+(d||"_limitLength")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(k)+" , params: { limit: "+e+" } ",!1!==a.opts.messages&&(f+=" , message: 'should NOT be ",f+="maxLength"==b?"longer":"shorter",f+=" than ",f+=n?"' + "+e+" + '":""+i,f+=" characters' "),a.opts.verbose&&(f+=" , schema:  ",f+=n?"validate.schema"+j:""+i,f+="         , parentSchema: validate.schema"+a.schemaPath+" , data: "+m+" "),f+=" } "):f+=" {} ";var q=f;return f=p.pop(),f+=!a.compositeRule&&l?a.async?" throw new ValidationError(["+q+"]); ":" validate.errors = ["+q+"]; return false; ":" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",f+="} ",l&&(f+=" else { "),f}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d,e,f=" ",g=a.level,h=a.dataLevel,i=a.schema[b],j=a.schemaPath+a.util.getProperty(b),k=a.errSchemaPath+"/"+b,l=!a.opts.allErrors,m="data"+(h||""),n=a.opts.$data&&i&&i.$data;n?(f+=" var schema"+g+" = "+a.util.getData(i.$data,h,a.dataPathArr)+"; ",e="schema"+g):e=i;var o="maxProperties"==b?">":"<";f+="if ( ",n&&(f+=" ("+e+" !== undefined && typeof "+e+" != 'number') || "),f+=" Object.keys("+m+").length "+o+" "+e+") { ";var d=b,p=p||[];p.push(f),f="",!1!==a.createErrors?(f+=" { keyword: '"+(d||"_limitProperties")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(k)+" , params: { limit: "+e+" } ",!1!==a.opts.messages&&(f+=" , message: 'should NOT have ",f+="maxProperties"==b?"more":"less",f+=" than ",f+=n?"' + "+e+" + '":""+i,f+=" properties' "),a.opts.verbose&&(f+=" , schema:  ",f+=n?"validate.schema"+j:""+i,f+="         , parentSchema: validate.schema"+a.schemaPath+" , data: "+m+" "),f+=" } "):f+=" {} ";var q=f;return f=p.pop(),f+=!a.compositeRule&&l?a.async?" throw new ValidationError(["+q+"]); ":" validate.errors = ["+q+"]; return false; ":" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",f+="} ",l&&(f+=" else { "),f}},function(a,b,c){"use strict";a.exports=function(a,b,c){function d(a){for(var b=a.rules,c=0;c<b.length;c++)if(e(b[c]))return!0}function e(b){return void 0!==a.schema[b.keyword]||b["implements"]&&f(b)}function f(b){for(var c=b["implements"],d=0;d<c.length;d++)if(void 0!==a.schema[c[d]])return!0}var g="",h=!0===a.schema.$async,i=a.util.schemaHasRulesExcept(a.schema,a.RULES.all,"$ref"),j=a.self._getId(a.schema);if(a.isTop){if(h){a.async=!0;var k="es7"==a.opts.async;a.yieldAwait=k?"await":"yield"}g+=" var validate = ",h?k?g+=" (async function ":("*"!=a.opts.async&&(g+="co.wrap"),g+="(function* "):g+=" (function ",g+=" (data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",j&&(a.opts.sourceCode||a.opts.processCode)&&(g+=" /*# sourceURL="+j+" */ ")}if("boolean"==typeof a.schema||!i&&!a.schema.$ref){var l,m=a.level,n=a.dataLevel,o=a.schema["false schema"],p=a.schemaPath+a.util.getProperty("false schema"),q=a.errSchemaPath+"/false schema",r=!a.opts.allErrors,s="data"+(n||""),t="valid"+m;if(!1===a.schema){a.isTop?r=!0:g+=" var "+t+" = false; ";var u=u||[];u.push(g),g="",!1!==a.createErrors?(g+=" { keyword: '"+(l||"false schema")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(q)+" , params: {} ",!1!==a.opts.messages&&(g+=" , message: 'boolean schema is false' "),a.opts.verbose&&(g+=" , schema: false , parentSchema: validate.schema"+a.schemaPath+" , data: "+s+" "),g+=" } "):g+=" {} ";var v=g;g=u.pop(),g+=!a.compositeRule&&r?a.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else g+=a.isTop?h?" return data; ":" validate.errors = null; return true; ":" var "+t+" = true; ";return a.isTop&&(g+=" }); return validate; "),g}if(a.isTop){var w=a.isTop,m=a.level=0,n=a.dataLevel=0,s="data";a.rootId=a.resolve.fullPath(a.self._getId(a.root.schema)),a.baseId=a.baseId||a.rootId,delete a.isTop,a.dataPathArr=[void 0],g+=" var vErrors = null; ",g+=" var errors = 0;     ",g+=" if (rootData === undefined) rootData = data; "}else{var m=a.level,n=a.dataLevel,s="data"+(n||"");if(j&&(a.baseId=a.resolve.url(a.baseId,j)),h&&!a.async)throw new Error("async schema in sync schema");g+=" var errs_"+m+" = errors;"}var l,t="valid"+m,r=!a.opts.allErrors,x="",y="",z=a.schema.type,A=Array.isArray(z);if(A&&1==z.length&&(z=z[0],A=!1),a.schema.$ref&&i){if("fail"==a.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+a.errSchemaPath+'" (see option extendRefs)');!0!==a.opts.extendRefs&&(i=!1,a.logger.warn('$ref: keywords ignored in schema at path "'+a.errSchemaPath+'"'))}if(z){if(a.opts.coerceTypes)var B=a.util.coerceToTypes(a.opts.coerceTypes,z);var C=a.RULES.types[z];if(B||A||!0===C||C&&!d(C)){var p=a.schemaPath+".type",q=a.errSchemaPath+"/type",p=a.schemaPath+".type",q=a.errSchemaPath+"/type",D=A?"checkDataTypes":"checkDataType";if(g+=" if ("+a.util[D](z,s,!0)+") { ",B){var E="dataType"+m,F="coerced"+m;g+=" var "+E+" = typeof "+s+"; ","array"==a.opts.coerceTypes&&(g+=" if ("+E+" == 'object' && Array.isArray("+s+")) "+E+" = 'array'; "),g+=" var "+F+" = undefined; ";var G="",H=B;if(H)for(var I,J=-1,K=H.length-1;K>J;)I=H[J+=1],J&&(g+=" if ("+F+" === undefined) { ",G+="}"),"array"==a.opts.coerceTypes&&"array"!=I&&(g+=" if ("+E+" == 'array' && "+s+".length == 1) { "+F+" = "+s+" = "+s+"[0]; "+E+" = typeof "+s+";  } "),"string"==I?g+=" if ("+E+" == 'number' || "+E+" == 'boolean') "+F+" = '' + "+s+"; else if ("+s+" === null) "+F+" = ''; ":"number"==I||"integer"==I?(g+=" if ("+E+" == 'boolean' || "+s+" === null || ("+E+" == 'string' && "+s+" && "+s+" == +"+s+" ","integer"==I&&(g+=" && !("+s+" % 1)"),g+=")) "+F+" = +"+s+"; "):"boolean"==I?g+=" if ("+s+" === 'false' || "+s+" === 0 || "+s+" === null) "+F+" = false; else if ("+s+" === 'true' || "+s+" === 1) "+F+" = true; ":"null"==I?g+=" if ("+s+" === '' || "+s+" === 0 || "+s+" === false) "+F+" = null; ":"array"==a.opts.coerceTypes&&"array"==I&&(g+=" if ("+E+" == 'string' || "+E+" == 'number' || "+E+" == 'boolean' || "+s+" == null) "+F+" = ["+s+"]; ");g+=" "+G+" if ("+F+" === undefined) {   ";var u=u||[];u.push(g),g="",!1!==a.createErrors?(g+=" { keyword: '"+(l||"type")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(q)+" , params: { type: '",g+=A?""+z.join(","):""+z,g+="' } ",!1!==a.opts.messages&&(g+=" , message: 'should be ",g+=A?""+z.join(","):""+z,g+="' "),a.opts.verbose&&(g+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+s+" "),g+=" } "):g+=" {} ";var v=g;g=u.pop(),g+=!a.compositeRule&&r?a.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",g+=" } else {  ";var L=n?"data"+(n-1||""):"parentData",M=n?a.dataPathArr[n]:"parentDataProperty";g+=" "+s+" = "+F+"; ",n||(g+="if ("+L+" !== undefined)"),g+=" "+L+"["+M+"] = "+F+"; } "}else{var u=u||[];u.push(g),g="",!1!==a.createErrors?(g+=" { keyword: '"+(l||"type")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(q)+" , params: { type: '",g+=A?""+z.join(","):""+z,g+="' } ",!1!==a.opts.messages&&(g+=" , message: 'should be ",g+=A?""+z.join(","):""+z,g+="' "),a.opts.verbose&&(g+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+s+" "),g+=" } "):g+=" {} ";var v=g;g=u.pop(),g+=!a.compositeRule&&r?a.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}g+=" } "}}if(a.schema.$ref&&!i)g+=" "+a.RULES.all.$ref.code(a,"$ref")+" ",r&&(g+=" } if (errors === ",g+=w?"0":"errs_"+m,g+=") { ",y+="}");else{a.opts.v5&&a.schema.patternGroups&&a.logger.warn('keyword "patternGroups" is deprecated and disabled. Use option patternGroups: true to enable.');var N=a.RULES;if(N)for(var C,O=-1,P=N.length-1;P>O;)if(C=N[O+=1],d(C)){if(C.type&&(g+=" if ("+a.util.checkDataType(C.type,s)+") { "),a.opts.useDefaults&&!a.compositeRule)if("object"==C.type&&a.schema.properties){var o=a.schema.properties,Q=Object.keys(o),R=Q;if(R)for(var S,T=-1,U=R.length-1;U>T;){S=R[T+=1];var V=o[S];if(void 0!==V["default"]){var W=s+a.util.getProperty(S);g+="  if ("+W+" === undefined) "+W+" = ",g+="shared"==a.opts.useDefaults?" "+a.useDefault(V["default"])+" ":" "+JSON.stringify(V["default"])+" ",g+="; "}}}else if("array"==C.type&&Array.isArray(a.schema.items)){var X=a.schema.items;if(X)for(var V,J=-1,Y=X.length-1;Y>J;)if(V=X[J+=1],void 0!==V["default"]){var W=s+"["+J+"]";g+="  if ("+W+" === undefined) "+W+" = ",g+="shared"==a.opts.useDefaults?" "+a.useDefault(V["default"])+" ":" "+JSON.stringify(V["default"])+" ",g+="; "}}var Z=C.rules;if(Z)for(var $,_=-1,aa=Z.length-1;aa>_;)if($=Z[_+=1],e($)){var ba=$.code(a,$.keyword,C.type);ba&&(g+=" "+ba+" ",r&&(x+="}"))}if(r&&(g+=" "+x+" ",x=""),C.type&&(g+=" } ",z&&z===C.type&&!B)){g+=" else { ";var p=a.schemaPath+".type",q=a.errSchemaPath+"/type",u=u||[];u.push(g),g="",!1!==a.createErrors?(g+=" { keyword: '"+(l||"type")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(q)+" , params: { type: '",g+=A?""+z.join(","):""+z,g+="' } ",!1!==a.opts.messages&&(g+=" , message: 'should be ",g+=A?""+z.join(","):""+z,g+="' "),a.opts.verbose&&(g+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+s+" "),g+=" } "):g+=" {} ";var v=g;g=u.pop(),g+=!a.compositeRule&&r?a.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",g+=" } "}r&&(g+=" if (errors === ",g+=w?"0":"errs_"+m,g+=") { ",y+="}")}}return r&&(g+=" "+y+" "),w?(h?(g+=" if (errors === 0) return data;           ",g+=" else throw new ValidationError(vErrors); "):(g+=" validate.errors = vErrors; ",g+=" return errors === 0;       "),g+=" }); return validate;"):g+=" var "+t+" = errors === errs_"+m+";",g=a.util.cleanUpCode(g),w&&(g=a.util.finalCleanUpCode(g,h)),g}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=["vertical","horizontal","carousel"];b["default"]={styleToCss:function(a){var b="";return a&&(a.color&&(b+="color:"+a.color+";"),a["background-color"]&&(b+="background-color:"+a["background-color"]+";"),a.bold&&(b+="font-weight:bold;"),a.italic&&(b+="font-style:italic;"),a.size&&(b+="font-size:"+this.sizeToPx(a.size)+"px;")),b},sizeToPx:function(a){switch(a){case"small":return 11;case"medium":return 13;case"large":return 17;default:return 13}},validateParameters:function(a){if(!a.type)throw new Error("Missing configuration: type");for(var b=arguments.length,c=Array(b>1?b-1:0),d=1;b>d;d++)c[d-1]=arguments[d];c.forEach(function(b){if(void 0===a[b])throw new Error("Missing configuration: "+b+" is a mandatory for element of type "+a.type)})},isString:function(a){return a instanceof String||"string"==typeof a},isLayout:function(a){return d.indexOf(a)>=0},normalizeHtmlText:function(a){var b=a;return a&&(b=b.replace(/(?:\r\n|\r|\n)/g,"<br/>")),b},escapeHtml:function(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return a.replace(/[&<>"'`=\/]/g,function(a){return b[a]})},hasClass:function(a,b){return a.classList&&a.classList.contains?a.classList.contains(b):!!a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))},addClass:function(a,b){a.classList?a.classList.add(b):this.hasClass(a,b)||(a.className+=" "+b)},removeClass:function(a,b){if(a.classList)a.classList.remove(b);else if(this.hasClass(a,b)){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ")}}}},function(a,b){function c(a){var b=this,c=l.call(arguments,1);return new Promise(function(e,f){function g(a){var b;try{b=c.next(a)}catch(c){return f(c)}j(b)}function i(a){var b;try{b=c["throw"](a)}catch(c){return f(c)}j(b)}function j(a){if(a.done)return e(a.value);var c=d.call(b,a.value);return c&&h(c)?c.then(g,i):i(new TypeError('You may only yield a function, promise, generator, array, or object, but the following object was passed: "'+String(a.value)+'"'))}if("function"==typeof a&&(a=a.apply(b,c)),!a||"function"!=typeof a.next)return e(a);g();return void 0})}function d(a){return a?h(a)?a:j(a)||i(a)?c.call(this,a):"function"==typeof a?e.call(this,a):Array.isArray(a)?f.call(this,a):k(a)?g.call(this,a):a:a}function e(a){var b=this;return new Promise(function(c,d){a.call(b,function(a,b){if(a)return d(a);arguments.length>2&&(b=l.call(arguments,1)),c(b);return void 0})})}function f(a){return Promise.all(a.map(d,this))}function g(a){for(var b=new a.constructor,c=Object.keys(a),e=[],f=0;f<c.length;f++){var g=c[f],i=d.call(this,a[g]);i&&h(i)?function(a,c){b[c]=void 0,e.push(a.then(function(a){b[c]=a}))}(i,g):b[g]=a[g]}return Promise.all(e).then(function(){return b})}function h(a){return"function"==typeof a.then}function i(a){return"function"==typeof a.next&&"function"==typeof a["throw"]}function j(a){var b=a.constructor;return!!b&&("GeneratorFunction"===b.name||"GeneratorFunction"===b.displayName||i(b.prototype))}function k(a){return Object==a.constructor}var l=Array.prototype.slice;a.exports=c["default"]=c.co=c,c.wrap=function(a){function b(){return c.call(this,a.apply(this,arguments))}return b.__generatorFunction__=a,b}},function(a,b,c){"use strict";a.exports=function(a,b){b||(b={}),"function"==typeof b&&(b={cmp:b});var c="boolean"==typeof b.cycles&&b.cycles,d=b.cmp&&function(a){return function(b){return function(c,d){var e={key:c,value:b[c]},f={key:d,value:b[d]};return a(e,f)}}}(b.cmp),e=[];return function f(a){if(a&&a.toJSON&&"function"==typeof a.toJSON&&(a=a.toJSON()),void 0!==a){if("number"==typeof a)return isFinite(a)?""+a:"null";if("object"!=typeof a)return JSON.stringify(a);var b,g;if(Array.isArray(a)){for(g="[",b=0;b<a.length;b++)b&&(g+=","),g+=f(a[b])||"null";return g+"]"}if(null===a)return"null";if(-1!==e.indexOf(a)){if(c)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var h=e.push(a)-1,i=Object.keys(a).sort(d&&d(a));for(g="",b=0;b<i.length;b++){var j=i[b],k=f(a[j]);k&&(g&&(g+=","),g+=JSON.stringify(j)+":"+k)}return e.splice(h,1),"{"+g+"}"}}(a)}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(b,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=c(29),j=d(i),k=c(59),l=d(k),m=c(11),n=d(m),o=c(16),p=d(o),q=c(17),r=d(q),s=c(25),t=d(s),u=c(18),v=d(u),w=c(19),x=d(w),y=c(20),z=d(y),A=c(21),B=d(A),C=c(22),D=d(C),E=c(23),F=d(E),G=c(24),H=d(G),I=c(26),J=d(I),K=c(27),L=d(K),M=c(4),N=function(a){
function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return d.errors=c,d}return g(b,a),b}(Error),O=function(){function a(){e(this,a),this.events=new M({cloneEventData:!0,appName:"json-pollock"}),this.provider=new l["default"](this.events),this.maxAllowedElements=50;var b=new j["default"]({format:"full",unknownFormats:"ignore",verbose:!0,logger:!1});b.addSchema(p["default"],"action.json"),b.addSchema(r["default"],"basic.json"),b.addSchema(t["default"],"style.json"),b.addSchema(v["default"],"button.json"),b.addSchema(x["default"],"card.json"),b.addSchema(z["default"],"carousel.json"),b.addSchema(B["default"],"image.json"),b.addSchema(D["default"],"linkPreview.json"),b.addSchema(F["default"],"map.json"),b.addSchema(H["default"],"rich_content.json"),b.addSchema(J["default"],"template.json"),b.addSchema(L["default"],"text.json"),this.jsonValidator=b.compile(H["default"])}return h(a,[{key:"init",value:function(a){a&&Object.prototype.hasOwnProperty.call(a,"maxAllowedElements")&&(!isNaN(a.maxAllowedElements)&&a.maxAllowedElements>0?this.maxAllowedElements=a.maxAllowedElements:this.maxAllowedElements=50)}},{key:"renderElement",value:function(a,b){var c=this,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(d>=this.maxAllowedElements)){var e=d,f=this.provider.get(a.type),g=void 0;f&&(g=f(a))&&(b.appendChild(g),Array.isArray(a.elements)&&a.elements.forEach(function(a){e+=1,c.renderElement(a,g,e)}),g.afterRender&&g.afterRender.call(g))}}},{key:"render",value:function(a){var b=void 0;if(b=n["default"].isString(a)?JSON.parse(a):a,this.jsonValidator(b),this.jsonValidator.errors)throw new N("Schema validation error, see 'errors' for more details",this.jsonValidator.errors);var c=document.createDocumentFragment(),d=document.createElement("div");return d.className="lp-json-pollock",n["default"].isLayout(b.type)||(d.className+=" lp-json-pollock-single-element"),c.appendChild(d),this.renderElement(b,d),c}},{key:"registerAction",value:function(a,b){this.events.bind({eventName:a,func:function(a){b(a)}})}},{key:"unregisterAction",value:function(a){this.events.unbind({eventName:a})}},{key:"unregisterAllActions",value:function(){this.events.unbind({})}},{key:"registerElement",value:function(a,b){this.provider.set(a,b)}}]),a}();b["default"]=O},function(a,b){},function(a,b){a.exports={oneOf:[{title:"Publish Text",type:"object",additionalProperties:!1,properties:{type:{type:"string","enum":["publishText"],"default":"publishText",readonly:!0},text:{type:"string",maxLength:256}},required:["type","text"]},{title:"navigate",type:"object",additionalProperties:!1,properties:{type:{type:"string","enum":["navigate"],"default":"navigate",readonly:!0},la:{type:"number"},lo:{type:"number"},name:{type:"string",maxLength:256}},required:["type","la","lo"]},{title:"link",type:"object",additionalProperties:!1,properties:{type:{type:"string","enum":["link"],"default":"link",readonly:!0},uri:{type:"string",format:"uri",maxLength:1024},name:{type:"string",maxLength:256}},required:["type","uri"]}]}},function(a,b){a.exports={oneOf:[{$ref:"text.json"},{$ref:"image.json"},{$ref:"button.json"},{$ref:"map.json"},{$ref:"linkPreview.json"},{$ref:"template.json"}]}},function(a,b){a.exports={type:"object",additionalProperties:!1,title:"button",properties:{type:{type:"string","enum":["button"],"default":"button",readonly:!0},title:{type:"string",maxLength:128},rtl:{type:"boolean"},tooltip:{type:"string",maxLength:256},tag:{type:"string",maxLength:64},tagVersion:{type:"string",maxLength:64},style:{$ref:"style.json"},click:{type:"object",additionalProperties:!1,properties:{actions:{type:"array",maxItems:4,items:{$ref:"action.json"}},metadata:{type:"array"}}}},required:["title"]}},function(a,b){a.exports={oneOf:[{title:"basic",$ref:"basic.json"},{type:"object",additionalProperties:!1,title:"horizontal",properties:{type:{type:"string","enum":["horizontal"],"default":"horizontal",readonly:!0},tag:{type:"string",maxLength:64},tagVersion:{type:"string",maxLength:64},elements:{type:"array",maxItems:256,items:{$ref:"rich_content.json"}}},required:["type","elements"]},{type:"object",additionalProperties:!1,title:"vertical",properties:{type:{type:"string","enum":["vertical"],"default":"vertical",readonly:!0},tag:{type:"string",maxLength:64},tagVersion:{type:"string",maxLength:64},elements:{type:"array",maxItems:256,items:{$ref:"rich_content.json"}}},required:["type","elements"]}]}},function(a,b){a.exports={type:"object",additionalProperties:!1,title:"carousel",properties:{type:{type:"string","enum":["carousel"],"default":"carousel",readonly:!0},tooltip:{type:"string",maxLength:256},padding:{type:"number","default":0,minimum:0,maximum:10},elements:{type:"array",minItems:2,maxItems:10,items:{$ref:"card.json"}}},required:["type","elements"]}},function(a,b){a.exports={type:"object",title:"image",additionalProperties:!1,properties:{type:{type:"string","enum":["image"],"default":"image",readonly:!0},caption:{type:"string",maxLength:128},url:{type:"string",maxLength:2048},rtl:{type:"boolean"},tooltip:{type:"string",maxLength:256},tag:{type:"string",maxLength:64},tagVersion:{type:"string",maxLength:64},style:{$ref:"style.json"},click:{type:"object",additionalProperties:!1,properties:{actions:{type:"array",maxItems:4,items:{$ref:"action.json"}},metadata:{type:"array"}}}},required:["url"]}},function(a,b){a.exports={type:"object",title:"linkPreview",additionalProperties:!1,properties:{type:{type:"string","enum":["linkPreview"],"default":"linkPreview",readonly:!0},url:{type:"string",maxLength:2048},title:{type:"string",maxLength:128},rtl:{type:"boolean"},tooltip:{type:"string",maxLength:256},tag:{type:"string",maxLength:64},tagVersion:{type:"string",maxLength:64},style:{$ref:"style.json"},click:{type:"object",additionalProperties:!1,properties:{actions:{type:"array",maxItems:4,items:{$ref:"action.json"}},metadata:{type:"array"}}}},required:["url"]}},function(a,b){a.exports={type:"object",title:"map",additionalProperties:!1,properties:{type:{type:"string","enum":["map"],"default":"map",readonly:!0},lo:{type:"number"},la:{type:"number"},rtl:{type:"boolean"},tooltip:{type:"string",maxLength:256},tag:{type:"string",maxLength:64},tagVersion:{type:"string",maxLength:64},style:{$ref:"style.json"},click:{type:"object",additionalProperties:!1,properties:{actions:{type:"array",maxItems:4,items:{$ref:"action.json"}},metadata:{type:"array"}}}},required:["lo","la"]}},function(a,b){a.exports={oneOf:[{title:"card",$ref:"card.json"},{title:"carousel",$ref:"carousel.json"}]}},function(a,b){a.exports={type:"object",additionalProperties:!1,properties:{"background-color":{type:"string",format:"color",maxLength:256},bold:{type:"boolean"},italic:{type:"boolean"},color:{type:"string",format:"color",maxLength:256},size:{type:"string","enum":["small","medium","large"]}}}},function(a,b){a.exports={type:"object",title:"template",additionalProperties:!1,properties:{type:{type:"string","enum":["template"],"default":"template",readonly:!0},templateType:{type:"string","enum":["quickReply"],"default":"quickReply",readonly:!0},title:{type:"string",maxLength:5e3},resp:{type:"array",maxItems:32,minItems:1,items:{type:"string",maxLength:128}},rtl:{type:"boolean"},tooltip:{type:"string",maxLength:256},tag:{type:"string",maxLength:64},tagVersion:{type:"string",maxLength:64},style:{$ref:"style.json"},click:{type:"object",additionalProperties:!1,properties:{actions:{type:"array",maxItems:4,items:{$ref:"action.json"}},metadata:{type:"array"}}}},required:["templateType","title","resp"]}},function(a,b){a.exports={type:"object",additionalProperties:!1,title:"text",properties:{type:{type:"string","enum":["text"],"default":"text",readonly:!0},text:{type:"string",maxLength:5e3},rtl:{type:"boolean"},tooltip:{type:"string",maxLength:256},tag:{type:"string",maxLength:64},tagVersion:{type:"string",maxLength:64},style:{$ref:"style.json"},click:{type:"object",additionalProperties:!1,properties:{actions:{type:"array",maxItems:4,items:{$ref:"action.json"}},metadata:{type:"array"}}}},required:["text"]}},function(a,b,c){"use strict";var d=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];a.exports=function(a,b){for(var c=0;c<b.length;c++){a=JSON.parse(JSON.stringify(a));var e,f=b[c].split("/"),g=a;for(e=1;e<f.length;e++)g=g[f[e]];for(e=0;e<d.length;e++){var h=d[e],i=g[h];i&&(g[h]={anyOf:[i,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#"}]})}}return a}},function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);a=this._opts=N.copy(a)||{},C(this),this._schemas={},this._refs={},this._fragments={},this._formats=J(a.format);var b=this._schemaUriFormat=this._formats["uri-reference"];this._schemaUriFormatFunc=function(a){return b.test(a)},this._cache=a.cache||new G,this._loadingSchemas={},this._compilations=[],this.RULES=K(),this._getId=r(a),a.loopRequired=a.loopRequired||1/0,"property"==a.errorDataPath&&(a._errorDataPathProperty=!0),void 0===a.serialize&&(a.serialize=I),this._metaOpts=B(this),a.formats&&z(this),x(this),"object"==typeof a.meta&&this.addMetaSchema(a.meta),y(this),a.patternGroups&&M(this)}function e(a,b){var c;if("string"==typeof a){if(!(c=this.getSchema(a)))throw new Error('no schema with key or ref "'+a+'"')}else{var d=this._addSchema(a);c=d.validate||this._compile(d)}var e=c(b);return!0===c.$async?"*"==this._opts.async?O(e):e:(this.errors=c.errors,e)}function f(a,b){var c=this._addSchema(a,void 0,b);return c.validate||this._compile(c)}function g(a,b,c,d){if(Array.isArray(a))for(var e=0;e<a.length;e++)this.addSchema(a[e],void 0,c,d);else{var f=this._getId(a);if(void 0!==f&&"string"!=typeof f)throw new Error("schema id must be string");b=F.normalizeId(b||f),A(this,b),this._schemas[b]=this._addSchema(a,c,d,!0)}}function h(a,b,c){this.addSchema(a,b,c,!0)}function i(a,b){var c=a.$schema;if(void 0!==c&&"string"!=typeof c)throw new Error("$schema must be a string");if(!(c=c||this._opts.defaultMeta||j(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var d=this._formats.uri;this._formats.uri="function"==typeof d?this._schemaUriFormatFunc:this._schemaUriFormat;var e;try{e=this.validate(c,a)}finally{this._formats.uri=d}if(!e&&b){var f="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(f);this.logger.error(f)}return e}function j(a){var b=a._opts.meta;return a._opts.defaultMeta="object"==typeof b?a._getId(b)||b:a.getSchema(R)?R:void 0,a._opts.defaultMeta}function k(a){var b=m(this,a);switch(typeof b){case"object":return b.validate||this._compile(b);case"string":return this.getSchema(b);case"undefined":return l(this,a)}}function l(a,b){var c=F.schema.call(a,{schema:{}},b);if(c){var d=c.schema,e=c.root,f=c.baseId,g=E.call(a,d,e,void 0,f);return a._fragments[b]=new H({ref:b,fragment:!0,schema:d,root:e,baseId:f,validate:g}),g}}function m(a,b){return b=F.normalizeId(b),a._schemas[b]||a._refs[b]||a._fragments[b]}function n(a){if(a instanceof RegExp)return o(this,this._schemas,a),void o(this,this._refs,a);switch(typeof a){case"undefined":return o(this,this._schemas),o(this,this._refs),void this._cache.clear();case"string":var b=m(this,a);return b&&this._cache.del(b.cacheKey),delete this._schemas[a],void delete this._refs[a];case"object":var c=this._opts.serialize,d=c?c(a):a;this._cache.del(d);var e=this._getId(a);e&&(e=F.normalizeId(e),delete this._schemas[e],delete this._refs[e])}}function o(a,b,c){for(var d in b){var e=b[d];e.meta||c&&!c.test(d)||(a._cache.del(e.cacheKey),delete b[d])}}function p(a,b,c,d){if("object"!=typeof a&&"boolean"!=typeof a)throw new Error("schema should be object or boolean");var e=this._opts.serialize,f=e?e(a):a,g=this._cache.get(f);if(g)return g;d=d||!1!==this._opts.addUsedSchema;var h=F.normalizeId(this._getId(a));h&&d&&A(this,h);var i,j=!1!==this._opts.validateSchema&&!b;j&&!(i=h&&h==F.normalizeId(a.$schema))&&this.validateSchema(a,!0);var k=F.ids.call(this,a),l=new H({id:h,schema:a,localRefs:k,cacheKey:f,meta:c});return"#"!=h[0]&&d&&(this._refs[h]=l),this._cache.put(f,l),j&&i&&this.validateSchema(a,!0),l}function q(a,b){function c(){var b=a.validate,d=b.apply(null,arguments);return c.errors=b.errors,d}if(a.compiling)return a.validate=c,c.schema=a.schema,c.errors=null,c.root=b||c,!0===a.schema.$async&&(c.$async=!0),c;a.compiling=!0;var d;a.meta&&(d=this._opts,this._opts=this._metaOpts);var e;try{e=E.call(this,a.schema,b,a.localRefs)}finally{a.compiling=!1,a.meta&&(this._opts=d)}return a.validate=e,a.refs=e.refs,a.refVal=e.refVal,a.root=e.root,e}function r(a){switch(a.schemaId){case"$id":return t;case"id":return s;default:return u}}function s(a){return a.$id&&this.logger.warn("schema $id ignored",a.$id),a.id}function t(a){return a.id&&this.logger.warn("schema id ignored",a.id),a.$id}function u(a){if(a.$id&&a.id&&a.$id!=a.id)throw new Error("schema $id is different from id");return a.$id||a.id}function v(a,b){if(!(a=a||this.errors))return"No errors";b=b||{};for(var c=void 0===b.separator?", ":b.separator,d=void 0===b.dataVar?"data":b.dataVar,e="",f=0;f<a.length;f++){var g=a[f];g&&(e+=d+g.dataPath+" "+g.message+c)}return e.slice(0,-c.length)}function w(a,b){"string"==typeof b&&(b=new RegExp(b)),this._formats[a]=b}function x(a){var b;if(a._opts.$data&&(b=c(57),a.addMetaSchema(b,b.$id,!0)),!1!==a._opts.meta){var d=c(58);a._opts.$data&&(d=L(d,T)),a.addMetaSchema(d,R,!0),a._refs["http://json-schema.org/schema"]=R}}function y(a){var b=a._opts.schemas;if(b)if(Array.isArray(b))a.addSchema(b);else for(var c in b)a.addSchema(b[c],c)}function z(a){for(var b in a._opts.formats){var c=a._opts.formats[b];a.addFormat(b,c)}}function A(a,b){if(a._schemas[b]||a._refs[b])throw new Error('schema with key or id "'+b+'" already exists')}function B(a){for(var b=N.copy(a._opts),c=0;c<S.length;c++)delete b[S[c]];return b}function C(a){var b=a._opts.logger;if(!1===b)a.logger={log:D,warn:D,error:D};else{if(void 0===b&&(b=console),!("object"==typeof b&&b.log&&b.warn&&b.error))throw new Error("logger must implement log, warn and error methods");a.logger=b}}function D(){}var E=c(34),F=c(2),G=c(30),H=c(5),I=c(13),J=c(33),K=c(35),L=c(28),M=c(56),N=c(0),O=c(12);a.exports=d,d.prototype.validate=e,d.prototype.compile=f,d.prototype.addSchema=g,d.prototype.addMetaSchema=h,d.prototype.validateSchema=i,d.prototype.getSchema=k,d.prototype.removeSchema=n,d.prototype.addFormat=w,d.prototype.errorsText=v,d.prototype._addSchema=p,d.prototype._compile=q,d.prototype.compileAsync=c(32);var P=c(55);d.prototype.addKeyword=P.add,d.prototype.getKeyword=P.get,d.prototype.removeKeyword=P.remove;var Q=c(1);d.ValidationError=Q.Validation,d.MissingRefError=Q.MissingRef,d.$dataMetaSchema=L;var R="http://json-schema.org/draft-06/schema",S=["removeAdditional","useDefaults","coerceTypes"],T=["/properties"]},function(a,b,c){"use strict";var d=a.exports=function(){this._cache={}};d.prototype.put=function(a,b){this._cache[a]=b},d.prototype.get=function(a){return this._cache[a]},d.prototype.del=function(a){delete this._cache[a]},d.prototype.clear=function(){this._cache={}}},function(a,b,c){"use strict";a.exports={$ref:c(52),allOf:c(37),anyOf:c(38),"const":c(39),contains:c(40),dependencies:c(42),"enum":c(43),format:c(44),items:c(45),maximum:c(6),minimum:c(6),maxItems:c(7),minItems:c(7),maxLength:c(8),minLength:c(8),maxProperties:c(9),minProperties:c(9),multipleOf:c(46),not:c(47),oneOf:c(48),pattern:c(49),properties:c(50),propertyNames:c(51),required:c(53),uniqueItems:c(54),validate:c(10)}},function(a,b,c){"use strict";function d(a,b,c){function f(a){var b=a.$schema;return b&&!h.getSchema(b)?d.call(h,{$ref:b},!0):Promise.resolve()}function g(a){try{return h._compile(a)}catch(c){if(c instanceof e)return function(c){function d(){delete h._loadingSchemas[i]}function e(a){return h._refs[a]||h._schemas[a]}var i=c.missingSchema;if(e(i))throw new Error("Schema "+i+" is loaded but "+c.missingRef+" cannot be resolved");var j=h._loadingSchemas[i];return j||(j=h._loadingSchemas[i]=h._opts.loadSchema(i),j.then(d,d)),j.then(function(a){return e(i)?void 0:f(a).then(function(){e(i)||h.addSchema(a,i,void 0,b)})}).then(function(){return g(a)})}(c);throw c}}var h=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof b&&(c=b,b=void 0);var i=f(a).then(function(){var c=h._addSchema(a,void 0,b);return c.validate||g(c)});return c&&i.then(function(a){c(null,a)},c),i}var e=c(1).MissingRef;a.exports=d},function(a,b,c){"use strict";function d(a){return a="full"==a?"full":"fast",k.copy(d[a])}function e(a){var b=a.match(l);if(!b)return!1;var c=+b[1],d=+b[2];return c>=1&&12>=c&&d>=1&&d<=m[c]}function f(a,b){var c=a.match(n);if(!c)return!1;var d=c[1],e=c[2],f=c[3],g=c[5];return 23>=d&&59>=e&&59>=f&&(!b||g)}function g(a){var b=a.split(w);return 2==b.length&&e(b[0])&&f(b[1],!0)}function h(a){return a.length<=255&&o.test(a)}function i(a){return x.test(a)&&p.test(a)}function j(a){if(y.test(a))return!1;try{return new RegExp(a),!0}catch(a){return!1}}var k=c(0),l=/^\d\d\d\d-(\d\d)-(\d\d)$/,m=[0,31,29,31,30,31,30,31,31,30,31,30,31],n=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,o=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,p=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@\/?]|%[0-9a-f]{2})*)?$/i,q=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@\/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@\/?]|%[0-9a-f]{2})*)?$/i,r=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#.\/;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,s=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,t=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,u=/^(?:\/(?:[^~\/]|~0|~1)*)*$|^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,v=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~\/]|~0|~1)*)*)$/;a.exports=d,d.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^[0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*)(?::|\/)\/?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/\/)?[^\s]*$/i,"uri-template":r,url:s,email:/^[a-z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:o,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:j,uuid:t,"json-pointer":u,"relative-json-pointer":v},d.full={date:e,time:f,"date-time":g,uri:i,"uri-reference":q,"uri-template":r,url:s,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&''*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:h,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:j,uuid:t,"json-pointer":u,"relative-json-pointer":v};var w=/t|\s/i,x=/\/|:/,y=/[^\\]\\Z/},function(a,b,c){"use strict";function d(a,b,c,g){function v(){var a=P.validate,b=a.apply(null,arguments);return v.errors=a.errors,b}function w(a,c,e,f){var g=!c||c&&c.schema==a;if(c.schema!=b.schema)return d.call(F,a,c,e,f);var p=!0===a.$async,v=q({isTop:!0,schema:a,isRoot:g,baseId:f,root:c,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:o.MissingRef,RULES:R,validate:q,util:n,resolve:m,resolveRef:x,usePattern:C,useDefault:D,useCustomRule:E,opts:G,formats:Q,logger:F.logger,self:F});v=l(H,j)+l(J,h)+l(L,i)+l(N,k)+v,G.processCode&&(v=G.processCode(v));var w;try{w=new Function("self","RULES","formats","root","refVal","defaults","customRules","co","equal","ucs2length","ValidationError",v)(F,R,Q,b,H,L,N,r,t,s,u),H[0]=w}catch(a){throw F.logger.error("Error compiling schema, function code:",v),a}return w.schema=a,w.errors=null,w.refs=I,w.refVal=H,w.root=g?w:c,p&&(w.$async=!0),!0===G.sourceCode&&(w.source={code:v,patterns:J,defaults:L}),w}function x(a,e,f){e=m.url(a,e);var g,h,i=I[e];if(void 0!==i)return g=H[i],h="refVal["+i+"]",B(g,h);if(!f&&b.refs){var j=b.refs[e];if(void 0!==j)return g=b.refVal[j],h=y(e,g),B(g,h)}h=y(e);var k=m.call(F,w,b,e);if(void 0===k){var l=c&&c[e];l&&(k=m.inlineRef(l,G.inlineRefs)?l:d.call(F,l,b,c,a))}if(void 0!==k)return A(e,k),B(k,h);z(e);return void 0}function y(a,b){var c=H.length;return H[c]=b,I[a]=c,"refVal"+c}function z(a){delete I[a]}function A(a,b){var c=I[a];H[c]=b}function B(a,b){return"object"==typeof a||"boolean"==typeof a?{code:b,schema:a,inline:!0}:{code:b,$async:a&&a.$async}}function C(a){var b=K[a];return void 0===b&&(b=K[a]=J.length,J[b]=a),"pattern"+b}function D(a){switch(typeof a){case"boolean":case"number":return""+a;case"string":return n.toQuotedString(a);case"object":if(null===a)return"null";var b=p(a),c=M[b];return void 0===c&&(c=M[b]=L.length,L[c]=a),"default"+c}}function E(a,b,c,d){var e=a.definition.validateSchema;if(e&&!1!==F._opts.validateSchema&&!e(b)){var f="keyword schema is invalid: "+F.errorsText(e.errors);if("log"!=F._opts.validateSchema)throw new Error(f);F.logger.error(f)}var g,h=a.definition.compile,i=a.definition.inline,j=a.definition.macro;if(h)g=h.call(F,b,c,d);else if(j)g=j.call(F,b,c,d),!1!==G.validateSchema&&F.validateSchema(g,!0);else if(i)g=i.call(F,d,a.keyword,b,c);else if(!(g=a.definition.validate))return;if(void 0===g)throw new Error('custom keyword "'+a.keyword+'"failed to compile');var k=N.length;return N[k]=g,{code:"customRule"+k,validate:g}}var F=this,G=this._opts,H=[void 0],I={},J=[],K={},L=[],M={},N=[];b=b||{schema:a,refVal:H,refs:I};var O=e.call(this,a,b,g),P=this._compilations[O.index];if(O.compiling)return P.callValidate=v;var Q=this._formats,R=this.RULES;try{var S=w(a,b,c,g);P.validate=S;var T=P.callValidate;return T&&(T.schema=S.schema,T.errors=null,T.refs=S.refs,T.refVal=S.refVal,T.root=S.root,T.$async=S.$async,G.sourceCode&&(T.source=S.source)),S}finally{f.call(this,a,b,g)}}function e(a,b,c){var d=g.call(this,a,b,c);return d>=0?{index:d,compiling:!0}:(d=this._compilations.length,this._compilations[d]={schema:a,root:b,baseId:c},{index:d,compiling:!1})}function f(a,b,c){var d=g.call(this,a,b,c);d>=0&&this._compilations.splice(d,1)}function g(a,b,c){for(var d=0;d<this._compilations.length;d++){var e=this._compilations[d];if(e.schema==a&&e.root==b&&e.baseId==c)return d}return-1}function h(a,b){return"var pattern"+a+" = new RegExp("+n.toQuotedString(b[a])+");"}function i(a){return"var default"+a+" = defaults["+a+"];"}function j(a,b){return void 0===b[a]?"":"var refVal"+a+" = refVal["+a+"];"}function k(a){return"var customRule"+a+" = customRules["+a+"];"}function l(a,b){if(!a.length)return"";for(var c="",d=0;d<a.length;d++)c+=b(d,a);return c}var m=c(2),n=c(0),o=c(1),p=c(13),q=c(10),r=c(12),s=n.ucs2length,t=c(3),u=o.Validation;a.exports=d},function(a,b,c){"use strict";var d=c(31),e=c(0).toHash;a.exports=function(){var a=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","uniqueItems","contains","items"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf"]}],b=["type"],c=["additionalItems","$schema","$id","id","title","description","default","definitions"],f=["number","integer","string","array","object","boolean","null"];return a.all=e(b),a.types=e(f),a.forEach(function(c){c.rules=c.rules.map(function(c){var e;if("object"==typeof c){var f=Object.keys(c)[0];e=c[f],c=f,e.forEach(function(c){b.push(c),a.all[c]=!0})}return b.push(c),a.all[c]={keyword:c,code:d[c],"implements":e}}),c.type&&(a.types[c.type]=c)}),a.keywords=e(b.concat(c)),a.custom={},a}},function(a,b,c){"use strict";a.exports=function(a){for(var b,c=0,d=a.length,e=0;d>e;)c++,(b=a.charCodeAt(e++))>=55296&&56319>=b&&d>e&&56320==(64512&(b=a.charCodeAt(e)))&&e++;return c}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d=" ",e=a.schema[b],f=a.schemaPath+a.util.getProperty(b),g=a.errSchemaPath+"/"+b,h=!a.opts.allErrors,i=a.util.copy(a),j="";i.level++;var k="valid"+i.level,l=i.baseId,m=!0,n=e;if(n)for(var o,p=-1,q=n.length-1;q>p;)o=n[p+=1],a.util.schemaHasRules(o,a.RULES.all)&&(m=!1,i.schema=o,i.schemaPath=f+"["+p+"]",i.errSchemaPath=g+"/"+p,d+="  "+a.validate(i)+" ",i.baseId=l,h&&(d+=" if ("+k+") { ",j+="}"));return h&&(d+=m?" if (true) { ":" "+j.slice(0,-1)+" "),d=a.util.cleanUpCode(d)}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d=" ",e=a.level,f=a.dataLevel,g=a.schema[b],h=a.schemaPath+a.util.getProperty(b),i=a.errSchemaPath+"/"+b,j=!a.opts.allErrors,k="data"+(f||""),l="valid"+e,m="errs__"+e,n=a.util.copy(a),o="";n.level++;var p="valid"+n.level;if(g.every(function(b){return a.util.schemaHasRules(b,a.RULES.all)})){var q=n.baseId;d+=" var "+m+" = errors; var "+l+" = false;  ";var r=a.compositeRule;a.compositeRule=n.compositeRule=!0;var s=g;if(s)for(var t,u=-1,v=s.length-1;v>u;)t=s[u+=1],n.schema=t,n.schemaPath=h+"["+u+"]",n.errSchemaPath=i+"/"+u,d+="  "+a.validate(n)+" ",n.baseId=q,d+=" "+l+" = "+l+" || "+p+"; if (!"+l+") { ",o+="}";a.compositeRule=n.compositeRule=r,d+=" "+o+" if (!"+l+") {   var err =   ",!1!==a.createErrors?(d+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: {} ",!1!==a.opts.messages&&(d+=" , message: 'should match some schema in anyOf' "),a.opts.verbose&&(d+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ",d+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",
!a.compositeRule&&j&&(d+=a.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),d+=" } else {  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; } ",a.opts.allErrors&&(d+=" } "),d=a.util.cleanUpCode(d)}else j&&(d+=" if (true) { ");return d}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d=" ",e=a.level,f=a.dataLevel,g=a.schema[b],h=a.schemaPath+a.util.getProperty(b),i=a.errSchemaPath+"/"+b,j=!a.opts.allErrors,k="data"+(f||""),l="valid"+e,m=a.opts.$data&&g&&g.$data;m&&(d+=" var schema"+e+" = "+a.util.getData(g.$data,f,a.dataPathArr)+"; "),m||(d+=" var schema"+e+" = validate.schema"+h+";"),d+="var "+l+" = equal("+k+", schema"+e+"); if (!"+l+") {   ";var n=n||[];n.push(d),d="",!1!==a.createErrors?(d+=" { keyword: 'const' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: {} ",!1!==a.opts.messages&&(d+=" , message: 'should be equal to constant' "),a.opts.verbose&&(d+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ";var o=d;return d=n.pop(),d+=!a.compositeRule&&j?a.async?" throw new ValidationError(["+o+"]); ":" validate.errors = ["+o+"]; return false; ":" var err = "+o+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d+=" }",j&&(d+=" else { "),d}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d=" ",e=a.level,f=a.dataLevel,g=a.schema[b],h=a.schemaPath+a.util.getProperty(b),i=a.errSchemaPath+"/"+b,j=!a.opts.allErrors,k="data"+(f||""),l="valid"+e,m="errs__"+e,n=a.util.copy(a);n.level++;var o="valid"+n.level,p="i"+e,q=n.dataLevel=a.dataLevel+1,r="data"+q,s=a.baseId,t=a.util.schemaHasRules(g,a.RULES.all);if(d+="var "+m+" = errors;var "+l+";",t){var u=a.compositeRule;a.compositeRule=n.compositeRule=!0,n.schema=g,n.schemaPath=h,n.errSchemaPath=i,d+=" var "+o+" = false; for (var "+p+" = 0; "+p+" < "+k+".length; "+p+"++) { ",n.errorPath=a.util.getPathExpr(a.errorPath,p,a.opts.jsonPointers,!0);var v=k+"["+p+"]";n.dataPathArr[q]=p;var w=a.validate(n);n.baseId=s,d+=a.util.varOccurences(w,r)<2?" "+a.util.varReplace(w,r,v)+" ":" var "+r+" = "+v+"; "+w+" ",d+=" if ("+o+") break; }  ",a.compositeRule=n.compositeRule=u,d+="  if (!"+o+") {"}else d+=" if ("+k+".length == 0) {";var x=x||[];x.push(d),d="",!1!==a.createErrors?(d+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: {} ",!1!==a.opts.messages&&(d+=" , message: 'should contain a valid item' "),a.opts.verbose&&(d+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ";var y=d;return d=x.pop(),d+=!a.compositeRule&&j?a.async?" throw new ValidationError(["+y+"]); ":" validate.errors = ["+y+"]; return false; ":" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d+=" } else { ",t&&(d+="  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; } "),a.opts.allErrors&&(d+=" } "),d=a.util.cleanUpCode(d)}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d,e,f=" ",g=a.level,h=a.dataLevel,i=a.schema[b],j=a.schemaPath+a.util.getProperty(b),k=a.errSchemaPath+"/"+b,l=!a.opts.allErrors,m="data"+(h||""),n="valid"+g,o="errs__"+g,p=a.opts.$data&&i&&i.$data;p?(f+=" var schema"+g+" = "+a.util.getData(i.$data,h,a.dataPathArr)+"; ",e="schema"+g):e=i;var q,r,s,t,u,v=this,w="definition"+g,x=v.definition,y="";if(p&&x.$data){u="keywordValidate"+g;var z=x.validateSchema;f+=" var "+w+" = RULES.custom['"+b+"'].definition; var "+u+" = "+w+".validate;"}else{if(!(t=a.useCustomRule(v,i,a.schema,a)))return;e="validate.schema"+j,u=t.code,q=x.compile,r=x.inline,s=x.macro}var A=u+".errors",B="i"+g,C="ruleErr"+g,D=x.async;if(D&&!a.async)throw new Error("async keyword in sync schema");if(r||s||(f+=A+" = null;"),f+="var "+o+" = errors;var "+n+";",p&&x.$data&&(y+="}",f+=" if ("+e+" === undefined) { "+n+" = true; } else { ",z&&(y+="}",f+=" "+n+" = "+w+".validateSchema("+e+"); if ("+n+") { ")),r)f+=x.statements?" "+t.validate+" ":" "+n+" = "+t.validate+"; ";else if(s){var E=a.util.copy(a),y="";E.level++;var F="valid"+E.level;E.schema=t.validate,E.schemaPath="";var G=a.compositeRule;a.compositeRule=E.compositeRule=!0;var H=a.validate(E).replace(/validate\.schema/g,u);a.compositeRule=E.compositeRule=G,f+=" "+H}else{var I=I||[];I.push(f),f="",f+="  "+u+".call( ",f+=a.opts.passContext?"this":"self",f+=q||!1===x.schema?" , "+m+" ":" , "+e+" , "+m+" , validate.schema"+a.schemaPath+" ",f+=" , (dataPath || '')",'""'!=a.errorPath&&(f+=" + "+a.errorPath);var J=h?"data"+(h-1||""):"parentData",K=h?a.dataPathArr[h]:"parentDataProperty";f+=" , "+J+" , "+K+" , rootData )  ";var L=f;f=I.pop(),!1===x.errors?(f+=" "+n+" = ",D&&(f+=""+a.yieldAwait),f+=L+"; "):D?(A="customErrors"+g,f+=" var "+A+" = null; try { "+n+" = "+a.yieldAwait+L+"; } catch (e) { "+n+" = false; if (e instanceof ValidationError) "+A+" = e.errors; else throw e; } "):f+=" "+A+" = null; "+n+" = "+L+"; "}if(x.modifying&&(f+=" if ("+J+") "+m+" = "+J+"["+K+"];"),f+=""+y,x.valid)l&&(f+=" if (true) { ");else{f+=" if ( ",void 0===x.valid?(f+=" !",f+=s?""+F:""+n):f+=" "+!x.valid+" ",f+=") { ",d=v.keyword;var I=I||[];I.push(f),f="";var I=I||[];I.push(f),f="",!1!==a.createErrors?(f+=" { keyword: '"+(d||"custom")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(k)+" , params: { keyword: '"+v.keyword+"' } ",!1!==a.opts.messages&&(f+=" , message: 'should pass \""+v.keyword+"\" keyword validation' "),a.opts.verbose&&(f+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+m+" "),f+=" } "):f+=" {} ";var M=f;f=I.pop(),f+=!a.compositeRule&&l?a.async?" throw new ValidationError(["+M+"]); ":" validate.errors = ["+M+"]; return false; ":" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var N=f;f=I.pop(),r?x.errors?"full"!=x.errors&&(f+="  for (var "+B+"="+o+"; "+B+"<errors; "+B+"++) { var "+C+" = vErrors["+B+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+a.errorPath+"; if ("+C+".schemaPath === undefined) { "+C+'.schemaPath = "'+k+'"; } ',a.opts.verbose&&(f+=" "+C+".schema = "+e+"; "+C+".data = "+m+"; "),f+=" } "):!1===x.errors?f+=" "+N+" ":(f+=" if ("+o+" == errors) { "+N+" } else {  for (var "+B+"="+o+"; "+B+"<errors; "+B+"++) { var "+C+" = vErrors["+B+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+a.errorPath+"; if ("+C+".schemaPath === undefined) { "+C+'.schemaPath = "'+k+'"; } ',a.opts.verbose&&(f+=" "+C+".schema = "+e+"; "+C+".data = "+m+"; "),f+=" } } "):s?(f+="   var err =   ",!1!==a.createErrors?(f+=" { keyword: '"+(d||"custom")+"' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(k)+" , params: { keyword: '"+v.keyword+"' } ",!1!==a.opts.messages&&(f+=" , message: 'should pass \""+v.keyword+"\" keyword validation' "),a.opts.verbose&&(f+=" , schema: validate.schema"+j+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+m+" "),f+=" } "):f+=" {} ",f+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!a.compositeRule&&l&&(f+=a.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; ")):!1===x.errors?f+=" "+N+" ":(f+=" if (Array.isArray("+A+")) { if (vErrors === null) vErrors = "+A+"; else vErrors = vErrors.concat("+A+"); errors = vErrors.length;  for (var "+B+"="+o+"; "+B+"<errors; "+B+"++) { var "+C+" = vErrors["+B+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+a.errorPath+";  "+C+'.schemaPath = "'+k+'";  ',a.opts.verbose&&(f+=" "+C+".schema = "+e+"; "+C+".data = "+m+"; "),f+=" } } else { "+N+" } "),f+=" } ",l&&(f+=" else { ")}return f}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d=" ",e=a.level,f=a.dataLevel,g=a.schema[b],h=a.schemaPath+a.util.getProperty(b),i=a.errSchemaPath+"/"+b,j=!a.opts.allErrors,k="data"+(f||""),l="errs__"+e,m=a.util.copy(a),n="";m.level++;var o="valid"+m.level,p={},q={},r=a.opts.ownProperties;for(v in g){var s=g[v],t=Array.isArray(s)?q:p;t[v]=s}d+="var "+l+" = errors;";var u=a.errorPath;d+="var missing"+e+";";for(var v in q)if(t=q[v],t.length){if(d+=" if ( "+k+a.util.getProperty(v)+" !== undefined ",r&&(d+=" && Object.prototype.hasOwnProperty.call("+k+", '"+a.util.escapeQuotes(v)+"') "),j){d+=" && ( ";var w=t;if(w)for(var x,y=-1,z=w.length-1;z>y;){x=w[y+=1],y&&(d+=" || ");var A=a.util.getProperty(x),B=k+A;d+=" ( ( "+B+" === undefined ",r&&(d+=" || ! Object.prototype.hasOwnProperty.call("+k+", '"+a.util.escapeQuotes(x)+"') "),d+=") && (missing"+e+" = "+a.util.toQuotedString(a.opts.jsonPointers?x:A)+") ) "}d+=")) {  ";var C="missing"+e,D="' + "+C+" + '";a.opts._errorDataPathProperty&&(a.errorPath=a.opts.jsonPointers?a.util.getPathExpr(u,C,!0):u+" + "+C);var E=E||[];E.push(d),d="",!1!==a.createErrors?(d+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: { property: '"+a.util.escapeQuotes(v)+"', missingProperty: '"+D+"', depsCount: "+t.length+", deps: '"+a.util.escapeQuotes(1==t.length?t[0]:t.join(", "))+"' } ",!1!==a.opts.messages&&(d+=" , message: 'should have ",d+=1==t.length?"property "+a.util.escapeQuotes(t[0]):"properties "+a.util.escapeQuotes(t.join(", ")),d+=" when property "+a.util.escapeQuotes(v)+" is present' "),a.opts.verbose&&(d+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ";var F=d;d=E.pop(),d+=!a.compositeRule&&j?a.async?" throw new ValidationError(["+F+"]); ":" validate.errors = ["+F+"]; return false; ":" var err = "+F+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{d+=" ) { ";var G=t;if(G)for(var x,H=-1,I=G.length-1;I>H;){x=G[H+=1];var A=a.util.getProperty(x),D=a.util.escapeQuotes(x),B=k+A;a.opts._errorDataPathProperty&&(a.errorPath=a.util.getPath(u,x,a.opts.jsonPointers)),d+=" if ( "+B+" === undefined ",r&&(d+=" || ! Object.prototype.hasOwnProperty.call("+k+", '"+a.util.escapeQuotes(x)+"') "),d+=") {  var err =   ",!1!==a.createErrors?(d+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: { property: '"+a.util.escapeQuotes(v)+"', missingProperty: '"+D+"', depsCount: "+t.length+", deps: '"+a.util.escapeQuotes(1==t.length?t[0]:t.join(", "))+"' } ",!1!==a.opts.messages&&(d+=" , message: 'should have ",d+=1==t.length?"property "+a.util.escapeQuotes(t[0]):"properties "+a.util.escapeQuotes(t.join(", ")),d+=" when property "+a.util.escapeQuotes(v)+" is present' "),a.opts.verbose&&(d+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ",d+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}d+=" }   ",j&&(n+="}",d+=" else { ")}a.errorPath=u;var J=m.baseId;for(var v in p){var s=p[v];a.util.schemaHasRules(s,a.RULES.all)&&(d+=" "+o+" = true; if ( "+k+a.util.getProperty(v)+" !== undefined ",r&&(d+=" && Object.prototype.hasOwnProperty.call("+k+", '"+a.util.escapeQuotes(v)+"') "),d+=") { ",m.schema=s,m.schemaPath=h+a.util.getProperty(v),m.errSchemaPath=i+"/"+a.util.escapeFragment(v),d+="  "+a.validate(m)+" ",m.baseId=J,d+=" }  ",j&&(d+=" if ("+o+") { ",n+="}"))}return j&&(d+="   "+n+" if ("+l+" == errors) {"),d=a.util.cleanUpCode(d)}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d=" ",e=a.level,f=a.dataLevel,g=a.schema[b],h=a.schemaPath+a.util.getProperty(b),i=a.errSchemaPath+"/"+b,j=!a.opts.allErrors,k="data"+(f||""),l="valid"+e,m=a.opts.$data&&g&&g.$data;m&&(d+=" var schema"+e+" = "+a.util.getData(g.$data,f,a.dataPathArr)+"; ");var n="i"+e,o="schema"+e;m||(d+=" var "+o+" = validate.schema"+h+";"),d+="var "+l+";",m&&(d+=" if (schema"+e+" === undefined) "+l+" = true; else if (!Array.isArray(schema"+e+")) "+l+" = false; else {"),d+=l+" = false;for (var "+n+"=0; "+n+"<"+o+".length; "+n+"++) if (equal("+k+", "+o+"["+n+"])) { "+l+" = true; break; }",m&&(d+="  }  "),d+=" if (!"+l+") {   ";var p=p||[];p.push(d),d="",!1!==a.createErrors?(d+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: { allowedValues: schema"+e+" } ",!1!==a.opts.messages&&(d+=" , message: 'should be equal to one of the allowed values' "),a.opts.verbose&&(d+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ";var q=d;return d=p.pop(),d+=!a.compositeRule&&j?a.async?" throw new ValidationError(["+q+"]); ":" validate.errors = ["+q+"]; return false; ":" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d+=" }",j&&(d+=" else { "),d}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d=" ",e=a.level,f=a.dataLevel,g=a.schema[b],h=a.schemaPath+a.util.getProperty(b),i=a.errSchemaPath+"/"+b,j=!a.opts.allErrors,k="data"+(f||"");if(!1===a.opts.format)return j&&(d+=" if (true) { "),d;var l,m=a.opts.$data&&g&&g.$data;m?(d+=" var schema"+e+" = "+a.util.getData(g.$data,f,a.dataPathArr)+"; ",l="schema"+e):l=g;var n=a.opts.unknownFormats,o=Array.isArray(n);if(m){var p="format"+e,q="isObject"+e,r="formatType"+e;d+=" var "+p+" = formats["+l+"]; var "+q+" = typeof "+p+" == 'object' && !("+p+" instanceof RegExp) && "+p+".validate; var "+r+" = "+q+" && "+p+".type || 'string'; if ("+q+") { ",a.async&&(d+=" var async"+e+" = "+p+".async; "),d+=" "+p+" = "+p+".validate; } if (  ",m&&(d+=" ("+l+" !== undefined && typeof "+l+" != 'string') || "),d+=" (","ignore"!=n&&(d+=" ("+l+" && !"+p+" ",o&&(d+=" && self._opts.unknownFormats.indexOf("+l+") == -1 "),d+=") || "),d+=" ("+p+" && "+r+" == '"+c+"' && !(typeof "+p+" == 'function' ? ",d+=a.async?" (async"+e+" ? "+a.yieldAwait+" "+p+"("+k+") : "+p+"("+k+")) ":" "+p+"("+k+") ",d+=" : "+p+".test("+k+"))))) {"}else{var p=a.formats[g];if(!p){if("ignore"==n)return a.logger.warn('unknown format "'+g+'" ignored in schema at path "'+a.errSchemaPath+'"'),j&&(d+=" if (true) { "),d;if(o&&n.indexOf(g)>=0)return j&&(d+=" if (true) { "),d;throw new Error('unknown format "'+g+'" is used in schema at path "'+a.errSchemaPath+'"')}var q="object"==typeof p&&!(p instanceof RegExp)&&p.validate,r=q&&p.type||"string";if(q){var s=!0===p.async;p=p.validate}if(r!=c)return j&&(d+=" if (true) { "),d;if(s){if(!a.async)throw new Error("async format in sync schema");var t="formats"+a.util.getProperty(g)+".validate";d+=" if (!("+a.yieldAwait+" "+t+"("+k+"))) { "}else{d+=" if (! ";var t="formats"+a.util.getProperty(g);q&&(t+=".validate"),d+="function"==typeof p?" "+t+"("+k+") ":" "+t+".test("+k+") ",d+=") { "}}var u=u||[];u.push(d),d="",!1!==a.createErrors?(d+=" { keyword: 'format' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: { format:  ",d+=m?""+l:""+a.util.toQuotedString(g),d+="  } ",!1!==a.opts.messages&&(d+=" , message: 'should match format \"",d+=m?"' + "+l+" + '":""+a.util.escapeQuotes(g),d+="\"' "),a.opts.verbose&&(d+=" , schema:  ",d+=m?"validate.schema"+h:""+a.util.toQuotedString(g),d+="         , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ";var v=d;return d=u.pop(),d+=!a.compositeRule&&j?a.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d+=" } ",j&&(d+=" else { "),d}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d=" ",e=a.level,f=a.dataLevel,g=a.schema[b],h=a.schemaPath+a.util.getProperty(b),i=a.errSchemaPath+"/"+b,j=!a.opts.allErrors,k="data"+(f||""),l="valid"+e,m="errs__"+e,n=a.util.copy(a),o="";n.level++;var p="valid"+n.level,q="i"+e,r=n.dataLevel=a.dataLevel+1,s="data"+r,t=a.baseId;if(d+="var "+m+" = errors;var "+l+";",Array.isArray(g)){var u=a.schema.additionalItems;if(!1===u){d+=" "+l+" = "+k+".length <= "+g.length+"; ";var v=i;i=a.errSchemaPath+"/additionalItems",d+="  if (!"+l+") {   ";var w=w||[];w.push(d),d="",!1!==a.createErrors?(d+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: { limit: "+g.length+" } ",!1!==a.opts.messages&&(d+=" , message: 'should NOT have more than "+g.length+" items' "),a.opts.verbose&&(d+=" , schema: false , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ";var x=d;d=w.pop(),d+=!a.compositeRule&&j?a.async?" throw new ValidationError(["+x+"]); ":" validate.errors = ["+x+"]; return false; ":" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d+=" } ",i=v,j&&(o+="}",d+=" else { ")}var y=g;if(y)for(var z,A=-1,B=y.length-1;B>A;)if(z=y[A+=1],a.util.schemaHasRules(z,a.RULES.all)){d+=" "+p+" = true; if ("+k+".length > "+A+") { ";var C=k+"["+A+"]";n.schema=z,n.schemaPath=h+"["+A+"]",n.errSchemaPath=i+"/"+A,n.errorPath=a.util.getPathExpr(a.errorPath,A,a.opts.jsonPointers,!0),n.dataPathArr[r]=A;var D=a.validate(n);n.baseId=t,d+=a.util.varOccurences(D,s)<2?" "+a.util.varReplace(D,s,C)+" ":" var "+s+" = "+C+"; "+D+" ",d+=" }  ",j&&(d+=" if ("+p+") { ",o+="}")}if("object"==typeof u&&a.util.schemaHasRules(u,a.RULES.all)){n.schema=u,n.schemaPath=a.schemaPath+".additionalItems",n.errSchemaPath=a.errSchemaPath+"/additionalItems",d+=" "+p+" = true; if ("+k+".length > "+g.length+") {  for (var "+q+" = "+g.length+"; "+q+" < "+k+".length; "+q+"++) { ",n.errorPath=a.util.getPathExpr(a.errorPath,q,a.opts.jsonPointers,!0);var C=k+"["+q+"]";n.dataPathArr[r]=q;var D=a.validate(n);n.baseId=t,d+=a.util.varOccurences(D,s)<2?" "+a.util.varReplace(D,s,C)+" ":" var "+s+" = "+C+"; "+D+" ",j&&(d+=" if (!"+p+") break; "),d+=" } }  ",j&&(d+=" if ("+p+") { ",o+="}")}}else if(a.util.schemaHasRules(g,a.RULES.all)){n.schema=g,n.schemaPath=h,n.errSchemaPath=i,d+="  for (var "+q+" = 0; "+q+" < "+k+".length; "+q+"++) { ",n.errorPath=a.util.getPathExpr(a.errorPath,q,a.opts.jsonPointers,!0);var C=k+"["+q+"]";n.dataPathArr[r]=q;var D=a.validate(n);n.baseId=t,d+=a.util.varOccurences(D,s)<2?" "+a.util.varReplace(D,s,C)+" ":" var "+s+" = "+C+"; "+D+" ",j&&(d+=" if (!"+p+") break; "),d+=" }"}return j&&(d+=" "+o+" if ("+m+" == errors) {"),d=a.util.cleanUpCode(d)}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d,e=" ",f=a.level,g=a.dataLevel,h=a.schema[b],i=a.schemaPath+a.util.getProperty(b),j=a.errSchemaPath+"/"+b,k=!a.opts.allErrors,l="data"+(g||""),m=a.opts.$data&&h&&h.$data;m?(e+=" var schema"+f+" = "+a.util.getData(h.$data,g,a.dataPathArr)+"; ",d="schema"+f):d=h,e+="var division"+f+";if (",m&&(e+=" "+d+" !== undefined && ( typeof "+d+" != 'number' || "),e+=" (division"+f+" = "+l+" / "+d+", ",e+=a.opts.multipleOfPrecision?" Math.abs(Math.round(division"+f+") - division"+f+") > 1e-"+a.opts.multipleOfPrecision+" ":" division"+f+" !== parseInt(division"+f+") ",e+=" ) ",m&&(e+="  )  "),e+=" ) {   ";var n=n||[];n.push(e),e="",!1!==a.createErrors?(e+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(j)+" , params: { multipleOf: "+d+" } ",!1!==a.opts.messages&&(e+=" , message: 'should be multiple of ",e+=m?"' + "+d:d+"'"),a.opts.verbose&&(e+=" , schema:  ",e+=m?"validate.schema"+i:""+h,e+="         , parentSchema: validate.schema"+a.schemaPath+" , data: "+l+" "),e+=" } "):e+=" {} ";var o=e;return e=n.pop(),e+=!a.compositeRule&&k?a.async?" throw new ValidationError(["+o+"]); ":" validate.errors = ["+o+"]; return false; ":" var err = "+o+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",e+="} ",k&&(e+=" else { "),e}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d=" ",e=a.level,f=a.dataLevel,g=a.schema[b],h=a.schemaPath+a.util.getProperty(b),i=a.errSchemaPath+"/"+b,j=!a.opts.allErrors,k="data"+(f||""),l="errs__"+e,m=a.util.copy(a);m.level++;var n="valid"+m.level;if(a.util.schemaHasRules(g,a.RULES.all)){m.schema=g,m.schemaPath=h,m.errSchemaPath=i,d+=" var "+l+" = errors;  ";var o=a.compositeRule;a.compositeRule=m.compositeRule=!0,m.createErrors=!1;var p;m.opts.allErrors&&(p=m.opts.allErrors,m.opts.allErrors=!1),d+=" "+a.validate(m)+" ",m.createErrors=!0,p&&(m.opts.allErrors=p),a.compositeRule=m.compositeRule=o,d+=" if ("+n+") {   ";var q=q||[];q.push(d),d="",!1!==a.createErrors?(d+=" { keyword: 'not' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: {} ",!1!==a.opts.messages&&(d+=" , message: 'should NOT be valid' "),a.opts.verbose&&(d+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ";var r=d;d=q.pop(),d+=!a.compositeRule&&j?a.async?" throw new ValidationError(["+r+"]); ":" validate.errors = ["+r+"]; return false; ":" var err = "+r+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d+=" } else {  errors = "+l+"; if (vErrors !== null) { if ("+l+") vErrors.length = "+l+"; else vErrors = null; } ",a.opts.allErrors&&(d+=" } ")}else d+="  var err =   ",!1!==a.createErrors?(d+=" { keyword: 'not' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: {} ",!1!==a.opts.messages&&(d+=" , message: 'should NOT be valid' "),a.opts.verbose&&(d+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ",d+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",j&&(d+=" if (false) { ");return d}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d=" ",e=a.level,f=a.dataLevel,g=a.schema[b],h=a.schemaPath+a.util.getProperty(b),i=a.errSchemaPath+"/"+b,j=!a.opts.allErrors,k="data"+(f||""),l="valid"+e,m="errs__"+e,n=a.util.copy(a),o="";n.level++;var p="valid"+n.level;d+="var "+m+" = errors;var prevValid"+e+" = false;var "+l+" = false;";var q=n.baseId,r=a.compositeRule;a.compositeRule=n.compositeRule=!0;var s=g;if(s)for(var t,u=-1,v=s.length-1;v>u;)t=s[u+=1],a.util.schemaHasRules(t,a.RULES.all)?(n.schema=t,n.schemaPath=h+"["+u+"]",n.errSchemaPath=i+"/"+u,d+="  "+a.validate(n)+" ",n.baseId=q):d+=" var "+p+" = true; ",u&&(d+=" if ("+p+" && prevValid"+e+") "+l+" = false; else { ",o+="}"),d+=" if ("+p+") "+l+" = prevValid"+e+" = true;";return a.compositeRule=n.compositeRule=r,d+=o+"if (!"+l+") {   var err =   ",!1!==a.createErrors?(d+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: {} ",!1!==a.opts.messages&&(d+=" , message: 'should match exactly one schema in oneOf' "),a.opts.verbose&&(d+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ",d+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!a.compositeRule&&j&&(d+=a.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),d+="} else {  errors = "+m+"; if (vErrors !== null) { if ("+m+") vErrors.length = "+m+"; else vErrors = null; }",a.opts.allErrors&&(d+=" } "),d}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d,e=" ",f=a.level,g=a.dataLevel,h=a.schema[b],i=a.schemaPath+a.util.getProperty(b),j=a.errSchemaPath+"/"+b,k=!a.opts.allErrors,l="data"+(g||""),m=a.opts.$data&&h&&h.$data;m?(e+=" var schema"+f+" = "+a.util.getData(h.$data,g,a.dataPathArr)+"; ",d="schema"+f):d=h;var n=m?"(new RegExp("+d+"))":a.usePattern(h);e+="if ( ",m&&(e+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),e+=" !"+n+".test("+l+") ) {   ";var o=o||[];o.push(e),e="",!1!==a.createErrors?(e+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(j)+" , params: { pattern:  ",e+=m?""+d:""+a.util.toQuotedString(h),e+="  } ",!1!==a.opts.messages&&(e+=" , message: 'should match pattern \"",e+=m?"' + "+d+" + '":""+a.util.escapeQuotes(h),e+="\"' "),a.opts.verbose&&(e+=" , schema:  ",e+=m?"validate.schema"+i:""+a.util.toQuotedString(h),e+="         , parentSchema: validate.schema"+a.schemaPath+" , data: "+l+" "),e+=" } "):e+=" {} ";var p=e;return e=o.pop(),e+=!a.compositeRule&&k?a.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",e+="} ",k&&(e+=" else { "),e}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d=" ",e=a.level,f=a.dataLevel,g=a.schema[b],h=a.schemaPath+a.util.getProperty(b),i=a.errSchemaPath+"/"+b,j=!a.opts.allErrors,k="data"+(f||""),l="valid"+e,m="errs__"+e,n=a.util.copy(a),o="";n.level++;var p="valid"+n.level,q="key"+e,r="idx"+e,s=n.dataLevel=a.dataLevel+1,t="data"+s,u="dataProperties"+e,v=Object.keys(g||{}),w=a.schema.patternProperties||{},x=Object.keys(w),y=a.schema.additionalProperties,z=v.length||x.length,A=!1===y,B="object"==typeof y&&Object.keys(y).length,C=a.opts.removeAdditional,D=A||B||C,E=a.opts.ownProperties,F=a.baseId,G=a.schema.required;if(G&&(!a.opts.v5||!G.$data)&&G.length<a.opts.loopRequired)var H=a.util.toHash(G);if(a.opts.patternGroups)var I=a.schema.patternGroups||{},J=Object.keys(I);if(d+="var "+m+" = errors;var "+p+" = true;",E&&(d+=" var "+u+" = undefined;"),D){if(d+=E?" "+u+" = "+u+" || Object.keys("+k+"); for (var "+r+"=0; "+r+"<"+u+".length; "+r+"++) { var "+q+" = "+u+"["+r+"]; ":" for (var "+q+" in "+k+") { ",z){if(d+=" var isAdditional"+e+" = !(false ",v.length)if(v.length>5)d+=" || validate.schema"+h+"["+q+"] ";else{var K=v;if(K)for(var L,M=-1,N=K.length-1;N>M;)L=K[M+=1],d+=" || "+q+" == "+a.util.toQuotedString(L)+" "}if(x.length){var O=x;if(O)for(var P,Q=-1,R=O.length-1;R>Q;)P=O[Q+=1],d+=" || "+a.usePattern(P)+".test("+q+") "}if(a.opts.patternGroups&&J.length){var S=J;if(S)for(var T,Q=-1,U=S.length-1;U>Q;)T=S[Q+=1],d+=" || "+a.usePattern(T)+".test("+q+") "}d+=" ); if (isAdditional"+e+") { "}if("all"==C)d+=" delete "+k+"["+q+"]; ";else{var V=a.errorPath,W="' + "+q+" + '";if(a.opts._errorDataPathProperty&&(a.errorPath=a.util.getPathExpr(a.errorPath,q,a.opts.jsonPointers)),A)if(C)d+=" delete "+k+"["+q+"]; ";else{d+=" "+p+" = false; ";var X=i;i=a.errSchemaPath+"/additionalProperties";var Y=Y||[];Y.push(d),d="",!1!==a.createErrors?(d+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: { additionalProperty: '"+W+"' } ",!1!==a.opts.messages&&(d+=" , message: 'should NOT have additional properties' "),a.opts.verbose&&(d+=" , schema: false , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ";var Z=d;d=Y.pop(),d+=!a.compositeRule&&j?a.async?" throw new ValidationError(["+Z+"]); ":" validate.errors = ["+Z+"]; return false; ":" var err = "+Z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i=X,j&&(d+=" break; ")}else if(B)if("failing"==C){d+=" var "+m+" = errors;  ";var $=a.compositeRule;a.compositeRule=n.compositeRule=!0,n.schema=y,n.schemaPath=a.schemaPath+".additionalProperties",n.errSchemaPath=a.errSchemaPath+"/additionalProperties",n.errorPath=a.opts._errorDataPathProperty?a.errorPath:a.util.getPathExpr(a.errorPath,q,a.opts.jsonPointers);var _=k+"["+q+"]";n.dataPathArr[s]=q;var aa=a.validate(n);n.baseId=F,d+=a.util.varOccurences(aa,t)<2?" "+a.util.varReplace(aa,t,_)+" ":" var "+t+" = "+_+"; "+aa+" ",d+=" if (!"+p+") { errors = "+m+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+k+"["+q+"]; }  ",a.compositeRule=n.compositeRule=$}else{n.schema=y,n.schemaPath=a.schemaPath+".additionalProperties",n.errSchemaPath=a.errSchemaPath+"/additionalProperties",n.errorPath=a.opts._errorDataPathProperty?a.errorPath:a.util.getPathExpr(a.errorPath,q,a.opts.jsonPointers);var _=k+"["+q+"]";n.dataPathArr[s]=q;var aa=a.validate(n);n.baseId=F,d+=a.util.varOccurences(aa,t)<2?" "+a.util.varReplace(aa,t,_)+" ":" var "+t+" = "+_+"; "+aa+" ",j&&(d+=" if (!"+p+") break; ")}a.errorPath=V}z&&(d+=" } "),d+=" }  ",j&&(d+=" if ("+p+") { ",o+="}")}var ba=a.opts.useDefaults&&!a.compositeRule;if(v.length){var ca=v;if(ca)for(var L,da=-1,ea=ca.length-1;ea>da;){L=ca[da+=1];var fa=g[L];if(a.util.schemaHasRules(fa,a.RULES.all)){var ga=a.util.getProperty(L),_=k+ga,ha=ba&&void 0!==fa["default"];n.schema=fa,n.schemaPath=h+ga,n.errSchemaPath=i+"/"+a.util.escapeFragment(L),n.errorPath=a.util.getPath(a.errorPath,L,a.opts.jsonPointers),n.dataPathArr[s]=a.util.toQuotedString(L);var aa=a.validate(n);if(n.baseId=F,a.util.varOccurences(aa,t)<2){aa=a.util.varReplace(aa,t,_);var ia=_}else{var ia=t;d+=" var "+t+" = "+_+"; "}if(ha)d+=" "+aa+" ";else{if(H&&H[L]){d+=" if ( "+ia+" === undefined ",E&&(d+=" || ! Object.prototype.hasOwnProperty.call("+k+", '"+a.util.escapeQuotes(L)+"') "),d+=") { "+p+" = false; ";var V=a.errorPath,X=i,ja=a.util.escapeQuotes(L);a.opts._errorDataPathProperty&&(a.errorPath=a.util.getPath(V,L,a.opts.jsonPointers)),i=a.errSchemaPath+"/required";var Y=Y||[];Y.push(d),d="",!1!==a.createErrors?(d+=" { keyword: 'required' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: { missingProperty: '"+ja+"' } ",!1!==a.opts.messages&&(d+=" , message: '",d+=a.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+ja+"\\'",d+="' "),a.opts.verbose&&(d+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ";var Z=d;d=Y.pop(),d+=!a.compositeRule&&j?a.async?" throw new ValidationError(["+Z+"]); ":" validate.errors = ["+Z+"]; return false; ":" var err = "+Z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i=X,a.errorPath=V,d+=" } else { "}else j?(d+=" if ( "+ia+" === undefined ",E&&(d+=" || ! Object.prototype.hasOwnProperty.call("+k+", '"+a.util.escapeQuotes(L)+"') "),d+=") { "+p+" = true; } else { "):(d+=" if ("+ia+" !== undefined ",E&&(d+=" &&   Object.prototype.hasOwnProperty.call("+k+", '"+a.util.escapeQuotes(L)+"') "),d+=" ) { ");d+=" "+aa+" } "}}j&&(d+=" if ("+p+") { ",o+="}")}}if(x.length){var ka=x;if(ka)for(var P,la=-1,ma=ka.length-1;ma>la;){P=ka[la+=1];var fa=w[P];if(a.util.schemaHasRules(fa,a.RULES.all)){n.schema=fa,n.schemaPath=a.schemaPath+".patternProperties"+a.util.getProperty(P),n.errSchemaPath=a.errSchemaPath+"/patternProperties/"+a.util.escapeFragment(P),d+=E?" "+u+" = "+u+" || Object.keys("+k+"); for (var "+r+"=0; "+r+"<"+u+".length; "+r+"++) { var "+q+" = "+u+"["+r+"]; ":" for (var "+q+" in "+k+") { ",d+=" if ("+a.usePattern(P)+".test("+q+")) { ",n.errorPath=a.util.getPathExpr(a.errorPath,q,a.opts.jsonPointers);var _=k+"["+q+"]";n.dataPathArr[s]=q;var aa=a.validate(n);n.baseId=F,d+=a.util.varOccurences(aa,t)<2?" "+a.util.varReplace(aa,t,_)+" ":" var "+t+" = "+_+"; "+aa+" ",j&&(d+=" if (!"+p+") break; "),d+=" } ",j&&(d+=" else "+p+" = true; "),d+=" }  ",j&&(d+=" if ("+p+") { ",o+="}")}}}if(a.opts.patternGroups&&J.length){var na=J;if(na)for(var T,oa=-1,pa=na.length-1;pa>oa;){T=na[oa+=1];var qa=I[T],fa=qa.schema;if(a.util.schemaHasRules(fa,a.RULES.all)){n.schema=fa,n.schemaPath=a.schemaPath+".patternGroups"+a.util.getProperty(T)+".schema",n.errSchemaPath=a.errSchemaPath+"/patternGroups/"+a.util.escapeFragment(T)+"/schema",d+=" var pgPropCount"+e+" = 0;  ",d+=E?" "+u+" = "+u+" || Object.keys("+k+"); for (var "+r+"=0; "+r+"<"+u+".length; "+r+"++) { var "+q+" = "+u+"["+r+"]; ":" for (var "+q+" in "+k+") { ",d+=" if ("+a.usePattern(T)+".test("+q+")) { pgPropCount"+e+"++; ",n.errorPath=a.util.getPathExpr(a.errorPath,q,a.opts.jsonPointers);var _=k+"["+q+"]";n.dataPathArr[s]=q;var aa=a.validate(n);n.baseId=F,d+=a.util.varOccurences(aa,t)<2?" "+a.util.varReplace(aa,t,_)+" ":" var "+t+" = "+_+"; "+aa+" ",j&&(d+=" if (!"+p+") break; "),d+=" } ",j&&(d+=" else "+p+" = true; "),
d+=" }  ",j&&(d+=" if ("+p+") { ",o+="}");var ra=qa.minimum,sa=qa.maximum;if(void 0!==ra||void 0!==sa){d+=" var "+l+" = true; ";var X=i;if(void 0!==ra){var ta=ra,ua="minimum",va="less";d+=" "+l+" = pgPropCount"+e+" >= "+ra+"; ",i=a.errSchemaPath+"/patternGroups/minimum",d+="  if (!"+l+") {   ";var Y=Y||[];Y.push(d),d="",!1!==a.createErrors?(d+=" { keyword: 'patternGroups' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: { reason: '"+ua+"', limit: "+ta+", pattern: '"+a.util.escapeQuotes(T)+"' } ",!1!==a.opts.messages&&(d+=" , message: 'should NOT have "+va+" than "+ta+' properties matching pattern "'+a.util.escapeQuotes(T)+"\"' "),a.opts.verbose&&(d+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ";var Z=d;d=Y.pop(),d+=!a.compositeRule&&j?a.async?" throw new ValidationError(["+Z+"]); ":" validate.errors = ["+Z+"]; return false; ":" var err = "+Z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d+=" } ",void 0!==sa&&(d+=" else ")}if(void 0!==sa){var ta=sa,ua="maximum",va="more";d+=" "+l+" = pgPropCount"+e+" <= "+sa+"; ",i=a.errSchemaPath+"/patternGroups/maximum",d+="  if (!"+l+") {   ";var Y=Y||[];Y.push(d),d="",!1!==a.createErrors?(d+=" { keyword: 'patternGroups' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: { reason: '"+ua+"', limit: "+ta+", pattern: '"+a.util.escapeQuotes(T)+"' } ",!1!==a.opts.messages&&(d+=" , message: 'should NOT have "+va+" than "+ta+' properties matching pattern "'+a.util.escapeQuotes(T)+"\"' "),a.opts.verbose&&(d+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ";var Z=d;d=Y.pop(),d+=!a.compositeRule&&j?a.async?" throw new ValidationError(["+Z+"]); ":" validate.errors = ["+Z+"]; return false; ":" var err = "+Z+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d+=" } "}i=X,j&&(d+=" if ("+l+") { ",o+="}")}}}}return j&&(d+=" "+o+" if ("+m+" == errors) {"),d=a.util.cleanUpCode(d)}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d=" ",e=a.level,f=a.dataLevel,g=a.schema[b],h=a.schemaPath+a.util.getProperty(b),i=a.errSchemaPath+"/"+b,j=!a.opts.allErrors,k="data"+(f||""),l="errs__"+e,m=a.util.copy(a);m.level++;var n="valid"+m.level;if(a.util.schemaHasRules(g,a.RULES.all)){m.schema=g,m.schemaPath=h,m.errSchemaPath=i;var o="key"+e,p="idx"+e,q="i"+e,r="' + "+o+" + '",s=m.dataLevel=a.dataLevel+1,t="data"+s,u="dataProperties"+e,v=a.opts.ownProperties,w=a.baseId;d+=" var "+l+" = errors; ",v&&(d+=" var "+u+" = undefined; "),d+=v?" "+u+" = "+u+" || Object.keys("+k+"); for (var "+p+"=0; "+p+"<"+u+".length; "+p+"++) { var "+o+" = "+u+"["+p+"]; ":" for (var "+o+" in "+k+") { ",d+=" var startErrs"+e+" = errors; ";var x=o,y=a.compositeRule;a.compositeRule=m.compositeRule=!0;var z=a.validate(m);m.baseId=w,d+=a.util.varOccurences(z,t)<2?" "+a.util.varReplace(z,t,x)+" ":" var "+t+" = "+x+"; "+z+" ",a.compositeRule=m.compositeRule=y,d+=" if (!"+n+") { for (var "+q+"=startErrs"+e+"; "+q+"<errors; "+q+"++) { vErrors["+q+"].propertyName = "+o+"; }   var err =   ",!1!==a.createErrors?(d+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: { propertyName: '"+r+"' } ",!1!==a.opts.messages&&(d+=" , message: 'property name \\'"+r+"\\' is invalid' "),a.opts.verbose&&(d+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ",d+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!a.compositeRule&&j&&(d+=a.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),j&&(d+=" break; "),d+=" } }"}return j&&(d+="  if ("+l+" == errors) {"),d=a.util.cleanUpCode(d)}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d,e,f=" ",g=a.level,h=a.dataLevel,i=a.schema[b],j=a.errSchemaPath+"/"+b,k=!a.opts.allErrors,l="data"+(h||""),m="valid"+g;if("#"==i||"#/"==i)a.isRoot?(d=a.async,e="validate"):(d=!0===a.root.schema.$async,e="root.refVal[0]");else{var n=a.resolveRef(a.baseId,i,a.isRoot);if(void 0===n){var o=a.MissingRefError.message(a.baseId,i);if("fail"==a.opts.missingRefs){a.logger.error(o);var p=p||[];p.push(f),f="",!1!==a.createErrors?(f+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(j)+" , params: { ref: '"+a.util.escapeQuotes(i)+"' } ",!1!==a.opts.messages&&(f+=" , message: 'can\\'t resolve reference "+a.util.escapeQuotes(i)+"' "),a.opts.verbose&&(f+=" , schema: "+a.util.toQuotedString(i)+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+l+" "),f+=" } "):f+=" {} ";var q=f;f=p.pop(),f+=!a.compositeRule&&k?a.async?" throw new ValidationError(["+q+"]); ":" validate.errors = ["+q+"]; return false; ":" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",k&&(f+=" if (false) { ")}else{if("ignore"!=a.opts.missingRefs)throw new a.MissingRefError(a.baseId,i,o);a.logger.warn(o),k&&(f+=" if (true) { ")}}else if(n.inline){var r=a.util.copy(a);r.level++;var s="valid"+r.level;r.schema=n.schema,r.schemaPath="",r.errSchemaPath=i;var t=a.validate(r).replace(/validate\.schema/g,n.code);f+=" "+t+" ",k&&(f+=" if ("+s+") { ")}else d=!0===n.$async,e=n.code}if(e){var p=p||[];p.push(f),f="",f+=a.opts.passContext?" "+e+".call(this, ":" "+e+"( ",f+=" "+l+", (dataPath || '')",'""'!=a.errorPath&&(f+=" + "+a.errorPath);f+=" , "+(h?"data"+(h-1||""):"parentData")+" , "+(h?a.dataPathArr[h]:"parentDataProperty")+", rootData)  ";var u=f;if(f=p.pop(),d){if(!a.async)throw new Error("async schema referenced by sync schema");k&&(f+=" var "+m+"; "),f+=" try { "+a.yieldAwait+" "+u+"; ",k&&(f+=" "+m+" = true; "),f+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",k&&(f+=" "+m+" = false; "),f+=" } ",k&&(f+=" if ("+m+") { ")}else f+=" if (!"+u+") { if (vErrors === null) vErrors = "+e+".errors; else vErrors = vErrors.concat("+e+".errors); errors = vErrors.length; } ",k&&(f+=" else { ")}return f}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d=" ",e=a.level,f=a.dataLevel,g=a.schema[b],h=a.schemaPath+a.util.getProperty(b),i=a.errSchemaPath+"/"+b,j=!a.opts.allErrors,k="data"+(f||""),l="valid"+e,m=a.opts.$data&&g&&g.$data;m&&(d+=" var schema"+e+" = "+a.util.getData(g.$data,f,a.dataPathArr)+"; ");var n="schema"+e;if(!m)if(g.length<a.opts.loopRequired&&a.schema.properties&&Object.keys(a.schema.properties).length){var o=[],p=g;if(p)for(var q,r=-1,s=p.length-1;s>r;){q=p[r+=1];var t=a.schema.properties[q];t&&a.util.schemaHasRules(t,a.RULES.all)||(o[o.length]=q)}}else var o=g;if(m||o.length){var u=a.errorPath,v=m||o.length>=a.opts.loopRequired,w=a.opts.ownProperties;if(j)if(d+=" var missing"+e+"; ",v){m||(d+=" var "+n+" = validate.schema"+h+"; ");var x="i"+e,y="schema"+e+"["+x+"]",z="' + "+y+" + '";a.opts._errorDataPathProperty&&(a.errorPath=a.util.getPathExpr(u,y,a.opts.jsonPointers)),d+=" var "+l+" = true; ",m&&(d+=" if (schema"+e+" === undefined) "+l+" = true; else if (!Array.isArray(schema"+e+")) "+l+" = false; else {"),d+=" for (var "+x+" = 0; "+x+" < "+n+".length; "+x+"++) { "+l+" = "+k+"["+n+"["+x+"]] !== undefined ",w&&(d+=" &&   Object.prototype.hasOwnProperty.call("+k+", "+n+"["+x+"]) "),d+="; if (!"+l+") break; } ",m&&(d+="  }  "),d+="  if (!"+l+") {   ";var A=A||[];A.push(d),d="",!1!==a.createErrors?(d+=" { keyword: 'required' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: { missingProperty: '"+z+"' } ",!1!==a.opts.messages&&(d+=" , message: '",d+=a.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+z+"\\'",d+="' "),a.opts.verbose&&(d+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ";var B=d;d=A.pop(),d+=!a.compositeRule&&j?a.async?" throw new ValidationError(["+B+"]); ":" validate.errors = ["+B+"]; return false; ":" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d+=" } else { "}else{d+=" if ( ";var C=o;if(C)for(var D,x=-1,E=C.length-1;E>x;){D=C[x+=1],x&&(d+=" || ");var F=a.util.getProperty(D),G=k+F;d+=" ( ( "+G+" === undefined ",w&&(d+=" || ! Object.prototype.hasOwnProperty.call("+k+", '"+a.util.escapeQuotes(D)+"') "),d+=") && (missing"+e+" = "+a.util.toQuotedString(a.opts.jsonPointers?D:F)+") ) "}d+=") {  ";var y="missing"+e,z="' + "+y+" + '";a.opts._errorDataPathProperty&&(a.errorPath=a.opts.jsonPointers?a.util.getPathExpr(u,y,!0):u+" + "+y);var A=A||[];A.push(d),d="",!1!==a.createErrors?(d+=" { keyword: 'required' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: { missingProperty: '"+z+"' } ",!1!==a.opts.messages&&(d+=" , message: '",d+=a.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+z+"\\'",d+="' "),a.opts.verbose&&(d+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ";var B=d;d=A.pop(),d+=!a.compositeRule&&j?a.async?" throw new ValidationError(["+B+"]); ":" validate.errors = ["+B+"]; return false; ":" var err = "+B+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",d+=" } else { "}else if(v){m||(d+=" var "+n+" = validate.schema"+h+"; ");var x="i"+e,y="schema"+e+"["+x+"]",z="' + "+y+" + '";a.opts._errorDataPathProperty&&(a.errorPath=a.util.getPathExpr(u,y,a.opts.jsonPointers)),m&&(d+=" if ("+n+" && !Array.isArray("+n+")) {  var err =   ",!1!==a.createErrors?(d+=" { keyword: 'required' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: { missingProperty: '"+z+"' } ",!1!==a.opts.messages&&(d+=" , message: '",d+=a.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+z+"\\'",d+="' "),a.opts.verbose&&(d+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ",d+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+n+" !== undefined) { "),d+=" for (var "+x+" = 0; "+x+" < "+n+".length; "+x+"++) { if ("+k+"["+n+"["+x+"]] === undefined ",w&&(d+=" || ! Object.prototype.hasOwnProperty.call("+k+", "+n+"["+x+"]) "),d+=") {  var err =   ",!1!==a.createErrors?(d+=" { keyword: 'required' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: { missingProperty: '"+z+"' } ",!1!==a.opts.messages&&(d+=" , message: '",d+=a.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+z+"\\'",d+="' "),a.opts.verbose&&(d+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ",d+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",m&&(d+="  }  ")}else{var H=o;if(H)for(var D,I=-1,J=H.length-1;J>I;){D=H[I+=1];var F=a.util.getProperty(D),z=a.util.escapeQuotes(D),G=k+F;a.opts._errorDataPathProperty&&(a.errorPath=a.util.getPath(u,D,a.opts.jsonPointers)),d+=" if ( "+G+" === undefined ",w&&(d+=" || ! Object.prototype.hasOwnProperty.call("+k+", '"+a.util.escapeQuotes(D)+"') "),d+=") {  var err =   ",!1!==a.createErrors?(d+=" { keyword: 'required' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(i)+" , params: { missingProperty: '"+z+"' } ",!1!==a.opts.messages&&(d+=" , message: '",d+=a.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+z+"\\'",d+="' "),a.opts.verbose&&(d+=" , schema: validate.schema"+h+" , parentSchema: validate.schema"+a.schemaPath+" , data: "+k+" "),d+=" } "):d+=" {} ",d+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}a.errorPath=u}else j&&(d+=" if (true) {");return d}},function(a,b,c){"use strict";a.exports=function(a,b,c){var d,e=" ",f=a.level,g=a.dataLevel,h=a.schema[b],i=a.schemaPath+a.util.getProperty(b),j=a.errSchemaPath+"/"+b,k=!a.opts.allErrors,l="data"+(g||""),m="valid"+f,n=a.opts.$data&&h&&h.$data;if(n?(e+=" var schema"+f+" = "+a.util.getData(h.$data,g,a.dataPathArr)+"; ",d="schema"+f):d=h,(h||n)&&!1!==a.opts.uniqueItems){n&&(e+=" var "+m+"; if ("+d+" === false || "+d+" === undefined) "+m+" = true; else if (typeof "+d+" != 'boolean') "+m+" = false; else { "),e+=" var "+m+" = true; if ("+l+".length > 1) { var i = "+l+".length, j; outer: for (;i--;) { for (j = i; j--;) { if (equal("+l+"[i], "+l+"[j])) { "+m+" = false; break outer; } } } } ",n&&(e+="  }  "),e+=" if (!"+m+") {   ";var o=o||[];o.push(e),e="",!1!==a.createErrors?(e+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+a.errorPath+" , schemaPath: "+a.util.toQuotedString(j)+" , params: { i: i, j: j } ",!1!==a.opts.messages&&(e+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),a.opts.verbose&&(e+=" , schema:  ",e+=n?"validate.schema"+i:""+h,e+="         , parentSchema: validate.schema"+a.schemaPath+" , data: "+l+" "),e+=" } "):e+=" {} ";var p=e;e=o.pop(),e+=!a.compositeRule&&k?a.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",e+=" } ",k&&(e+=" else { ")}else k&&(e+=" if (true) { ");return e}},function(a,b,c){"use strict";function d(a,b){function c(a,b,c){for(var d,f=0;f<e.length;f++){var g=e[f];if(g.type==b){d=g;break}}d||(d={type:b,rules:[]},e.push(d));var i={keyword:a,definition:c,custom:!0,code:h,"implements":c["implements"]};d.rules.push(i),e.custom[a]=i}function d(a){if(!e.types[a])throw new Error("Unknown type "+a)}var e=this.RULES;if(e.keywords[a])throw new Error("Keyword "+a+" is already defined");if(!g.test(a))throw new Error("Keyword "+a+" is not a valid identifier");if(b){if(b.macro&&void 0!==b.valid)throw new Error('"valid" option cannot be used with macro keywords');var f=b.type;if(Array.isArray(f)){var i,j=f.length;for(i=0;j>i;i++)d(f[i]);for(i=0;j>i;i++)c(a,f[i],b)}else f&&d(f),c(a,f,b);var k=!0===b.$data&&this._opts.$data;if(k&&!b.validate)throw new Error('$data support: "validate" function is not defined');var l=b.metaSchema;l&&(k&&(l={anyOf:[l,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#"}]}),b.validateSchema=this.compile(l,!0))}e.keywords[a]=e.all[a]=!0}function e(a){var b=this.RULES.custom[a];return b?b.definition:this.RULES.keywords[a]||!1}function f(a){var b=this.RULES;delete b.keywords[a],delete b.all[a],delete b.custom[a];for(var c=0;c<b.length;c++)for(var d=b[c].rules,e=0;e<d.length;e++)if(d[e].keyword==a){d.splice(e,1);break}}var g=/^[a-z_$][a-z0-9_$-]*$/i,h=c(41);a.exports={add:d,get:e,remove:f}},function(a,b,c){"use strict";a.exports=function(a){var b=a._opts.defaultMeta,c="string"==typeof b?{$ref:b}:a.getSchema("http://json-schema.org/draft-06/schema")?{$ref:"http://json-schema.org/draft-06/schema"}:{};a.addKeyword("patternGroups",{metaSchema:{type:"object",additionalProperties:{type:"object",required:["schema"],properties:{maximum:{type:"integer",minimum:0},minimum:{type:"integer",minimum:0},schema:c},additionalProperties:!1}}}),a.RULES.all.properties["implements"].push("patternGroups")}},function(a,b){a.exports={$schema:"http://json-schema.org/draft-06/schema#",$id:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/$data.json#",description:"Meta-schema for $data reference (JSON-schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}},function(a,b){a.exports={$schema:"http://json-schema.org/draft-06/schema#",$id:"http://json-schema.org/draft-06/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{"default":0}]},simpleTypes:{"enum":["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,"default":[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},title:{type:"string"},description:{type:"string"},"default":{},examples:{type:"array",items:{}},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],"default":{}},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean","default":!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},"default":{}},properties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},"const":{},"enum":{type:"array",minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},"default":{}}},function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(11),g=function(a){return a&&a.__esModule?a:{"default":a}}(f),h=(c(4),function(){function a(b){var c=this;d(this,a),this.elements={},this.events=b,this.set("text",function(a){var b=document.createElement("div"),c=a.tooltip?g["default"].escapeHtml(a.tooltip):"";return b.className="lp-json-pollock-element-text",a.rtl&&(b.dir="rtl",g["default"].addClass(b,"direction-rtl")),b.innerHTML='<span style="'+g["default"].styleToCss(a.style)+'" title="'+c+'" aria-label="'+c+'">'+g["default"].normalizeHtmlText(a.text)+"</span>",b}),this.set("button",function(a){var b=document.createElement("div");b.className="lp-json-pollock-element-button",a.rtl&&(b.dir="rtl",g["default"].addClass(b,"direction-rtl"));var d=document.createElement("button");return d.innerHTML=g["default"].normalizeHtmlText(a.title),a.tooltip&&(d.title=a.tooltip,d.setAttribute("aria-label",a.tooltip)),a.style&&(d.style.cssText=g["default"].styleToCss(a.style)),a.click&&a.click.actions&&(d.onclick=c.wrapAction(a.click)),b.appendChild(d),b}),this.set("image",function(a){var b=document.createElement("div");b.className="lp-json-pollock-element-image loading",a.rtl&&(b.dir="rtl",g["default"].addClass(b,"direction-rtl"));var d=document.createElement("img");return d.src=a.url,a.tooltip&&(d.title=a.tooltip,d.setAttribute("aria-label",a.tooltip)),a.style&&(d.style.cssText=g["default"].styleToCss(a.style)),a.caption&&(b.innerHTML+="<span>"+a.caption+"</span>"),d.onload=function(){g["default"].removeClass(b,"loading")},d.onerror=function(){g["default"].removeClass(b,"loading"),g["default"].addClass(b,"error"),b.title="fail to load image",d.style.display="none"},a.click&&a.click.actions&&(d.onclick=c.wrapAction(a.click)),b.appendChild(d),b}),this.set("map",function(a){var b=document.createElement("div");return b.className="lp-json-pollock-element-map",a.tooltip&&(b.title=a.tooltip,b.setAttribute("aria-label",a.tooltip)),a.style&&(b.style.cssText=g["default"].styleToCss(a.style)),a.click&&a.click.actions?b.onclick=c.wrapAction(a.click):b.onclick=function(){window.open("https://www.google.com/maps/search/?api=1&query="+a.lo+","+a.la,"_blank")},b}),this.set("vertical",function(){var a=document.createElement("div");return a.className="lp-json-pollock-layout lp-json-pollock-layout-vertical",a}),this.set("carousel",function(a){var b=a.padding||0,d=0,e=0,f=document.createElement("div"),g=document.createElement("div"),h=document.createElement("div"),i=document.createElement("div");return h.afterRender=function(){if(h.childNodes.length){for(var a=0;a<h.childNodes.length;a+=1)h.childNodes[a].style.margin="0 "+b/2+"px";for(f.className="lp-json-pollock-layout-carousel-arrow",g.className="lp-json-pollock-layout-carousel-arrow left";h.hasChildNodes();)i.insertBefore(h.lastChild,i.firstChild);h.appendChild(i);var j=0,k=364+b;i.childNodes.length>2&&(j=(i.childNodes.length-2)*(182+b));var l=k+j;i.style.width=l+"px",i.className="lp-json-pollock-layout-carousel",h.className="lp-json-pollock-layout-carousel-wrapper",h.appendChild(i),h.appendChild(f),h.appendChild(g),setTimeout(function(){h.offsetWidth>i.offsetWidth&&(g.style.visibility="hidden",f.style.visibility="hidden")},0),f.onclick=function(a){e=0,0===d&&c.events.trigger({eventName:"carouselOffsetChange",data:{offset:d,prevOffset:e,uiEvent:a}}),""!==i.style.left&&(e=parseInt(i.style.left,10)),d=e-180-b-2,g.style.visibility="visible",f.style.visibility="visible",h.offsetWidth>i.offsetWidth+d&&(d=-(i.offsetWidth+b-h.offsetWidth),f.style.visibility="hidden"),i.style.left=d+"px"},g.onclick=function(a){e=0,""!==i.style.left&&(e=parseInt(i.style.left,10)),d=e+180+b+2,f.style.visibility="visible",d>=0&&(d=0,g.style.visibility="hidden",f.style.visibility="visible"),0===d&&c.events.trigger({eventName:"carouselOffsetChange",data:{offset:d,prevOffset:e,uiEvent:a}}),i.style.left=d+"px"}}},h}),this.set("horizontal",function(){var a=document.createElement("div");return a.className="lp-json-pollock-layout lp-json-pollock-layout-horizontal",a.afterRender=function(){if(a.childNodes.length){var b=100/a.childNodes.length;Array.prototype.forEach.call(a.childNodes,function(a){a.style.width=b+"%"})}},a})}return e(a,[{key:"get",value:function(a){return this.elements[a]}},{key:"set",value:function(a,b){this.elements[a]=b}},{key:"wrapAction",value:function(a){var b=this;return function(c){a.actions instanceof Array&&a.actions.forEach(function(d){b.events.trigger({eventName:d.type,data:{actionData:d,metadata:a.metadata,uiEvent:c}})})}}}]),a}());b["default"]=h},function(a,b,c){"use strict";function d(a,b,c,g,h,i,j,k,l){if(c&&"object"==typeof c&&!Array.isArray(c)){b(c,g,h,i,j,k,l);for(var m in c){var n=c[m];if(Array.isArray(n)){if(m in f.arrayKeywords)for(var o=0;o<n.length;o++)d(a,b,n[o],g+"/"+m+"/"+o,h,g,m,c,o)}else if(m in f.propsKeywords){if(n&&"object"==typeof n)for(var p in n)d(a,b,n[p],g+"/"+m+"/"+e(p),h,g,m,c,p)}else(m in f.keywords||a.allKeys&&!(m in f.skipKeywords))&&d(a,b,n,g+"/"+m,h,g,m,c)}}}function e(a){return a.replace(/~/g,"~0").replace(/\//g,"~1")}var f=a.exports=function(a,b,c){"function"==typeof b&&(c=b,b={}),d(b,c,a,"",a)};f.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},f.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},f.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},f.skipKeywords={"enum":!0,"const":!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(a,b,c){(function(a,d){var e;!function(f){function g(a){throw new RangeError(F[a])}function h(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function i(a,b){var c=a.split("@"),d="";return c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(E,"."),d+h(a.split("."),b).join(".")}function j(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function k(a){return h(a,function(a){var b="";return a>65535&&(a-=65536,b+=I(a>>>10&1023|55296),a=56320|1023&a),b+=I(a)}).join("")}function l(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:u}function m(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function n(a,b,c){var d=0;for(a=c?H(a/y):a>>1,a+=H(a/b);a>G*w>>1;d+=u)a=H(a/G);return H(d+(G+1)*a/(a+x))}function o(a){var b,c,d,e,f,h,i,j,m,o,p=[],q=a.length,r=0,s=A,x=z;for(c=a.lastIndexOf(B),0>c&&(c=0),d=0;c>d;++d)a.charCodeAt(d)>=128&&g("not-basic"),p.push(a.charCodeAt(d));for(e=c>0?c+1:0;q>e;){for(f=r,h=1,i=u;e>=q&&g("invalid-input"),j=l(a.charCodeAt(e++)),(j>=u||j>H((t-r)/h))&&g("overflow"),r+=j*h,m=x>=i?v:i>=x+w?w:i-x,!(m>j);i+=u)o=u-m,h>H(t/o)&&g("overflow"),h*=o;b=p.length+1,x=n(r-f,b,0==f),H(r/b)>t-s&&g("overflow"),s+=H(r/b),r%=b,p.splice(r++,0,s)}return k(p)}function p(a){var b,c,d,e,f,h,i,k,l,o,p,q,r,s,x,y=[];for(a=j(a),q=a.length,b=A,c=0,f=z,h=0;q>h;++h)(p=a[h])<128&&y.push(I(p));for(d=e=y.length,e&&y.push(B);q>d;){for(i=t,h=0;q>h;++h)(p=a[h])>=b&&i>p&&(i=p);for(r=d+1,i-b>H((t-c)/r)&&g("overflow"),c+=(i-b)*r,b=i,h=0;q>h;++h)if(p=a[h],b>p&&++c>t&&g("overflow"),p==b){for(k=c,l=u;o=f>=l?v:l>=f+w?w:l-f,!(o>k);l+=u)x=k-o,s=u-o,y.push(I(m(o+x%s,0))),k=H(x/s);y.push(I(m(k,0))),f=n(c,r,d==e),c=0,++d}++c,++b}return y.join("")}function q(a){return i(a,function(a){return C.test(a)?o(a.slice(4).toLowerCase()):a})}function r(a){return i(a,function(a){return D.test(a)?"xn--"+p(a):a})}var s,t=("object"==typeof b&&b&&b.nodeType,"object"==typeof a&&a&&a.nodeType,"object"==typeof d&&d,2147483647),u=36,v=1,w=26,x=38,y=700,z=72,A=128,B="-",C=/^xn--/,D=/[^\x20-\x7E]/,E=/[\x2E\u3002\uFF0E\uFF61]/g,F={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},G=u-v,H=Math.floor,I=String.fromCharCode;s={version:"1.4.1",ucs2:{decode:j,encode:k},decode:o,encode:p,toASCII:r,toUnicode:q},void 0!==(e=function(){return s}.call(b,c,b,a))&&(a.exports=e)}()}).call(b,c(69)(a),c(68))},function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}a.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;j>k;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};a.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},function(a,b,c){"use strict";b.decode=b.parse=c(62),b.encode=b.stringify=c(63)},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(b,"__esModule",{value:!0}),b.version=b.unregisterAllActions=b.unregisterAction=b.registerAction=b.render=b.init=void 0;var e=c(15),f=(d(e),c(14)),g=d(f),h=new g["default"],i=h.init.bind(h),j=h.render.bind(h),k=h.registerAction.bind(h),l=h.unregisterAction.bind(h),m=h.unregisterAllActions.bind(h);b.init=i,b.render=j,b.registerAction=k,b.unregisterAction=l,b.unregisterAllActions=m,b.version="1.1.4"},function(a,b,c){"use strict";function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j.isObject(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return j.isString(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}var i=c(61),j=c(67);b.parse=e,b.resolve=g,b.resolveObject=h,b.format=f,b.Url=d;var k=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,m=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r","\n","	"],o=["{","}","|","\\","^","`"].concat(n),p=["'"].concat(o),q=["%","/","?",";","#"].concat(p),r=["/","?","#"],s=/^[+a-z0-9A-Z_-]{0,63}$/,t=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,u={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},x=c(64);d.prototype.parse=function(a,b,c){if(!j.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a.indexOf("?"),e=-1!==d&&d<a.indexOf("#")?"?":"#",f=a.split(e),g=/\\/g;f[0]=f[0].replace(g,"/"),a=f.join(e);var h=a;if(h=h.trim(),!c&&1===a.split("#").length){var l=m.exec(h);if(l)return this.path=h,this.href=h,this.pathname=l[1],l[2]?(this.search=l[2],this.query=b?x.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search="",this.query={}),this}var n=k.exec(h);if(n){n=n[0];var o=n.toLowerCase();this.protocol=o,h=h.substr(n.length)}if(c||n||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var y="//"===h.substr(0,2);!y||n&&v[n]||(h=h.substr(2),this.slashes=!0)}if(!v[n]&&(y||n&&!w[n])){for(var z=-1,A=0;A<r.length;A++){var B=h.indexOf(r[A]);-1!==B&&(-1===z||z>B)&&(z=B)}var C,D;D=-1===z?h.lastIndexOf("@"):h.lastIndexOf("@",z),-1!==D&&(C=h.slice(0,D),h=h.slice(D+1),this.auth=decodeURIComponent(C)),z=-1;for(var A=0;A<q.length;A++){var B=h.indexOf(q[A]);-1!==B&&(-1===z||z>B)&&(z=B)}-1===z&&(z=h.length),this.host=h.slice(0,z),h=h.slice(z),this.parseHost(),this.hostname=this.hostname||"";var E="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!E)for(var F=this.hostname.split(/\./),A=0,G=F.length;G>A;A++){var H=F[A];if(H&&!H.match(s)){for(var I="",J=0,K=H.length;K>J;J++)I+=H.charCodeAt(J)>127?"x":H[J];if(!I.match(s)){var L=F.slice(0,A),M=F.slice(A+1),N=H.match(t);N&&(L.push(N[1]),M.unshift(N[2])),M.length&&(h="/"+M.join(".")+h),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),E||(this.hostname=i.toASCII(this.hostname));var O=this.port?":"+this.port:"",P=this.hostname||"";this.host=P+O,this.href+=this.host,E&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!u[o])for(var A=0,G=p.length;G>A;A++){var Q=p[A];if(-1!==h.indexOf(Q)){var R=encodeURIComponent(Q);R===Q&&(R=escape(Q)),h=h.split(Q).join(R)}}var S=h.indexOf("#");-1!==S&&(this.hash=h.substr(S),h=h.slice(0,S));var T=h.indexOf("?");if(-1!==T?(this.search=h.substr(T),this.query=h.substr(T+1),b&&(this.query=x.parse(this.query)),h=h.slice(0,T)):b&&(this.search="",
this.query={}),h&&(this.pathname=h),w[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var O=this.pathname||"",U=this.search||"";this.path=O+U}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j.isObject(this.query)&&Object.keys(this.query).length&&(f=x.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||w[b])&&!1!==e?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(j.isString(a)){var b=new d;b.parse(a,!1,!0),a=b}for(var c=new d,e=Object.keys(this),f=0;f<e.length;f++){var g=e[f];c[g]=this[g]}if(c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){for(var h=Object.keys(a),i=0;i<h.length;i++){var k=h[i];"protocol"!==k&&(c[k]=a[k])}return w[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(a.protocol&&a.protocol!==c.protocol){if(!w[a.protocol]){for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c[n]=a[n]}return c.href=c.format(),c}if(c.protocol=a.protocol,a.host||v[a.protocol])c.pathname=a.pathname;else{for(var o=(a.pathname||"").split("/");o.length&&!(a.host=o.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),c.pathname=o.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var p=c.pathname||"",q=c.search||"";c.path=p+q}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var r=c.pathname&&"/"===c.pathname.charAt(0),s=a.host||a.pathname&&"/"===a.pathname.charAt(0),t=s||r||c.host&&a.pathname,u=t,x=c.pathname&&c.pathname.split("/")||[],o=a.pathname&&a.pathname.split("/")||[],y=c.protocol&&!w[c.protocol];if(y&&(c.hostname="",c.port=null,c.host&&(""===x[0]?x[0]=c.host:x.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===o[0]?o[0]=a.host:o.unshift(a.host)),a.host=null),t=t&&(""===o[0]||""===x[0])),s)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,x=o;else if(o.length)x||(x=[]),x.pop(),x=x.concat(o),c.search=a.search,c.query=a.query;else if(!j.isNullOrUndefined(a.search)){if(y){c.hostname=c.host=x.shift();var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return c.search=a.search,c.query=a.query,j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!x.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var A=x.slice(-1)[0],B=(c.host||a.host||x.length>1)&&("."===A||".."===A)||""===A,C=0,D=x.length;D>=0;D--)A=x[D],"."===A?x.splice(D,1):".."===A?(x.splice(D,1),C++):C&&(x.splice(D,1),C--);if(!t&&!u)for(;C--;C)x.unshift("..");!t||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),B&&"/"!==x.join("/").substr(-1)&&x.push("");var E=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(y){c.hostname=c.host=E?"":x.length?x.shift():"";var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return t=t||c.host&&x.length,t&&!E&&x.unshift(""),x.length?c.pathname=x.join("/"):(c.pathname=null,c.path=null),j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=l.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},function(a,b,c){"use strict";a.exports={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},function(a,b){var c;c=function(){return this}();try{c=c||Function("return this")()||(0,eval)("this")}catch(a){"object"==typeof window&&(c=window)}a.exports=c},function(a,b){a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,get:function(){return a.i}}),a.webpackPolyfill=1),a}}])}).call(window.lpTag);window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ThemeConfiguratorFactory=function(a,b){b=b||{};var c=lpTag.unifiedWindow.ThemeConfigurationTranslator,d=lpTag.unifiedWindow.ThemeConfigurator,e=lpTag.unifiedWindow.applicationUtils;b.clone="undefined"==typeof b.clone?!0:b.clone;b.clone&&(a=e.cloneObj(a||{}));a&&"2.0"!==a.v&&(a=(new c).translate(a));return new d(a)};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ThemeConfiguration=lpTag.unifiedWindow.ThemeConfiguration||{};lpTag.unifiedWindow.ThemeConfiguration.styleInference={mainArea:{"background-color":[{target:"surveyArea"},{target:"dialogArea"},{target:"transcriptArea"}]},transcript_message:{"font-family":[{target:"surveyArea"},{target:"dialogArea"}],color:[{target:"cancel_button"},{target:"surveyArea"},{target:"dialogArea"}]},top:{"background-color":[{target:"button"},{target:"close_survey_button"},{target:"star",prop:"color"}]},top_text:{color:[{target:"button"},{target:"close_survey_button"}]},transcript_bubble_agent:{"border-color":[{target:"transcript_bubble_agentArrowBorder",prop:"border-right-color",override:!0}],"background-color":[{target:"transcript_bubble_agentArrow",prop:"border-right-color",override:!0}]},transcript_bubble_visitor:{"border-color":[{target:"transcript_bubble_visitorArrowBorder",prop:"border-left-color",override:!0}],"background-color":[{target:"transcript_bubble_visitorArrow",prop:"border-left-color",override:!0}]}};lpTag.unifiedWindow.ThemeConfiguration.options={ICON_SET:{name:"icon_set",query:'[data-lp-type="icon"]',values:{DARK:{name:"dark",cssClass:"lp_icon-dark"},BRIGHT:{name:"bright",cssClass:"lp_icon-white"}}},LOCATION:{name:"location",values:{TOP_LEFT:{name:"top_left",cssClass:"lp_top-left"},TOP_RIGHT:{name:"top_right",cssClass:"lp_top-right"},MIDDLE_RIGHT:{name:"middle_right",cssClass:"lp_middle-right"},BOTTOM_RIGHT:{name:"bottom_right",cssClass:"lp_bottom-right"},BOTTOM_LEFT:{name:"bottom_left",cssClass:"lp_bottom-left"},MIDDLE_LEFT:{name:"middle_left",cssClass:"lp_middle-left"}}}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ThemeConfigurationTranslator=function(){function a(a){return"2.0"===a.v?a:b(a)}function b(a){var b=new g;a.style&&d(a.style,b);if(a.iconSet)for(var c in a.iconSet)b.setOption(c,h.option.ICON_SET.name,a.iconSet[c]);a.meta&&b.setMeta(a.meta);f(b);var e=b.getConfiguration();return e}function c(a,b,c,d){i.isStyleColorProperty(b)?d.setStyle(a,b,"{{colors."+c+"}}"):"image"===b?d.setProperty(a,"src",c):"font"===b?d.setStyle(a,b,"{{fonts."+c+"}}"):d.setStyle(a,b,c)}function d(a,b,e){var f;e=e||"";if("object"==typeof a){f=a;for(var g in f)"object"!=typeof f[g]?c(e,g,f[g],b):d(f[g],b,(e?e+"_":e)+g)}}function e(a){if(a){if(a.indexOf("_white")>-1)return h.options.ICON_SET.values.BRIGHT.name;if(a.indexOf("_normal")>-1)return h.options.ICON_SET.values.DARK.name}}function f(a){var b=e(a.getProperty("top_minimizeButton","src")),c=e(a.getProperty("input_buttonEnabled","src"));a.removeItem("top_minimizeButton");a.removeItem("top_closeButton");a.removeItem("input_buttonEnabled");a.removeItem("input_buttonDisabled");var d=a.getStyle("transcriptArea","background-color");"undefined"!=typeof d&&a.setStyle("mainArea","background-color",d);a.removeItem("transcriptArea");"undefined"!=typeof b&&a.setOption("top",h.options.ICON_SET.name,b);"undefined"!=typeof c&&a.setOption("input",h.options.ICON_SET.name,c)}var g=lpTag.unifiedWindow.ThemeConfigurator,h=lpTag.unifiedWindow.ThemeConfiguration,i=lpTag.unifiedWindow.AWCUtils;return{translate:a}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.ThemeConfigurator=function(a){function b(a,b,c,d,e){d=y.trim(""+d);if("style"===b&&"undefined"==typeof d)o(a,b,c);else if("undefined"==typeof c)o(a,b);else if(e||!w[a]||!w[a].attrs[b][c]){w[a]=w[a]||{};w[a].attrs=w[a].attrs||{};w[a].attrs[b]=w[a].attrs[b]||{};if("style"===b){var f=q(c);if(d&&!d.match(/\{\{(.*)\}\}/)&&f){var g=t(f,d);j(f,g,d);w[a].attrs[b][c]=p(f,g)}else w[a].attrs[b][c]=d}else w[a].attrs[b]=c}}function c(a){w[a]&&delete w[a]}function d(a,b,c){w[a]=w[a]||{};w[a].options=w[a].options||{};w[a].options[b]=c}function e(a,b){return"undefined"!=typeof w[a]&&"undefined"!=typeof w[a].options?u(w[a].options[b]):void 0}function f(a,b,c){return"undefined"!=typeof w[a]&&"undefined"!=typeof w[a].attrs?u("undefined"!=typeof w[a].attrs[b]&&"undefined"!=typeof c?w[a].attrs[b][c]:w[a].attrs[b]):void 0}function g(a,b){if("undefined"==typeof b&&w[a]&&w[a].attrs&&w[a].attrs.style){var c,d={};for(var e in w[a].attrs.style){c=u(w[a].attrs.style[e]);d[e]=c}return d}return f(a,"style",b)}function h(a,c,d,e){e="boolean"==typeof e?e:!0;if("object"==typeof c)for(var f in c)h(a,f,c[f],e);else b(a,"style",c,d,e)}function i(a,b){return"undefined"!=typeof v&&"undefined"!=typeof v[a]?v[a][b]:void 0}function j(a,b,c){v=v||{};v[a]=v[a]||{};v[a][b]=c}function k(a){v=y.cloneObj(a)}function l(a){a=a||{};a.normalize="undefined"==typeof a.normalize?!0:a.normalize;var b={config:w,v:"2.0"};"undefined"!=typeof v&&(b.meta=v);return a.normalize?r(b):b}function m(a){var b=[];if(w[a]&&w[a].attrs)for(var c in w[a].attrs)b.push(c);return b}function n(a){w=a&&"2.0"===a.v?a.config:{};v=a&&a.meta||{}}function o(a,b,c){if(w[a]&&w[a].attrs&&w[a].attrs[b])if("undefined"==typeof c)delete w[a].attrs[b];else{delete w[a].attrs[b][c];y.isEmptyLiteral(w[a].attrs[b])&&delete w[a].attrs[b];y.isEmptyLiteral(w[a].attrs)&&delete w[a].attrs;y.isEmptyLiteral(w[a])&&delete w[a]}}function p(a,b){return"{{"+[a,b].join(".")+"}}"}function q(a){return x.isStyleColorProperty(a)?"colors":"font-family"===a?"fonts":void 0}function r(a){var b=y.cloneObj(a.meta),c=JSON.stringify(a);c=s(b,c,"colors");c=s(b,c,"fonts");var d=JSON.parse(c);d.meta=b;return d}function s(a,b,c){for(var d,e=y.objectKeysAsArray(a[c]),f=1,g=0;g<e.length;g++){d=e[g];if(-1===b.indexOf("{{"+c+"."+d+"}}"))delete a[c][d];else{b=b.replace(new RegExp("{{"+c+"."+d+"}}","g"),"{{"+c+"."+f+"}}");a[c][f]=a[c][d];d!=f&&delete a[c][d];f++}}return b}function t(a,b){if(v&&v[a]){for(var c in v[a])if(v[a][c]===b)return c;for(var d=1;;d++)if(!v[a][d])return d}return 1}function u(a){if("string"==typeof a){var b=a.match(/\{\{(.*)\}\}/);if(b&&2===b.length){var c=b[1].split(".");return i(c[0],c[1])}return a}return a}var v,w,x=lpTag.unifiedWindow.AWCUtils,y=lpTag.unifiedWindow.applicationUtils;n(a);return{removeItem:c,setProperty:b,getProperty:f,getAvailableAttributes:m,setStyle:h,getStyle:g,setOption:d,getOption:e,setMetaProperty:j,setMeta:k,getMetaProperty:i,getConfiguration:l}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Themer=function(a,b,c){function d(a,b){var c=z.createDomContainer(a);e(c,b);return c.innerHTML}function e(a,b){b=b||{removeThemeAttrs:!0};var c=b.configuration?new B(b.configuration):u;q(c);var d,e=a.querySelectorAll("["+x+"]");g(a,c);for(var f=0;f<e.length;f++){d=e[f];g(d,c);b.removeThemeAttrs&&l(d)}}function f(a,b){return u.getStyle(a,b)}function g(a,b){var c=a.getAttribute(x);if(c){if(w[c])return;k(a,c,b);h(a,c,b)}}function h(a,b,c){var d,e,f,g=C.options;for(var h in g){d=g[h];f=d.query?a.querySelectorAll(d.query):a;e=c.getOption(b,d.name);i(f,d.values,e)}}function i(a,b,c){var d,e=[];for(var f in b)b[f].name===c?d=b[f].cssClass:e.push(b[f].cssClass);if("undefined"!=typeof d){a=A.isNodeList(a)?a:[a];for(var g=0;g<a.length;g++){A.addClassByArray(a[g],d);A.removeClassByArray(a[g],e)}}}function j(a){var b,c,d,e,f=lpTag.unifiedWindow.ThemeConfiguration.styleInference;for(var g in f){c=f[g];for(var h in c){d=c[h];b=a.getStyle(g,[h]);if("undefined"!=typeof b)for(var i=0;i<d.length;i++){e=d[i];a.setStyle(e.target,e.prop||h,b,e.override||!1)}}}}function k(a,b,c){for(var d=c.getAvailableAttributes(b),e=0;e<d.length;e++)if("style"===d[e])if(a.getAttribute("style")){var f=m(a,c.getStyle(b));a.setAttribute(d[e],f)}else a.setAttribute(d[e],n(c.getStyle(b)));else"src"===d[e]&&"IMG"===a.tagName?a.setAttribute(d[e],r(c.getProperty(b,"src"))):a.setAttribute(d[e],c.getProperty(b,d[e]))}function l(a){a.removeAttribute(x);a.removeAttribute(y)}function m(a,b){var c=o(a);for(var d in b)c[d]=b[d];return n(c)}function n(a){var b=[];for(var c in a)b.push(c+":"+a[c]);return b.join(";")}function o(a){var b=a.getAttribute("style"),c={};if(b)for(var d,e=b.split(";"),f=0;f<e.length;f++){d=e[f];d=e[f].split(":");c[d[0]]=d[1]}return c}function p(a,b,c){v=b||{};w=c||{};u=new B(a)}function q(a){var b=a.getProperty("agentImage","src");"undefined"==typeof b&&a.setProperty("agentImage","src",t("agentUrl"));var c=a.getProperty("logoImage","src");"undefined"==typeof c&&a.setProperty("logoImage","src",t("logoUrl"));var d=a.getOption("input",C.options.ICON_SET.name);"undefined"==typeof d&&a.setOption("input",C.options.ICON_SET.name,C.options.ICON_SET.values.DARK.name);var e=a.getOption("action",C.options.ICON_SET.name);"undefined"==typeof a.getOption("actionsMenu",C.options.ICON_SET.name)&&"undefined"!=typeof e&&a.setOption("actionsMenu",C.options.ICON_SET.name,e);j(a)}function r(a){var b=t("imagesRepository");return b&&!s(a)?[b,a].join("/"):a}function s(a){return null!==a.match(/^http[s]*/)}function t(a){return v[a]}var u,v,w,x="data-lp-cust-id",y="data-lp-type",z=lpTag.unifiedWindow.AWCUtils,A=lpTag.unifiedWindow.applicationUtils,B=lpTag.unifiedWindow.ThemeConfiguratorFactory,C=lpTag.unifiedWindow.ThemeConfiguration;p(a,b,c);return{processHTML:d,processDomEl:e,getStyle:f}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.defaultStyle={v:"2.0",config:{logo:{attrs:{style:{"text-align":"left","background-color":"{{colors.3}}"}}},transcript_time:{attrs:{style:{color:"{{colors.6}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},transcript_bubble_visitor:{attrs:{style:{"background-color":"{{colors.3}}","border-color":"{{colors.4}}"}}},actionsMenu_actionItem_text:{attrs:{style:{color:"{{colors.7}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},input_text:{attrs:{style:{color:"{{colors.2}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},transcript_bubble_agent_text:{attrs:{style:{color:"{{colors.3}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},agent:{attrs:{style:{"background-color":"{{colors.3}}"}}},transcript_message:{attrs:{style:{color:"{{colors.6}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},transcript_bubble_visitor_text:{attrs:{style:{color:"{{colors.5}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},transcript_bubble_visitorArrowBorder:{attrs:{style:{"border-left-color":"{{colors.4}}"}}},transcript_bubble_agent:{attrs:{style:{"background-color":"{{colors.1}}","border-color":"{{colors.4}}"}}},mainArea:{attrs:{style:{"background-color":"{{colors.3}}"}}},transcript_bubble_agentArrowBorder:{attrs:{style:{"border-right-color":"{{colors.4}}"}}},input:{attrs:{style:{color:"{{colors.6}}","font-style":"normal","background-color":"{{colors.3}}","font-family":"{{fonts.1}}","font-weight":"normal"}},options:{icon_set:"dark"}},transcript_bubble_visitorArrow:{attrs:{style:{"border-left-color":"{{colors.3}}"}}},actionsMenu:{attrs:{style:{"background-color":"{{colors.3}}"}}},action:{options:{icon_set:"dark"}},top_text:{attrs:{style:{color:"{{colors.3}}","font-style":"normal","font-family":"{{fonts.1}}","font-weight":"normal"}}},transcript_bubble_agentArrow:{attrs:{style:{"border-right-color":"{{colors.1}}"}}},top:{attrs:{style:{"background-color":"{{colors.1}}"}},options:{icon_set:"bright"}}},meta:{colors:{3:"#FFFFFF",2:"#000000",1:"#0363ad",7:"#6d6e71",6:"#6D6E70",5:"#404041",4:"#b6b6b6",8:"#134cd1"},fonts:{1:"Arial,Helvetica,sans-serif"}}};window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.AWCUtils=function(){function a(a){for(var b=["background-color","border-left-color","border-right-color","border-top-color","border-bottom-color","border-color","color"],c=0;c<b.length;c++)if(b[c]===a)return!0;return!1}function b(a){var b=document.createElement("div");c.isDomNode(a)?b.appendChild(a):b.innerHTML=a;return b}var c=lpTag.unifiedWindow.applicationUtils;return{createDomContainer:b,isStyleColorProperty:a}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.soundManager=function(a,b,c){function d(a,b,c){p=c.audioRepository;t=b;u=a.uiModel;v=lpTag.unifiedWindow.uiModelPath;w=c.poppedOut;x=c.external;q=g();r=k();s=!!r;a.chatModel.bind(lpTag.unifiedWindow.chatModelPath.LINES,o,this,!1);if(s)for(var d in z)z.hasOwnProperty(d)&&h(z[d])}function e(){return(t.isDesktop()||t.isAndroid())&&u.get(v.WINDOW_SOUND)&&(!w&&n()||w&&!n()||x)}function f(a){function b(b){a.template=b;c.innerHTML=a.template;document.body.appendChild(c);a.callback&&"function"==typeof a.callback&&a.callback.call(null,c)}var c=document.createElement("audio");c.style.position="absolute";c.style.left="-1000px";c.style.top="-1000px";a.templateFile?lpTag.unifiedWindow.BaseViewController.prototype.loadResource(a.templateFile,b):b(a.template)}function g(){var a=document.createElement("audio"),b=!!a.canPlayType;a=null;return b&&t.isAudioSupported()}function h(a){var b;if(a.fileName){b=document.querySelector(y);if(b){a.audioTag=b;i(a)()}else f(q?{template:"<audio data-lp-point='audio_tag' hidden preload='auto'></audio>",callback:i(a)}:{template:"<object data-lp-point='audio_tag' classid='clsid:6BF52A52-394A-11d3-B153-00C04F79FAA6' style='display:none'><param name='uimode' value='invisible'><param name='autostart' value='false'></object>",callback:i(a)})}}function i(a){return function(){a.audioTag||(a.audioTag=document.querySelector(y));if(a.audioTag){var b=p+"/"+a.fileName+"."+r;q?a.audioTag.src=b:a.audioTag.url=b;q&&setTimeout(function(){a.audioTag.volume=0;a.audioTag.play()},10)}}}function j(){var a=document.createElement("audio"),b=!(!a.canPlayType||!a.canPlayType('audio/wav; codecs="1"').replace(/no/,""));a=null;return b}function k(){var a;if(q){a="mp3";j()&&(a="wav")}return a}function l(a){if(s&&e()&&a.audioTag)if(q){a.audioTag.volume=A;a.audioTag.play()}else a.audioTag.controls.play()}function m(){return u.get(v.WINDOW_MAXIMIZED)}function n(){return u.get(v.WINDOW_EMBEDDED)}function o(a){var b=!1;if(a&&a.newValue)for(var c=0;c<a.newValue.length;c++)"agent"!==a.newValue[c].source||a.newValue[c].history||(b=!0);b&&l(m()?z.NEW_LINE_MAX:z.NEW_LINE_MIN)}var p,q,r,s,t,u,v,w,x,y='audio[data-lp-point="audio_tag"]',z={NEW_LINE_MIN:{fileName:"systemSoundEffect"},NEW_LINE_MAX:{fileName:"kpSoundEffect"}},A=1;d(a,b,c)};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};window.lpTag.uiframework=window.lpTag.uiframework||{};lpTag.uiframework.scrollManager=function(a){function b(a,b){x=lpTag.unifiedWindow.uiModelPath;u=a.isIOS();v=a.isDesktop();w=b}function c(a,b){if(!v){("undefined"==typeof b||null===b)&&(b=!0);n(a,z);A.push({view:a,bounce:b});!y&&w.get(x.WINDOW_MAXIMIZED)&&e()}}function d(a){if(!v){o(a,z);for(var b=[],c=0;c<A.length;c++)A[c].view!==a&&b.push(A[c]);A=b;0===A.length&&f()}}function e(){if(!y&&!v&&0!==A.length){document.body.addEventListener("touchmove",j,!1);document.body.addEventListener("touchstart",g,!1);document.body.addEventListener("touchend",h,!1);y=!0}}function f(){if(y&&!v){document.body.removeEventListener("touchmove",j);document.body.removeEventListener("touchstart",g);document.body.removeEventListener("touchend",h);y=!1}}function g(a){if(r){clearTimeout(r);r=null;i()}q=!1;F=!0;s=!1;B=a.touches[0].clientY;C=B;D=-1;p=null}function h(a){if(p&&s){q=!1;var b=E/400;p.style[m()]="all "+b+"s ease-out";p.style.webkitTransform="translateY(0px)";F=!1;r&&clearTimeout(r);r=setTimeout(i,1e3*b+50)}}function i(){if(p){p.style[m()]="";delete p.style[m()];p=null;D=-1}}function j(b){var c=!1;if(q)c=!0;else{c=k(b);q=!0}if(c){if(p&&A[D].bounce){s=!0;var d,e=b.touches[0].clientY-C;d=u?[{height:.1*a.innerHeight,scale:.85},{height:.3*a.innerHeight,scale:.55},{height:.5*a.innerHeight,scale:.35},{height:.75*a.innerHeight,scale:.2},{height:.9*a.innerHeight,scale:.1}]:[{height:.05*a.innerHeight,scale:.75},{height:.1*a.innerHeight,scale:.4},{height:.9*a.innerHeight,scale:.08}];var f=0>e?-1:1;e=e>0?e:-1*e;E=0;for(var g=0;g<d.length;g++){var h=g>0?d[g].height-d[g-1].height:d[g].height;if(e<=d[g].height){E+=(e-(0===g?0:d[g-1].height))*d[g].scale;break}E+=h*d[g].scale}if(E>0){t=Math.round(E*f);p.style[l()]="translateY("+t+"px)"}}b.preventDefault()}else{D=-1;p=null;b.stopPropagation()}}function k(a){var b=!1;if(y)for(var c=a.target||a.relatedTarget||a.srcElement;null!==c&&!p;){if(c.className&&c.className.indexOf(z)>=0){p=c;b=!1}c=c.parentNode}if(p&&p.parentNode){p.parentNode.style["-webkit-overflow-scrolling"]="touch";if(0>D)for(var d=0;d<A.length;d++)if(A[d].view===p){D=d;break}var e=parseInt(getComputedStyle(p,"height").height,10);if(0===p.parentNode.scrollTop){if(0===B){B=a.touches[0].clientY;b=!0}(a.touches[0].clientY>B||e<=p.parentNode.clientHeight)&&(b=!0)}else e<=p.parentNode.clientHeight+p.parentNode.scrollTop&&B>a.touches[0].clientY&&(b=!0)}else b=!0;return b}function l(){return""===document.body.style.mozTransform?"-moz-transform":""===document.body.style.webkitTransform?"-webkit-transform":""===document.body.style.OTransform?"-o-transform":"transform"}function m(){return""===document.body.style.MozTransition?"-moz-transition":""===document.body.style.WebkitTransition?"-webkit-transition":""===document.body.style.OTransition?"-o-transition":"transition"}function n(a,b){"string"==typeof a&&(a=this.getFirstElement(a));b=b.constructor===Array?b:[b];if(a&&1===a.nodeType){var c=a.className;c&&c.indexOf(b)<0&&(c+=" "+b);c=c.replace(/^\s\s*/,"");a.className=c}else this.logger.error("Unable to add class to "+a+" Class: "+b,"addClass")}function o(a,b){for(var c=a.className.split(" "),d=[],e=0;e<c.length;e++)c[e]!==b&&d.push(c[e]);a.className=d.join(" ")}var p,q,r,s,t,u,v,w,x,y=!1,z="lpclass_scrollable",A=[],B=0,C=0,D=-1,E=0,F=!1;return{init:b,registerView:c,unregisterView:d,enable:e,disable:f}}(window);window.lpTag=window.lpTag||{};lpTag.taglets=lpTag.taglets||{};lpTag.taglets.lpDragManager=lpTag.taglets.lpDragManager||function(){function a(a){var b=x();C[b]=h(a);C[b].bindFunc=l(C[b]);i(C[b]);g(C[b].drag);return b}function b(a){if(C[a]){j(C[a]);for(var b in C[a])if(C[a].hasOwnProperty(b)){C[a][b]=null;delete C[a][b]}delete C[a];return!0}return!1}function c(){}function d(){}function e(a,b,c,d){a&&I?a.addEventListener(b,c,d===!0):a&&a.attachEvent&&a.attachEvent("on"+b,c)}function f(a,b,c){a&&I?a.removeEventListener(b,c):a&&a.detachEvent&&a.detachEvent("on"+b,c)}function g(a){var b=u(a);"absolute"!==b.position&&"fixed"!==b.position&&(a.style.position="absolute")}function h(a){var b=a.drag,c=a.anchor||b,d=a.parent||b.parentNode||document.body;return{anchor:c,drag:b,parent:d,onDrag:a.onDrag,onDragEnd:a.onDragEnd,horizontal:a.horizontal===!0,vertical:a.vertical===!0,limitToParent:a.containParent===!0,context:a.context}}function i(a){e(a.anchor,"mousedown",a.bindFunc)}function j(a){f(a.anchor,"mousedown",a.bindFunc)}function k(a){f(a.anchor,"mouseup",s)}function l(a){return function(b){b=b||event;e(a.anchor,"mouseup",s);a.anchorData=v(a.anchor);a.parentData=v(a.parent);a.dragElementData=v(a.drag);a.diff={left:b.clientX-a.dragElementData.left,top:b.clientY-a.dragElementData.top};a.newDrag=!0;A=a;B=m();E=!0;return!1}}function m(){var a={"*,body,.lpDragActive":{"-moz-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none","-o-user-select":"none"},"html *::selection,body *::selection,button::selection,body::selection,*::selection":{background:"transparent",color:"inherit"}};document.body.setAttribute("unselectable","on");return o(a)}function n(){if(B){document.head.removeChild(B);B=null}document.body.removeAttribute("unselectable")}function o(a){if(I){var b=document.createElement("style"),c="";for(var d in a){c+=d+"{";for(var e in a[d])c+=e+":"+a[d][e]+";";c+="}"}b.appendChild(document.createTextNode(c));(document.head||document.getElementsByTagName("head")[0]).appendChild(b);return b}return null}function p(a){var b=a.clientX-A.diff.left;b>A.parentData.width-A.dragElementData.width&&(b=A.parentData.width-A.dragElementData.width);b<A.parentData.left&&(b=A.parentData.left);(b+A.dragElementData.width>A.parentData.width+A.parentData.left||a.clientX<0)&&(F=!0);return b}function q(a){var b=a.clientY-A.diff.top;b>A.parentData.top+A.parentData.height-A.dragElementData.height&&(b=A.parentData.top+A.parentData.height-A.dragElementData.height);b<A.parentData.top&&(b=A.parentData.top);(b+A.dragElementData.height>A.parentData.height||a.clientY<0)&&(F=!0);return b}function r(a,b){var c=z(),d=v(A.drag);if(A.horizontal)if(A.drag.style.right&&"auto"!==A.drag.style.right){A.drag.style.right=c.width-b-d.width+"px";A.drag.style.left="auto"}else{A.drag.style.left=b+"px";A.drag.style.right="auto"}if(A.vertical)if(A.drag.style.right&&"auto"!==A.drag.style.bottom){A.drag.style.bottom=c.height-a-d.height+"px";A.drag.style.top="auto"}else{A.drag.style.top=a+"px";A.drag.style.bottom="auto"}}function s(){if(A&&A.onDragEnd){if(J){var a=t(A.drag);y(A.onDragEnd,a,A.context)}k(A)}n(A);E=!1;A=null;J=!1}function t(a){var b=v(a),c=u(a,!0);b.left=""!==c.left?c.left:b.left;b.right=""!==c.right?c.right:b.right;b.bottom=""!==c.bottom?c.bottom:b.bottom;b.top=""!==c.top?c.top:b.top;return b}function u(a,b){var c;b||(document.defaultView&&document.defaultView.getComputedStyle?c=document.defaultView.getComputedStyle(a):a.currentStyle&&(c=a.currentStyle));return c||a.style}function v(a){var b,c,d=!1,e=a.getBoundingClientRect(),f=u(a),g={right:w(f.borderRight),left:w(f.borderLeft),top:w(f.borderTop),bottom:w(f.borderBottom)},h={right:w(f.marginRight),left:w(f.marginLeft),top:w(f.marginTop),bottom:w(f.marginBottom)};if(a===document.body){d=!0;var i=z();b=i.width;c=i.height}else{b=(e.width||a.clientWidth||0)+g.right+g.left+h.right+h.left;c=(e.width||a.clientHeight||0)+g.top+g.bottom+h.top+h.bottom}return{width:b,height:c,left:d?0:e.left,right:e.right,top:d?0:e.top,bottom:e.bottom,border:g,margin:h}}function w(a){var b=parseInt(a,10);return isNaN(b)?0:b}function x(){return D++ +"_"+((new Date).getTime()+Math.floor(1e6*Math.random()))}function y(a,b,c){if("function"==typeof a)try{a.call(c||null,b)}catch(d){}}function z(){var a=document.documentElement,b=document.body,c=a.clientWidth||b.clientWidth||window.innerWidth,d=a.clientHeight||b.clientHeight||window.innerHeight;return{width:c,height:d}}var A,B,C={},D=0,E=!1,F=!1,G="0.5.0",H="lpDragManager",I=!!window.addEventListener,J=!1;e(document,"mousemove",function(a){var b,c;if(E&&A){F=!1;a=a||event;A.horizontal&&(b=p(a));A.vertical&&(c=q(a));r(c,b);J=!0;if(A.newDrag===!0){setTimeout(function(){A&&y(A.onDrag,A,A.context)},0);A.newDrag=!1}I&&1!=a.which&&(F=!0);A&&F&&s();return!1}});e(document,"mouseup",function(a){E&&A&&s()});return{v:G,name:H,init:c,start:d,bind:a,unbind:b}};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};lpTag.unifiedWindow.ViewPortManager=function(a){function b(){var a=screen.availWidth/window.innerWidth;H.debug("getCurrentScale, currentScale="+a+" height="+window.innerHeight+" width="+window.innerWidth,G);return a}function c(){m()}function d(a,c){var d;if(x){var e=n();o();d=w(x.content);if(!l(d,a)){A=d;s(v(a));z=a;e.scale!==b()&&f(c,e)}}}function e(a,b,c,e){if(x){var f={width:"device-width","initial-scale":a,"minimum-scale":b||a,"maximum-scale":c||a,"user-scalable":"string"==typeof e?e:"no"};d(f)}}function f(a,b){p(b);q(a)}function g(){return t(z)}function h(){return I.cloneExtend(z||{})}function i(a){F=a;I.waitForBody(k)}function j(){if(!x){var a=document.getElementsByName("viewport");a&&(x=a[a.length-1])}}function k(){j();if(x){y=w(x.content);z||(z=y);K=t(y);K&&u()}else J=!1}function l(a,b){var c=!0;for(var d in a)if(b.hasOwnProperty(d)&&b[d]!==a[d]){c=!1;break}return c}function m(){if(J&&x&&A){y["initial-scale"]=B;d(y)}}function n(){return{top:C,left:D,scale:B}}function o(){B=b();D=document.body.scrollLeft;C=document.body.scrollTop}function p(a){if(E){E.style.top=("undefined"!=typeof a?a.top:document.body.scrollTop)+"px";E.style.left=("undefined"!=typeof a?a.left:document.body.scrollLeft)+"px"}}function q(a){if(E){E.focus();if(F.isIOS()){E.click();setTimeout(r(a),40)}else r(a)()}}function r(a){return function(){E.blur();I.runCallback(a)}}function s(a){x.content=a}function t(a){var b=!1,c=a["user-scalable"],d=[a["minimum-scale"],a["maximum-scale"],a["initial-scale"]];if("no"===c)b=!1;else for(var e=0;e<d.length&&!b;e++)for(var f=e;f<d.length;f++)if(e!==f&&"undefined"!=typeof d[e]&&"undefined"!=typeof d[f]&&d[e]!==d[f]){b=!0;break}return b}function u(){E=document.createElement("input");E.type="text";E.style.opacity=0;E.style.top="-1000px";E.style.left="-1000px";E.style.position="absolute";document.body.appendChild(E)}function v(a){var b="";for(var c in a)if(a.hasOwnProperty(c)){b+=a[c]===!0?c:c+"="+a[c];b+=", "}return b.substring(0,b.length-2)}function w(a){var b,c,d={};if(a){b=a.split(",");for(var e=0;e<b.length;e++){c=b[e].split("=");d[I.trimAndLower(c[0])]=I.trimAndLower(c[1])}}return d}var x,y,z,A,B,C,D,E,F,G="ViewPortManager",H=lpTag.unifiedWindow.log,I=lpTag.taglets.lpUtil,J=!0,K=!1;i(a);this.reset=c;this.setScale=e;this.getViewPortInfo=h;this.getCurrentScale=b;this.isPageZoomable=g};window.lpTag=window.lpTag||{};lpTag.unifiedWindow.addLanguage({chattingWith:"{{agent_name}}",connecting:"Connecting",message_us:"Message us",ended:"Thank you",loader_title:"Loading",chatting:"Chat",preChat:"Chat with us",postChat:"Thank you",offline:"Contact us",endedAndTranscriptShown:"Chat transcript",closeWindowAreYouSureMsg:"Closing will end conversation",closeWindowOkBtn:"OK",closeWindowCancelBtn:"Cancel",closeChatAreYouSureMsg:"Are you sure you want to disconnect?",closeChatDisconnectBtn:"Disconnect",closeChatCancelBtn:"Cancel",tooltip_NewMessageNotification:"You have {{notificationCount}} new {{notificationMsg}}",tooltip_EmailTranscriptSentConfirmation:"Transcript will be sent after chat ends",tooltip_Message:"message",tooltip_Messages:"messages",tooltip_Close:"Close",tooltip_ExpandActionMenu:"Expand action menu",tooltip_CollapseActionMenu:"Collapse action menu",tooltip_SendIcon:"Send",tooltip_SendIconDisabled:"You are not connected to chat",tooltip_Minimize:"Minimize",tooltip_Maximize:"Maximize",tooltip_MuteButton:"Mute",tooltip_UnmuteButton:"Unmute",tooltip_Print:"Print transcript",tooltip_Email:"Email transcript",tooltip_EndChat:"End conversation",tooltip_Popout:"Pop out",tooltip_Popin:"Pop in",tooltip_Lock:"This is a secure chat",tooltip_Loader:"Loading",tooltip_EmailClearField:"Clear",tooltip_AutoBlockCreditCardPatternsMessage:"We have blocked some of your personal details from displaying.  Please do not share personal or sensitive information during the conversation.",tooltip_open_widgets:"Open widgets",
tooltip_close_widgets:"Close widgets",tooltip_refresh_slider:"Refresh widget",tooltip_minimize_slider:"Minimize widget",tooltip_ConnectionIssue:"Connection unavailable",tooltip_ConnectionReEstablished:"Connection re-established",tooltip_CloseToStartChat:"To start a chat please close this window",tooltip_CloseToStartConversation:"To start a messaging conversation please close this window",windowTitle:"Need help?",defaultTextBoxText:"Enter text here",welcomeMessage:"How can I help you today?",thankYouMessage:"Thank you for connecting with us",visitorChatLineSentError:"Error sending message",at:"at",me:"Me",you:"You",info:"Info",agent:"Agent",authExpired:"Your verification has expired. You are being directed to re-login. Please press here in order to redirect immediately.",unauthExpired:"Your verification has expired. Click below to reload the conversation.",reload:"Reload",redirect:"Redirect",relogin:"Session expired",secureForm_line_send:"{{agentName}} has sent you a Secure Form: {{secureFormName}}",secureForm_link_title_send:"{{agentName}} has sent you a Secure Form",secureForm_line_submit:"The following Secure Form has been submitted: {{secureFormName}}",secureForm_link_title_submit:"The following Secure Form has been submitted",secureFormSubmittedMessage:"The form has been submitted successfully. <br>To protect your information, submitted forms cannot be reopened.",secureFormOpenedInAnotherTabMessage:"The Secure Form could not be opened. Please submit the Secure Form from the tab where the interaction began.",secureFormErrorMessage:"The Secure Form could not be opened. <br>Please contact your agent for assistance.",monthJanuary:"Jan",monthFebruary:"Feb",monthMarch:"Mar",monthApril:"Apr",monthMay:"May",monthJune:"Jun",monthJuly:"Jul",monthAugust:"Aug",monthSeptember:"Sep",monthOctober:"Oct",monthNovember:"Nov",monthDecember:"Dec",daySuffix:"",dayMonthGap:" ",logoAltText:"Logo",agentPicAltText:"Agent picture",lpLogo:"LivePerson logo",errorIconAltText:"Error",dialog_email_transcript:"Send transcript to:",EmailTranscriptAction:"Email\ntranscript",inputEmailError:"Enter a valid email address. Format: you@domain.com",defaultEmailInputText:"Enter email*",transcriptSubject:"Your chat transcript",transcriptAreaLabel:"Chat messages",transcriptConvResolvedByAgent:"Conversation closed by the agent {{time}}",transcriptConvResolvedByVisitor:"Conversation closed by you {{time}}",transcriptTtrMessage:"We will respond by {{time}}",transcriptShortlyMessage:"An agent will respond shortly",transcriptTtrOffHoursMessage:"We are currently off-hours. We will answer by {{time}}",transcriptForPhotoSharingImage:"Shared content is not available",transcriptRotatorDefaultMessage:"Loading history",transcriptRotatorFirstMessage:"Still loading",transcriptRotatorSecondMessage:"Failed to load history. ",transcriptRotatorLinkText:"Retry",idnvDialogTitle:"Please enter characters {{idnvChar1}} and {{idnvChar2}} from your {{idnvType}}",idnvInputError:"Complete both required fields",idnvFormCancelled:"The identification form was not submitted",idnvFormSubmitted:"You have submitted characters {{idnvChar1}} and {{idnvChar2}} from your {{idnvType}}.",idnvAnswer:"Characters are {{idnvAnswer1}} and {{idnvAnswer2}}",idnvSendLineError:"Identification form could not be submitted",MuteSoundAction:"Mute",UnmuteSoundAction:"Unmute",PrintTranscriptAction:"Print\ntranscript",MarkUrgentAction:"Mark as urgent",DismissUrgentAction:"Dismiss urgent",EndChatAction:"End\nconversation",PopOutAction:"Pop out",PopInAction:"Pop in",PopOutAction_topbar:"Click to pop out",PopInAction_topbar:"Click to pop in",ForgetMeAction:"Clear History",couldNotConnect:"Oops - unable to connect",tryAgain:"Try again",loadingOnMinimize:"Loading",unableToConnect:"Unable to connect",reconnect:"Trying to reconnect",startConversationError:"Please refresh the page and start a new conversation.",agentIsTypingText:"Agent is typing...",forget_me_dialog:"Are you sure you want to clear your conversation history?",forget_me_dialog_subtitle_on_active_chat:"If you choose “yes” the conversation will end and your conversation history will no longer be available from this device.",forget_me_dialog_subtitle:"If you choose “yes” your conversation history will no longer be available from this device",end_chat_alert:"Are you sure you want to end the conversation?",yes:"Yes",no:"No",preChatButton:"Submit",surveyRequireField:"Complete the required field",surveyRequireOption:"Required field. Select an option.",surveyRequireCheckbox:"Required field. Select at least one option.",surveyRequireNumericField:"Only numbers can be used in this field",surveyRequireValidEmail:"Enter a valid email address. Format: you@domain.com",surveyMaximumChars:"Cannot include more than {{specify_number}} characters in this field",surveyIllilgalCharacters:"One or more of the characters entered are not valid. Do not use: &lt;, &gt;, &quot;",surveyGeneralError:"An error has been encountered. Please review the survey and resubmit.",surveyLabel:"Complete the survey",offlineButton:"Submit",exitButton:"Submit",defaultSelect:"Choose item from the list",defaultTextArea:"Enter text here",submit:"Submit",back:"Back",next:"Next",startChat:"Chat",closeWindowText:"You have an active engagement",cancel:"Cancel",ok:"OK",close:"Close",send:"Send",insertTextHere:"Enter text here",IN_SESSION:"Resume chat from the tab where the interaction began",IN_PRE_CHAT:"Return to the tab with the survey to start chat",IN_CHAT:"Please refresh the page to resume chat",captchaTitle:"Chat with us",captchaEnterText:"Type the text shown",captchaRefreshButton:"Try another text",captchaAudioButton:"Try audio",captchaTextButton:"Try text",captchaMessageError:"Verification failed. Please try again.",captchaAccessDenied:"Maximum number of tries exceeded",messagingState_PENDING:"Pending",messagingState_SENT:"Sent",messagingState_ACCEPT:"Delivered",messagingState_READ:"Read",messagingState_ERROR:"Not Delivered",csatLevel_0:"",csatLevel_1:"Very dissatisfied",csatLevel_2:"Dissatisfied",csatLevel_3:"Neutral",csatLevel_4:"Satisfied",csatLevel_5:"Very Satisfied",outOf:"out of",csatTheAgent:"the agent",csatRatingQuestion:"How would you rate your conversation with {{agentName}}?",csatDisclaimer:"Your feedback helps us serve you better. <br>It will not be shared with any customer service representative.",cobrowseInvitation:"I have invited you to join a CoBrowse session, where I will be able to walk you through our website. To start, please click Accept.",cobrowseAcceptBtn:"Accept",cobrowseRejectBtn:"Reject",cobrowseInvitationHeading:"CoBrowse Invitation",cobrowseSessionStarting:"Starting CoBrowse session...",cobrowseInvitationRejected:"CoBrowse invitation has been rejected",cobrowseLine_cobrowseAccepted:"CoBrowse invitation accepted",cobrowseLine_cobrowseDeclined:"CoBrowse invitation rejected",cobrowseLine_cobrowseTimeout:"CoBrowse invitation timed out",cobrowseLine_cobrowseOffered:"{{agentName}} has invited you to a CoBrowse session",cobrowseLine_cobrowseCanceled:"CoBrowse invitation was cancelled by {{agentName}}",richContentSent:"<< Sent Rich Content >>"},{locale:"en-US"});!function(a){a.ViewController.plugin({initialize:function(a){a&&(this.models=a.models)},bindModel:function(a){this.models[a.path.name].bind(a.path,a.callback,a.context||this,a.trigger)},unbindModel:function(a){a=a||{};var b=a.context?a.context:this,c=a.callback?a.callback:null,d=a.path?a.path:null;this.models[a.path.name].unbind(d,c,b)},getModelParam:function(a){return this.models[a.name].get(a)},dispose:function(){for(var a in this.models)this.models.hasOwnProperty(a)&&this.models[a].unbind(null,null,this)}})}(window.liveperson.uiframework.latest);!function(a){var b=new lpTag.unifiedWindow.helpers.LocalizationHelper({util:lpTag.taglets.lpUtil});a.ViewController.plugin({initialize:function(a){a.appContext&&(this.translator=a.appContext.translator)},translate:function(a,b){return this.translator.translate(a,b)},extendDictionary:function(a){this.translator.extendDictionary(a)},isLanguageRTL:function(){return b.isLanguageRTL(this.appContext.conf.engConf.lang)},applyDirOnElement:function(a,c){b.applyDirOnElement(a,c,this.appContext.conf.engConf.lang)}})}(window.liveperson.uiframework.latest);!function(a){a.ViewController.plugin({initialize:function(a){a.appContext&&(this.themer=a.appContext.themer)},customize:function(a){var b={removeThemeAttrs:!1};if(!this.isDOMNode(a))return this.themer.processHTML(a,b);this.themer.processDomEl(a,b);return void 0}})}(window.liveperson.uiframework.latest);!function(a){a.ViewController.plugin({initialize:function(a){},events:function(){},dragableView:function(a){var b;a.drag=this.isDOMNode(a.view)?a.view:this.getFirstElement(a.view);a.anchor=this.isDOMNode(a.anchor)?a.anchor:this.getFirstElement(a.anchor);a.parent=document.body;a.horizontal=!0;this.dragInstances=this.dragInstances||[];this.dm=new lpTag.taglets.lpDragManager;b=this.dm.bind(a);this.dragInstances.push(b);return b},dispose:function(){if(this.dragInstances&&this.dragInstances.length>0)for(var a=0;a<this.dragInstances.length;a++)this.dm.unbind(this.dragInstances[a])}})}(window.liveperson.uiframework.latest);!function(a,b){"use strict";"function"==typeof define&&define.amd&&define("HtmlSanitizerUtils",function(){return b(a,a)});a.lpTag=a.lpTag||{};b(a,a.lpTag)}(this,function(a,b){var c=function(){"use strict";function a(a){function b(a){a.errors.length>0&&Array.prototype.push.apply(d,a.errors)}var c=a,d=[],e=a;""!==e&&(e=g(e));var f=k(e);b(f);f=l(f.cleanText);b(f);f=m(f.cleanText);b(f);f=j(f.cleanText);b(f);f=h(f.cleanText);b(f);f=i(f.cleanText);b(f);return{sanitized:d.length>0,cleanText:d.length>0?f.cleanText:c,errors:d}}function b(a,b){for(var c=b&&b.uri_regex&&o(b.uri_regex)?b.uri_regex:A,e=b&&b.email_regex&&o(b.email_regex)?b.email_regex:B,f=d(a),g=0;g<f.childNodes.length;g++)if(3===f.childNodes[g].nodeType)f.childNodes[g].textContent=p(f.childNodes[g].textContent,c,e);else{var h=f.childNodes[g].outerHTML.match(/<a\s+href/g);h||(f.childNodes[g].innerText=p(f.childNodes[g].innerText,c,e))}f.innerHTML=f.innerHTML.replace(new RegExp("&lt;","g"),"<").replace(new RegExp("&gt;","g"),">");return f.innerHTML}function c(b,c){c=c||{};c=f(c);var g=a(b),h=g.cleanText,i=d(h),j="";if(c==={})j=i.innerText;else{e(i,c);j=i.innerHTML}return j}function d(a){var b=document.createElement("DIV");b.innerHTML=a;return b}function e(a,b){var c=Array.prototype.slice.call(a.childNodes);c.forEach(function(a){a.hasChildNodes()&&e(a,b);if(3!==a.nodeType){var c=a.tagName.toLowerCase();if("undefined"==typeof b[c])a.parentNode&&(a.outerHTML=a.innerHTML);else{for(var d=b[c],f=[],g=0;g<a.attributes.length;g++){var h=a.attributes[g].name.toLowerCase();-1===d.indexOf(h)&&f.push(h)}for(var i=0;i<f.length;i++)a.removeAttribute(f[i])}}})}function f(a){var b={};for(var c in a){var d=[];a[c]instanceof Array&&(d=a[c].map(function(a){a=a.toLowerCase();return a}));b[c.toLowerCase()]=d}return b}function g(a){for(var b=a,c="",d=!1;b!==c;){try{c=decodeURIComponent(b)}catch(e){c=b;d=!0}d||(b=c)}return c}function h(a){for(var b={errors:[],cleanText:a},c=d(a),e=!1,f=0;f<r.length;f++){var g=null;g=c.getElementsByTagName(r[f]);for(var h=0;h<g.length;h++){e=!0;b.errors.push({type:F.ELEMENT,key:r[f],html:g[h].outerHTML});var i=g[h];i&&i.parentNode&&i.parentNode.removeChild(i)}}e&&(b.cleanText=c.innerHTML);return b}function i(a){function b(a,b,d,e,f){var g=e===F.STYLE_ATTRIBUTE||e===F.ATTRIBUTE_VALUE?b:a;e===F.ATTRIBUTE_VALUE&&(g=g.replace(z,""));var h=g.match(d);if(h){for(var i=0;i<h.length;i++)c.errors.push({type:e,key:h[i],html:f.outerHTML});f.removeAttribute(a)}}var c={errors:[],cleanText:a},e=a;"string"!=typeof e&&(e=e.toString());for(var f=[],g=d(e),h=g.getElementsByTagName("*"),i=0;i<h.length;i++)for(var j=0;j<h[i].attributes.length;j++)f.push({attributeKey:h[i].attributes[j].name,attributeValue:h[i].attributes[j].value,element:h[i]});if(f)for(var k=0;k<f.length;k++){var l=f[k].attributeKey,m=f[k].attributeValue,n=f[k].element;b(l,m,s,F.ATTRIBUTE,n);b(l,m,t,F.ATTRIBUTE,n);b(l,m,u,F.ATTRIBUTE_VALUE,n);"style"===l.toLowerCase()&&b(l,m,v,F.STYLE_ATTRIBUTE,n)}c.cleanText=g.innerHTML;return c}function j(a){var b={errors:[],cleanText:a},c=a;"string"!=typeof c&&(c=c.toString());var e=c.match(C);e=null===e?0:e.length;var f=d(c),g=f.innerHTML.match(C);g=null===g?0:g.length;e>g&&b.errors.push({type:F.NOT_WELLFORMED,key:"",html:a});b.cleanText=f.innerHTML;return b}function k(a){var b=n(a,w,F.MARKER,"");return b}function l(a){var b=n(a,x,F.ELEMENT,D);return b}function m(a){var b=n(a,y,F.ATTRIBUTE,E);return b}function n(a,b,c,d){var e={errors:[],cleanText:a},f=a;"string"!=typeof f&&(f=f.toString());var g=f.match(b);if(g)for(var h=0;h<g.length;h++){e.errors.push({type:c,key:d,html:g[h]});f=f.replace(g[h],"")}e.cleanText=f;return e}function o(a){return a&&a.constructor===RegExp}function p(a,b,c){a=q(a,b);a=a.replace(c,"<a href='mailto:$&'>$&</a>");return a}function q(a,b){a=a.replace(b,function(a,b,c,d){var e=a.match(/^www\./i),f=e?"http://"+a.replace(/www\./i,""):a;return"<a href='"+f+"'>"+a+"</a>"});return a}var r=["SCRIPT","STYLE","LINK","IFRAME","META","OBJECT","EMBED"],s=/^on\S+|^\S*[^A-Za-z]+on\S*/gi,t=/DIRNAME|SRCDOC|BEGIN|TO/gi,u=/DATA(\s*):|MHTML(\s*):|JAVASCRIPT(\s*):|EXPRESSION(\s*)\([^;]*\)/gi,v=/MHTML(\s*):([^;]*)|DATA(\s*):([^;]*)|MASK(\s*):([^;]*)|[\w]+(\s*):(\s*)EXPRESSION\([^;]*/gi,w=/<\/\/(.*?)>|<[^A-Za-z0-9\/!](.*?)>/gi,x=/<(\s*)?SCRIPT\b[^>]*(\s*)?>|<(\s*)?FRAMESET\b[^>]*(\s*)?>|<(\s*)?FRAME\b[^>]*(\s*)?>|<(\s*)?BODY\b[^>]*(\s*)?>/gi,y=/ONERROR(\s*)=(\s*)["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?|ONLOAD(\s*)=(\s*)["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?|ONTOGGLE(\s*)=(\s*)["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?|ONRATECHANGE(\s*)=(\s*)["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']|ONLOADSTART(\s*)=(\s*)["']?((?:.(?!["']?\s+(?:\S+)=|[>"']))+.)["']?/gi,z=/\[.]/gi,A=/(((ftp|http|https):\/\/)|www[.])(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/gi,B=/(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))/gi,C=/<((\s)?[a-z%]+)\s*[^\/]*?/gi,D="SCRIPT/FRAMESET/FRAME/BODY",E="ONERROR_ONLOAD_ONTOGGLE_ONRATECHANGE",F={ELEMENT:"element",ATTRIBUTE:"attribute",ATTRIBUTE_VALUE:"attribute_value",STYLE_ATTRIBUTE:"style_attribute",MARKER:"marker",NOT_WELLFORMED:"not_wellformed_html"};return{sanitizeHtml:a,formatLinks:b,sanitizeAndCleanHtml:c}}();b.HtmlSanitizerUtils=b.HtmlSanitizerUtils||c;return c});!function(a){a.ViewController.plugin({LPSanitizer:window.lpTag&&lpTag.HtmlSanitizerUtils,sanitizeText:function(a,b){var c="string"==typeof a&&a;if(c){c=this.initialTextSanitize(c);c=this.sanitizeEvents(c);c=this.removeElementByType(["SCRIPT","STYLE","LINK","IFRAME","META"],c);this.appContext&&this.appContext.conf&&this.appContext.conf.engConf&&this.appContext.conf.engConf.async&&(c=this.formatLinks(c,b));c=this.reTargetElementsByType(["A","FORM"],c)}return{sanitized:c!==a,text:c}},initialTextSanitize:function(a){if(this.LPSanitizer)try{a=this.LPSanitizer.sanitizeHtml(a).cleanText||""}catch(b){}return a},formatLinks:function(a,b){if(this.LPSanitizer)try{a=this.LPSanitizer.formatLinks(a,b)||""}catch(c){}return a},sanitizeEvents:function(a){for(var b=a,c=[{regEx:/[\s'"\/]+(onwheel|onwaiting|ontouchstart|ontouchmove|ontouchend|ontouchcancel|onvolumechange|ontimeupdate|onsuspend|onsubmit|onstalled|onsort|onshow|onselectionchange|onseeking|onseeked|onratechange|onprogress|onpointerlockerror|onpointerlockchange|onpointerleave|onpointerenter|onpointerout|onpointerover|onpointercancel|onpointerup|onpointermove|onpointerdown|onplaying|onplay|onpause|onmousewheel|onmouseleave|onmouseenter|onloadstart|onloadedmetadata|onloadeddata|oninvalid|onended|onemptied|ondurationchange|ondrop|ondragstart|ondragover|ondragleave|ondragexit|ondragenter|ondragend|ondrag|oncuechange|oncanplaythrough|oncanplay|oncancel|onabort|onclose|oncontextmenu|onerror|oninput|onresize|onscroll|onunload|onsubmit|onselect|onreset|onmouseup|onmouseover|onmouseout|onmousemove|onmousedown|onload|onkeyup|onblur|onchange|onclick|ondblclick|onfocus|onkeydown|onkeypress)\s*=/gi,replaceString:" _eventRemoved=",type:"ONEVENT"}],d=0;d<c.length;d++)try{"number"==typeof b&&(b=b.toString());b=b.replace(c[d].regEx,c[d].replaceString)}catch(e){this.logger.error("Error when trying to cleanup text, cleanupType: "+c[d].type+" text: "+a+" result: "+b,"sanitizeEvents")}return b},removeElementByType:function(a,b){function c(a){return function(){a&&a.parentNode&&a.parentNode.removeChild(a)}}a=a.constructor===Array?a:[a];var d=document.createElement("DIV");d.innerHTML=b;for(var e=!1,f=[],g=0;g<a.length;g++){var h=null;h=d.getElementsByTagName(a[g]);for(var i=0;i<h.length;i++){e=!0;try{f.push(c(h[i]))}catch(j){this.logger.error("Error when trying to create remove element function for type "+a[g],"removeElementByType")}}}for(var k=0;k<f.length;k++)try{f[k]()}catch(j){this.logger.error("Error when trying to remove element, HTML "+d.innerHTML,"removeElementByType")}return e?d.innerHTML:b},reTargetElementsByType:function(a,b){a=a.constructor===Array?a:[a];var c,d=document.createElement("DIV");d.innerHTML=b;for(var e=!1,f=0;f<a.length;f++){c=d.getElementsByTagName(a[f]);for(var g=0;g<c.length;g++)try{var h=c[g].getAttribute("target");if(!h||"_blank"!==h.toLowerCase()){e=!0;c[g].setAttribute("target","_blank")}}catch(i){this.logger.error("Error when trying to reTargetLinks elements, result HTML: "+d.innerHTML+" text: "+b,"reTargetElementsByType")}c=null}return e?d.innerHTML:b}})}(window.liveperson.uiframework.latest);!function(a){function b(a,b){for(var c=0;c<b.length;c++){a.DOMEvent=b[c];this.bindViewEvent(a)}}function c(a,b){var c=this,d="undefined"!=typeof a.selector&&this.getFirstElement(a.selector)||a.view;return function(a){b.call(c,a,d)}}function d(a,b){var c,d=!1,e=b.scrollTop+b.clientHeight,f=!1;if("undefined"!=typeof a.deltaY){d=a.deltaY<0;c=a.deltaY>0?a.deltaY:-1*a.deltaY;c=parseInt(c,10)}if(!c&&"undefined"!=typeof a.wheelDelta){d=a.wheelDelta>0;c=a.wheelDelta>0?a.wheelDelta:-1*a.wheelDelta;c=parseInt(c,10)}f=d?b.scrollTop-c<=0:e+c>=b.scrollHeight;if(f){b.scrollTop=d?0:e;this.preventDefault(a)}this.stopPropagation(a)}function e(a,b){var c=b.scrollHeight-b.offsetHeight;0===b.scrollTop?b.scrollTop=1:c===b.scrollTop&&(b.scrollTop=c-1)}a.ViewController.plugin({pluginName:"scrollPrevent",initialize:function(){},preventScroll:function(a){a||(a={view:this.view});if("object"==typeof a&&(a.selector||a.view)){var e=[window.addEventListener?"wheel":"mousewheel","scroll"];a.callback=c.call(this,a,d);b.call(this,a,e)}},limitScroll:function(a){a||(a={view:this.view});if("object"==typeof a&&(a.selector||a.view)){var d=[window.addEventListener?"wheel":"mousewheel","scroll"];a.callback=c.call(this,a,e);b.call(this,a,d)}}})}(window.liveperson.uiframework.latest);!function(a){function b(a){return a?this.isDOMNode(a)?a:"object"==typeof a?a.view||a.selector&&"undefined"!=typeof a.selector&&this.getFirstElement(a.selector):this.view:null}function c(a,b){for(var c=0;c<b.length;c++){a.DOMEvent=b[c];this.bindViewEvent(a)}}function d(a,b){for(var c=0;c<b.length;c++)this.unbindViewEvent({view:a,DOMEvent:b[c],callback:g})}function e(a,b){var c;c=f(a.view,a.inView,a.trackBottom);if(c){"function"==typeof a.callback&&a.callback.call(this);a.bindOnce&&d.call(this,a.inView,h)}}function f(a,b,c){var d=a.getBoundingClientRect(),e=b.getBoundingClientRect();return d.top>=e.top&&(c?d.bottom<=e.bottom:!0)}var g,h;a.ViewController.plugin({initialize:function(a){var b=["scroll","resize",window.addEventListener?"wheel":"mousewheel"],c=["touchend","resize"];a.appContext&&a.appContext.deviceDetector.isDesktop&&(h=a.appContext.deviceDetector.isDesktop()?b:c)},events:function(){},trackInView:function(a){var d;a.view=b.call(this,a.view);a.inView=b.call(this,a.inView);if(a.view&&a.inView){g=e.bind(this,a);d={view:a.inView,callback:g};c.call(this,d,h)}},dispose:function(){}})}(window.liveperson.uiframework.latest);window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){a=a&&a.newValue;"boolean"==typeof a&&(a?C.removeClass(this.sliderButton,"lp_hidden"):C.addClass(this.sliderButton,"lp_hidden"))}function b(a){var b={ControllerName:lpTag.unifiedWindow.EndChatDialogViewController.ControllerName,models:this.models,appContext:this.appContext,sliderAPI:this.slider};b.dialogOpenedFrom=a?this.appConsts.views.TOP_MENU:this.appConsts.views.ACTION_MENU;this.endChatWasInitiated=!0;var c={context:this,data:b};this.appContext.events.trigger({appName:this.ControllerName,eventName:this.VCEvents.DIALOG,data:c})}function c(a){this.endChatWasInitiated=!1;d.call(this,a)}function d(a){a.dialogOpenedFrom===this.appConsts.views.TOP_MENU&&this.focusOnElement(this.LPViewMap.closeButton,this.maximizedView)}function e(){h.call(this,!0)}function f(a){h.call(this,!0);this.stopPropagation(a)}function g(){this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.widgetSDK.INIT})}function h(a){var c=this.getModelParam(this.uiPath.STATE);if(!this.endChatWasInitiated)switch(c){case this.State.CHATTING:b.call(this,a);this.changeMode(this.states.MAXIMIZED,!0);break;case this.State.APP_ENDED:this.isClosingWindow=!0;r.call(this,this.State.APP_ENDED);break;case this.State.WAITING:this.isClosingWindow=!0;this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.EventName.application.END_CHAT});k.call(this);break;default:this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.EventName.application.END_SURVEY});k.call(this)}}function i(a){this.forgetMeInitiated=!1;d.call(this,a)}function j(a){var b=this.getModelParam(this.uiPath.STATE);if(!this.forgetMeInitiated&&b!==this.State.ERROR&&b!==this.State.CONNECTION_ISSUE){var c={ControllerName:lpTag.unifiedWindow.ForgetMeDialogViewController.ControllerName,models:this.models,appContext:this.appContext,sliderAPI:this.slider};c.dialogOpenedFrom=a?this.appConsts.views.TOP_MENU:this.appConsts.views.ACTION_MENU;this.forgetMeInitiated=!0;var d={context:this,data:c};this.appContext.events.trigger({appName:this.ControllerName,eventName:this.VCEvents.DIALOG,data:d})}}function k(){var a=this.appContext.conf.unifiedConf,b=a.poppedOut||a.external;b&&!a.NativeSDK?window.close():this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.application.DO_HARAKIRI});document.getElementsByClassName("LPMcontainer LPMoverlay")[0].focus()}function l(a){var b=this.appContext.wrapperWindow.getChatWrapperElement(),c=this.LPClassesMap.visitorHasTyped;if(a.typing){C.addClass(b,c);this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.widgetSDK.VISITOR_TYPING,data:!0})}else{C.removeClass(b,c);this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.widgetSDK.VISITOR_TYPING,data:!1})}}function m(a,b){b=b||this.getModelParam(this.uiPath.STATE);var c=this.State.CHATTING===b||this.State.WAITING===b,d={closeButton:c?"tooltip_EndChat":"tooltip_Close",minimizeButton:"tooltip_Minimize",maximizeButton:"tooltip_Maximize"};n.call(this,d,a)}function n(a,b){var c,d,e;for(var f in a){d=this.translator.translate(a[f]);c=this.getElements(this.LPViewMap[f],this.mainWindow);for(var g=0;g<c.length;g++){o(c[g],d);e=this.getFirstElement("img",c[g]);e&&p(e,d,b)}}}function o(a,b){a.title=b}function p(a,b,c){a.alt=b;c&&(a.src+="?v="+lpTag.unifiedWindow.Application.v)}function q(a){var b=a&&a.newValue;r.call(this,b);t.call(this,b);this.appContext.wrapperWindow.setTitle(u.call(this,b));m.call(this,!1,b)}function r(a){var b=a===this.State.ENDED||a===this.State.APP_ENDED;b&&this.isClosingWindow&&k.call(this)}function s(a){var b=this.getModelParam(this.uiPath.STATE),c=a&&a.newValue||this.showMessageUs&&this.appContext.translator.translate("message_us");c&&b===this.State.CHATTING&&this.appContext.wrapperWindow.setTitle(c)}function t(a){var b,c;if(!this.appContext.conf.unifiedConf.widgetSDK){b=this.getElements(this.LPViewMap.chattingWithIcon,this.mainWindow);for(var d=0;d<b.length;d++){c={view:b[d],useClasses:!0,display:"inline-block"};a===this.State.CHATTING?this.show(c):this.hide(c)}}}function u(a){var b,c,d=this.showMessageUs&&this.translator.translate("message_us");a=a||this.getModelParam(this.uiPath.STATE);switch(a){case this.State.APP_ENDED:b=this.translator.translate(this.State.ENDED);break;case this.State.REQUESTED:b=d;break;case this.State.CHATTING:case this.State.CONNECTION_ISSUE:b=this.getModelParam(this.chatPath.AGENT_NAME)||d||this.translator.translate(this.State.CHATTING);break;default:c=d||this.translator.translate("connecting");b=this.translator.translate(a)||c}return b}function v(a){this.blurredTimeout&&clearTimeout(this.blurredTimeout);var b=this;a.focus?this.blurredTimeout=setTimeout(function(){b.wasBlurred=!1},100):this.wasBlurred=!0}function w(){this.isFocusInsideApp()&&this.focusOnElement(this.LPViewMap.closeButton,this.maximizedView)}function x(a){a&&a.type===lpTag.unifiedWindow.consts.slider.viewType.widgetSDKView?this.sliderButton.title=this.translate("tooltip_close_widgets"):this.sliderButton.title=this.translate("tooltip_open_widgets")}function y(){if(this.appContext.conf.unifiedConf.widgetSDK){this.sliderButton.title=this.translate("tooltip_open_widgets");this.focusOnElement(this.LPViewMap.widgetSdkButton,this.maximizedView)}}function z(a){var b=a&&"number"==typeof a.newValue&&a.newValue||0;if(b>0){C.removeClass(this.titleDiv,this.LPClassesMap.lp_slider_gap);A.call(this,b)}else{C.addClass(this.titleDiv,this.LPClassesMap.lp_slider_gap);this.addClass(this.widgetNotificationContainer,"lpHide")}}function A(a){this.widgetNotificationText.innerHTML=""+a;this.removeClass(this.widgetNotificationContainer,"lpHide");this.shakeX(this.getFirstElement(this.widgetNotificationContainer))}function B(){this.customize(this.maximizedView);this.customize(this.minimizedView);this.customize(this.bufferStrip);this.appContext.wrapperWindow.adjustConfigStyle(this.appContext.themer)}var C=lpTag.taglets.lpUtil;lpTag.unifiedWindow.WrapperWindowExtenderBase=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"WrapperWindowExtenderBase",LPViewMap:{header:"^header",maximized:"^maximized",minimizedView:"^minimized",headerText:"^headerText",chattingWithIcon:"^chattingWithIcon",closeButton:"^close",minimizeButton:"^minimize",maximizeButton:"^maximize",minimizeButtonImg:"^minimizeButtonImage",closeButtonImg:"^closeButtonImage",widgetSdkButton:"^widget_sdk"},LPClassesMap:{visitorHasTyped:"lp_visitor_has_typed",lp_slider_gap:"lp_slider_gap"},initialize:function(a){this.models=a.models;this.endChatWasInitiated=!1;this.forgetMeInitiated=!1;this.isClosingWindow=!1;this.State=lpTag.unifiedWindow.State;this.states=this.appContext.uiStateManager.WINDOW_STATE;this.mainWindow=this.appContext.wrapperWindow.getMainWindowElement();this.minimizedView=this.appContext.wrapperWindow.getMinimizedElement();this.bufferStrip=this.appContext.wrapperWindow.getBufferStripElement();this.maximizedView=this.appContext.wrapperWindow.getMaximizedElement();this.sliderButton=this.appContext.wrapperWindow.getSliderButton();this.titleDiv=this.appContext.wrapperWindow.getTitleDiv();this.chattingWithIcon=this.appContext.wrapperWindow.getChattingWIthIcon();this.widgetNotificationContainer=this.appContext.wrapperWindow.getWidgetNotificationContainer();this.widgetNotificationText=this.appContext.wrapperWindow.getWidgetNotificationText();this.appContext.wrapperWindow.unbindDomEvents();m.call(this,!0);this.appContext.wrapperWindow.showClose(!0);this.appContext.wrapperWindow.showMinimized(!0);B.call(this);this.removeClass(this.minimizedView,"lpHide");this.appContext.conf.unifiedConf.widgetSDK&&this.setWidgetSDKView.call(this);this.showMessageUs=this.appContext.conf.engConf.async},events:function(){this.bindModel({path:this.uiPath.STATE,callback:q,context:this});this.bindModel({path:this.chatPath.AGENT_NAME,callback:s,context:this});this.bindModel({path:this.chatPath.SDK_NOTIFICATIONS,context:this,callback:z});this.bindModel({path:this.chatPath.SDK_BUTTON_ENABLE,context:this,callback:a});this.bindViewEvent({inView:this.maximizedView,selector:this.LPViewMap.closeButton,DOMEvent:"click",callback:e,context:this});this.bindViewEvent({inView:this.maximizedView,selector:this.LPViewMap.widgetSdkButton,DOMEvent:"click",callback:g,context:this});this.bindViewEvent({view:this.mainWindow,DOMEvent:"keyup",callback:this.stopPropagation,context:this});this.bindViewEvent({view:this.mainWindow,DOMEvent:"keydown",callback:this.stopPropagation,context:this});this.bindViewEvent({view:this.mainWindow,DOMEvent:"keypress",callback:this.stopPropagation,context:this});this.bindViewEvent({inView:this.minimizedView,selector:this.LPViewMap.closeButton,DOMEvent:"click",callback:f,context:this});this.appContext.events.bind({appName:"*",eventName:this.EventName.viewController.SHOW_FORGET_ME,context:this,func:j});this.appContext.events.bind({appName:lpTag.unifiedWindow.ForgetMeDialogViewController.ControllerName,eventName:this.EventName.viewController.DIALOG_CLOSED,context:this,func:i});this.appContext.events.bind({appName:"*",eventName:this.EventName.viewController.INITIATE_END_CHAT,context:this,func:h});this.appContext.events.bind({appName:"*",eventName:this.EventName.viewController.VISITOR_HAS_TYPED,context:this,func:l});this.appContext.events.bind({appName:lpTag.unifiedWindow.EndChatDialogViewController.ControllerName,eventName:this.EventName.viewController.DIALOG_CLOSED,context:this,func:c});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.THANK_YOU_PAGE,context:this,func:w});this.appContext.events.bind({appName:"*",eventName:lpTag.unifiedWindow.events.viewController.SLIDER_VIEW_CHANGE,func:x,context:this});this.appContext.events.bind({appName:"*",eventName:lpTag.unifiedWindow.events.viewController.SLIDER_CLOSED,func:y,context:this});this.appContext.browserStateManager.on(this.appContext.browserStateManager.EVENT_NAME.FOCUS_CHANGE,v,this);this.maximizedVisible=this.getModelParam(this.uiPath.WINDOW_MAXIMIZED)},render:function(){var a=this.appContext.deviceDetector.getDeviceFamilyName().toLowerCase(),b='@charset "UTF-8";#lpChat *{box-sizing:border-box;font-weight:normal;letter-spacing:0;font-family:inherit;opacity:1;filter:alpha(opacity=100);max-width:none;direction:inherit;text-align:inherit;outline:none}#lpChat *::-moz-focus-inner{border:0}#lpChat .lp_main_area *{-webkit-overflow-scrolling:touch;-webkit-text-size-adjust:none;-webkit-font-smoothing:antialiased}#lpChat img{margin:0;padding:0;border:0;vertical-align:bottom;background:inherit;background:initial;position:static;position:initial;color:black;width:auto;height:auto;text-shadow:none;box-shadow:none;-webkit-box-shadow:initial;line-height:normal}#lpChat b,#lpChat strong{font-weight:bold}#lpChat h1,#lpChat h2,#lpChat h3,#lpChat h4,#lpChat h5,#lpChat h6,#lpChat p,#lpChat blockquote,#lpChat pre,#lpChat a,#lpChat abbr,#lpChat acronym,#lpChat address,#lpChat big,#lpChat cite,#lpChat code,#lpChat del,#lpChat dfn,#lpChat em,#lpChat ins,#lpChat kbd,#lpChat q,#lpChat s,#lpChat samp,#lpChat small,#lpChat strike,#lpChat strong,#lpChat sub,#lpChat sup,#lpChat tt,#lpChat var,#lpChat b,#lpChat u,#lpChat i,#lpChat center,#lpChat dl,#lpChat dt,#lpChat dd,#lpChat ol,#lpChat ul,#lpChat li,#lpChat fieldset,#lpChat form,#lpChat select,#lpChat label,#lpChat legend,#lpChat table,#lpChat caption,#lpChat tbody,#lpChat tfoot,#lpChat thead,#lpChat tr,#lpChat th,#lpChat td,#lpChat article,#lpChat aside,#lpChat canvas,#lpChat details,#lpChat embed,#lpChat figure,#lpChat figcaption,#lpChat footer,#lpChat header,#lpChat menu,#lpChat nav,#lpChat output,#lpChat ruby,#lpChat section,#lpChat summary,#lpChat span,#lpChat time,#lpChat mark,#lpChat audio,#lpChat video,#lpChat p{margin:0;padding:0;border:0;vertical-align:baseline;background:inherit;background:initial;position:static;position:initial;color:inherit;width:auto;height:auto;text-shadow:none;box-shadow:none;-webkit-box-shadow:initial;line-height:normal;font-size:inherit}#lpChat input:not([type="radio"]){margin:0;padding:0;border:0;vertical-align:baseline;background:inherit;background:initial;position:static;position:initial;color:black;width:auto;height:auto;text-shadow:none;box-shadow:none;-webkit-box-shadow:initial;line-height:normal}#lpChat input[type="radio"],#lpChat textarea{margin:0;padding:0;border:0;vertical-align:baseline;position:static;position:initial;color:black;width:auto;height:auto;min-height:0;text-shadow:none;box-shadow:none;-webkit-box-shadow:initial;line-height:normal}#lpChat input[type="radio"]{-moz-appearance:radio;-webkit-appearance:radio;appearance:radio}#lpChat textarea{font-size:inherit}#lpChat legend{display:block}#lpChat div,#lpChat button{margin:0;padding:0;border:0;vertical-align:baseline;background:inherit;background:initial;position:static;position:initial;font-family:inherit;color:inherit;width:auto;height:auto;text-shadow:none;box-shadow:none;-webkit-box-shadow:initial;line-height:normal;font-size:inherit}#lpChat button{font-size:1em;border-radius:0}#lpChat input[type="checkbox"]{-moz-appearance:checkbox;-webkit-appearance:checkbox;appearance:checkbox}#lpChat input{height:auto;vertical-align:middle}#lpChat .lpHide,#lpChat .lp_hidden{display:none !important}#lpChat .lpNoOutlineFocus{outline:none !important}#lpChat .lpInlineBlock{display:inline-block !important}#lpChat .lpClearfix:after{visibility:hidden;display:block;font-size:0;content:" ";clear:both;height:0}#lpChat *:disabled{cursor:default}#lpChat *:disabled img{opacity:0.5}.lp_desktop #lpChat .lp_close-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}.lp_desktop #lpChat .lp_close-icon.lp_icon-white img{top:-40px !important;left:-480px !important}.lp_desktop #lpChat .lp_close-icon img{top:0 !important;left:-480px !important;position:absolute !important}.lp_desktop #lpChat .lp_minimize-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}.lp_desktop #lpChat .lp_minimize-icon.lp_icon-white img{top:-40px !important;left:-600px !important}.lp_desktop #lpChat .lp_minimize-icon img{top:0 !important;left:-600px !important;position:absolute !important}.lp_desktop #lpChat .lp_maximize-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}.lp_desktop #lpChat .lp_maximize-icon.lp_icon-white img{top:-40px !important;left:-960px !important}.lp_desktop #lpChat .lp_maximize-icon img{top:0 !important;left:-960px !important;position:absolute !important}.lp_desktop #lpChat .lp_close,.lp_desktop #lpChat .lp_minimize,.lp_desktop #lpChat .lp_maximize,.lp_desktop #lpChat .lp_popout,.lp_desktop #lpChat .lp_actions_button,.lp_desktop #lpChat .lp_slider{width:22px;height:22px}.lp_tablet #lpChat .lp_close-icon,.lp_mobile #lpChat .lp_close-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:24px !important;height:24px !important}.lp_tablet #lpChat .lp_close-icon.lp_icon-white img,.lp_mobile #lpChat .lp_close-icon.lp_icon-white img{top:-40px !important;left:-480px !important}.lp_tablet #lpChat .lp_close-icon img,.lp_mobile #lpChat .lp_close-icon img{top:0 !important;left:-480px !important;position:absolute !important}.lp_tablet #lpChat .lp_minimize-icon,.lp_mobile #lpChat .lp_minimize-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:24px !important;height:24px !important}.lp_tablet #lpChat .lp_minimize-icon.lp_icon-white img,.lp_mobile #lpChat .lp_minimize-icon.lp_icon-white img{top:-40px !important;left:-600px !important}.lp_tablet #lpChat .lp_minimize-icon img,.lp_mobile #lpChat .lp_minimize-icon img{top:0 !important;left:-600px !important;position:absolute !important}.lp_tablet #lpChat .lp_maximize-icon,.lp_mobile #lpChat .lp_maximize-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:24px !important;height:24px !important}.lp_tablet #lpChat .lp_maximize-icon.lp_icon-white img,.lp_mobile #lpChat .lp_maximize-icon.lp_icon-white img{top:-40px !important;left:-960px !important}.lp_tablet #lpChat .lp_maximize-icon img,.lp_mobile #lpChat .lp_maximize-icon img{top:0 !important;left:-960px !important;position:absolute !important}.lp_tablet #lpChat .lp_close,.lp_tablet #lpChat .lp_minimize,.lp_tablet #lpChat .lp_maximize,.lp_tablet #lpChat .lp_popout,.lp_tablet #lpChat .lp_actions_button,.lp_tablet #lpChat .lp_slider,.lp_mobile #lpChat .lp_close,.lp_mobile #lpChat .lp_minimize,.lp_mobile #lpChat .lp_maximize,.lp_mobile #lpChat .lp_popout,.lp_mobile #lpChat .lp_actions_button,.lp_mobile #lpChat .lp_slider{width:24px;height:24px}#lpChat button:focus,#lpChat input:focus,#lpChat textarea:focus,#lpChat select:focus,#lpChat a:focus,#lpChat div:focus{outline:#6A9FB1 solid 2px}.lp_mobile #lpChat,.lp_tablet #lpChat,.lp_desktop #lpChat{font-family:"Arial"}.lp_mobile #lpChat>.lp_buffer-strip,.lp_tablet #lpChat>.lp_buffer-strip,.lp_desktop #lpChat>.lp_buffer-strip{display:none}.lp_mobile #lpChat .lp_centerd_img,.lp_tablet #lpChat .lp_centerd_img,.lp_desktop #lpChat .lp_centerd_img{position:absolute;margin:auto;top:0;left:0;right:0;bottom:0}.lp_mobile #lpChat table.lp_centralizer,.lp_tablet #lpChat table.lp_centralizer,.lp_desktop #lpChat table.lp_centralizer{height:100%;width:100%}.lp_mobile #lpChat table.lp_centralizer td,.lp_tablet #lpChat table.lp_centralizer td,.lp_desktop #lpChat table.lp_centralizer td{text-align:center;vertical-align:middle}.lp_mobile #lpChat .lp_rotator-container,.lp_tablet #lpChat .lp_rotator-container,.lp_desktop #lpChat .lp_rotator-container{position:relative;display:inline-block;width:100px;height:100px}.lp_mobile #lpChat .lp_rotator-container .lp_rotator-container-bg,.lp_tablet #lpChat .lp_rotator-container .lp_rotator-container-bg,.lp_desktop #lpChat .lp_rotator-container .lp_rotator-container-bg{position:absolute;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,0);opacity:0.92;border-radius:10px}.lp_mobile #lpChat .lp_rotator-container .lp_rotator,.lp_tablet #lpChat .lp_rotator-container .lp_rotator,.lp_desktop #lpChat .lp_rotator-container .lp_rotator{padding-top:12px;text-align:center;position:absolute;top:0;right:0;bottom:0;left:0}.lp_mobile #lpChat>.lp_minimized .lp_header,.lp_tablet #lpChat>.lp_minimized .lp_header,.lp_desktop #lpChat>.lp_minimized .lp_header,.lp_mobile #lpChat>.lp_maximized .lp_header,.lp_tablet #lpChat>.lp_maximized .lp_header,.lp_desktop #lpChat>.lp_maximized .lp_header{border-color:#d6d6d6;border-width:1px;border-style:solid;font-size:1.1em;z-index:2;width:100%;position:absolute}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper{width:100%;height:100%}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title{direction:ltr}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title>*,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title>*,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title>*,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title>*,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title>*,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title>*{vertical-align:middle}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text{overflow:hidden;text-overflow:ellipsis;display:inline-block;margin-left:8px;max-width:150px;white-space:nowrap}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title .lp_chatting-with-icon.lpHide ~ .lp_top-text,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title .lp_chatting-with-icon.lpHide ~ .lp_top-text,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_title .lp_chatting-with-icon.lpHide ~ .lp_top-text,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_chatting-with-icon.lpHide ~ .lp_top-text,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_chatting-with-icon.lpHide ~ .lp_top-text,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_chatting-with-icon.lpHide ~ .lp_top-text{margin-left:0}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_slider.lp_hidden,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_slider.lp_hidden,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_slider.lp_hidden,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_slider.lp_hidden,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_slider.lp_hidden,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_slider.lp_hidden{display:none !important}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close.lp_hidden,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close.lp_hidden,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close.lp_hidden,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize.lp_hidden,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize.lp_hidden,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize.lp_hidden,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_maximize.lp_hidden,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_maximize.lp_hidden,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_maximize.lp_hidden,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout.lp_hidden,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout.lp_hidden,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout.lp_hidden,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_refresh.lp_hidden,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_refresh.lp_hidden,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_refresh.lp_hidden,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon.lp_hidden,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon.lp_hidden,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon.lp_hidden,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close.lp_hidden,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close.lp_hidden,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close.lp_hidden,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize.lp_hidden,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize.lp_hidden,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize.lp_hidden,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_maximize.lp_hidden,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_maximize.lp_hidden,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_maximize.lp_hidden,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout.lp_hidden,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout.lp_hidden,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout.lp_hidden,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_refresh.lp_hidden,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_refresh.lp_hidden,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_refresh.lp_hidden,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon.lp_hidden,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon.lp_hidden,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon.lp_hidden{display:none}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close:disabled,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close:disabled,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close:disabled,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize:disabled,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize:disabled,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize:disabled,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_maximize:disabled,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_maximize:disabled,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_maximize:disabled,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout:disabled,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout:disabled,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout:disabled,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_refresh:disabled,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_refresh:disabled,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_refresh:disabled,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close:disabled,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close:disabled,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close:disabled,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize:disabled,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize:disabled,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize:disabled,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_maximize:disabled,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_maximize:disabled,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_maximize:disabled,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout:disabled,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout:disabled,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout:disabled,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_refresh:disabled,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_refresh:disabled,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_refresh:disabled,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled{cursor:default}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close:disabled img,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close:disabled img,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_close:disabled img,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize:disabled img,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize:disabled img,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_minimize:disabled img,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_maximize:disabled img,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_maximize:disabled img,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_maximize:disabled img,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout:disabled img,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout:disabled img,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_popout:disabled img,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_refresh:disabled img,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_refresh:disabled img,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_refresh:disabled img,.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled img,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled img,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled img,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close:disabled img,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close:disabled img,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_close:disabled img,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize:disabled img,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize:disabled img,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_minimize:disabled img,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_maximize:disabled img,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_maximize:disabled img,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_maximize:disabled img,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout:disabled img,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout:disabled img,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_popout:disabled img,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_refresh:disabled img,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_refresh:disabled img,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_refresh:disabled img,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled img,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled img,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_chatting-with-icon:disabled img{opacity:0.5}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper button,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper button,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper button,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper button,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper button,.lp_desktop #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper button{padding:0;background:none;border:none;position:absolute;cursor:pointer}.lp_mobile #lpChat>.lp_minimized .lp_header.lp_slider,.lp_tablet #lpChat>.lp_minimized .lp_header.lp_slider,.lp_desktop #lpChat>.lp_minimized .lp_header.lp_slider,.lp_mobile #lpChat>.lp_maximized .lp_header.lp_slider,.lp_tablet #lpChat>.lp_maximized .lp_header.lp_slider,.lp_desktop #lpChat>.lp_maximized .lp_header.lp_slider{position:absolute;width:22px;height:22px;top:5px;left:5px}.lp_mobile #lpChat>.lp_minimized>.lp_main,.lp_tablet #lpChat>.lp_minimized>.lp_main,.lp_desktop #lpChat>.lp_minimized>.lp_main,.lp_mobile #lpChat>.lp_maximized>.lp_main,.lp_tablet #lpChat>.lp_maximized>.lp_main,.lp_desktop #lpChat>.lp_maximized>.lp_main{padding:0;z-index:1;height:100%;width:100%;position:absolute;right:0;bottom:0}.lp_mobile #lpChat>.lp_minimized>.lp_main .lp_wait,.lp_tablet #lpChat>.lp_minimized>.lp_main .lp_wait,.lp_desktop #lpChat>.lp_minimized>.lp_main .lp_wait,.lp_mobile #lpChat>.lp_maximized>.lp_main .lp_wait,.lp_tablet #lpChat>.lp_maximized>.lp_main .lp_wait,.lp_desktop #lpChat>.lp_maximized>.lp_main .lp_wait{position:absolute;top:0;bottom:0;left:0;right:0}.lp_mobile #lpChat>.lp_minimized>.lp_main .lp_wait table,.lp_tablet #lpChat>.lp_minimized>.lp_main .lp_wait table,.lp_desktop #lpChat>.lp_minimized>.lp_main .lp_wait table,.lp_mobile #lpChat>.lp_maximized>.lp_main .lp_wait table,.lp_tablet #lpChat>.lp_maximized>.lp_main .lp_wait table,.lp_desktop #lpChat>.lp_maximized>.lp_main .lp_wait table{height:100%;width:100%}.lp_mobile #lpChat>.lp_minimized>.lp_main .lp_wait table td,.lp_tablet #lpChat>.lp_minimized>.lp_main .lp_wait table td,.lp_desktop #lpChat>.lp_minimized>.lp_main .lp_wait table td,.lp_mobile #lpChat>.lp_maximized>.lp_main .lp_wait table td,.lp_tablet #lpChat>.lp_maximized>.lp_main .lp_wait table td,.lp_desktop #lpChat>.lp_maximized>.lp_main .lp_wait table td{text-align:center;vertical-align:middle}.lp_mobile #lpChat>.lp_minimized>.lp_main>.lp_message,.lp_tablet #lpChat>.lp_minimized>.lp_main>.lp_message,.lp_desktop #lpChat>.lp_minimized>.lp_main>.lp_message,.lp_mobile #lpChat>.lp_maximized>.lp_main>.lp_message,.lp_tablet #lpChat>.lp_maximized>.lp_main>.lp_message,.lp_desktop #lpChat>.lp_maximized>.lp_main>.lp_message{text-align:center;width:100%;height:100%}.lp_mobile #lpChat>.lp_minimized>.lp_main>.lp_message img[src=""],.lp_tablet #lpChat>.lp_minimized>.lp_main>.lp_message img[src=""],.lp_desktop #lpChat>.lp_minimized>.lp_main>.lp_message img[src=""],.lp_mobile #lpChat>.lp_maximized>.lp_main>.lp_message img[src=""],.lp_tablet #lpChat>.lp_maximized>.lp_main>.lp_message img[src=""],.lp_desktop #lpChat>.lp_maximized>.lp_main>.lp_message img[src=""]{display:none}.lp_mobile #lpChat>.lp_minimized>.lp_main>.lp_message .lp_text,.lp_tablet #lpChat>.lp_minimized>.lp_main>.lp_message .lp_text,.lp_desktop #lpChat>.lp_minimized>.lp_main>.lp_message .lp_text,.lp_mobile #lpChat>.lp_maximized>.lp_main>.lp_message .lp_text,.lp_tablet #lpChat>.lp_maximized>.lp_main>.lp_message .lp_text,.lp_desktop #lpChat>.lp_maximized>.lp_main>.lp_message .lp_text{padding:10px 4px 0 4px;text-align:center}.lp_mobile #lpChat>.lp_minimized>.lp_main>.lp_message .lp_text:empty,.lp_tablet #lpChat>.lp_minimized>.lp_main>.lp_message .lp_text:empty,.lp_desktop #lpChat>.lp_minimized>.lp_main>.lp_message .lp_text:empty,.lp_mobile #lpChat>.lp_maximized>.lp_main>.lp_message .lp_text:empty,.lp_tablet #lpChat>.lp_maximized>.lp_main>.lp_message .lp_text:empty,.lp_desktop #lpChat>.lp_maximized>.lp_main>.lp_message .lp_text:empty{display:none}.lp_mobile #lpChat>.lp_maximized,.lp_tablet #lpChat>.lp_maximized,.lp_desktop #lpChat>.lp_maximized{border:1px solid #d6d6d6;border-radius:5px 5px 0 0;box-shadow:0px 0px 16px 3px rgba(0,0,0,0.2);color:#000}.lp_mobile #lpChat>.lp_maximized>.lp_header,.lp_tablet #lpChat>.lp_maximized>.lp_header,.lp_desktop #lpChat>.lp_maximized>.lp_header{cursor:move}.lp_mobile #lpChat>.lp_maximized>.lp_main,.lp_tablet #lpChat>.lp_maximized>.lp_main,.lp_desktop #lpChat>.lp_maximized>.lp_main{background-color:#fff}.lp_mobile #lpChat>.lp_maximized.lp_external-window,.lp_tablet #lpChat>.lp_maximized.lp_external-window,.lp_desktop #lpChat>.lp_maximized.lp_external-window{border-radius:0;position:fixed;left:0;right:0;bottom:0;top:0;width:100%;height:100%;overflow:hidden}.lp_mobile #lpChat>.lp_maximized.lp_external-window>.lp_header,.lp_tablet #lpChat>.lp_maximized.lp_external-window>.lp_header,.lp_desktop #lpChat>.lp_maximized.lp_external-window>.lp_header{cursor:default}.lp_mobile #lpChat>.lp_maximized.lp_external-window>.lp_header .lp_header-content-wrapper .lp_minimize,.lp_tablet #lpChat>.lp_maximized.lp_external-window>.lp_header .lp_header-content-wrapper .lp_minimize,.lp_desktop #lpChat>.lp_maximized.lp_external-window>.lp_header .lp_header-content-wrapper .lp_minimize{display:none}.lp_mobile #lpChat>.lp_maximized>.lp_header,.lp_tablet #lpChat>.lp_maximized>.lp_header,.lp_desktop #lpChat>.lp_maximized>.lp_header{border-radius:5px 5px 0 0;background-color:#f0f0f0}.lp_mobile #lpChat>.lp_minimized,.lp_tablet #lpChat>.lp_minimized,.lp_desktop #lpChat>.lp_minimized{border-radius:5px 5px 0 0}.lp_mobile #lpChat>.lp_minimized .lp_header,.lp_tablet #lpChat>.lp_minimized .lp_header,.lp_desktop #lpChat>.lp_minimized .lp_header{border-radius:5px 5px 0 0;background-color:#f0f0f0;box-shadow:0px 0px 16px 3px rgba(0,0,0,0.2);height:100%}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_title,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_title,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_title{color:#000;width:100%;padding:10px 0 0 9px;text-align:left}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper{border-radius:inherit}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper>div,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper>div,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper>div{border-radius:inherit}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper{text-align:center;display:table;border-collapse:collapse}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper>*,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper>*,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper>*,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper>*{vertical-align:middle;display:table-cell}.lp_mobile #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_header-buttons-container,.lp_tablet #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_header-buttons-container,.lp_mobile #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_header-buttons-container,.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_header-buttons-container{display:table}.lp_mobile #lpChat>.lp_minimized.lp_webview-window>.lp_header .lp_header-content-wrapper .lp_minimize,.lp_tablet #lpChat>.lp_minimized.lp_webview-window>.lp_header .lp_header-content-wrapper .lp_minimize,.lp_mobile #lpChat>.lp_maximized.lp_webview-window>.lp_header .lp_header-content-wrapper .lp_minimize,.lp_tablet #lpChat>.lp_maximized.lp_webview-window>.lp_header .lp_header-content-wrapper .lp_minimize{display:block}.lp_mobile #lpChat>.lp_buffer-strip,.lp_tablet #lpChat>.lp_buffer-strip{position:fixed;opacity:0.95;bottom:0;left:0;right:0}.lp_mobile #lpChat>.lp_buffer-strip .lp_buffer-strip-container,.lp_tablet #lpChat>.lp_buffer-strip .lp_buffer-strip-container{width:100%;height:100%}.lp_mobile #lpChat>.lp_maximized,.lp_tablet #lpChat>.lp_maximized{z-index:99999999;opacity:0.95;position:fixed;top:0;right:0;bottom:0;left:0;border-radius:0}.lp_mobile #lpChat>.lp_maximized>.lp_header,.lp_tablet #lpChat>.lp_maximized>.lp_header{direction:ltr;height:8%;min-height:40px}.lp_mobile #lpChat>.lp_maximized>.lp_header .lp_title,.lp_tablet #lpChat>.lp_maximized>.lp_header .lp_title{width:100%;text-align:center}.lp_mobile #lpChat>.lp_maximized>.lp_header .lp_title .lp_top-text,.lp_tablet #lpChat>.lp_maximized>.lp_header .lp_title .lp_top-text{text-align:center}.lp_mobile #lpChat>.lp_maximized>.lp_header button,.lp_tablet #lpChat>.lp_maximized>.lp_header button{top:0;right:0;height:100%;width:40px;text-align:center;position:absolute}.lp_mobile #lpChat>.lp_maximized>.lp_header button.lp_popout,.lp_tablet #lpChat>.lp_maximized>.lp_header button.lp_popout{display:none}.lp_mobile #lpChat>.lp_maximized>.lp_header button.lp_close,.lp_tablet #lpChat>.lp_maximized>.lp_header button.lp_close{right:0}.lp_mobile #lpChat>.lp_maximized>.lp_header button.lp_minimize,.lp_tablet #lpChat>.lp_maximized>.lp_header button.lp_minimize{right:auto;left:0}.lp_mobile #lpChat>.lp_maximized>.lp_main,.lp_tablet #lpChat>.lp_maximized>.lp_main{height:92%;max-height:calc(100% - 40px)}.lp_mobile #lpChat>.lp_minimized,.lp_tablet #lpChat>.lp_minimized{position:fixed;z-index:99999999;top:28%;right:0;min-width:40px;height:43%;border-radius:5px 0 0 5px}.lp_mobile #lpChat>.lp_minimized.lp_top-left,.lp_tablet #lpChat>.lp_minimized.lp_top-left{top:5%;right:auto;left:0;-ms-transform:rotate(180deg);transform:rotate(180deg)}.lp_mobile #lpChat>.lp_minimized.lp_top-left .lp_notification_number,.lp_tablet #lpChat>.lp_minimized.lp_top-left .lp_notification_number{-ms-transform:rotate(180deg);transform:rotate(180deg)}.lp_mobile #lpChat>.lp_minimized.lp_top-right,.lp_tablet #lpChat>.lp_minimized.lp_top-right{top:5%}.lp_mobile #lpChat>.lp_minimized.lp_bottom-right,.lp_tablet #lpChat>.lp_minimized.lp_bottom-right{top:52%}.lp_mobile #lpChat>.lp_minimized.lp_bottom-left,.lp_tablet #lpChat>.lp_minimized.lp_bottom-left{top:52%;right:auto;left:0;-ms-transform:rotate(180deg);transform:rotate(180deg)}.lp_mobile #lpChat>.lp_minimized.lp_bottom-left .lp_notification_number,.lp_tablet #lpChat>.lp_minimized.lp_bottom-left .lp_notification_number{-ms-transform:rotate(180deg);transform:rotate(180deg)}.lp_mobile #lpChat>.lp_minimized.lp_middle-left,.lp_tablet #lpChat>.lp_minimized.lp_middle-left{top:30%;right:auto;left:0;-ms-transform:rotate(180deg);transform:rotate(180deg)}.lp_mobile #lpChat>.lp_minimized.lp_middle-left .lp_notification_number,.lp_tablet #lpChat>.lp_minimized.lp_middle-left .lp_notification_number{-ms-transform:rotate(180deg);transform:rotate(180deg)}.lp_mobile #lpChat>.lp_minimized>.lp_main,.lp_tablet #lpChat>.lp_minimized>.lp_main{height:100%}.lp_mobile #lpChat>.lp_minimized>.lp_main>.lp_header,.lp_tablet #lpChat>.lp_minimized>.lp_main>.lp_header{direction:ltr;border-radius:5px 0 0 5px}.lp_mobile #lpChat>.lp_minimized>.lp_main>.lp_header button,.lp_tablet #lpChat>.lp_minimized>.lp_main>.lp_header button{width:100%;text-align:center}.lp_mobile #lpChat>.lp_minimized>.lp_main>.lp_header button.lp_close,.lp_tablet #lpChat>.lp_minimized>.lp_main>.lp_header button.lp_close{padding-top:8px}.lp_mobile #lpChat>.lp_minimized>.lp_main>.lp_header button.lp_maximize,.lp_tablet #lpChat>.lp_minimized>.lp_main>.lp_header button.lp_maximize{margin:31px 0 0 3px;padding:4px 0 10px 0;width:84%;-ms-transform:rotate(270deg);transform:rotate(270deg);outline:none}.lp_mobile #lpChat>.lp_minimized>.lp_main>.lp_header .lp_title,.lp_tablet #lpChat>.lp_minimized>.lp_main>.lp_header .lp_title{padding:0;position:absolute;top:63%;left:-30px;width:100px;white-space:nowrap;-ms-transform:rotate(270deg);transform:rotate(270deg)}.lp_mobile #lpChat>.lp_minimized>.lp_main>.lp_header .lp_title .lp_top-text,.lp_tablet #lpChat>.lp_minimized>.lp_main>.lp_header .lp_title .lp_top-text{max-width:94px}.lp_desktop #lpChat{font-size:13px}.lp_desktop #lpChat>*{width:280px;z-index:99999999;position:fixed;right:20px;bottom:0}.lp_desktop #lpChat>* .lp_header{height:36px;padding:0px 5px}.lp_desktop #lpChat>* .lp_header button{z-index:99999999;top:6px}.lp_desktop #lpChat>.lp_maximized{height:400px}.lp_desktop #lpChat>.lp_maximized>.lp_header .lp_title{float:left;padding-top:9px;padding-left:3px}.lp_desktop #lpChat>.lp_maximized>.lp_header .lp_header-content-wrapper .lp_header-buttons-container{float:right;direction:ltr !important;font-size:0}.lp_desktop #lpChat>.lp_maximized>.lp_header .lp_header-content-wrapper button{position:relative}.lp_desktop #lpChat>.lp_maximized>.lp_header .lp_header-content-wrapper button.lp_close,.lp_desktop #lpChat>.lp_maximized>.lp_header .lp_header-content-wrapper button.lp_minimize{display:inline-block}.lp_desktop #lpChat>.lp_maximized>.lp_header .lp_header-content-wrapper .lp_slider{position:absolute;left:5px;top:5px;width:22px;height:22px}.lp_desktop #lpChat>.lp_maximized>.lp_header .lp_header-content-wrapper .lp_slider_gap{margin-left:20px}.lp_desktop #lpChat>.lp_maximized>.lp_main{height:auto;top:36px}.lp_desktop #lpChat>.lp_maximized.lp_external-window{border-radius:0;position:absolute;left:0;right:0;bottom:0;top:0;width:100%;height:100%;margin:0 auto;max-width:600px}.lp_desktop #lpChat>.lp_maximized.lp_external-window>.lp_header .lp_close,.lp_desktop #lpChat>.lp_maximized.lp_external-window>.lp_header .lp_minimize{display:none}.lp_desktop #lpChat>.lp_maximized.lp_external-window.lp_no-top>.lp_header{display:none}.lp_desktop #lpChat>.lp_maximized.lp_external-window.lp_no-top>.lp_main{top:0}.lp_desktop #lpChat>.lp_minimized{height:36px}.lp_desktop #lpChat>.lp_minimized .lp_header .lp_title{float:left;padding-top:9px;padding-left:7px;width:auto}.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper .lp_header-buttons-container{float:right;direction:ltr !important;font-size:0}.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper button{position:relative}.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper button.lp_close,.lp_desktop #lpChat>.lp_minimized .lp_header .lp_header-content-wrapper button.lp_maximize{display:inline-block}.lp_desktop #lpChat>.lp_minimized>.lp_main{width:100%;height:100%}.lp_desktop #lpChat .lp_maximized .lp_notification_number.wsdkNotification{text-align:center;display:table;border-collapse:collapse;width:100%;height:100%;cursor:default;float:left;overflow:visible;border-radius:50%;background-color:#ed1c24;width:20px;height:20px;font-size:0.7em;z-index:1000;margin:7px 8px;margin-left:15px;text-indent:-1px}.lp_desktop #lpChat .lp_maximized .lp_notification_number.wsdkNotification>*{vertical-align:middle;display:table-cell}.lp_desktop #lpChat .lp_maximized .lp_notification_number.wsdkNotification .lp_notification_text{text-align:center;color:white;border-radius:inherit}.lp_mobile #lpChat{font-size:14px}.lp_mobile #lpChat .lp_maximized .lp_header .lp_slider{left:40px}.lp_mobile #lpChat .lp_maximized .lp_notification_number.wsdkNotification{text-align:center;display:table;border-collapse:collapse;width:100%;height:100%;cursor:default;float:left;overflow:visible;border-radius:50%;background-color:#ed1c24;width:20px;height:20px;font-size:0.7em;margin:7px 8px;z-index:1000;text-indent:-1px;position:absolute;left:60px;top:8px}.lp_mobile #lpChat .lp_maximized .lp_notification_number.wsdkNotification>*{vertical-align:middle;display:table-cell}.lp_mobile #lpChat .lp_maximized .lp_notification_number.wsdkNotification .lp_notification_text{top:4px;position:absolute;width:20px;height:20px;text-align:center;color:white;border-radius:inherit}.lp_tablet #lpChat{font-size:18px}.lp_tablet #lpChat>.lp_minimized{top:38%;height:24%}.lp_tablet #lpChat>.lp_minimized.lp_bottom-right,.lp_tablet #lpChat>.lp_minimized.lp_bottom-left{top:auto;bottom:5%}.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_title .lp_top-text{max-width:250px}.lp_tablet #lpChat>.lp_maximized .lp_header .lp_header-content-wrapper .lp_slider{left:40px}.lp_tablet #lpChat>.lp_maximized.lp_webview-window>.lp_header .lp_header-content-wrapper .lp_minimize{display:block}.lp_tablet #lpChat .lp_maximized .lp_notification_number.wsdkNotification{text-align:center;display:table;border-collapse:collapse;width:100%;height:100%;cursor:default;float:left;overflow:visible;border-radius:50%;background-color:#ed1c24;width:25px;height:25px;font-size:0.6em;margin:7px 8px;z-index:1000;text-indent:-1px;position:absolute;left:60px;top:21px}.lp_tablet #lpChat .lp_maximized .lp_notification_number.wsdkNotification>*{vertical-align:middle;display:table-cell}.lp_tablet #lpChat .lp_maximized .lp_notification_number.wsdkNotification .lp_notification_text{position:absolute;width:25px;height:25px;top:5px;text-align:center;color:white;border-radius:inherit}.lp_mobile.lp_landscape #lpChat>.lp_minimized{top:16%;height:67%}.lp_mobile.lp_landscape #lpChat>.lp_minimized .lp_main .lp_header .lp_title{top:53%}.lp_mobile.lp_landscape #lpChat>.lp_minimized .lp_main .lp_header .lp_title .lp_top-text{max-width:63px}.lp_tablet.lp_landscape #lpChat>.lp_minimized{top:34%;height:32%}.lp_tablet.lp_landscape #lpChat>.lp_minimized .lp_main .lp_header .lp_title{top:53%}.lp_tablet.lp_landscape #lpChat>.lp_minimized .lp_main .lp_header .lp_title .lp_top-text{max-width:63px}.lp_tablet.lp_landscape #lpChat>.lp_minimized.lp_top-right,.lp_tablet.lp_landscape #lpChat>.lp_minimized.lp_top-left{top:5%}.lp_tablet.lp_landscape #lpChat>.lp_minimized.lp_bottom-right,.lp_tablet.lp_landscape #lpChat>.lp_minimized.lp_bottom-left{top:auto;bottom:5%}#lpChat .lp_main{position:absolute;bottom:0;left:0;right:0}#lpChat .lp_main .lp_location_top{text-align:center;position:relative;font-weight:normal;vertical-align:middle;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;text-align:-webkit-center;display:table;width:100%}#lpChat .lp_main .lp_location_top .lp_top_header_text{text-align:-webkit-center;display:inline-block;display:table-cell;vertical-align:middle;text-align:center}.lp_lpNativeAndroid #lpChat .lp_main .lp_location_top .lp_top_header_text{height:40px}#lpChat .lp_main .lp_main_area{position:absolute;top:0;bottom:0;left:0;right:0}#lpChat .lp_main .lp_main_area .lp_location_center{z-index:2;overflow-y:auto;overflow-x:hidden;height:calc(100% - 60px);padding:0 0 0 0;transition:bottom .25s}#lpChat .lp_main .lp_main_area .lp_location_bottom{display:none;position:absolute;bottom:0;left:0;right:0;z-index:111;height:40px;padding:0 5px 0 5px;border-top:1px solid #d6d6d6;background-color:#fff;transition:bottom .25s}#lpChat .lp_main .lp_main_area .lp_location_bottom .lp_actions_button{margin:0;background:#ffffff;border:none;text-align:center;font-family:"Arial";cursor:pointer;box-shadow:none;left:5px;top:9px;position:absolute;background:transparent}#lpChat .lp_main .lp_main_area .lp_location_bottom .lp_actions_button .lp_enable_image{display:block}#lpChat .lp_main .lp_main_area .lp_location_bottom .lp_actions_button .lp_disable_image{display:none}#lpChat .lp_main .lp_main_area .lp_location_bottom .lp_actions_button:disabled{cursor:default}#lpChat .lp_main .lp_main_area .lp_location_bottom .lp_actions_button:disabled .lp_enable_image{display:none}#lpChat .lp_main .lp_main_area .lp_location_bottom .lp_actions_button:disabled .lp_disable_image{display:block}#lpChat .lp_main .lp_main_area .lp_location_bottom .lp_actions_button .lp_enable_image{display:block}#lpChat .lp_main .lp_main_area .lp_location_bottom .lp_actions_button .lp_rotated_image{display:none}#lpChat .lp_main .lp_main_area .lp_location_bottom .lp_bottom_area{position:absolute;left:0px;top:0;right:0;height:100%;padding:0 40px}#lpChat .lp_minimized{cursor:pointer}#lpChat .lp_minimized:active{cursor:move}#lpChat .lp_minimized .lp_notification_number{text-align:center;display:table;border-collapse:collapse;width:100%;height:100%;cursor:default;float:left;overflow:visible;border-radius:50%;background-color:#ed1c24;width:24px;height:24px;font-size:0.9em;margin:-12px 8px 0 8px;z-index:1000}#lpChat .lp_minimized .lp_notification_number>*{vertical-align:middle;display:table-cell}#lpChat .lp_minimized .lp_notification_number .lp_notification_text{text-align:center;color:white;border-radius:inherit}#lpChat .lp_minimized .lp_close_button{margin:0;background:#ffffff;border:none;text-align:center;font-family:"Arial";cursor:pointer;box-shadow:none;position:absolute;background-color:transparent;top:5px;right:10px;width:22px;height:22px;display:none}#lpChat .lp_minimized .lp_close_button .lp_enable_image{display:block}#lpChat .lp_minimized .lp_close_button .lp_disable_image{display:none}#lpChat .lp_minimized .lp_close_button:disabled{cursor:default}#lpChat .lp_minimized .lp_close_button:disabled .lp_enable_image{display:none}#lpChat .lp_minimized .lp_close_button:disabled .lp_disable_image{display:block}#lpChat .lp_minimized .lp_header_text_container{position:absolute;font-family:myriadpro, Trebuchet;font-weight:normal;font-size:10pt;color:#ffffff;left:0;top:0;height:100%;width:100%}#lpChat .lp_minimized .lp_header_text_container .lp_header_text{position:absolute;top:8px;left:0;font-size:0.9em;text-align:center;width:100%;height:100%;line-height:24px;color:#ffffff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:50%;left:25%}#lpChat .lp_input_area{padding:13px 0px 11px 0px}#lpChat .lp_input_area .lp_chat_input{background-color:transparent;resize:none;border:none;width:100%;height:100%;padding:13px 0px;color:#525252;font-size:.9em;vertical-align:middle}#lpChat .lp_input_area .lp_chat_input::-webkit-input-placeholder{font:inherit;font-style:italic;color:inherit}#lpChat .lp_input_area .lp_chat_input:-moz-placeholder{font:inherit;font-style:italic;color:inherit}#lpChat .lp_input_area .lp_chat_input::-moz-placeholder{font:inherit;font-style:italic;color:inherit}#lpChat .lp_input_area .lp_chat_input:-ms-input-placeholder{font:inherit;font-style:italic;color:inherit}#lpChat .lp_input_area .lp_expandable_textarea{background-color:transparent;line-height:15px;width:100%;resize:none;color:#525252;font-size:.9em;outline-offset:4px;overflow-x:hidden}#lpChat .lp_input_area .lp_expandable_textarea::-webkit-input-placeholder{font:inherit;font-style:italic;color:inherit}#lpChat .lp_input_area .lp_expandable_textarea:-moz-placeholder{font:inherit;font-style:italic;color:inherit}#lpChat .lp_input_area .lp_expandable_textarea::-moz-placeholder{font:inherit;font-style:italic;color:inherit}#lpChat .lp_input_area .lp_expandable_textarea:-ms-input-placeholder{font:inherit;font-style:italic;color:inherit}#lpChat .lp_send_button{background-color:transparent;position:absolute;right:9px;top:9px}#lpChat .lp_send_button:disabled{opacity:0.5}#lpChat .lp_chat_line_wrapper{position:relative;max-width:100%;padding:0px 10px 4px 10px;overflow:hidden}#lpChat .lp_chat_line_wrapper .agent_avatar{display:none}#lpChat .lp_chat_line_wrapper .lp_rich_content_line{width:100%}#lpChat .lp_chat_line_wrapper.agent_avatar_display .agent_avatar{display:inline-block;width:32px;height:32px;border-radius:16px;margin:0 11px 0 0;position:relative;top:2px;left:0px;transition:left 1s,width 1s, height 0.5s}#lpChat .lp_chat_line_wrapper.agent_avatar_display .agent_avatar.hidden{left:-44px;width:0px;height:0px}#lpChat .lp_chat_line_wrapper.agent_avatar_display.lp_agent .lp_chat_arrow_border{left:48px}#lpChat .lp_chat_line_wrapper.agent_avatar_display.lp_agent .lp_chat_arrow{left:49px}#lpChat .lp_chat_line_wrapper.agent_avatar_display .lp_rich_content_line{width:calc(100% - 50px)}#lpChat .lp_chat_line_wrapper.agent_avatar_display .lp_rich_content_line.stretch{-webkit-transition-property:width;-webkit-transition-duration:.5s;-webkit-transition-delay:0.3s;-moz-transition-property:width;-moz-transition-duration:.5s;-moz-transition-delay:0.3s;-o-transition-property:width;-o-transition-duration:.5s;-o-transition-delay:0.3s;transition-property:width;transition-duration:.5s;transition-delay:0.3s;width:calc(100% - 20px)}#lpChat .lp_chat_line_wrapper .lp_time{text-align:left;position:relative;font-size:.8em;color:#6d6e70;top:0;padding:3px}#lpChat .lp_chat_line_wrapper .lp_time .lp_sender{vertical-align:text-top;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100px;display:inline-block;color:inherit;font-style:inherit;font-family:inherit;font-weight:inherit}#lpChat .lp_chat_line_wrapper .lp_chat_line_auto_message{text-align:center;font-size:0.9em;padding:4px 0 6px}#lpChat .lp_chat_line_wrapper .lp_chat_line_auto_message.lp_underline{border-bottom:groove 2px;margin:0.5em 0}#lpChat .lp_chat_line_wrapper .lp_chat_line{padding:10px;max-width:70%;display:inline-block;position:relative;top:2px;text-align:left;word-wrap:break-word}#lpChat .lp_chat_line_wrapper .lp_chat_line .lp_title_text{color:#525252;font-size:1em;padding-left:3px;padding-right:3px;line-height:16px}#lpChat .lp_chat_line_wrapper .lp_chat_line .lp_title_text *{color:inherit;line-height:inherit;font-size:inherit;font-weight:inherit;direction:inherit;letter-spacing:inherit;overflow:inherit;text-align:inherit;white-space:inherit;word-spacing:inherit;z-index:inherit;text-indent:inherit;text-transform:inherit;background:inherit}#lpChat .lp_chat_line_wrapper .lp_chat_line .lp_title_text a{text-decoration:underline}#lpChat .lp_chat_line_wrapper .lp_chat_line .lp_title_text [data-lp-point=cb-offer] button{cursor:pointer}#lpChat .lp_chat_line_wrapper .lp_chat_line .lp_title_text [data-lp-point=cb-offer].lp_disable_offer{opacity:0.4}#lpChat .lp_chat_line_wrapper .lp_chat_line .lp_title_text [data-lp-point=cb-offer].lp_disable_offer button{cursor:default}#lpChat .lp_chat_line_wrapper .lp_rich_content_line{display:inline-block;position:relative}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock{position:relative}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout,#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock.lp-json-pollock-single-element{border:1px solid #d4d4d5;border-collapse:collapse;max-width:200px;background:#fff}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout{width:100%}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-vertical>.lp-json-pollock-layout{border:none;border-top:1px solid #d4d4d5}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-vertical>.lp-json-pollock-element-button,#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-vertical>.lp-json-pollock-element-image,#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-vertical>.lp-json-pollock-element-map,#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-vertical>.lp-json-pollock-element-text{border-top:1px solid #d4d4d5}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-vertical .lp-json-pollock-element-text+.lp-json-pollock-element-text,#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-vertical>:first-child{border-top:none}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-horizontal{display:table}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-horizontal>.lp-json-pollock-layout{border:none;border-left:1px solid #d4d4d5}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-horizontal>.lp-json-pollock-element-button,#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-horizontal>.lp-json-pollock-element-image,#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-horizontal>.lp-json-pollock-element-map,#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-horizontal>.lp-json-pollock-element-text{border-left:1px solid #d4d4d5}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-horizontal>*{display:table-cell;table-layout:fixed;vertical-align:middle}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-horizontal>:first-child{border-left:none}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-carousel-wrapper{overflow:hidden;position:relative}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-carousel-wrapper:hover .lp-json-pollock-layout-carousel-arrow{opacity:1}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-carousel-wrapper>.lp-json-pollock-layout-carousel-arrow{opacity:.5;z-index:1;right:0;cursor:pointer;background-repeat:no-repeat;background-position:50%;background-size:cover;position:absolute;width:40px;height:40px;top:calc(50% - 20px);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAACXBIWXMAAAsSAAALEgHS3X78AAADoUlEQVRYhc2XMWgbZxTH/9+TdNIhH1jRJXQwOOgypJMNGVro4sVLhpDSBhooJoUW2tChLVmauUvB4K0NNFDHlHhIIKFrl5QO7RJQtgz+TjYttJEtWeJ0lU66e6+DrUbn2PHprND+x+++977fve/73veeEhH818qmMdLaXQCwcMinFoBHjlOpjuNPJY2E1u4CEX3KzO8AQDab5VwuS6NzgqDPzExKqa5S6g4zf+04lc0TQ2jtziulbonIG6ZZgGVZKBaLIKJD54dhCN/30Wq1OQxDIqJbzPyl41RaqSC0dq8B+N4wDNh2GaZpHvdTMXmeh52dhohIV0TeOmqbjoRw3dpdEblaKpVw6lRprMVHxcyo17fh+z4AfOA4ldVEELXa5rfM/PGZM6dhWVZqgFHV69vwPA8A3nacysOXQmjtXgbwYJIAoyCdTqcnIq+PHtjY6dLanVZKrVuWNXEAALDtMnK5XIGI7o+OxyCUUt8opfK2XZ44AAAQEWy7DGa+sB/xOITW7rSIXLXtsjrq+g211ejhxyc7qUBM04RlWSCi5RcgAFwjIi4Wi4mcfbj2FGu//ZUKxLKmwMyO1u58DIKI3i8Wi3RcFABgtlzAT5/P48a9jVQgpmkim80ygMsxCGa+YJqFxI7mZqZOCkKZTOY5hNbuWQAwjPxYjk4Cks8bEJEZ4Pkrenb4YVwNQRZX9jLy0puvJbIzDAPMXAYOXNG0mpuZwvKVc/ho7Sm2Gr2x7ScC8eSPDm7c28B3S+cxW05+rg5CbAJAEPRTASyuVLF85VzirQCAfr8PImoAAEQEIoKNDS2dTkfGUfV3T05/8Yvc+fXPsexERJ49q0uttlkVkVieeOz7f7/yCAzV7XY5iqKHQDxP/OD7PidxsNXonQggCPoIw5AAxCEArDIz7b/5x+r20vlUAADQbrdBRHpYaf0L4TiVllJqvdncZeaXB2S2XMClOTsVQBD04XkemPmr4VjsiorI9SiK+s3mbqoFkqher4OIHo+WeTEIx6m0ROSTdruNpNsyHsA2BoNBwMzvjo6/kKwcp7KqlFofqQknBuB5HkTkvYO9yP+32h5Ka/czACumWUCpVErVdzSbuxxFUSAiFx2n8uiweYk6MCK6Paw3xujAEIYhlFLrInI9dQd2AGaBiG4y8yKw9xRnMgTDyIOZEYYDDAYhh2FISqkegAcicnMiveghMNMA5rHfle9XR7tRFP2Mva68elTYJwbxKvQPW8lWJZlhMzkAAAAASUVORK5CYII=)}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-carousel-wrapper>.lp-json-pollock-layout-carousel-arrow.left{visibility:hidden;left:0;-ms-transform:rotate(180deg);transform:rotate(180deg)}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-carousel-wrapper>.lp-json-pollock-layout-carousel-arrow:active{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAACXBIWXMAAAsSAAALEgHS3X78AAACGklEQVRYhcWXP0sjQRiHHyUIh5AoB2lSGHYshCsu9wncYGOnNtea+wa5LmiT5sBy7xOYtDZeaXMYP4FaCBbO4hVpAhI3cAheIBY72dvsbmT2n/6akM07+z4z75vfzCxMJhPeW4Ukg6S0TcCM+OkR6AlhXMV534LuSqjEDWBfI9wBOoAlhHGfGkJKuwZYwKZG8ij9BNpCGI+JIKS0G8BxwuR+OYA5r0yLrwB0MgIAKAGXalJ6EFLaFnq1j6tjKe3d4MNQOVTQaQ4AUzlAzd+wMyshpb2C29V5qhTMESyHpYLy1qa/LB6EWgWtPuiPxvy+e0oL0g5B4BqRtg7OHji9+ZsG4rPyoBmIUNfOU6VYoPu1zNH5MC3IbhAiliNulJeyADE9CCntapI3ZABS9SCmX94BZM0PkUob5SVa9VUOzx7oj8axx2cCcTt45uh8yI/tj1SK8Y8oU4j7NAD7JwNa9VX2Pi3HHf7Hg9A5eOQAAGry/nJcvDEAQC8I8Ut3ZH80zgLAy+lt5WrvGOpC3A7+sbX+IQ3AtRDGrG2rM2BXZ3SlWEgLAO6OzQyEUhP30JG3LoQwOpEQajWaOQM4BHbskFkpQq2yJFQjaAmRjimE0cgJ5JsQRuhfONe2Fcj3jJI7QN3fB1oQCsQCvhDTyALqAlUhjN68gLh30SawoxHu4BpRO5O7aATMClDj/63cxL2NX00/X5t1JhB56AUIMNlUILK0SAAAAABJRU5ErkJggg==)}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-carousel-wrapper>.lp-json-pollock-layout-carousel-arrow:hover{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAACXBIWXMAAAsSAAALEgHS3X78AAADTUlEQVRYhcWXsWslVRSHv3NnJjNbCA9sAhqIbyyUbSIpLGzSCGGriEFcsdh0uliondssCzaCaKdbCFGQDchCUqZc/4DFbRZs7hiIC2lkHwg7M2/m3WOxM2Hey3vJm8lTf+Wde+d+c+bec85PVJX/W36XRdYmG8DGlEcD4EEc9x+1eZ/MGwlrkw0R+URV3wUwRpyIMc05zjmnqgZIReQnVf0qjvtHl4awNlkTkbuq+qbneSwtBfi+j4hMne+coyxLhsOhc05NtfaLOO4POkFYm9wAdj3PEIYRvu9d9FFjKoqCLMtVVVPgrVm/aSaEtck94HoYLhGGYavNm1JV0jSjLEuAnTju/zgXRJL88b2qfnTlSkQQBJ0BmkrTjKIoAN6J4/7BuRDWJlvA/iIBJkAy4PXmgR073dYmPWAvCIKFAwBEUYjnmUhE7jfHzcS870QkjKLuZ+A8iQhhGKGq61XExyGqKFyPolBmXb9ax4OCw9//7gTi+x5BECAiX5+BAG6IiPP9+ZLoZ/tP+OW3mVf/XAVBgKrG1iZrYxAi8qHv++aiKACs9ALu76xy+/CkE4jvexgjDtgag1DV9TbJ6OpydCkQz/ONiGxBVcCsTVYBjGmXEWuQ7d0jAN57o9cCwlCWvHwKAazWD9qqK4gxHqr6Ipy9op10dTnizuYynx884XhQtF6/EIjHJxm3D0/4ZuslVnrtk1wNcQQwGrlOANu7R9zZXG51JpwbISJ/nULUeVy1HURXADj94D9PIQBE5GFRlP8JwHOI0qnqwRiEqv5cluVcoTgeFJcEcDinBjiARimvasfTeUr48aDg8UnG5msvtAYA6ibH9vuvvAqNSFQ94F6e5+6ivnOlF3QGGI0cRVGgql/WY5NX9KZzOszzYacN5lGWpYjIw2abNwZRRePj4XBYt2ILVZpmjEYuV9Xt5viZZFUR7jV6woUBVO97f9KLTM2Ycdz/oAbJ8/xSm6sqz56lNcDOZJMLF/uOT4FvPc8jDMNOviPPc+ec5sC1OO4/mDZvXgf2g6qut3NgBc45gD3gZmcHNgGzISK3VPVtqMu+4HkeqopzDlXnqiSUAfvArYV40SkwPWCNypVX3dFTVf2V56780aywLwzi39A/dO7LSuHpXdoAAAAASUVORK5CYII=)}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-carousel-wrapper .lp-json-pollock-layout-carousel{left:0;transition:left .5s;-webkit-transition:left .5s;-moz-transition:left .5s;-ms-transition:left .5s;-o-transition:left .5s;white-space:nowrap;position:relative}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-carousel-wrapper .lp-json-pollock-layout-carousel>.lp-json-pollock-layout{border:1px solid #d4d4d5;display:inline-block;width:180px}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-layout-carousel-wrapper .lp-json-pollock-element-text{white-space:normal}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-element-text{padding:5px 10px;color:#000;font-size:13px;word-wrap:break-word;word-break:break-word}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-element-button{width:100%;word-break:break-word;word-wrap:break-word}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-element-button button{border:none;background:none;width:100%;min-height:32px;margin-bottom:-1px;text-align:center;color:#0363ad;padding:10px}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-element-button button:active{background:#f0f0f0}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-element-image.loading{background-image:url("data:image/gif;base64,R0lGODlhFAAUAPfdAJiZmpeYmdvb29fX2Jucnby9vvT09NjY2Jmam6Chos/Q0Kmqq6KjpKytrqGio62ur7y8vb2+v/f39/X19dzc3M/P0Jydnvb29u/v76usrd7e3p2en56foK6vsKipqrW2t83OztnZ2tjZ2e7u7v39/ePj47u8vfj4+NHR0rO0tfPz89ra2tzd3c7Oz+Dg4M7Pz93d3b6/wOfn572+vqeoqc3NztjY2dDQ0dHS0rS1tp+goa2trvv7+729vtrb2+fn6K2urvDw8K+wsfr6+rOztL6/v9na2q6vr5qbnLW1tuHh4be4uczNzbGys7S0taOkpb6+v9DR0bu8vKqrq9LS0+rq6uvr6/n5+dPT087P0NDR0vLz87i5usLCw9fY2Ly9vdXW1tPT1JiZmf7+/rKztO3t7dzc3ezs7NLT06qrrNnZ2eLi4svMzNTV1cTExcvLzPz8/Nra2/P09MTFxd/g4N7f39/f36anqL/AwKurrMHBwqysraytrfLy8tTU1fb29+rq68DBwbq7vL/Awebm58XFxt/f4N3e3rKzs9XV1rm6u8zMzdvb3JWWlrm6urS1tcDAwaenqPn5+tvc3NbX17a3uKOjpJydnbu7vOrr6+7v7/f3+M/Pz7Gxsra2t7e3uPDx8fT19cDBwtHR0by+v/Hx8eTk5NTU1MHCwuXl5re4uNvc3dfX17m5usnKyra4udDQ0Kipqc/Q0aWmp8vMzeHh4srLy7Cys/r7+6usrLCxsu3t7sfIycrKy+Lj47CxscbGxufo6PX29rW2tsnJyeDh4fHy8r+/wMTExMPExJaXmOzt7bm7u7q7u8nJysTGxubm5unp6tHS08nLy83NzcjKyuPk5Kanp/v8/Ovs7OLi46WlptbW1////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjNGY0NDNmZC0yZWQwLTQzYWItYjc4Ny04M2VmMjFlZGE2MDMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUQ5MUYzN0VDNTNBMTFFNjgzN0Y4NDM1QkFDMEVFODIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUQ5MUYzN0RDNTNBMTFFNjgzN0Y4NDM1QkFDMEVFODIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpjNGY0NDNmZC0yZWQwLTQzYWItYjc4Ny04M2VmMjFlZGE2MDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6YzRmNDQzZmQtMmVkMC00M2FiLWI3ODctODNlZjIxZWRhNjAzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkECQAA3QAsAAAAABQAFAAACNsAuwkUaKBFCksIADggwmTLwIfdLlR44ACAxYsOGoCYALFEhA4BABRQcEBElAgAAjyA4GLgiAgLCECgJMCAwAsUREQg4EFKGYEtGlhYQAHiQEMNNjRg0s3AgwAFBBh9SCdGgAyhQFQcMBViCAAJDCKI2vWhnUEImlgCoIBjWYFXogBAkvDA24eEHqSoe3egFUeF1rbt+3AvWcICtQLgirjp08OIgw4tOtWUhp8uYcqkabObBBgiIJHC0vFjyJEH1KAokpJGG6MSKV7EqHFE1xOjkjxJmCAFpwsQAwIAIfkECQAA3QAsAAAAABQAFAAACOkAuwkUqKJCCgYAANBosYXEwIfdLrzYgTBhQg4LxByA2M3FjA4BAECocMCGAhMAEnwI5OKhngUEIAxYYUDgBAEDehDwAAGDQC8fLCygwFGghj0bgIDoRqJRggICig6kUyRAA2FbFgAYIPWhiJQtXmwwEbWr0RgIiNwBcGOCWYEncADgkNDG24ECLALYeLebj4QOACio+ZYHCgBPUiCAencCDgcvKiDkehcUIx4qHgRgXPiCQAVAhBLt2w1DBA8xB1DwHNFK1xJdPiQAYOJGiBBa3vhyK3WAmAUb9BKY4drsHwWzLn5acwJiQAAh+QQJAADdACwAAAAAFAAUAAAI4AC7CRRoQMGjBAAAJPiARdLAhwJ97GCQsCICBkd+QBTYhkgAAAUqHDhQoQCAAEsGQAyRgwCEAQIMCFQhYEABAk7ADJThhMAUHxsFwshDQIiZbpIaBJgBI+hADVAC5DqBhaJKpwNtAHCgIAeCAgKwDmQRAcFBAApkiu0mAQcADgkPrB0YpyIAuXO7rUjoAK1asSeovPUKdq6dQQgQKbA6N8RWNKEyBCiMdZmbAA2GdJskhEAaDVgnyOpCaGCinhFEsLgQ9FQYiAOWfIygRUmqvD+OUASgrEbebiTCEIH7AmtAACH5BAkAAN0ALAAAAAAUABQAAAjzALsJFDgEkCIdAAA4SFFBxcCHAn9c8oAgoUUGDUAYgBjkDaYEAAooOHAgCwQAATrMwTAQg5sGBCAMELCxm4oVAyAQeFBjIAg+BBaYgTiQwhQCXGTYzBCggACiD1l8SWABTgUHAAZAhTgAgAcMKRAUWLH1IYUeSARhVVCzbDcJUQAgBHDA7UMjFunaHYgXAMgbE/ZKwOFXEZIeT+1qiIGADCAPWfeG8NtiiIUEMzS4VYInQAZh3WRwIZChzlYKiCzksTWwRQcCEULsgohBlY4MXawMDFLoQQAAjII8vLCkgCuWDw3UaPCkl9KHN0aU/aPmwt6AACH5BAkAAN0ALAAAAAAUABQAAAjzALsJFMijCooMAAA4IPNCzsCH3QzU6ECDQ8KLDh68mACxxIwHAQAIynLgQIUCAAJ0iFBiIAYoCwhAGCDAgEADAgZAILAgwgiBFYBYWEAB4kAKCyw0ANFNDsgCAow+FFAgwJExChgAGCAV4gAANDTlQAC161QTHPxoVWDTrMAJChDwSXjA7UMRFwHUtStQTUKECi7wlYBC4Y0NBVjwZREBQYoqkQCI4IvXQQUeIItocOviWIAMErqBaLDhQ5WuSnZsAFJD4IgeQkycMarBSAwLOiphGFhCyK8gD1UEi5DyThhofDU82xCpw5wTfLuVsnbjJ8SAACH5BAkAAN0ALAAAAAAUABQAAAjsALsJFCjnBRkHAABkQFGFx8CH3Sa8eIAwYUIONDrUMACxRIQOAQAUqHDgQBZBAAI8mFFi4IgICwhAGCCAYzcDAgZAILAACgaBIBpYWEAB4kAKCywAqdCNx5EABQQYfSiggMoTmWgAGDAV4gAADNDg4GBCateBVRF8SINAwYSzAw0oAPAkoRq4Dw9YBGAE70AbCXUAQCHB7wQFCHaQQYDHLFwBJjiEYZMgQzO/X2loMvZKFDG8GqCoHEMCC6wycF3s2QCkhV8JdUQUIeDhy8+uxWr5kIYn5QMpLuByCZkwQQMmNs+KukikxduHAQEAIfkECQAA3QAsAAAAABQAFAAACO8AuwkUqKJCCgcAAOhQBGjIwIfdDIBowCChRQQeLv2A2A3DnA4BAEDIcuCAggIAEmB6E+RhjQcEIAxYoUKgAQEDIBBo4AaDQBlcCEyhwFGgmQUE+IDoNsRCgi8sig4UUCBABgmAPADwIvXhAAAOqCxBEiFqV4ErCiBIwgEADglnbSoAUBFAiLgDD1gMYBavXgBEmgzA223CjZTZZPjEK6AHEimEB371MCJyNxgFEliAE9lQBgKtZEC8UgLZIbjdJMAQEYHAAyYcf6zqoAeFjzgoigAI8CDZGY5rmN2xaNFBAxAGuo7wtCEhhxQvLkAMCAAh+QQJAADdACwAAAAAFAAUAAAI5QC7CRQoCcuHBAAAJHikwMDAhwJ/HGGAIKFFBjt8QBToZUkAAAUqHDhQoQCAAETaQASTg0CBAQJUCDQgYAAEAjlCDKQghEAeGBsF+phCwImMbgbSBICiIehAGDMCNMC1CKEIpw8HAGAARgiAHk2xChRQAMGHareUDBE7U4FCM8CqsB14IOFciHUB3B1owK2DvWPLfgDcTSsDNANJrMVKNkCGKwKd8fKkxOkhokImDWRViUAMIxokCLzAwkaPookghiHzMQaOFUa0RDi5ZEDQEDsQWkzI4MgPrJtaNNGRUEcSPyQgBgQAIfkECQAA3QAsAAAAABQAFAAACPEAuwkUSGJLCxoAADBIUUHFwIcCB4hZwCGhRQY7XlyAuAbVhwQATCiwcaACBAABOsxwMfDMFw8EItgQMEGggRUDIBBYoGcgrQYE9tSBOJDCAgsfvAgc1iAQHaIPBRRI0EhgEDtloEIcAGCBhG4kTvDQGtXEBhxkoU64AYBGWqg2Er4lekCuBDhzuxlQoHDMmmgO30pFkOREGiRx5nJlQGVMhgAxWJKVGuDB1xVNNuxQotWoBSAKCEKCGUMEjI3dLlDIScBDBAwDNUh5EABAES0hQtwwASDBhy4lIBpg0gCkRQAbFogZQPbPCyLGryn4QzQgACH5BAkAAN0ALAAAAAAUABQAAAjcALsJFNiHCZkEABBYStHCwMCH3UaAaOAAgMWLDh5UuACxWxsaAQAUQaHmgIICAAJ0iFACIhZSkETAkCDQgABKEAgsiDDiYRkNpjoKpLDAQoMWQpN2E1AgwIMTSoUOAOAgStSOTBHkuApxggIATwo5ssJV4IGEKR4QKtvtLAIkAKJc4eoVrC4Eg+xwzZqDDcIQXKdWBZUhQAw6UZk6PUGCSYMNDQwlJWoUabcyUjwQiCCCAsduNnHq5DnQBYQHISNEEWESpUqWXSdWvGgx48akfzjlYJDwSZJRUB8GBAAh+QQJAADdACwAAAAAFAAUAAAI6QC7CRQowcWHDQAAbKvRh8TAhwOtzCCQMOGGBWIGQHw4wdcbLSFC3DABIMGHLiU2Rrwg8AKFARAIeIiAQaVNCgssAFHQkofNhwIKBHggYQgjUD8fDgDAgMoiBzgmJBUYFEGSJwBQ+JxqQAHThD6mDjxQEYAAsQJtJOQAAMcJsRNuAKDRBEEMDWIFmNiAg00CACLELl0gwViDAEXoJA2aoFE3EiCAbNiDVyVOCx+8CMQAwQOBHgMESO1mYAVMAgv0PHQR6MNfEwpsHKgAAUCADjNcbDwgZgHbsgx2vGBpUwKKWAkZJKEiAWJAACH5BAkAAN0ALAAAAAAUABQAAAjkALsJHDjwBYANTaJcIciQYQ1lAAAwOPKjocVUSrREABBgyQCGYU5ZvMBCRAQCThINJNRF1gSLAjWkISBkUrcrDQK4WQZToIACATJcUeAAQIieAwdIRNMJwSA7SH0WQPCBAwAqJ6J2M6AAQFEAK7QKPBAxYhyx3cgCsIpDglauABIQQRCBhdafVKkVtaFVKQMwBnIFgKIBKYwZARrg6mZGCIE8MGD6mIJSxkAwTggUGCBAhUADAgZAIJDjKMEBSwIAKFDhwIEKBTgSaWPxxxEGCMpGZLDDR88xYD4liOjgA5qsBAMCACH5BAkAAN0ALAAAAAAUABQAAAj5ALsJHEiwGwk53LaQKDhwxI2CMno9aVDDQEEMrgosuUAwCCMAAR4UCjLQSpcMOlRhKLgrRAQCHVoMtJXHAiIKDAXWyUCAi4xufTIEwKMk50ANMxJYgMMmAYAQRgkOAOBhRCcEMTREHSigBxIpOgDgkLBV4IQbAJwCMFJ24AEAcNe2FfgWAAcAUciWNaAAAANHSHrgLLuiAIIkVjwAGNB2qgMqPCwk+MJiq4ACATKQlcGFwJTBDM0sIMAHxMAaDwhAGLBChUADAgZAINDAzUqBGOZ0CAAAQpYDBxQUSIvpDUmCBkA0YBAXLgIPl35ElUAliQO4OqSMYBgQACH5BAkAAN0ALAAAAAAUABQAAAj4ALsJFMijSg1tQQYqXNjtxJwOkTY808CQIbQwdwIAiBBMhcIgv4SUGIihkg4LMYxQXHjGhJAeIwTWALJhh5KK3ap82NAARLctGQIcc4FToIYiAR6MYeIAgIiiA0UAiDQCEYIILKAKZFFgA5YEAFBI0NrtggIADQAAUENW4AG1ap+2fQsgAwIFE8gaOPsEBQcTAsgKKIDgQyYaAAaQHQCAARoeRwIUCFx0cNIT3UA0sLCAAk4KCywAqSBwRIQFBCAMEGBAoAEBAyAQWAAFw8ASETpoLFDhwIEsggAknTFS4YQXD5rCBcCBRocarStuQpGCgdoGfmIuDAgAIfkECQAA3QAsAAAAABQAFAAACO4AuwnsRqIUmyYbAAAINLBhQwNMGiRQCCAAF4cOXUh5EAAAHmk+ahXDOBDDFw8EioioI4GkwxZANuxx4VJgGVhYumHjCEVDTYHERL2akIkGgAE/BTbLkKBFFA4mBCTtJgAPgkcZECiYMFUCCgA6FNqYKtAIRQAHyHZTo5ABAAUGpk5QgCBDDgQFpCYVYIKDHwVukSYdAICGJjkc8/4UUCDAkTHdKgCxsICCSwoLLDQAIRADlAUEIAwQELebAQEDIBBYEGHEwBIzOAIQlOXAgQoFKnaIUMKhgRodaHA4C8DBgxdcXY7w06BtChSbHAYEACH5BAkAAN0ALAAAAAAUABQAAAjtALsJFNhnERkOAABsSFJlyMCH3QyAaOAgoUUAd5itgdjtTLIHAQAUQRHHBwo9HVb94MjkAYEIImBIECjhELISVyDKaEUggyGOQLsNsZCgAIygQAF5ADAAKVBFSHoIcDoQg4wzCQDcmEBV4IAmRBIe6CqQRUixZLuFSFhRgYGuEnAA4JACQYEVXVlEQOKoQsWmVL0A8IBBRYYABaYiZfElgQU43UDwIbDATFAKUwhwkSEQg5sGBCAMEPC2m4oVAyAQeFDjYZA3mLIWUHDgQBYIAAJ0mIOB449LHhBcBMCgAYjSQEdI0cE2CZWZDwMCACH5BAkAAN0ALAAAAAAUABQAAAjgALsJFHgFRQoOAADo0MVGzsCHAn8cYZCwIoAEO0JAFDhgSQAAEbQYWYEjBoAAZMJATOSEQA8bLC4IlKDBSAwClVgNnCSEwJRDGwUq8cTLmcBQGQIUEBB04BASAxVQHNC0aQ4ES6sGdQBAgQGtGxMeABsWwFiy3aoAg5Gg61ewQ5TcmnY1K1gNPQB0wjKVrIiLnCQ1CDADhlYNUAKkOdFNRsspPprCyENACIWBIXIQgDBAwFsVAgYUIJADDMQ2RD4WqHDgQIUCJ5d4CepjB0WLCBgc+VH1BJoPXC9+AjMGYkAAIfkEBQAA3QAsAAAAABQAFAAACPUAuwkUSKIPiFkAACRosmjLwIcCB4hZsCGhxQQNmBiAWKLLhwQATNwIEUJLEQABHkjRMBBDBA8EIAygcEHgBRgiYhDwAImEQAVALCygAHGgkh0bmqzopuJBgAICij50ESNAhm4VGAAYIBViHCRpSKRAALXrQxXR1nRzAEDBRrMD4UjolvAAXKkJbdwtegfAjQl7H77YYCLqXR4nfG5ZsHVvGTtBupFolKCsWTqBGgwT6OWDUKJS6+wh0IDWQD0LYg5Y8XaCABsRdn45M9DFjA4BAECocMCGAhMKP6BS+/DCix1aLQLgsEAM164SqCRJHgvFXIgBAQA7");background-repeat:no-repeat;background-position:50%;height:154px}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-element-image.error{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAgCAYAAABpRpp6AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH4QUYCiwdGyEQJgAAA/BJREFUWMPNmL+LXFUUxz8zbCESdQUrC9lGxSpj/AO819qESSdJxCGNjcHNriCisBOCTTRhgpIihU4kbkRQHo7Yybm7EruQQbQJiMMKi4XimAjaafN98nJz78ybyU7wNI99c++73/M93/PjboM9NrPQAtrA2HvX2+vvL+0BwGUBdHo+BPwBrLAAW7pLFtvAfmALKIC+nh3v3XgRgBtzsjgGgsCFEpxZKAC8d20WZEtTWHRAJ2Kx570bJtaXDq3MGK0O8GGNpeeBbiNi0VWYJMXihAiMJIViBrA9EeJSJFTWrQjHsFHxsqdD+wI4nOHgmaQgB/uKRtt7N6q55/eG0P8EeO9dmCMB2+XhdRJNBwflQXuW5DQLwyWF5NKcYEumOjXBtkqZee86c+TcuEy6eUtQVw2iqJlcPWDVe9dP/N4FVlXHt7TuDlk2gWElyWa1HrBsFvpTwK5qbScDtldJ9ofLRJdcbwcsdvYrvDOZksUBbYHKmZMMikwFeLWsFN67sqUXYvwOhlEI5ir2CpsDugp7ylaBl1KMqVJsJXKgD7RygMNdyKIKupcCrUiclyxiGwHPJiLckVyTgIscYLOwkmEmBTpMiFQXcGbBZZz5T7OSVzvlYLNy2HIG2CfAd2bhdI16XLbylENjAehmnAnA0Cz8U+l+o+zwo24VqjOsWTgKvKMPrgP3Ay/GNVuODqe1ZtXh68DTs3TSyv7QrPx9myykqTPAWeAacAT4FBiYhc1Ic32gPwVsRyyenAdsaloLkWbeAH7R+9I2gYEY3zELa8C+ciaoMeS05+mo2XnYLIz04ZHmi0PAbmbvM8DbwCO5ECsKBbAcDzlm4ThwGDhRZ/hJSaJa3jaBixPAIpmMgTMZsC1gB7gZJ5DA9oBbSui1ugzHgAvgBYX4ypS968Df3rvXE2CPA9vAt/FQXwH7svLjNWDdLHxZp9umGH4SuCDvmSCH54GDCbCnBegU8CZwDtg2C60I7I1KpI4qF3biOj3xiuS9G5uFH4C/Jux5ANjQNDWK9HoZeDwCNNBzW8/qb6XdUsQOAl+YhUveuxN173QmBsOEjnXde/dBpNfLwK8CFEdnoHe7CbDxumvAu2bhe+BYnB/NxKbPgAMTpq4DwLGow20DV8VSTkphCtjSdlXzr0pKa1Ov+WqPcUl7FPgYOFTWUrNwCjgpnQ4WcKt/Qon5o+QyzF3zv5IsqoA3gI+8d0F6fR94LqPJvbIbYnsd+BnY18ws/FqASzsC3Ae8pbnhG+ApvV8U2GpCXgR+A67kGP5coSjb8Zq62Vij34PAY0rQe2E39c+WbmNCG3wPeAX4Ezjnvdvg/25mwU25q91z+xfs9+kVfxd53AAAAABJRU5ErkJggg==");background-repeat:no-repeat;background-position:50%;height:154px}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-element-image img{display:block;width:100%;height:auto}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .lp-json-pollock-element-map{background-repeat:no-repeat;background-position:50%;background-size:cover;height:154px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAB7CAYAAADzNovBAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH4QceDzYJ6Lbw1wAAIABJREFUeNrtvVmsbVl3FvbNuebqdr9Pc7uq+/+/sS3iYMWmEwGDDKKxkIAQGRIrIaKxpfjBio0U8hgpEYgHK5FiCSMBAmHRPICJIoGAJwIBAhZBIIhC5ID9/+WqW/e0u9+rm3PkYa0xz9xrr92efc+pKrGkU3Waffdea84xR/ONb4whfu6XfoYIhLa6wC+//K0Y3U0xnU4hhMCxlzEGb968ge/7+OY3vwkAuLi4QK/XwyeffILhcIhOpwMiWvl3Qgh8+umnyLIMvu/j5cuX8JUCgdY+o+nuiP9LfB8FdJ5D6/KLihyFLmB0Dl3kAGmADAADQQYgAgQgBAEQkMIAEBAQkJIQhgGkVDjlRUSYzReIhr8Mre4Zrq6uEMcx2p0ORjfvUSxHAAhB1MLw5Tdwf/VNZMt5/U0QdYfoDV/i7v03UWRLu0JCSMT9FyCjMZ2MkJOPp7o8z8Pbt29xfX2N+Xze+BrFWyelByEEjDEn+XBjDIQQEEKAiOD7PogIxhiEYYDb8QLZYgKW8ziO0e/30ev1MJlMEEURlFKYjq5QJBMoX0JUQiqlgBQCEBIC1f2ShjEaRhcwJofRGjAaUhAACSlLsfUEICVBBBKo7g/CA4SCEHKDaD8Iy4e4hBCgar3Kz6m+95QrYwAAKT00nUajC0DI8u/08BhEBCIq9wKEp7x4v2W5+FsEkABPKiuAj9F+fGmtHxaXCEop5HkOKSV8P8BksQQliV2UNE0hhECv10On0wEALBczLKf3QDFFW/kglAIitAAa7lECkFIA0odQPiBEuXHCqseNevNhk592k4QApHPweb0EUB2M6pYqCSwPyboEGp2XQra22QSAIKQCYHYtxskvYww8z9shgAA8hBCQVnAefaLtgglIKSGEQJZl9mZmmUAbwsoREeH+/h6z2QztdhvdXg+z6RiGCFIGlbba3/yRqzaeVqaOWC8Cka40nLS3LSCqY6W3KeZyo4vCakha0eOEIl1CSAFZOTPiCZ9Na233v8mC2OPiSXUyAXTNlVIKZ2dnVgNGUQRdFGjLReVrrf6bLMswnU4hhYDn+aX0CK80MU+6dE93SSlBWgNEEOLBfSnlb1V70AYXichs0JACeTIt3Z0vqgkmkHWuH+MDss/nLuzr16/tDeR5jjiOMUoltDbwt9x4nufwgxDFotQC9EVXY8evGgQEyOQgEIIgtCpbQABSATrbS+MboyE8tePTnnYdtdbwPG+jBlQPqlA9WCzXcXVMqJRy5Xv3d1JKeJ5X+Xi+DTrm8zmICL1eD3meY9DvI0mqCFTsEEDfRyIEiAyMAbyndV+eTgSlBzIFyBh0ux2wDhCi8gOduJ+wWUFQpW22ufACBHpCS6K1RhAEu31A13drtVpotVpQSq0IIQudq+lYzWqtobWGEAK+71ttOh6PEUURAKAoCvhBgHw6gzEEeJsd1zzP0W63y10ggEjgKyp/5SOa0odbLJZI0xSDwaC0HMIrgwj2lbcYKKOLygTLjSv1lALomuBNga3is1WYBEQGr1+/tgKTZZkVBhYwrTWKooDW2mrKut8XxzG63S7iOMabN2/s65RSMATMU4LcsQZ5nsNTygqdoa+qCX7w4djq8HpLKUsTvCJBtNEGG1NAeh6EFCBDGwOepzzFrgnerAGFQKpn0FQGCaPRCOPxeM0f3BeeyfMck8kENzc3ODs7Q7vdtgGIIUJACxiptwYVWuvSB/dDmLSA+QrLnxCiAsUJUopKc+jSAkGAnECENvroBKM1POVjG+L31D7gLlhPutpLCIHRaITb29sVH7AeXOy6iqKA7/soigI3NzdIkgRZliEMQxSaMEl3GwFjDIwhyCqqIxJfXQEEgUwBQwaep0BEKIpSAEvR8vbbbJ1DegpbncBnEMBtyot3F93gEp4IMJlMtgKHh4KPSin4vo/lcokoipDnBaTOd/ohRFR6K5UJeg6Q+Cl9QCEEjC7gedIKnud5iKIQcbuPsNXdY901hJBblcVTH2N2vzbJlCoxwBCt4AxZmp0sFWc/QCl4nmd9gSxbIPR2Y3pEBDJkkX2CBBntRIVfMSimEkAhJM7Ozix01ev1APT2coN0UZTrJeQOGObpwjkORLYKYOC10Q7OsJgsTn4Dvu+vhOJ30wK+3O/GAQLJBzNU5ki9r6AGFJCCoIsS75vP59C6zG2XG0jQWuPVq1eQW6wTmcLm9LeZ4KfMhhhjdmvA0Gsj8Dq4WX520uhHKYUgCKz/RwSgWOz99IRVZN/mSL96QGCZAakA5yzLkOf5GtQFAFL6WwSwEq6tJvh4zRcEAYIgsDFBlmVYLpdbP4/vnd2KNR9QQKIbvoQuzMnScCz5UkqEYYgsyxAEPhZpDtJ54/ljX4G/jDEVQ0RaYfyqIjGi3Igq3Yg1bcH4rDEGYpsGJFMxhuTWzzpWCJVSCMMQvu9DKbU1xba3CRZCoh+9wTJZntT/Y7XLoLSUErP5AoFnbETL+JCbWbEmiYFvqSqKH5VR4lcRAwQHIUxIEFuCO3+rcSUyDYyY1VdJYWBIHryfddx3H2SkRDM2a0AlhUTLP8Pt5PZkVCz3FLMmlNKDTmeAkOj3euj1emvwTv2zLZ8QAoDCPMnRQQblB185IZTyIRvSyPkDSljKU5uDCCKQ0dVrdon8cUplDb/cUwNuSsepb/S/D2RK7O5UwgcArVarwrMKq6qzLIXv+xgMBhbxJ6LK4TYr/iMAdDodeB6fVIPAI3hK4St5EVkT3LQPxhgUuoC/RbsR8YH3dpjg4wIllyPgKohDYLk1ARy2PgYRodstcaY8z1EUxcoHHXpKWq2WTeclSQIpJdI0BQBEUQQhgM8++8z+btOpCoIAqmIgeEIjjoKt/s3umzM2CnSY+yu+pam0SJkaqzaVhI1G/bCNQC7hqeg0xrf6cCnIZjmafCshBHRRIGrFm1EUMjBWA2580Uk0oJug2MUUZ45AowAaY6yWevnyJfI8x3K5xGKxQJIkBwsiEVnhc33BxWJhhSrPy8+L49j6e4wXuoSHIAgqnhvBEwWkFzcHIqYoGTOOYJWnVawEL6xkDT0IHtFDgFO+ToCEX9H9130sFQyAfFEt/BHmTAgIImidIStK4WayRQlZ6EZtwTl56XW3iFZlgqXaCvUdG4TwPfC+7gpaWXb4eQaDAUajkXX1pJRQnH5LkgRBEJRs5G4X3W4XWZZhPp9jOp0+JMf38P1YAPkm4zjG3d2djYp9P8CLFy/W0nx8GNhxXcWPNgGoGrNEw5B6+Iur3VwZ2VDzQago/gIwD9lJ66gTSj9UIYMpCuRaIF3M4SsFf29/tPzcPF0gycr30wic+/EBaGhdlPSs2sEXQpSWCUAQtZAuZ+vPQqUWlQ6JY/OdHH4VRYHZbLaiDevaz1UiUkpEUYROp4MkSTAYDBBFEYjIBpmKiKx2SpIESZLg/v4erVYLg8EAZ2dnGA6HmM/nGI/HyLJso0YkIsRxDN/3SzZLlQFhft/Lly8tLrhYLCzbhhk29dN2dnaGfr8PISU0+TA6g1jBwQSKPENhwqpepHZiqxqSUsnISqjEw/c4MBKEAOkM2r9EthjBEzlEsMMEEcGYAqByHYo8R049y0rJoUAV+d6QgtYEpdZ9K3ZjdKERtvpIFuuVi5bEIKPdpv/AgMPzPPvF1oq/mANaRzJcE3x9fY2PPvqoZMRX+53nOdR8Pl+jTRtjMJ1OMZlM0Gq10O/30W630el0kKYpxuOxNc91v4CDD/49LxxjSEx24M/bZt5Z3XsqgM40kjRHFHqOxiywzCQIAgYSGYVWWz0WdN2kO7TR8FXpY+VaA8t5ZT41SEgYkjYSNVTy+aQXQqoIQoWQoYee8sqMhfQBz4fyPAgpISt/qsnasAbM8wxRu4/p/eelxqvR4UjXomAhKvHm7wEPHhjQYiJx/YuFijmhTZCM+73RGlmWwDi0PWPKoLHX6+Pt27cgItzc3GA8HtvnU+4PTRAI+4NBEKDT6SCOY7x48QJaa8xmMyyXS2RZBq01fN9Hq9XCfD5Hr9fDcrlEGIZYLpcrrIhDoicAIC8GIUNSAIXOoLzS38m1hEEAcoTvwwheeWUIkBUCLVkJIHWQFWTNGpNFW70ztHvnkMp33AHnoFa00Af/oNxA7WBtrVbL7ouU0roljJ0OLt+iyFPoIoPOM+udeL5f1gJ3h5CixFGlVwp8yRWsvhzSggv+85orpZBlGZIksSgF/5+/58OiDSEWU/gewUOVaBACnvQxnfkoCoOLi3OMx+M1souqm75NglgUBe7v7zGZTBAEAVqtFrrdLvr9vjXd9ahosVjg/Pwck8kEaZoiyzK0Wi2MRqONZss9WfyQkAEyCqCkhkGAVD/4MgSgIP/kLN9N92eMhoGH3JQ+I5EstZf0IJVCEIboDC4BIVFUGnztgK9pFFifiK8wDLenxaI2gqi9GYnovyiFRWtoY1BoA53nMCYFVULEfjb/vyx9KH3P4XCI6XSK5XK5US5c96Dj54jjFgiBPWzGEJZZjqyC25qgvoNANa4bTpLEmuIoitDv9zEYDAAA0+nU1oPww3FeczQa4cWLF2i325hMJivC6taUsI8RhqF1ZjU8EHnNAcQjBcstIeV7cP9fz9ZEcQzlfw2eV2oXV6Ov+EFKrZUqFEVhN8L9vF0Woe4rx3GM5XKJ+XyONE3XnqseJGwKGppBcbmTSt+EQVIjWP1QTtZkadVjNITWGvP5HLPZDGEY4s2bNyiKwprdKIpWFnyxWCBNU5ydnVkTwznFbRE2q+xDhc0ViiY/p8nv2fcKgsBqDvcgMTTBP7PT7uZT3Z/dkgdeK3bQXXNXF4Svfe1rMMbYqPT0uPiB8NumOhQht7C4HyGA9SuOY2sylVIYjUY4Pz9HkiQrqvfq6goXFxdWS3J9CcMvbu0JALx69aoRI2SNxBvsCplbpef6OZu0IB8m3vSmlJMLLSil1lqP1LUMa3/2j7XWaLfbSNPUwlr1DNCmtGSTIEwmE3S7XYsqPPiXBhKmsvIcnuny/6L8KrsxEDxB0EWOkXn90OLkSAFMc42WbUMhoIslJomPwviAR6fXgPWr2+1a88B4n+d5FuTmhS6KAp9//rnVAvXSTjZVYRjanznwYQFz3QF2zKWUNrXnJsG35S/d7/m93f44nlficWmarhRhdTodi5Eax5/iz2PBqgt9CcLnNju0aVP2uebzOfr9PqIocgRQwBcJekEK6YlKEL0y+pUKWIGdKlwyE8CyWCGx8nNu62hQB7ZT9EG0AIRv/b+F6UMIA8+xFCcXQE7jKaVstMx1wJzPjeO4URCavtx8o2vG6iauiUXjbqb7nq6AuJrHBb1dHxAoibQMO11dXa1ouHa7jSzLMB6Pt2ot92eXmn5szt04qbqiKLBYLNButzGbzaq/Veul1Fo+eF2GKr/XkxBUACLEap8cOuhwCBDXFlR9bUr/T9TckQ+iAfv9vj2Vl5eXVuuxVmJtVxSF1VZ1c+XeZOON1kgILizA6T/2SfnvrjC7WpYxriiKGn0/V0Dq1YH1xTxEmLblRHddDHFJKe09LZdLXFxcrFiYMm+9R02IqKJv4UNAr3lv2yhUm7xAk86BKlFAedKoUeuaUD1W+3EB+3K5tP6fq8E4kmUh2scXy7LMOuJhGKLVauHq6molc7LyEErh448/tozdXZGva6bZB637oUWhkedZ47/d1fFpmwZrAna3RaNxHFu/s46hsssRhqF1f2gDCiqEwHQ2RWHC0iM0Gc46AchoCIQr/6bOetnrcIkQV+lF+flCWbSzjjKcXAO2Wi0LsbDJms3mOD8/w/39PcIwtHXBD7UOZs0suqaw7lu2220rIKzN3E366KOPYIzBYrGwm+JqwDre5QKp5aIwgK0fTJMQQNWNizWBe8/H+G5uEn4f8i/z6FYY0c4m8iGNouhB85PYgBYQUhMixbAUU2EwW46Rkw8tO2tBiOtP762QKv9P1ID3bQL9KAFkM8bwyosXLzCbzRBUICprr+l0ivF4bFNr2+CSJm2zyX9w/+1yucT19fX2eoha5MyYsNQz+EghREn4JDJYZgIZuiAy6Ha7ICIsl0sLk2zrd7JLAA95PW/cYrGw/i+vCWvust6GrU4l3GvrJaCEQUpk/bU5DauYdf0wpGlqkwungnVOHgVzE6KbmxsLlWSFRjeMrLM+Ho9xf39/sL/k+k3bokVTi7B2fUa73V4X5ixBJLOq5LPcxLRY7cPiBjsueH4IJrlYLDZq+m1C6HYXqwc2RVFUHMvq3oSqcDdvlbRRLJsDhz1w1FMJYJMSkcd+CBMP2Ax0Op3SNyOCp8oPyrIMd3d3x6f+hbACuEkD7hLQTalFm8fURdn4aEt73np1f5MrsO8mbEptbbpXt98O19esnJ2KnWTXR8iqjw6tZCPGC4UFnT15a46mg7SiAb/2ta/h/v4ei8UCu/LC9exEp9OxBMNOp2P5aqpqL8HwxWNvfJsA8mv2DQrG4/GaFuj5E8APnD0zkKTX3p+1oAuHnLqQv37xntSj+voB5DQfhICmVeJ92baNAINnuza5H2o+n2MwGGAwGGA6ndrc4i4V3G63wVzCOI6hlMJsPofvBxACuLm5XTMZj8W+Njmyh0AG6/+eQLoAsNoYUkoB6NV7cLUya8BjSxc2Rb1ulMt1MyyEXGftalIun+D2J+X9usKnMUsMMh2uKXiJHBIGEARZYXZlxkQg1wI54g8vgDc3N5YJ3e/3LXt1PB7bxuGbsL/lsuxld35+DqAktA7PzjGbzTCfz0+2MdzWY5uWOCYoYB2ohV8jqAhbe1InTLhuwbFZjG2QlgtUb/o/CyBrY4a/7GZTWS5QvtwgpwCFiFfML0EgkAv0otX+gwKloMwSIMvj1UkEj3y+elLBBiFZliHLMkwmEzsqodVqYbFY4O7ubiWXS0S2qm02m9lApCgKgAihr3B3Mz3pSAO30fUuLXmUmdMCs+kMGiWti4oMOWKbnar7gK4GPKUA7nI13DVl7ctwkvvvDK1mZKRwAw7x8H8DKCVrWZJSIH0vQ5yX/nuCczyml0y9af2aALobfXt7i9FohOFwiHa7jbdv32I2m2E0GllT0O/3La7X6/XgeR7G4zG63a4lH5zy2tbk0DWJXAJwqAbMRB+pcSyUZByL1gSw7gOe6nI1674+OAPn7hwWKYDCiJXnk9DwKIEUBSQVkFLAEwRP5qDGwTUCYRAiCgXybIFl8vheMm4KdSsMwwt8fX2N8XhsteHHH3+MyWRio5nRaAQAtgBpsVjg9evXuL+/P3mNMfeZ2eT0uybxuM/eTvSqC+CHMMF1XxMNmYlN328NwoSHXpSjJ8pquZIwyle41VIRAEmmMsHiJBq+vkdqm0NcFAVub28xnU4tA1ophaIoMJ/P4fs+giDAfD4vu59WZNVTX6zh6urbHQXxIa+n8AFd0kST71cnbPT7ffv3OqmVbCfoSmiq/KzZQEjYJoHCUxBU2CzHYw/XwYxojsQYbjk/P7fYXhiGCIIAt7e3ePnypa0hOKX24yCD86JsjrnxJR8C7sJ66s9u0kzHANG7ot+zszNbJ93UoqQJfHfZPUywyIsCBB9kFoD3+LlwwvNKYPuRIwo2+bh7qw7P8xDHsS1cl1JagmWn04GUsnEgndspgTMih2oGFsCLi4tG4eRalQ8hfO5zuPSvfeuk9xXwJEnW8uJNPzfdV6fTweXlpR0GBOGXg28eJYACpkhQpDMMwwCjbACS0dFCeLQG5IsLka6vr23Y32q1cH9/j16vV059nM0aT+8hDJCma7lcWmiH/R7Oybq9rD+k8DHGxub3lAIIlLU0++GWmx38h9IFCUPchXZTew6UZZ3ub0g47UoMiCSgujCERsrWMRrwaAHsdruWzcs/c0DieZ5lutQ3hf++iYiwrxbkqI/Zv8c0T3/MxQLodnEQXlnqSCfIhuz/HGI1eKpcJNcXFgIojITSednrBuXYhsAXSDIDAwUy5cgbAwFjSv+QKvxQk6y6RUQgqIpRjaO0X51IXJePvQTQ9320223c3d3ZN+r1epjP51a7baovZi7bY4ITpuVzs8unErpGAfE8IAxgoghyOoXIctCwVzaeSTLghE0+1+gCpCEphSfLHouFKGlUvCfMt5SCMCu6WGinNw4Z+Dkh1bIUKkiQQ8N3iaoQD8LWRK3ahk9a7NGpLGT/1F1H25pjHwkeDoeWAs4RGFBSdrrdHqbT6UYNx1Qht3DmMVHos15RCPy//xb0F38W1//HzwFJWvo2UQR8/6+D+IM/CPzybweS9ASOYQ5PJFDCwPc0fI+gpIT0ysLzNEswTj0YEcEYbaEq1owaITStKk5dQ1PqxIRdyQO36MstFNtUXdjEUOp0OpbjuFMDMtu21Wqt9IUZDAbIshxpoXEe+Li+vtoY3UVRtNIZ4bHZkGe78hz05/4q8FN/AcgKGM+9lwnwV/430F//W8B/84ch/uDvA/zjAwCJAoNojChqAeSBGsY6hkGAoMiwNJEN1LaB9Zu0Ors39d4v9YrDprWvCywzzN0JW26k/vr1a1vkZXtH71qM4XAIYwwmk4n1/aSUmEym8MMOsizdiODHcZnMfoz2cx/ukELp0+JAGvhf/gLwp34GiEPAazgInixf9yf+FDCaAj/xw4A6rqGwQoow8FdSZEQEXQF52gC6yJHrkEfp2Xpst+Wdq5HqJav1tayzyPnLHdPWFJ03lZc2CT4La5ZlGI1GlUDTZgHkQp84ji2bWUppeX93swzf/vVzTMf3G+GBcjBNfpLU3K7Bxx/sCnzQX/ubwE9Xwsdgb16A8hSAgPADCL+aUBSHoJ/+GeDrbyD+y/8UyA4PvrQIQZStECS0KTCdJ8jRgyYFEp1qg6lS0OVwx1evXq1pJBYat9jd7QVT/7n+/S4tuo97VC/1FEJAULFdA3LXVMbYGHieTicQfgwlqbHLqWuCV2svHqcBn1z7SQGMp8Cf/OnS/7PClyP83u9G9w/9flBeYPqX/gayf/l/Q/h++ZooLP/N7/ptQDvGoYPuCALaAMrZU+UptKIA48wHSK0FB3zIuddjvQ7GFYJdB7guKKeEs1ZKZ7dpQFbnk8nEpsK4Qut+PMHw7GNkVcOhfQKIU5jgbYOPP4z2C4Cf+RvAfGnNKeUF4t/yfXj9d/+KLbbt//iP4N0P/BdY/r1//KAJ50vgZ/828CM/dHhQQoA2Aj6wgsuZIn8wy0yYFd4KFLNpdofbFLI+fpfX1TXPjE0+Bj7blNFacTc2bWgcx/A8z/p+Sim0223MZ1NM8hjf6EiMx+nWWtdTkTV3DTv5YJdSoH/0z1Z8PsoTXP6Zn4QF3Krr8s/8JL75jV8J4fesT0j/6J9B/OgfAJAeKn8lqbSGIwvpoScnUNJAeRJJRpjkXRgRWEGpb3C/39+pzZr2nxMIpxTAJtKEOj8/x3Q6XTGlnueh1+utaD/Ovb6/vsHbF8OV9Mqu9NWpbv7JgxApgLt794EgZAD19vW6rL59jTXO+909dg5G3mCCC9SL5RXiePUAKsohitXaW/eQrtSKHGGNTulz14m99jOiKMKrV69wdnZm2artdhtSSiwWSxijsZzfodUKkSYJhPQw7IYrwOdpEH48mTA3Ocf1KU1lbz0DciNZIUAmQ/JP/vna+5S/U3Ws5MjUqYTWAmS4jRsBlIFMBp0vkWVLLJIM8xTQpFZMXB2KeQz8dWqL00TkVe/evUOv17N0/NFohMFggCRJMR59DiIgirvo9Ya4u7vDWb8LIiDPs50tzZ5DA27ltzl/a+qktQastlqY/ebfiMn/9a9tna2MWrj+Az+G13//Z6HeflRu/C98guv/6scgo5Z7wxC/5nuAIxGA1ISYLOYgkaLQHgzCsuINns3Z2ubqwMpMFlfbbC6iF2s/0kPa5IMUW7kdxawAaq1xd3eH2WyGi4sLnJ2dQWuNzz79+RKIjvo4Oz+3URazWrgonfmBTZrvlLPnXDigifBQ7zXYhNLXneydmhFA/If/M4x/8k8/TImVEsX7G3zyH3w/ot/wawBtSu0nyr+55ho/+DuPgmEAwMDH3AzWncOtWHlum4XXi9gB7uVczhIRKBunC8rLOhAqIAVhvkixMD07w/jUGtCa40rqFf8iyzJ89tln+PrXv46iyAERIWoFEBUcUw4cLCuyJpMJfN+3bTPqpY6u9ts3d1jvdlVH6bmR0OXl5VoUVzenm0yri4M1UZ2KosBwOEQYhvjkk09KkkGnBfF7fjvwv/6dEl5xruXf/yfl/fs1U5WmwH/yA8B3fhuwWOKprqIoLBBdLoIBpTeAkRCkIUEIpIYnq4RvrRALAkg9DQH5QeqH3dYkAoAR6sFp4Rxv2X1pAikVjNYYDocrPfuKorBaMssy+3c3YHGFiX2JulA1aan67+oIPS8y07Ca+hyv9z1e/X6bb+q+RghRTqZMM+CP/gjof/8/gfliRcutCR5QYn6dDsQf/WFgmeApLx6N8aDhCUokiFTgZFW8LfNDBJQ0thz11Fed2S6EeBBAz/NWhtOwAPHv0jS1TYa4DpivwWBg64TdzWUh6nQ6a5rOrbJzW9RyUZMrZNzc8cWLFxiNRsiybKOvtyvveYTtBz56CfHjfwT03//PQGvHDI5kCfETfwT46NWTz5d1N9gC2to76FE92TwQ6NApmbvcqIe0Ix5YtUEQ4P379/bFXANydXWFs7MzzGYzzGYzdLtddDqdRqp4kwaqdy1lAav7iNsCiKYZuk96/e7fCvyDfwr8g5/bnOPVGviPfzXwe3/HWif8p7iaqvU0RDXubD8ihydkCXLX7j+KIpta5cFGh8IwjVEw3zBrNxdF598xCMyFSUyvWiwWduLRoTfzGDzpWa7Lc4gf+SHQv/m3wN2o+TXdDsQf+kHg4zfACQHcQzTMKi1LgEgBJl0NkLYhkMqHpBQkYqsFLy4urBUDgHfv3m1Nwe46ICsjHjjR8eC6AAAXtUlEQVTHG8exLbUEHgqOJpMJhsOh/f1kMsG7d+/w6aefWnO4qd3upq/HqO+n2MTG+8wL4Lf8Bogf/s83rW4ZrPyu3/4swtcsgIAmcVAqWgoFicK+H896WywWtjCt3+8ftR9NtcGKhwa6dHsWQP59GIa4nqSYj29BRdqY8vmqXC5avwYjLRPgh38I4rP3oD/7l4F2u1QSeQ782u8B/rsfPTEj+jgB9H3/od82BAyJg6biSWlQ1Fwfbl7FBWbHYLyNmRClFKIowmw2W+Ht88itMrgAxqMRiiJ70jqM5zDBW9tulBOhgT/2X0P87t8BLJJS4C7OIH7qfygDFPN8LajYv3Y1IM873mNlyzhYlF0T3MjazYow2P2YLMmKAE6nU9vw2n1BFEU28k2zDPcLKktDn/F0PwUlq2n+x5oQ+j7wx/9b4Hu+C9L3of78/wScDyvOO55dA9YbFe0SQCIDnS+QJEtM5ksUxi/FUQjr67lzXdhCHmOG63uoer2enePGFwPOQRCUuOBohMgzkFW9/Vf54gXmNWgamyqEgOx2gZ/6H9GZLDD9lb8Ci+XyC3H/deIuQUIbU1a+VdVxWhfQBsiNQK49aPJgMAQJjyct2ACEhY7z/u76HBMN11ODSimFyWSysthcgM7jqBbLBTSiZ1/cQ2dXHGPe+YSen5/v1ra/6dcDAOa3t3sFTmuMYKf5+CkFkH03YwwgPCzyAMvcoCABrSWE16nGxQp4gYQvBVRV/+Ga2ul0alu0cLJg1wE9NMizA6vdN4rj2HK3ZrNZVSv61dZ89Q3kxut8apvYxZ7n4fz8HKoBo3SzOk2pQ96EJEkaCaSPOUDcOID9t5zKwqV2t412qwVPKTuutfySkHK9/VAcxxZm497ajN8e249xzQRzb0DWLFwJxUOmy24HQOxxpf3zab8PRclqwqp4Gui2z+N2cHWtzFmlfe71mHkjuw6QMQa+71sTGYYhLi8vrR+XJxNQMQUZA6IUJs9RyB66Zx/j7u4Ws9nMTkC9vb1Fmqa2DR8nEZiMsq2J6T4+tnTbaXAfF97oh4IigVkRlry0Z76eSgD3Zsw0dH8/xDk/tQBytokLwaWUGA6HUErh5uYGv/iL/w6Tm29CZGOgmELoHBIF0mRuNZvW2g4eCsPQzgzhe2WFdYwWrPMFlNtKl4hsKSVQttylih8We9nWEVBPCRI/BZyxD8zgDktsCmT2OURMAj5lO2MOIF2LNh6PMZ1Oy9bDoprYjocCcq1L08r7z7l5br/HRAe3/uQYAeR7GwwGpatQb8DNM349z1tJ+huboBZfaQ3I5tf3/QdHfocGbBqw485G28TW4e9PGVgxFshgcb0csoRmvCrfaxcVUmhkWYJut2dBeFeTpmlqURG3afqh+8Gyxfen6uZASok0TRHHsXOSBTKtIPwnJ3hs9AHddml86rcJ6SELNR6P0W63d0anm95TSmm7XW2ajfchU4vusMimDqrlXE2yA8qEkPCEQZos0e32EIahnczEfmOWZXYsm/uex7RFzvMcNzc3JbxTV418ityh0QChpfJnN8Huxr969cq2B3bxKnfgtTuEkAdS77tA7H7sM/qrSZj0M6XkuE0HayguTF/NjvBETQ1TpEi1QKYDqOoxeAKnK7RsgvnKssz2hznkWe1Uz8oCKPcNwjBc829YAy4LhY6XPnskLIRAt9u1ERh3bGDtzV1T6/M2XO3A0534i7mHTaNjoyiygdlyubTOOcMUYRg+ahrUhwTTfd+3E9s5ty+EBIkIkySF8FsI4yHiKMIw9FeCBF6bKIrg+761Mkqplc78xwRR7r4oLkRyoxy2864GDJ8QhtlG4xdCWPPITdM3aSYWQp7YyelGTjVy9R+/v9baDukLgsAO22Y8sNvtYjab4f7+Hu12u2rSlB2VEXgKAWStx22Nz87OqgMawPPKkV5FnqMocozHCzuugyl4nU4HYRha9gsPIncH9BwbxXP1pep2uxiPx1YA2bbzyam8Giy1Qt9PP4gZrvtGcRzbGhAWDMaPuB0wd2DaNTvEHeLiNtGsU8Tc09xqtWw0eH19bc1xp9PBcDi0c4mn0ylGo9GzmdttJtjVVvwzQyqLxcjur9tjOggCxHGMfr9vgzC2OKz1iAjMHxgMBivMm0P3Ooqi0gQHQYDlcmlvmDXEmzdvKqJCgmya2+5Mx9JwOGpytRbDBJ7nwfd9xHG8M7yfTCYHAaCs5Vhgm/qjsH/IDverV68s+5dfO51O0e124XneRlLmrmY+T5nNYVeFD9znn39u1z4IAstyDsNwrZ44SRLMZjOkaWrbqQ0GA/R6PdsjnNGCQ4vX1yj5vu8jSRIbUbImdDtknZ+XlGqXBe1qmSb7zsVMnU4H7XZ766a4tP3RaITpdLriywRBYBtlHtptdVOgsElz7mrik6ap3YQms8KjWemZIAMOyHzft6WqAHB+fo4wDK1FcPtt89i1+rSBeu2Om8Woj4o9xI/n91B1PIcFMMsyXF1dwfM8hGEEGbbRi5VlyLokVhcGYVPGD8omlIcguriXi5GxqWChc4MIjuSONXVuFZb7uZs0lTEGWZah0+lgPp9bgW+32/B9H6PRaOU93SnoLph/isacx15Zlq2Md2VQmcsu2N9zXa16NWN9Ddk39H3fFpI9pgE9EZXNiersDBdjA4BlkmA0ISRhAk/5ljURhqEt13Sbd7PAcYTJUec+grKrqu3QDXWfjdH3emNFFxzmHjh8Hy9evLACyNPhF4uFPfluWSkfXjdiPDRXeio/kNd7Op1aJeEGlq6G2xcIZ0XA0TXvxabmBNs0ILt7VgPWpwCtPhDK8aUOjMFOfV1oXFN6yCTzD3UxIOtqUE6k10Fu9gW11nZiKI+nICJcX19jsVjY6aIcMfIBbGpr9lzPzYeGUQC+R65sPOa+WADDMLSBCP+8r1vEfjhH1opNZLvdbjRXqMCX2MvXyKi7mh2eurlhne27rwD6vo/JZFJRyx7oVG6zbdbqrOFcUzabzRr9RH6/IAhWusA/l+/nrjsHSNxQnjX85eUlgiA4amgQ93fmxqV8qA/NCTMFMMuyko51f3+/corXiJQVGyYMng/vYobG+fk5er2e7QJa911ciMXWLgjCZDKC1rT2nk0lpdv66MVxjFarZYH75XJpU1YfOsV2yMXaKU1TXF9f2wGBr1+/Rrvdxmw2O7j3H7dwYavJLgzT8w9ROBxdq88++8wSIzcPhibEMi+rq56JksWRZRzHFifcdsJc7Xx3f4XR6FO02y8gpTpaSzPG5sIv7P+w5kvT9AuDC7Kr5HIWp9Pp6livAy/+N77vI01T2xx933V0+YBCiDIIcU9ukwYUlR9IX4BTfX9/b6ni9ah201hTXWjErSEyPUMsh6BHPAlz4xieYvYQd5KtEyOe8+KGUi6rhwXo2BSaW6TEhAXGFY+ZhqCapLOxZSsIhiQ88bx1r5yjPPTyVRuzu/eIz84eTekJgmAlb/7AHP/ilC1wJMxAdB2zPfZeOQgNw9BSvzjLckzEL+sbvLXhJL7kl1An2dimvtiuRuHA59Rs52O0dZ0w4OK9h8BYUkqEYYjBYGCfNwgCK4DM7zuJBmzq4WFHiH1pL4If+id5pyYsks0c506VUjDG4Pb29tm6SHDmwhVADqCaslj15p6s6d0o3x27wbxBl8r3aAF0mQ6u5stJoi0bTJ+gkzSC2uiXEQA6xQYK5GZ2Uue+DvfU/c9nmW3ScFD4cHArZs5K1Qd/c+qOgXjmUCZJYlOjLNRv3ryxma4sy+xUhUO1oGpCqV3VaxcVZQS88vayQB5cw4hT8ASpUSgVtaCSV492AIgIoT84SYCwjn8KeJ6CgFgLhJ5zxJjbNzoIApyfn9u9ffXq1UrbYo7gkyTBaDRambDk1i67MsH/3q0VTpLkoGdVrq3fnOYSyIxEU02IETmMyD7UEoKEf5KNiKIQX//6r7Islse2iCsZwT6MLlBggWk6hvEMpA5XNE+n04HneZY8+xxB23A4xGAwsM/carXWCAiHFFIxbMcCyNEvC+Cue3LfTzX9cV0DEkKpv7ReIBMp2Xw+XhsJfJr8Y+RyCiOqlJsqi7aUN0BsfjVClNgY+1wuBPLUUAwXmCdJYvs7vn//vrFd2iFAMlPTHtMtQW4SwDV/gprGv3854mLuALbPSd/30t4cEAYSChIKAh4EFLRYoDAJyABGE4pcI881dEHVayQAg7IBmngSDUhEuL29xWQywXK5tCSSx3Q6Y/oeBzicktv3/Ro14Lai7PL19TfnBf1ia78wDCGlPClWJ0wAyHVhJlFgSr8AMy9AMNCUQYsMhnIYlcGIDAQNgoakCN3iOz+oILLG56h8sVig3+8jCIIjupyuTucEgF6vZ/1cFsh9JmhtDEJcPPAh09CcghMQECS+8JaZOWuHOsjbt0Ju/P1SXCNBVagkqQqniEN6x36MEOtXUNT/YNbEJQwweydJEtsTcntQ5gxrIANJS5AMUU5y0ri9vbXcR5fKdohgqyYq1Zq9Jw9KGHxZL5cYe6pLSr+qrRUbgqdiixZ5+C6XM/h68Kj04FZXoeI9uiW37BduQyMECNIsECqDwMsRKAkpgNulj5ykrQ2ZTCaW3n9+fn5wpwdVDqYpVogILM0WNTcSgZd/qTMhX5T87BpYLCeA/nAmhNNlnDpkv7DX65VtOkwKKQhCAh6lCDwD5WkE0sBTYZU9Kqe3C0FQYoGceiu+nNs30GVh7yWAt7e31iHlm3RvWIBQkIQvTNWe48t3MRvEzYk+2gSTPInrUYgp8AHdGBZA1ngrheu+j5b4HMr3oSQglV95ZaosXgdVCvHh8IaewdKsry83NXLZ5NsgGEt+mUwmuLu7s5wxPiGuD6hJfKm1H5vek05/pAMGwMDYwINQVObZQMBDrF8DH9i94eyF2+VUa13N+iMEQQjhBVXHBOZqNNVmC4TKQNTG0nI2JEkSO6uuaZJVu93Gy5cvAQDD4bDMxLCQcQKdQdpSQssMsC++vBgga/THMDaaPTlvT02pEJkLKGpBmAgeAkgEENWYVVHyjD64ALp1wVYAwxDpQiE44CgpP4Kaz5DLPqR8KOHgYicmDLvkYHcOX57nGI/H6Ha7uLi4eIiCmb0xm83K9AoWmHj/BgYFEv0NxN4YklrwTPtLJXxuNZdLoXq8AO6nTX3qolt8Z33w1bM8vzsNoXSzIkwzoB3TRoErNSLBGI1CGxRaQvottKM2er2uNb/10W31dCVDe1dXVzZb0u/3H0Z1cWFS2RmrBU0pUnGLXCZIPR8j/xcgKURbfwei4uWXzgRzNdepevFJyL0EqQRgzLNaELdnoNt8tNVqwUiviuQJRBraaBgjQJDVlwcDwIgOZOsccejjPI6sf8kml0tQmbDAvEHutNHpdCz+yPnpFRyQw/Q0TTEcnmGpx9AmRVH0EfpjCPJBMJh7/x9CfW5NyAePXnEa8oAbWD1p9I0CRmSQFD6bABpjLDmVDx/nb2UwwHz+OchrQ6gYnoogPR9KhRBeCM8PoTwJAlBkGbI8x/39/Qox9ezsDKPRaK3Xtcs9HI1GiOMYFxcXyLLMUrnsvGAuNi5NVYD72QQGOci0IdXn9gQbFMjkLUL9Cl8mimpTL+fHiJUw3l7z/7RcohALBBQ923oxlZ6nnGZZZv3iwdkreOIFpKcghAdRrVGW58jSFLP5va1zaSp74EAjjuONQD/HFO/fv0e327VVisvlshRA7svCCDnBYJGPAIiqO/6DCRGQWHrvEOnXXzpf8LTXfsJskEPLOWCGz/r8rPG4oRAXdbFJXCxTW6m2b20Hs4JcRvS2dWZNuIIDAiU9JwxDjMdjxHEMTRmWxT0EBLy1NxTIxRQz/+cR649AWyEEOkCnbAr9C2ixxL5ECBLro3Q0NDz1GoUuoMUCEH4Vf0qAZOUDyQOeQxz0bAXmIOi9I+cPpQGBcnYzzwDhtiMucfaYxlNZlm2tUtwKRPu+b6dhpmlaFjLTw9BiahifLSCwkJ8i9a7gbTQtZQfO3T6ccMRvvRqPCCD/qtG1X38rUx0IsWouISHVt2OeX2MU/AsoEVcMFh/SKAgoCFKQQkEYvzRF5EHChyDPMl2EkTCiQCFnWKrP9iJiCIhS6GtcSrEzKBGNeOKxZpxNbpqmePfu3Vpfm8cId5Iktlmn29hoLwE8Pz+HlBJJkth+LwBw2foOfGs8gdiQ0xSQMKRhMNuxJicwfYe8Ra1/oSGDs+gtfK+Fz6b/CiQ0tFg8HCvP6ZcsBAR5ACQEyUrAyv+X2lKAhIFBAoNszxsTKOQcS+8dAuo7olSARIn6EgCIAhAPB9GA28VpQBQQ8BHqF1DUOToQczvdH9tir0lLsnY9pjRTsepMksSSJ6fTKS4638C7yRRG/fyOhf5iA9SB18bL9ndBQGCWX5X5z9o9W21ErGUMGvtwiuOfe6G+hWW9tcle2uzhNal3jX72H8Gj+ChNxY3GuZfLLiF0a8V5TCsTW+saEIDtGXOQBuS2+Xmeo9/vI89z3N3dodX6GG+734NP5p9WxTwGX8ZsyHn0beiGL/H/3PxtvGr/Cvy70T+shPBJvbDNbsMhkTwSpPIWLf3x0YFIp9NpTEmudCuoCLxBECAKQ3jKs25Zr9fDt771rZWcOsM8h3RIsALI8x8Yirm9vYXWGu+vrvHi8hL/YfwDeDf7VxinnyHTC2jK1sTwsGWlDZ7SA7DrailRzbAl/t71o1iQCCtCxd+HXhsf9b4Xo+SXYMgg03Ocx9+GTC8gRWWKqhmgrmtxVMRMD+9ApGHIgETVJYFM+TMMDBXQlKEwuU3BPXye2OobCkgk3udo6Y8OVgZuXxeuFXY70wZhBF8p+IoghQDpDEZn0MsRimKJosiRUhvDy7dot9uYTCYrgUuaplVuWR1Ee1NRFNkJOXwCut0uCiMwmc4w6HXxtf6vxTKfINVjLPMxUj1fkSPpydUNZOdclBkDssCFDylkVcopncUWKw69dAWwQRgfPsspBhfeQ9BRfe/LCFJ4aPln+I7h90NKDxKqek3l230IbUioBK6AIQNBBpo0DAwM5ShMisKkyPUSmVkgKxbIzRyZXpSHXBTOYRPOWgloMUcqbxDrNzDWP98jI1PlgoGydS8XS0kpYfQSlIxASY7c5AAZkM5AVJS9dISAB40smSEvNFqtlm1FwleSJLaB5yF1N8odbwDARsRsNuwIV7+H2O9hEL2FId3gGjmTlGoF7bR35Peh/MDWk1vc8hAF9ohsyhsZ0iAq2TKm0pxFscCimCAtJkiLKZZmjGV+X0FMElP188jlCKF+BUUR5MooXar9l2yqlbsaSCkxn8+t0rl690s4CxeAVEB1IIWUEA5NQQgJSQWKPFvD/Fy2+aGMI1WPalZD8g2TgIR36H78+2sTnC08QHgAHCKn6qKDlzUNZrBIbzHJ32OavMOsuEXivbdC51EEQSE8RPCYdWNaUIghRYAXL16sdPC6u7vDcDispmAqUDVDZLMJl/A8gyJLIFuttSJ0zpQcTEj99yLw5biEkGhHl2hHl3jd/W4AwDIbYZHdYJK9x0LfQVOOgu6RmgwGGgICLe8C3+h9H4IgxPX1tZ39wVWC/X4fYRSjSMfwfVNZL9Ho4ioPKIqHQYX1SJqnJx3SFP5LJYCPodUzI6Z+MUPGHWfFuNaubvk7tVutWeYpgF/3ioMB4mCAc3xHKQDFDMuC/fQplIxx2fpl8GUb19dXmM1mtq3cy5cvMZlMkCQJeoMLZNMCxuSATmBMDg8E2NxwNUtFaKRFZtfNhWNYs3I3rn0Dkb0EcLFYbJxItA+WtCmB7f6de5dwLrKpec4xQug2T68/AxHh8vLSTgVQSuH6+npFAN17PPRz6+PC6oNxuC0wczEPNV9rvq7qIFAd9KOP1g4fzwzxfb+a/bJEr9dDURTIcoJsv0agPECnMDoHFSlMsYDOl4DJQEUCTwB5ulihdrkXU7wOavpJG1bWGIPZbIbJZHLyjp9NHxnHsa3YeqoCIiKybSsA4O7ubi26+/CmdTUHy23P+Itrmj/Es9cH00ynUwgpEVUjNoKA6zsIpHPobA4NH1GrhyzL7Iw8boXc7XZhjMHV1dXeMvP/A/Zxklvs6kVGAAAAAElFTkSuQmCC")}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp_title_text .lp-json-pollock .direction-rtl{direction:rtl;float:none;text-align:right}#lpChat .lp_chat_line_wrapper .lp_rich_content_line .lp-json-pollock{padding:4px 0 8px 0}#lpChat .lp_chat_line_wrapper.lp_agent{direction:ltr;text-align:left}#lpChat .lp_chat_line_wrapper.lp_agent .lp_chat_line{background-color:#0363ad;border-radius:4px;padding:5px 4px;text-align:left;left:0px}#lpChat .lp_chat_line_wrapper.lp_agent .lp_chat_line .lp_title_text{color:white}#lpChat .lp_chat_line_wrapper.lp_visitor{text-align:right}#lpChat .lp_chat_line_wrapper.lp_visitor .lp_time{text-align:right}#lpChat .lp_new_window .lp_chat_line_wrapper{animation:pop-in .25s}#lpChat .lp_resume .lp_chat_line_wrapper{animation:popOpacity .25s ease-out}#lpChat .lp_chat_line_wrapper.lp_visitor .lp_chat_line{background-color:white;border:1px #b6b6b6 solid;border-radius:3px;color:#404041;padding:5px}#lpChat .lp_chat_line_wrapper.lp_system{text-align:center}#lpChat .lp_chat_line_wrapper.lp_system .lp_time{margin-top:5px;text-align:center}#lpChat .lp_chat_line_wrapper.lp_system .lp_chat_line{position:relative;text-align:center;padding-top:0;padding-bottom:5px;padding-left:0;padding-right:0;max-width:100%}#lpChat .lp_chat_line_wrapper.lp_system .lp_chat_line .lp_title_text,#lpChat .lp_chat_line_wrapper.lp_system .lp_chat_line .lp_title_text *{text-align:center}#lpChat .lp_chat_line_wrapper .lp_chat_line .lp_chat_line_text{position:relative;min-width:50px;max-width:230px}#lpChat .lp_chat_line_wrapper.lp_visitor{text-align:right;margin-right:0}#lpChat .lp_chat_line_wrapper .lp_chat_arrow_border,#lpChat .lp_chat_line_wrapper .lp_chat_arrow{bottom:10px;position:absolute;background-color:transparent;width:0;height:2px;display:inline-block}#lpChat .lp_chat_line_wrapper.lp_agent .lp_chat_line{border:1px #b6b6b6 solid;right:-26px}#lpChat .lp_chat_line_wrapper.lp_agent .lp_chat_arrow{left:6px;margin-top:-2px;border-top:6px solid transparent;border-right:5px solid #0363ad;border-bottom:5px solid transparent}#lpChat .lp_chat_line_wrapper.lp_agent .lp_chat_arrow_border{left:5px;margin-top:-2px;border-top:6px solid transparent;border-right:5px solid #b6b6b6;border-bottom:5px solid transparent}#lpChat .lp_chat_line_wrapper.lp_visitor .lp_chat_arrow{right:-5px;border-top:6px solid transparent;border-left:6px solid white;border-bottom:6px solid transparent;z-index:2;margin-top:-2px}#lpChat .lp_chat_line_wrapper.lp_visitor .lp_chat_arrow_border{right:-6px;border-top:6px solid transparent;border-left:6px solid #b6b6b6;border-bottom:6px solid transparent;margin-top:-2px}#lpChat .lp_line_state_wrapper{position:relative}#lpChat .lp_line_state_wrapper .lp_line_state{width:75px;position:absolute;bottom:-3px;font-size:0.8em;left:-85px;text-align:right;padding:3px 2px;background-color:transparent;vertical-align:super}#lpChat .lp_chat_line_wrapper.state_ERROR{padding-bottom:32px}#lpChat .lp_chat_line_wrapper.state_ERROR .lp_line_state{bottom:-29px;right:0;white-space:nowrap;left:auto;width:auto}#lpChat .lp_chat_line_wrapper.state_ERROR .lp_line_state .lp_error_text{color:#c0392b}#lpChat .lp_chat_line_wrapper.state_ERROR .lp_line_state span{vertical-align:middle}#lpChat .lp_chat_line_wrapper.state_ERROR .lp_line_state span.lp_warning{font-weight:bold;background:red;border-radius:51px;margin:-2px 0 0 5px;width:15px;height:15px;display:inline-block;color:white;text-align:center;line-height:15px;position:relative;overflow:hidden}#lpChat .lp_chat_line_wrapper.state_ERROR .lp_line_state span.lp_warning .lp_voice_error{position:absolute;top:0;left:100px;font-size:0;line-height:0}#lpChat .lp_transcript_widget{padding-bottom:5px}#lpChat .lp_agent_is_typing{display:none;overflow:hidden;font-size:.8em;font-style:italic;padding-left:4px;position:absolute;top:-14px;left:5px;overflow:visible;height:10px;background-color:transparent;color:#6d6e70}.lp_ie8 #lpChat .lp_agent_is_typing{font-style:normal}#lpChat .lp_transcript_scroll{position:relative;left:0;right:0;top:0;bottom:0;min-height:100%}#lpChat .lp_transcript_rotator_wrapper{width:100%;height:47px;text-align:center !important;margin-top:22px;border-bottom:groove 2px}#lpChat .lp_transcript_rotator_wrapper .lp_transcript_rotator_image,#lpChat .lp_transcript_rotator_wrapper .lp_transcript_rotator_text{display:inline-block}#lpChat .lp_transcript_rotator_wrapper .lp_transcript_rotator_text a{color:#66f}#lpChat .lp_transcript_rotator_wrapper .lp_transcript_rotator_text{color:#6d6e70;font-size:.9em;padding:3px}#lpChat .lp_transcript_rotator_wrapper .lp_image{vertical-align:middle;max-height:100%}#lpChat .lp_actions_bar_container{direction:ltr;position:absolute;bottom:-200px;height:200px;left:0;right:0;overflow:hidden;background-color:#fff;z-index:5;display:none;transition:bottom .25s}#lpChat .lp_actions_bar_container .lp_actions_bar{position:absolute;top:0;bottom:28px;left:0;right:0;overflow:hidden}#lpChat .lp_actions_bar_container .lp_actions_bar .lp_action_items_wrapper,#lpChat .lp_actions_bar_container .lp_actions_bar .lp_action_placeholder_wrapper{position:absolute;width:100%;height:100%;background:transparent;direction:ltr}#lpChat .lp_actions_bar_container .lp_actions_bar .lp_action_item,#lpChat .lp_actions_bar_container .lp_actions_bar .lp_action_placeholder{background-color:transparent;vertical-align:top;display:inline-block;width:33.3%;height:50%}#lpChat .lp_actions_bar_container .lp_actions_bar .lp_action_item:focus,#lpChat .lp_actions_bar_container .lp_actions_bar .lp_action_placeholder:focus{outline-offset:-2px}#lpChat .lp_actions_bar_container .lp_actions_bar .lp_action_placeholder{background:none;border-bottom-width:1px;border-left-width:1px;border-color:#d6d6d6;border-style:solid}#lpChat .lp_actions_bar_container .lp_actions_bar .lp_action_placeholder:nth-child(1),#lpChat .lp_actions_bar_container .lp_actions_bar .lp_action_placeholder:nth-child(2),#lpChat .lp_actions_bar_container .lp_actions_bar .lp_action_placeholder:nth-child(3){border-top-width:1px}#lpChat .lp_actions_bar_container .lp_actions_bar .lp_action_placeholder:nth-child(1),#lpChat .lp_actions_bar_container .lp_actions_bar .lp_action_placeholder:nth-child(4){border-left-width:0}#lpChat .lp_actions_bar_container .lp_actions_bar .lp_action_item{float:left;cursor:pointer}#lpChat .lp_actions_bar_container .lp_actions_bar .lp_action_item:disabled{opacity:0.5;cursor:auto}#lpChat .lp_actions_bar_container .lp_actions_bar .lp_action_item .lp_action_wrapper{vertical-align:middle;text-align:center;-ms-flex-line-pack:center;align-content:center;height:50%}#lpChat .lp_actions_bar_container .lp_actions_bar .lp_action_item .lp_action_wrapper .lp_image{text-align:center}#lpChat .lp_actions_bar_container .lp_actions_bar .lp_action_item .lp_action_wrapper .lp_image .lp_action_image{margin:0 auto}#lpChat .lp_actions_bar_container .lp_actions_bar .lp_action_item .lp_action_wrapper .lp_title{text-align:center;padding:0 0.5em;font-size:.8em;word-wrap:break-word;color:#6d6e71}#lpChat .lp_actions_bar_container .lp_bottom_logo_bar{position:absolute;left:0;right:0;bottom:0;height:28px;text-align:center;padding-top:5px}#lpChat .lp_main .lp_location_bottom.lp_show{display:block}#lpChat .lp_main .lp_no-animation .lp_main_area .lp_location_center,#lpChat .lp_main .lp_no-animation .lp_main_area .lp_location_bottom,#lpChat .lp_main .lp_no-animation .lp_main_area .lp_actions_bar_container{transition:none}#lpChat .lp_main .lp_actions_visible .lp_main_area .lp_location_center{height:calc(100% - 250px)}#lpChat .lp_main .lp_actions_visible .lp_main_area .lp_location_center.lp_no-animation{transition:none}#lpChat .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom{bottom:196px}#lpChat .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom .lp_actions_button{margin:0;background:#ffffff;border:none;text-align:center;font-family:"Arial";cursor:pointer;box-shadow:none;background:transparent}#lpChat .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom .lp_actions_button .lp_enable_image{display:block}#lpChat .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom .lp_actions_button .lp_disable_image{display:none}#lpChat .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom .lp_actions_button:disabled{cursor:default}#lpChat .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom .lp_actions_button:disabled .lp_enable_image{display:none}#lpChat .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom .lp_actions_button:disabled .lp_disable_image{display:block}#lpChat .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom .lp_actions_button .lp_enable_image{display:none}#lpChat .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom .lp_actions_button .lp_rotated_image{display:block}#lpChat .lp_main .lp_actions_visible .lp_main_area .lp_location_bottom.lp_no-animation{transition:none}#lpChat .lp_main .lp_actions_visible .lp_main_area .lp_actions_bar_container.lp_no-animation{transition:none}#lpChat .lp_dialog_container{position:absolute;left:0;right:0;top:0;bottom:0;background-color:#fdfdfd;z-index:10000;color:black}#lpChat .lp_dialog_container .lp_center_div_wrapper{width:100%;height:100%;padding:0 10px;display:table}#lpChat .lp_dialog_container .lp_center_div_wrapper .lp_center_div_inner{text-align:center;display:table-cell;overflow:visible;vertical-align:middle}.lp_ios6 #lpChat .lp_dialog_container .lp_center_div_wrapper .lp_center_div_inner{margin-top:45%;display:block}.lp_ios6.lp_landscape #lpChat .lp_dialog_container .lp_center_div_wrapper .lp_center_div_inner{margin-top:15%}.lp_ie8 #lpChat .lp_dialog_container .lp_center_div_wrapper .lp_center_div_inner{display:block;padding-top:40%;height:50%}.lp_native_android #lpChat .lp_dialog_container .lp_center_div_wrapper .lp_center_div_inner{vertical-align:top;padding-top:15px}.lp_landscape.lp_ios.lp_lpKeyboardOpen #lpChat .lp_dialog_container .lp_center_div_wrapper .lp_center_div_inner{vertical-align:top;padding-top:5%}.lp_android.lp_landscape #lpChat .lp_dialog_container .lp_center_div_wrapper .lp_center_div_inner{min-height:80px}#lpChat .lp_dialog_container .lp_title{display:block;padding:5px 15px 5px 15px;font-size:1.1em;text-align:center}#lpChat .lp_dialog_container legend{box-sizing:border-box;display:table;max-width:100%;white-space:normal;word-break:break-all;word-break:break-word}#lpChat .lp_dialog_container .lp_subtitle{display:block;padding:5px 15px 5px 15px;color:#515151;font-size:.9em;text-align:center}#lpChat .lp_dialog_container .lp_title_large_padding{padding:10px 15px 10px 15px}#lpChat .lp_dialog_container .lp_dialog_input{padding:7px 10px 7px 10px;display:block;width:100%;background-color:#fff;border:1px #b6b6b6 solid;border-radius:3px;box-sizing:border-box}#lpChat .lp_dialog_container .lp_dialog_input.lp_error{border-color:red}#lpChat .lp_dialog_container .lp_idnv_container{text-align:center;padding:20px 0px 40px 0px}#lpChat .lp_dialog_container .lp_idnv_container .lp_idnv_wrapper{display:inline-block;padding:0px 15px 0px 15px;text-align:center}#lpChat .lp_dialog_container .lp_idnv_container .lp_idnv_input{width:31px;height:36px;margin-top:5px}#lpChat .lp_dialog_container .lp_icons_area{position:relative;text-align:center;padding-bottom:7px}#lpChat .lp_dialog_container .lp_icons_area .icon{text-align:center;width:auto;height:auto}#lpChat .lp_dialog_container .lp_buttons_area{position:relative;text-align:center;padding:0 5%;height:40px;margin-top:5px}#lpChat .lp_dialog_container .lp_buttons_area button{padding:9px 6px;width:45%;float:left;font-size:.9em;border:none;text-align:center;cursor:pointer;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}#lpChat .lp_dialog_container .lp_buttons_area .lp_confirm_button{background-color:#0363ad;margin-left:10%;border-radius:2px}#lpChat .lp_dialog_container .lp_buttons_area .lp_confirm_button:disabled{opacity:0.5;cursor:default}#lpChat .lp_dialog_container .lp_buttons_area .lp_confirm_button:hover,#lpChat .lp_dialog_container .lp_buttons_area .lp_confirm_button:focus{background-color:#025487}#lpChat .lp_dialog_container .lp_buttons_area .lp_cancel_button:hover,#lpChat .lp_dialog_container .lp_buttons_area .lp_cancel_button:focus{background:#F2F2F2}.lp_lpIos #lpChat .lp_dialog_container .lp_buttons_area .lp_cancel_button:hover,.lp_lpIos #lpChat .lp_dialog_container .lp_buttons_area .lp_cancel_button:focus{background:#F2F2F2}#lpChat .lp_dialog_container .lp_buttons_area .lp_cancel_button{background:transparent;color:#5e5e5e}#lpChat .lp_dialog_container .lp_buttons_area .lp_single_button{float:none;margin-left:0}#lpChat .lp_dialog_container .lp_dialog_alert{text-align:center}#lpChat .lp_dialog_container .lp_dialog_input_error{display:none;padding:5px 0 5px 0px;margin:2px 0px 2px 0px;font-size:1.1em;color:red}#lpChat .lp_dialog_container .lp_dialog_input_error .lp_email_error_text{color:#de0a23;display:inline;margin-left:3px;margin-right:3px;width:91%}#lpChat .lp_dialog_container .lp_dialog_input_error .lp_email_error_img{vertical-align:top}#lpChat .lp_dialog_container .lp_dialog_input_error.lp_error{display:block}#lpChat .lp_dialog_container .lp_error .lp_dialog_input_error{display:block}#lpChat .lp_dialog_container .lp_error .lp_dialog_input{border-color:red}#lpChat .lp_thank_you_container{position:absolute;left:0;right:0;top:0;bottom:0;background-color:#fdfdfd;z-index:10000}#lpChat .lp_thank_you_container .lp_title{padding:5px 40px 5px 40px;position:absolute;top:42%;color:inherit;font-size:1.2em;text-align:center;text-align:-webkit-center;width:100%}#lpChat .lp_thank_you_container .lp_image{position:absolute;top:30%;left:50%;width:46px;height:46px;margin-left:-23px}#lpChat .lp_tooltip{position:absolute;left:0px;right:0px;top:0px;opacity:0.2;z-index:10001;border-radius:3px;text-align:center}#lpChat .lp_tooltip.lp_tooltip_notification{background-color:black}#lpChat .lp_tooltip.lp_tooltip_success{background-color:#e1e1e1;opacity:1}#lpChat .lp_tooltip.lp_tooltip_success .lp_title{color:black;background-color:#e1e1e1}#lpChat .lp_tooltip .lp_title{width:100%;color:white;font-size:1em;background-color:black;display:inline-block;text-align:center;padding:5px 15px 5px 15px}#lpChat .lp_location_center .lp_agent_image_area_wrapper{left:0;right:0;height:93px;border-bottom:1px solid #d6d6d6;background:#fff;text-align:center;margin-bottom:10px;overflow:hidden;text-align:center}#lpChat .lp_location_center .lp_agent_image_area_wrapper .lp_image{height:100%;max-width:100%}#lpChat.lp_main_rtl *{direction:rtl;text-align:right}#lpChat.lp_main_ltr *{direction:ltr;text-align:left}#lpChat.lp_main_ltr .lp_rtl,#lpChat.lp_main_ltr .lp_rtl *,#lpChat.lp_main_rtl .lp_rtl,#lpChat.lp_main_rtl .lp_rtl *{direction:rtl;text-align:right}#lpChat.lp_main_ltr .lp_ltr,#lpChat.lp_main_ltr .lp_ltr *,#lpChat.lp_main_rtl .lp_ltr,#lpChat.lp_main_rtl .lp_ltr *{direction:ltr;text-align:left}#lpChat input[type=email],#lpChat input[type=number],#lpChat input[type=tel]{direction:ltr;text-align:left}#lpChat .lp_paging_wrapper{z-index:100;height:100%}#lpChat .lp_survey_area{position:absolute;top:0;bottom:0;left:0;right:0;z-index:120;background-color:#fdfdfd;overflow-y:auto;overflow-x:hidden}#lpChat .lp_survey_area .lp_survey_container{position:absolute;top:0;bottom:0px;left:0;right:0;overflow-x:hidden;overflow-y:auto}#lpChat .lp_survey_area .lp_survey_header_area{padding:10px 18px 10px 18px;margin-bottom:10px;border-bottom:1px solid #d6d6d6}#lpChat .lp_survey_area .lp_header_text{text-align:center;font-size:1.0em;word-break:break-word}#lpChat .lp_survey_area .lp_pages_area{position:relative;overflow-y:auto;width:100%;top:0;right:0;left:0}#lpChat .lp_survey_area .lp_pages_area .lp_content{margin:10px 0px 0px 0px;background:none}#lpChat .lp_survey_area .lp_pages_area .lp_content ::-webkit-input-placeholder{font:inherit;color:#323336;font-style:italic}#lpChat .lp_survey_area .lp_pages_area .lp_content :-moz-placeholder{font:inherit;color:#323336;font-style:italic}#lpChat .lp_survey_area .lp_pages_area .lp_content ::-moz-placeholder{font:inherit;color:#323336;font-style:italic}#lpChat .lp_survey_area .lp_pages_area .lp_content :-ms-input-placeholder{font:inherit;color:#323336;font-style:italic}#lpChat .lp_survey_area .lp_pages_area .lp_survey_header_error{margin-bottom:5px;padding:10px 15px 0px 15px}#lpChat .lp_survey_area .lp_pages_area .lp_question_wrapper{padding-bottom:10px;margin-bottom:5px;box-sizing:border-box}#lpChat .lp_survey_area .lp_pages_area .lp_question_wrapper .lp_question{margin-top:10px;margin-left:15px;margin-right:15px}#lpChat .lp_survey_area .lp_pages_area .lp_question_label{font-size:1.1em;color:inherit;word-wrap:break-word;overflow-y:visible;width:100%;text-indent:inherit}#lpChat .lp_survey_area .lp_pages_area .lp_mandatory{padding-left:3px}#lpChat .lp_survey_area .lp_pages_area input{font-size:1em}#lpChat .lp_survey_area .lp_pages_area .lp_input-field::-ms-clear{display:none}#lpChat .lp_survey_area .lp_pages_area .lp_input-field::-webkit-input-placeholder{color:#525252;opacity:1}#lpChat .lp_survey_area .lp_pages_area .lp_input-field:-ms-input-placeholder{color:#525252;opacity:1}#lpChat .lp_survey_area .lp_pages_area .lp_input-field::placeholder{color:#525252;opacity:1}#lpChat .lp_survey_area .lp_pages_area .lp_input-field:-ms-input-placeholder{color:#525252}#lpChat .lp_survey_area .lp_pages_area .lp_input-field::-ms-input-placeholder{color:#525252}#lpChat .lp_survey_area .lp_pages_area .lp_input-field{color:#525252;vertical-align:middle;background-color:white;border:1px solid gainsboro;border-radius:1px;box-sizing:border-box;width:100%;padding:6px 8px}#lpChat .lp_survey_area .lp_pages_area .lp_input-field:hover{border-color:#c1c2c3}#lpChat .lp_survey_area .lp_pages_area .lp_error .lp_input-field,#lpChat .lp_survey_area .lp_pages_area .lp_error .lp_textarea_field,#lpChat .lp_survey_area .lp_pages_area .lp_error .lp_select_field{border-color:#de0a23}#lpChat .lp_survey_area .lp_pages_area .lp_error .lp_checkbox_wrapper,#lpChat .lp_survey_area .lp_pages_area .lp_error .lp_radiobutton_wrapper{width:100%;border:1px solid #de0a23}#lpChat .lp_survey_area .lp_pages_area .lp_survey_header_error .lp_surveyError_wrapper,#lpChat .lp_survey_area .lp_pages_area .lp_question.lp_error .lp_surveyError_wrapper{margin-top:5px}#lpChat .lp_survey_area .lp_pages_area .lp_survey_header_error .lp_surveyError_wrapper .lp_error_text,#lpChat .lp_survey_area .lp_pages_area .lp_question.lp_error .lp_surveyError_wrapper .lp_error_text{color:#de0a23;display:inline-block;padding-left:3px;padding-right:3px;width:91%}#lpChat .lp_survey_area .lp_pages_area .lp_survey_header_error .lp_surveyError_wrapper .lp_error_img,#lpChat .lp_survey_area .lp_pages_area .lp_question.lp_error .lp_surveyError_wrapper .lp_error_img{float:left}#lpChat .lp_survey_area .lp_pages_area .lp_radio_button,#lpChat .lp_survey_area .lp_pages_area .lp_checkbox_button{width:100%;margin-top:7px;margin-left:3px;margin-right:3px}#lpChat .lp_survey_area .lp_pages_area .lp_radio_button label,#lpChat .lp_survey_area .lp_pages_area .lp_checkbox_button label{font-size:1em;padding:0px 5px;margin-top:-2px;width:90%;display:inline-block}#lpChat .lp_survey_area .lp_pages_area .lp_radio_button input,#lpChat .lp_survey_area .lp_pages_area .lp_radio_button label,#lpChat .lp_survey_area .lp_pages_area .lp_checkbox_button input,#lpChat .lp_survey_area .lp_pages_area .lp_checkbox_button label{vertical-align:top}#lpChat .lp_survey_area .lp_pages_area span.lp_radio_button{display:table}#lpChat .lp_survey_area .lp_pages_area .lp_radio_button input[type=radio]:checked+label,#lpChat .lp_survey_area .lp_pages_area .lp_radio_button input[type=radio]:hover+label,#lpChat .lp_survey_area .lp_pages_area .lp_checkbox_button input[type=checkbox]:checked+label,#lpChat .lp_survey_area .lp_pages_area .lp_checkbox_button input[type=checkbox]:hover+label{font-weight:bold}#lpChat .lp_survey_area .lp_pages_area .lp_textarea_field{color:#525252;padding:8px 8px;width:100%;background-color:white;resize:none;line-height:100%;height:60px;-moz-box-sizing:border-box;border:1px solid gainsboro}#lpChat .lp_survey_area .lp_pages_area .lp_select_field{width:100%;padding:3px 5px;border-radius:1px;border:1px solid gainsboro;color:#525252;height:auto;min-height:30px}.lp_mac_osx #lpChat .lp_survey_area .lp_pages_area .lp_select_field{height:30px}#lpChat .lp_survey_area .lp_pages_area .lp_select_field:first-child{color:#000}#lpChat .lp_survey_area .lp_buttons_area{direction:ltr;position:relative;text-align:center;height:55px;width:90%;margin-left:15px;margin-right:15px}#lpChat .lp_survey_area .lp_buttons_area button{padding:9px 6px;margin:2px;width:45%;min-width:57px;max-width:185px;font-size:1.1em;border:none;text-align:center;cursor:pointer;overflow:hidden;white-space:nowrap}#lpChat .lp_survey_area .lp_buttons_area .lp_cancel_button,#lpChat .lp_survey_area .lp_buttons_area .lp_prev_button{background:transparent;color:#5e5e5e;left:0}#lpChat .lp_survey_area .lp_buttons_area .lp_cancel_button{border-radius:2px}#lpChat .lp_survey_area .lp_buttons_area .lp_prev_button:disabled{color:#5e5e5e}#lpChat .lp_survey_area .lp_buttons_area .lp_next_button:disabled{color:#e5e5e5}#lpChat .lp_survey_area .lp_buttons_area .lp_submit_button:disabled{cursor:default;opacity:0.5}#lpChat .lp_survey_area .lp_buttons_area .lp_close_survey_button,#lpChat .lp_survey_area .lp_buttons_area .lp_next_button,#lpChat .lp_survey_area .lp_buttons_area .lp_submit_button{background-color:#0363ad;color:#ffffff;border-radius:2px}#lpChat .lp_survey_area .lp_buttons_area .lp_close_survey_button:disabled,#lpChat .lp_survey_area .lp_buttons_area .lp_next_button:disabled,#lpChat .lp_survey_area .lp_buttons_area .lp_submit_button:disabled{opacity:0.5;cursor:default}#lpChat .lp_survey_area .lp_buttons_area .lp_next_button,#lpChat .lp_survey_area .lp_buttons_area .lp_submit_button{right:0}#lpChat .lp_survey_area .lp_buttons_area .lp_close_survey_button{position:static}#lpChat .lp_survey_area .lp_buttons_area .lp_close_survey_button:hover,#lpChat .lp_survey_area .lp_buttons_area .lp_close_survey_button:focus,#lpChat .lp_survey_area .lp_buttons_area .lp_next_button:hover,#lpChat .lp_survey_area .lp_buttons_area .lp_next_button:focus,#lpChat .lp_survey_area .lp_buttons_area .lp_submit_button:hover,#lpChat .lp_survey_area .lp_buttons_area .lp_submit_button:focus{background-color:#025487}#lpChat .lp_survey_area .lp_buttons_area .lp_cancel_button:hover,#lpChat .lp_survey_area .lp_buttons_area .lp_cancel_button:focus{background:#F2F2F2;color:#58585a}.lp_lpIos #lpChat .lp_survey_area .lp_buttons_area .lp_cancel_button:hover,.lp_lpIos #lpChat .lp_survey_area .lp_buttons_area .lp_cancel_button:focus{background:#F2F2F2}#lpChat .lp_survey_area .lp_buttons_area .lp_cancel_button:disabled{color:#5e5e5e !important}#lpChat .lp_survey_area .lp_pager{display:none;text-align:center}#lpChat .lp_survey_area .lp_pager .lp_dot{border-radius:50%;height:8px;width:8px;background-color:#fff;display:inline-block;margin-left:3px;margin-right:3px;border:1px solid #e5e5e5}#lpChat .lp_survey_area .lp_pager .lp_dot.lp_selected{background:#5e5e5e}#lpChat .lp_survey_area .lp_survey_bottom_spacer{height:3px;box-shadow:-8px -1px 14px 2px rgba(255,255,255,0.95);position:absolute;background-color:#fdfdfd;width:100%;bottom:0;z-index:1000}#lpChat .lp_survey_area .lp_survey_view_container{position:relative;height:100%}#lpChat.lp_main_rtl .lp_survey_area .lp_pages_area .lp_survey_header_error .lp_surveyError_wrapper .lp_error_img,#lpChat.lp_main_rtl .lp_survey_area .lp_pages_area .lp_question.lp_error .lp_surveyError_wrapper .lp_error_img{float:right}#lpChat.lp_main_rtl .lp_csat_rater_stars{direction:ltr}#lpChat.lp_main_ltr .lp_csat_rater_stars{direction:rtl}#lpChat .lp_csat_rater *{text-align:center}#lpChat .lp_csat_rater_stars{list-style:none;padding:0;margin:15px 0;font-size:0}#lpChat .lp_csat_rater_star{display:inline-block;font-size:24px;text-decoration:none;padding:3px}#lpChat .lp_csat_rater_star:before{content:"☆"}#lpChat .lp_csat_rater_star:hover:before,#lpChat .lp_csat_rater_star:hover ~ .lp_csat_rater_star:before,#lpChat .lp_csat_rater_star.chosen:before,#lpChat .lp_csat_rater_star.chosen ~ .lp_csat_rater_star:before{content:"★"}#lpChat .lp_csat_rater_current_rating{height:16px;margin-bottom:10px}#lpChat .lp_csat_rater_current_rating:focus{width:50%;margin:auto;margin-bottom:10px}#lpChat .lp_survey_disclaimer{padding:20px 7px 0}#lpChat .lp_chatting-with-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:15px !important;height:15px !important}#lpChat .lp_chatting-with-icon.lp_icon-white img{top:-40px !important;left:-920px !important}#lpChat .lp_chatting-with-icon img{top:0px !important;left:-920px !important;position:absolute !important}#lpChat .lp_bottom-logo-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:105px !important;height:15px !important}#lpChat .lp_bottom-logo-icon.lp_icon-white img{top:-30px !important;left:-5px !important}#lpChat .lp_bottom-logo-icon img{top:-5px !important;left:-5px !important;position:absolute !important}#lpChat .lp_print-transcript-action-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_print-transcript-action-icon.lp_icon-white img{top:-40px !important;left:-80px !important}#lpChat .lp_print-transcript-action-icon img{top:0 !important;left:-80px !important;position:absolute !important}#lpChat .lp_email-transcript-action-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_email-transcript-action-icon.lp_icon-white img{top:-40px !important;left:-40px !important}#lpChat .lp_email-transcript-action-icon img{top:0 !important;left:-40px !important;position:absolute !important}#lpChat .lp_mute-action-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_mute-action-icon.lp_icon-white img{top:-40px !important;left:0px !important}#lpChat .lp_mute-action-icon img{top:0 !important;left:0px !important;position:absolute !important}#lpChat .lp_mark_urgency-action-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_mark_urgency-action-icon.lp_icon-white img{top:-40px !important;left:-1200px !important}#lpChat .lp_mark_urgency-action-icon img{top:0 !important;left:-1200px !important;position:absolute !important}#lpChat .lp_dismiss_urgency-action-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_dismiss_urgency-action-icon.lp_icon-white img{top:-40px !important;left:-1160px !important}#lpChat .lp_dismiss_urgency-action-icon img{top:0 !important;left:-1160px !important;position:absolute !important}#lpChat .lp_unmute-action-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_unmute-action-icon.lp_icon-white img{top:-40px !important;left:-680px !important}#lpChat .lp_unmute-action-icon img{top:0 !important;left:-680px !important;position:absolute !important}#lpChat .lp_actions-opened-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_actions-opened-icon.lp_icon-white img{top:-40px !important;left:-480px !important}#lpChat .lp_actions-opened-icon img{top:0 !important;left:-480px !important;position:absolute !important}#lpChat .lp_actions-closed-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_actions-closed-icon.lp_icon-white img{top:-40px !important;left:-520px !important}#lpChat .lp_actions-closed-icon img{top:0 !important;left:-520px !important;position:absolute !important}#lpChat .lp_actions-forget-me-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_actions-forget-me-icon.lp_icon-white img{top:-40px !important;left:-1600px !important}#lpChat .lp_actions-forget-me-icon img{top:0 !important;left:-1600px !important;position:absolute !important}#lpChat .lp_end-chat-action-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_end-chat-action-icon.lp_icon-white img{top:-40px !important;left:-120px !important}#lpChat .lp_end-chat-action-icon img{top:0 !important;left:-120px !important;position:absolute !important}#lpChat .lp_pop-out-action-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_pop-out-action-icon.lp_icon-white img{top:-40px !important;left:-840px !important}#lpChat .lp_pop-out-action-icon img{top:0 !important;left:-840px !important;position:absolute !important}#lpChat .lp_pop-in-action-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_pop-in-action-icon.lp_icon-white img{top:-40px !important;left:-880px !important}#lpChat .lp_pop-in-action-icon img{top:0 !important;left:-880px !important;position:absolute !important}#lpChat .lp_send-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_send-icon.lp_icon-white img{top:-40px !important;left:-560px !important}#lpChat .lp_send-icon img{top:0 !important;left:-560px !important;position:absolute !important}#lpChat .lp_pop-out-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_pop-out-icon.lp_icon-white img{top:-40px !important;left:-760px !important}#lpChat .lp_pop-out-icon img{top:0 !important;left:-760px !important;position:absolute !important}#lpChat .lp_pop-in-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_pop-in-icon.lp_icon-white img{top:-40px !important;left:-800px !important}#lpChat .lp_pop-in-icon img{top:0 !important;left:-800px !important;position:absolute !important}#lpChat .lp_close-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_close-icon.lp_icon-white img{top:-40px !important;left:-480px !important}#lpChat .lp_close-icon img{top:0 !important;left:-480px !important;position:absolute !important}#lpChat .lp_minimize-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_minimize-icon.lp_icon-white img{top:-40px !important;left:-600px !important}#lpChat .lp_minimize-icon img{top:0 !important;left:-600px !important;position:absolute !important}#lpChat .lp_maximize-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_maximize-icon.lp_icon-white img{top:-40px !important;left:-960px !important}#lpChat .lp_maximize-icon img{top:0 !important;left:-960px !important;position:absolute !important}#lpChat .lp_minimize-left-slider-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_minimize-left-slider-icon.lp_icon-white img{top:-40px !important;left:-1000px !important}#lpChat .lp_minimize-left-slider-icon img{top:0 !important;left:-1000px !important;position:absolute !important}#lpChat .lp_minimize-right-slider-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_minimize-right-slider-icon.lp_icon-white img{top:-40px !important;left:-1040px !important}#lpChat .lp_minimize-right-slider-icon img{top:0 !important;left:-1040px !important;position:absolute !important}#lpChat .lp-slider-icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp-slider-icon.lp_icon-white img{top:-40px !important;left:-720px !important}#lpChat .lp-slider-icon img{top:0 !important;left:-720px !important;position:absolute !important}#lpChat .lp_refresh_slider_icon{position:relative !important;display:inline-block;vertical-align:middle;overflow:hidden !important;width:22px !important;height:22px !important}#lpChat .lp_refresh_slider_icon.lp_icon-white img{top:-40px !important;left:-1080px !important}#lpChat .lp_refresh_slider_icon img{top:0 !important;left:-1080px !important;position:absolute !important}#lpChat .lp_maximized .lp_slider .lp_slider_container>*{height:100%;width:100%}#lpChat .lp_slider_animate_open.lp_maximized{box-shadow:0px 0px 16px 3px transparent !important;border:1px solid transparent !important}#lpChat .lp_slider_animate_open.lp_maximized .lp_slider{box-shadow:none !important;border:none !important}#lpChat .lp_maximized .lp_slider{position:absolute;top:0;overflow:hidden}#lpChat .lp_maximized .lp_slider .lp_slider_header{border:1px solid #d6d6d6;font-size:1.1em;width:100%;position:absolute;border-radius:5px 5px 0 0;height:36px;cursor:move}#lpChat .lp_maximized .lp_slider .lp_slider_header .lp_header-content-wrapper{width:100%}#lpChat .lp_maximized .lp_slider .lp_slider_header .lp_header-content-wrapper .lp_top-text{overflow:hidden;text-overflow:ellipsis;display:inline-block;margin-left:8px;max-width:calc(400px - 70px);white-space:nowrap}#lpChat .lp_maximized .lp_slider .lp_slider_header .lp_header-content-wrapper .lp_minimize{position:relative;float:right;right:10px;top:6px;background-color:transparent;cursor:pointer}#lpChat .lp_maximized .lp_slider .lp_slider_header .lp_header-content-wrapper .lp_refresh{position:relative;float:left;top:6px;left:5px;background-color:transparent;cursor:pointer}#lpChat .lp_maximized .lp_slider .lp_slider_container{position:absolute;background-color:white;right:0;left:0;bottom:0;top:36px}#lpChat .lp_external-window.lp_maximized.lp_slider_open{min-width:calc(280px + 400px);max-width:1000px}#lpChat .lp_external-window.lp_maximized.lp_slider_open .lp_slider{height:100%}#lpChat .lp_external-window.lp_maximized.lp_slider_open .lp_main{width:calc(100% - 400px);min-width:280px}#lpChat .lp_external-window.lp_maximized.lp_slider_open .lp_header{width:calc(100% - 400px);min-width:280px}#lpChat .lp_maximized.lp_right_slider .lp_slider{right:0}#lpChat .lp_maximized.lp_right_slider .lp_slider .lp_slider_header{box-shadow:inset 6px 0 5px -2px rgba(0,0,0,0.2);box-sizing:border-box}#lpChat .lp_maximized.lp_left_slider .lp_slider{right:280px}#lpChat .lp_maximized.lp_left_slider .lp_slider .lp_slider_header{box-shadow:inset -15px 1px 9px -12px rgba(0,0,0,0.2)}#lpChat .lp_maximized.lp_slider_open{width:calc(280px + 400px)}#lpChat .lp_maximized.lp_slider_open .lp_main{width:280px;border:1px solid #d6d6d6}#lpChat .lp_maximized.lp_slider_open .lp_header{width:280px}#lpChat .lp_maximized.lp_slider_open.lp_right_slider .lp_header{box-shadow:0px 0px 16px 3px rgba(0,0,0,0.2)}#lpChat .lp_maximized.lp_slider_open.lp_right_slider .lp_slider_container{box-shadow:inset 6px 0 5px -2px rgba(0,0,0,0.2);padding-left:5px}#lpChat .lp_maximized.lp_slider_open.lp_right_slider .lp_main,#lpChat .lp_maximized.lp_slider_open.lp_right_slider .lp_header{left:0;right:auto}#lpChat .lp_maximized.lp_slider_open.lp_left_slider .lp_main{left:auto}#lpChat .lp_maximized.lp_slider_open.lp_left_slider .lp_header{right:0px;box-shadow:0px 0px 16px 3px rgba(0,0,0,0.2)}#lpChat .lp_maximized.lp_slider_open.lp_left_slider .lp_slider_container{box-shadow:inset -15px 1px 9px -12px rgba(0,0,0,0.2);padding-right:5px}#lpChat .lp_maximized .lp_slider{width:400px;height:400px}#lpChat .lp_maximized .lp_slider .lp_slider_header .lp_title{padding:9px;display:inline-block;float:left;height:30px}#lpChat button.lp_refresh.lp_hidden{display:none}#lpChat button.lp_refresh:disabled{cursor:default}#lpChat button.lp_refresh:disabled img{opacity:0.5}#lpChat .submit_secure_form_state .secure_form_message,#lpChat .error_secure_form_state .secure_form_message,#lpChat .timeout_secure_form_state .secure_form_message,#lpChat .viewedOnAnotherTab_secure_form_state .secure_form_message{display:block}#lpChat .submit_secure_form_state iframe,#lpChat .error_secure_form_state iframe,#lpChat .timeout_secure_form_state iframe,#lpChat .viewedOnAnotherTab_secure_form_state iframe{display:none}#lpChat .send_secure_form_state .secure_form_message,#lpChat .viewed_secure_form_state .secure_form_message,#lpChat .received_secure_form_state .secure_form_message{display:none}#lpChat .send_secure_form_state iframe,#lpChat .viewed_secure_form_state iframe,#lpChat .received_secure_form_state iframe{display:block}#lpChat .lp_secure_form_iframe{border:none;width:100%;height:100%}#lpChat .secure_form_message{position:absolute;left:0;right:0;top:0;bottom:0;background-color:transparent;z-index:10000}#lpChat .secure_form_message .lp_title{padding:5px 40px 5px 40px;position:absolute;top:42%;color:inherit;font-size:1.2em;text-align:center;text-align:-webkit-center;width:100%}#lpChat .secure_form_message .lp_image{position:absolute;top:30%;left:50%;width:46px;height:46px;margin-left:-23px}#lpChat .lp_cobrowse_invitation_widget{padding:40px}#lpChat .lp_cobrowse_invitation_widget .lp_image{position:relative;left:50%;margin-left:-24px;margin-bottom:15px}#lpChat .lp_cobrowse_invitation_widget .lp_image img{width:48px;height:42px}#lpChat .lp_cobrowse_invitation_widget .lp_cb_invitation_text{font-size:16px;padding-bottom:20px;text-align:center;line-height:20px}#lpChat .lp_cobrowse_invitation_widget .lp_cb_invitation_text a:link{text-decoration:underline}#lpChat .lp_cobrowse_invitation_widget .lp_cb_button{float:none;border-radius:3px;border:1px solid #eb8200;font-size:1.1em;padding:6px 9px;margin-right:10px;margin-top:10px;min-width:80px;text-align:center}#lpChat .lp_cobrowse_invitation_widget .lp_cb_offer{text-align:center}#lpChat .lp_logo_area_wrapper{position:relative;border-bottom:1px solid #d6d6d6}#lpChat .lp_logo_area_wrapper .lp_logo_image_wrapper{max-width:100%;height:34px;line-height:normal}#lpChat .lp_logo_area_wrapper .lp_logo_image_wrapper .lp_image{vertical-align:middle;max-height:100%}#lpChat .lp_logo_area_wrapper .lp_logo_link{display:block;width:auto;height:34px;margin:2px}#lpChat .lp_logo_area_wrapper .lp_logo_link.disableLinkClass{cursor:default}#lpChat .lp_logo_top_margin{margin-top:34px}';
b=-1===b.indexOf("@@")&&b||this.loadResource(a+"EmbeddedStyle.css");C.addStyleTag(b,{id:"embedded"});q.call(this,{newValue:this.getModelParam(this.uiPath.STATE)});this.addLocalizationClasses()}});var D=lpTag.unifiedWindow.WrapperWindowExtenderBase.prototype;D.setWidgetSDKView=function(){C.addClass(this.titleDiv,this.LPClassesMap.lp_slider_gap);C.addClass(this.chattingWithIcon,"lp_hidden");this.sliderButton.title=this.translate("tooltip_open_widgets");a.call(this,this.models.chatModel.get(this.chatPath.SDK_BUTTON_ENABLE))};D.dispose=function(){this.appContext&&this.appContext.browserStateManager&&this.appContext.browserStateManager.off(this.appContext.browserStateManager.EVENT_NAME.FOCUS_CHANGE,v);lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};D.addLocalizationClasses=function(){var a=this.isLanguageRTL()?"lp_main_rtl":"lp_main_ltr",b=this.appContext.conf.engConf;C.addClass(this.mainWindow,a);"string"==typeof b.lang&&C.addClass(this.mainWindow,"lp_"+b.lang)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){if(!this.maxDragInstance||!this.maxDragInstance.draggingInMotion){this.preventDefault(a);this.changeMode(this.states.MINIMIZED,!0)}}function b(a){if(!this.minDragInstance||!this.minDragInstance.draggingInMotion){this.preventDefault(a);this.changeMode(this.states.MAXIMIZED,!0)}}function c(){var a=this.appContext.conf.unifiedConf,b=this.getModelParam(this.uiPath.WINDOW_EMBEDDED);a.poppedOut||a.external||(b?this.appContext.wrapperWindow.show():this.appContext.wrapperWindow.hide())}function d(){this.createKeyframe(this.LPClassesMap.hideMaximizedKeyframes,[{percent:0,animate:"bottom: 0;"},{percent:40,animate:"bottom: -400px;"},{percent:100,animate:"bottom: -400px;"}],400);this.createKeyframe(this.LPClassesMap.showMaximizedKeyframes,[{percent:0,animate:"bottom: -400px; -webkit-transform: scale(1, 1);"},{percent:40,animate:"bottom: -400px; -webkit-transform: scale(1, 1);"},{percent:60,animate:"bottom: 0; -webkit-transform: scale(0.98, 1.02);"},{percent:100,animate:"bottom: 0; -webkit-transform: scale(1, 1);"}],400);this.createKeyframe(this.LPClassesMap.hideMinimizedKeyframes,[{percent:0,animate:"bottom: 0;"},{percent:40,animate:"bottom: -80px;"},{percent:100,animate:"bottom: -80px;"}],200);this.createKeyframe(this.LPClassesMap.showMinimizedKeyframes,[{percent:0,animate:"bottom: -40px; -webkit-transform: scale(1, 1);"},{percent:40,animate:"bottom: -40px; -webkit-transform: scale(1, 1);"},{percent:60,animate:"bottom: 0; -webkit-transform: scale(0.98, 1.2);"},{percent:100,animate:"bottom: 0; -webkit-transform: scale(1, 1);"}],200)}function e(a){function b(a){return{left:a.left,right:a.right,bottom:0}}var c=b(a.newValue),d=i.call(this);c.display=this.maximizedVisible?"none":"block";this.css(this.minimizedView,c);c.display=this.maximizedVisible?"block":"none";this.css(this.maximizedView,c);this.logger.debug("_windowPositionChanged: special="+d+" maximizedVisible="+this.maximizedVisible,this.ControllerName)}function f(a){var b,c=this.getModelParam(this.uiPath.WINDOW_POSITION),d=c.left&&"auto"!==c.left?"left":"right",e=this.getComputedStyle(this.appContext.wrapperWindow.getMaximizedElement()).width;e=g(e);if(a&&a.width<g(c[d])+e){b=a.width>e?a.width-e-20:0;this.wasResized=!0;var f="right"===d?{right:b,bottom:0,left:"auto"}:{right:"auto",bottom:0,left:b};this.appContext.uiStateManager.setWindowPosition(f);this.wasResized=!1;this.logger.debug("_documentResized, window size:"+a.width+" position.right:"+c.right+"position.left:"+c.left,this.ControllerName)}}function g(a){var b=parseInt(a,10);return isNaN(b)?0:b}function h(a){this.logger.debug("_handleMaximizedStateChange: "+a.newValue,this.ControllerName);this.maximizedVisible=a?a.newValue:!0;this.maximizedVisible?j.call(this):k.call(this);this.loaded=!0}function i(){return!this.loaded||this.wasBlurred||this.wasResized?!0:!1}function j(a){this.logger.debug("Maximizing view desktop",this.ControllerName);o.call(this,l)}function k(){this.logger.debug("Minimizing view desktop",this.ControllerName);n.call(this,m)}function l(a){var b=this;this.logger.debug("_showMaximized",this.ControllerName);this.animateKeyframe({view:this.maximizedView,showBefore:!0,classname:this.LPClassesMap.showMaximizedKeyframes,showAnimation:!i.call(this),callback:function(){b.logger.debug("_showMaximized: animation complete",b.ControllerName);b.maximizedVisible=!0;b.appContext.events.trigger({appName:b.ControllerName,eventName:b.VCEvents.MAXIMIZE_VISIBLE});b.runCallback(a,b);b.focusOnElement(b.LPViewMap.minimizeButton,b.maximizedView)}})}function m(a){var b=this;this.logger.debug("_showMinimized",this.ControllerName);this.animateKeyframe({view:this.minimizedView,classname:this.LPClassesMap.showMinimizedKeyframes,showBefore:!0,showAnimation:!i.call(this),callback:function(){b.logger.debug("_showMinimized: animation complete",b.ControllerName);b.appContext.events.trigger({appName:b.ControllerName,eventName:b.VCEvents.MINIMIZE_VISIBLE});b.runCallback(a,b);b.focusOnElement(b.LPViewMap.maximizeButton,b.minimizedView)}})}function n(a){var b=this;this.logger.debug("_hideMaximized",this.ControllerName);this.animateKeyframe({view:this.maximizedView,classname:this.LPClassesMap.hideMaximizedKeyframes,showBefore:!0,hideAfter:!0,showAnimation:!i.call(this),callback:function(){b.maximizedVisible=!1;b.logger.debug("_hideMaximized: animation complete",b.ControllerName);b.runCallback(a,b)}})}function o(a){var b=this;this.logger.debug("_hideMinimized",this.ControllerName);this.animateKeyframe({view:this.minimizedView,classname:this.LPClassesMap.hideMinimizedKeyframes,showBefore:!0,hideAfter:!0,showAnimation:!i.call(this),callback:function(){b.logger.debug("_hideMinimized: animation complete",b.ControllerName);b.runCallback(a,b)}})}var p;lpTag.unifiedWindow.WrapperWindowExtender=lpTag.unifiedWindow.WrapperWindowExtenderBase.extend({ControllerName:"WrapperWindowExtender",LPClassesMap:{hideMaximizedKeyframes:"hide_maximized_keyframes",showMaximizedKeyframes:"show_maximized_keyframes",hideMinimizedKeyframes:"hide_minimized_keyframes",showMinimizedKeyframes:"show_minimized_keyframes"},initialize:function(){this.windowWidth=280;d.call(this)},events:function(){this.bindViewEvent({view:this.minimizedView,DOMEvent:"click",callback:b,context:this});this.bindViewEvent({inView:this.maximizedView,selector:this.LPViewMap.minimizeButton,DOMEvent:"click",callback:a,context:this});this.bindModel({path:this.uiPath.WINDOW_EMBEDDED,callback:c,context:this});this.bindModel({path:this.uiPath.WINDOW_MAXIMIZED,callback:h,context:this})},render:function(){var a=this.appContext.conf.unifiedConf;if(!a.poppedOut&&!a.external){this.appContext.browserStateManager.on(this.appContext.browserStateManager.EVENT_NAME.RESIZE,f,this);this.bindModel({path:this.uiPath.WINDOW_POSITION,callback:e,context:this});this.maxDragInstance=this.dragableView({view:this.appContext.wrapperWindow.getMaximizedElement(),anchor:this.getFirstElement(this.LPViewMap.header,this.maximizedView),container:document.body,horizontal:!0,vertical:!1,sticky:!0,stickyHorizontal:!1,stickyVertical:!1,onDragEnd:this.dragComplete,context:this});this.minDragInstance=this.dragableView({view:this.minimizedView,anchor:this.getFirstElement(this.LPViewMap.header,this.minimizedView),container:document.body,horizontal:!0,vertical:!1,sticky:!0,stickyHorizontal:!1,stickyVertical:!1,onDragEnd:this.dragComplete,context:this})}}});p=lpTag.unifiedWindow.WrapperWindowExtender.prototype;p.changeMode=function(a,b){b&&this.appContext.uiStateManager.setWindowState(a)};p.dispose=function(){this.appContext&&this.appContext.browserStateManager&&this.appContext.browserStateManager.off(this.appContext.browserStateManager.EVENT_NAME.RESIZE,f);lpTag.unifiedWindow.WrapperWindowExtenderBase.prototype.dispose.call(this)};p.dragComplete=function(a){this.dragging=a.dragging;this.dragging||this.appContext.uiStateManager.setWindowPosition({left:a.left,right:a.right,bottom:0})}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){if(this.headerText){var b=this.createView({template:"<div class='lp_lpview_survey_header lp_survey_header_area'><div class='lp_header_text lp_text'>{{text}}</div></div>",wrapWithDiv:!1,doNotAddChild:!0,textInjection:{text:this.headerText}});this.addView({viewToAdd:b,targetView:a,beforeView:a.firstChild})}}function b(a){return a&&a.isViewController}function c(){var a;a=this.parent.isCloseSurveyVisible?this.LPViewMap.closeSurveyButton:this.parent.isSubmitSurveyDisabled?this.LPViewMap.cancelButton:this.LPViewMap.submitButton;this.focusOnElement(a)}var d,e=lpTag.unifiedWindow.applicationUtils;lpTag.unifiedWindow.PagingViewControllerBase=lpTag.unifiedWindow.BaseViewController.extend({utils:lpTag.taglets.lpUtil,ControllerName:"PagingViewControllerBase",className:"lp_paging_wrapper",LPViewMap:{pagesArea:"^pages_area",pager:"^pager",prevButton:"^prev_button",nextButton:"^next_button",submitButton:"^submit_button",cancelButton:"^cancel_button",closeSurveyButton:"^close_survey_button"},LPClassesMap:{selected:"lp_selected"},initialize:function(a){this.headerText=a.headerText;this.appContext=a.appContext;this.submitFunc=a.submitCallback;this.cancelFunc=a.cancelCallback;this.validatorFunc=a.validatorCallback;this.dataContext=a.context;this.addClass(this.view,this.className);this.isLogicalSurvey=a.isLogicalSurvey;this.renderPages(a.pages);a.activeQuestions&&this.refresh(a.activeQuestions)},events:function(){this.bindViewEvent({selector:this.LPViewMap.submitButton,DOMEvent:"click",callback:this.submitClicked});this.bindViewEvent({selector:this.LPViewMap.cancelButton,DOMEvent:"click",callback:this.cancelClicked});this.bindViewEvent({selector:this.LPViewMap.closeSurveyButton,DOMEvent:"click",callback:this.cancelClicked});0===this.pages.length&&this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:c})},onInitialize:function(){0===this.pages.length&&c.call(this);this.toggleSubmitButtonAvailability()}});d=lpTag.unifiedWindow.PagingViewControllerBase.prototype;d.enableSubmit=function(a){var b=this.getFirstElement(this.LPViewMap.submitButton);b&&(a?b.removeAttribute("disabled"):b.setAttribute("disabled","disabled"))};d.submitClicked=function(){this.utils.runCallback(this.submitFunc,this.dataContext)};d.cancelClicked=function(){this.utils.runCallback(this.cancelFunc,this.dataContext)};d.renderPages=function(b){this.pages=[];if(0===b.length)a.call(this,this.getFirstElement(this.LPViewMap.pagesArea));else for(var c=0;c<b.length;c++)this.addPage(b[c],0===c)};d.refresh=function(a){};d.isIncludedId=function(a,b){var c=e.indexOf(a,b);return-1!==c};d.addPage=function(c,d){var e={};e.controller=b(c)?c:null;e.view=b(c)?c.view:c;e.view.style["-webkit-overflow-scrolling"]="touch";"undefined"!=typeof this.headerText&&d&&this.loadSingleResource("<div class='lp_lpview_survey_header lp_survey_header_area'><div class='lp_header_text lp_text'>{{text}}</div></div>",function(){a.call(this,e.view)});this.getFirstElement(this.LPViewMap.pagesArea).appendChild(e.view);this.pages.push(e)};d.displayButton=function(a,b){b?this.show({view:a,useClasses:!0}):this.hide({view:a,useClasses:!0})};d.toggleSubmitButtonAvailability=function(){this.setEnabled(!this.parent.isSubmitSurveyDisabled,this.LPViewMap.submitButton)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){var a,b;lpTag.unifiedWindow.PagingViewController=lpTag.unifiedWindow.PagingViewControllerBase.extend({ControllerName:"PagingViewController",events:function(){this.bindViewEvent({selector:this.LPViewMap.submitButton,DOMEvent:"keydown",callback:this.toggleWaitingForKeyUp});this.bindViewEvent({selector:this.LPViewMap.submitButton,DOMEvent:"keyup",callback:this.submitKeyUp});this.bindViewEvent({selector:this.LPViewMap.cancelButton,DOMEvent:"keydown",callback:this.toggleWaitingForKeyUp});this.bindViewEvent({selector:this.LPViewMap.cancelButton,DOMEvent:"keyup",callback:this.cancelKeyUp});this.bindViewEvent({selector:this.LPViewMap.closeSurveyButton,DOMEvent:"keydown",callback:this.toggleWaitingForKeyUp});this.bindViewEvent({selector:this.LPViewMap.closeSurveyButton,DOMEvent:"keyup",callback:this.cancelKeyUp})},render:function(){this.updateButtonsEnablement()}});a=lpTag.unifiedWindow.PagingViewController.prototype;b=lpTag.unifiedWindow.PagingViewControllerBase.prototype;a.updateButtonsEnablement=function(){this.displayButton(this.LPViewMap.prevButton,!1);this.displayButton(this.LPViewMap.nextButton,!1);this.displayButton(this.LPViewMap.submitButton,!this.parent.isCloseSurveyVisible);this.displayButton(this.LPViewMap.cancelButton,!this.parent.isCloseSurveyVisible);this.displayButton(this.LPViewMap.closeSurveyButton,this.parent.isCloseSurveyVisible)};a.submitClicked=function(a){this.waitingForKeyUp||b.submitClicked.call(this)};a.submitKeyUp=function(a){if(this.waitingForKeyUp){b.submitClicked.call(this);this.waitingForKeyUp=!1}};a.cancelClicked=function(a){this.waitingForKeyUp||b.cancelClicked.call(this)};a.cancelKeyUp=function(a){if(this.waitingForKeyUp){b.cancelClicked.call(this);this.waitingForKeyUp=!1}};a.toggleWaitingForKeyUp=function(a){13===a.keyCode&&(this.waitingForKeyUp=!0)};a.refresh=function(a){var b,c,d;if(a)for(var e=0;e<this.pages.length;e++){b=this.pages[e];c=this.isIncludedId(a,b.controller.question.id);d={view:b.view,useClasses:!0};c?this.show(d):this.hide(d)}};a.updateActivePages=function(a){this.refresh(a)}}();!function(){var a,b=lpTag.taglets.lpUtil;lpTag.unifiedWindow.SliderViewControllerBase=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"SliderViewControllerBase",applicationName:"SliderViewController",template:"<div class='lp_slider' data-lp-point='slider'><div class='lp_slider_header' data-lp-point='header' data-lp-cust-id='top'><div class='lp_header-content-wrapper'><button class='lp_refresh lp_hidden' data-lp-point='refresh' tabindex='0'><div class='lp_refresh_slider_icon' data-lp-point='refresh-slider-icon' data-lp-type='icon'><img src='{{iconsRepository}}/sprites_v1.png' alt='{{tooltip_refresh_slider}}' aria-hidden='true' data-lp-point='minimize-img'></div></button><div class='lp_title'><span data-lp-point='sliderHeaderText' data-lp-cust-id='top_text' class='lp_top-text'>{{sliderHeader}}</span></div><button class='lp_minimize' data-lp-point='minimize' tabindex='0'><div class='lp_minimize-right-slider-icon' data-lp-point='minimize-icon' data-lp-type='icon'><img src='{{iconsRepository}}/sprites_v1.png' alt='{{tooltip_minimize_slider}}' aria-hidden='true' data-lp-point='minimize-img'></div></button></div></div><div class='lp_slider_container' data-lp-point='container' data-lp-cust-id='surveyArea'></div></div>",isSliderOpen:!1,inProgress:!1,views:{},LPViewMap:{minimizeButton:"^minimize",minimizeImg:"^minimize-img",container:"^container",headerText:"^sliderHeaderText",header:"^header",slider:"^slider",minimizeIcon:"^minimize-icon",refreshButton:"^refresh"},LPClassesMap:{sliderOpen:"lp_slider_open"},initialize:function(a){var b=this.appContext.conf.widgetSDK;this.unifiedConf=this.appContext.conf.unifiedConf;this.maximized=this.appContext.wrapperWindow.getMaximizedElement();this.showRefreshButton=Array.isArray(b)&&(b[0].showRefreshButton===!0||"true"===b[0].showRefreshButton)},events:function(){this.bindViewEvent({inView:this.view,selector:this.LPViewMap.minimizeButton,DOMEvent:"click",callback:this.hideSlider,context:this});this.bindViewEvent({inView:this.view,selector:this.LPViewMap.refreshButton,DOMEvent:"click",callback:this.refreshView,context:this})},render:function(){this.hide()},setSliderToolbarViewByType:function(a){var c=this.getFirstElement(this.LPViewMap.refreshButton);c&&(a===lpTag.unifiedWindow.consts.slider.viewType.widgetSDKView&&this.showRefreshButton?b.removeClass(c,"lp_hidden"):b.addClass(c,"lp_hidden"))}});a=lpTag.unifiedWindow.SliderViewControllerBase.prototype;a.isInProgress=function(){return this.inProgress};a.addView=function(a,b,c,d,e){this.views[c]={view:a,header:b,type:d||""};e&&(this.views[c].callbacks=e);var f=this.getFirstElement(this.LPViewMap.container);f.appendChild(a);this.selectedViewId!==c&&this.hide(a)};a.removeView=function(a){if("object"==typeof this.views[a]){var b=this.getFirstElement(this.LPViewMap.container);b.removeChild(this.views[a].view);delete this.views[a]}};a.setSelectedView=function(a){var b;if("object"==typeof this.views[a]){this.setSliderToolbarViewByType(this.views[a].type);this.selectedViewId&&this.views[this.selectedViewId]&&this.hide(this.views[this.selectedViewId].view);this.selectedViewId=a;var c=this.getFirstElement(this.LPViewMap.slider),d=this.getFirstElement(this.LPViewMap.headerText,c);d.innerHTML=this.views[this.selectedViewId].header;b=this.views[this.selectedViewId];this.show(b.view);this.appContext.events.trigger({appName:"slider",eventName:this.VCEvents.SLIDER_VIEW_CHANGE,data:{id:this.selectedViewId,type:b.type}})}};a.getSelectedViewId=function(){return this.selectedViewId};a.getSelectedViewType=function(){return this.views&&this.views[this.selectedViewId]&&this.views[this.selectedViewId].type};a.hideSlider=function(){if(this.isVisible(this.view)){this.hide();this.removeClass(this.maximized,this.LPClassesMap.sliderOpen);this.isSliderOpen=!1;this.appContext.events.trigger({appName:"slider",eventName:this.VCEvents.SLIDER_CLOSED,data:this.views&&this.views[this.selectedViewId]})}};a.refreshView=function(a){var c=this.views[this.selectedViewId]&&this.views[this.selectedViewId].callbacks;a&&a.context;c&&this.isVisible(this.view)&&b.runCallback(c.reload,c.context,this.getFirstElement(a.eventSelector))};a.showSlider=function(){if(!this.isVisible(this.view)){this.addClass(this.maximized,this.LPClassesMap.sliderOpen);this.show();this.isSliderOpen=!0}};a.removeAllViews=function(){for(var a in this.views)this.views.hasOwnProperty(a)&&this.removeView(a)};a.focusOnMinimize=function(){var a=this.getFirstElement(this.LPViewMap.minimizeButton);a&&"function"==typeof a.focus&&a.focus()};a.dispose=function(){this.removeAllViews();this.hideSlider();lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();!function(){function a(){this.inProgress=!0;this.leftSlider=this.isExternal?this.leftSlider:h.call(this);this.addClass(this.maximized,this.leftSlider?this.LPClassesMap.leftSlider:this.LPClassesMap.rightSlider);this.addClass(this.maximized,this.LPClassesMap.sliderOpen);q.call(this,this.leftSlider);this.isExternal?k.call(this,!0):c.call(this)}function b(){this.inProgress=!0;this.isExternal?k.call(this,!1):d.call(this)}function c(){var a=this.getFirstElement(this.LPViewMap.slider);a.style.width=0;this.show();this.addClass(this.maximized,this.LPClassesMap.sliderAnimate);this.leftSlider||(a.style.right=H+"px");this.animateKeyframe({view:a,classname:this.leftSlider?this.LPClassesMap.showLeftSliderKeyframes:this.LPClassesMap.showRightSliderKeyframes,showAnimation:!0,showBefore:!0,callback:e})}function d(){var a=this.getFirstElement(this.LPViewMap.slider);this.addClass(this.maximized,this.LPClassesMap.sliderAnimate);this.animateKeyframe({view:a,classname:this.leftSlider?this.LPClassesMap.hideLeftSliderKeyframes:this.LPClassesMap.hideRightSliderKeyframes,showAnimation:!0,hideAfter:!0,callback:f})}function e(){var a=this.getFirstElement(this.LPViewMap.slider);a.style.width="";a.style.right="";this.removeClass(this.maximized,this.LPClassesMap.sliderAnimate);this.show();this.inProgress=!1}function f(){this.hide();this.removeClass(this.maximized,this.LPClassesMap.sliderOpen);this.removeClass(this.maximized,this.LPClassesMap.rightSlider);this.removeClass(this.maximized,this.LPClassesMap.leftSlider);this.removeClass(this.maximized,this.LPClassesMap.sliderAnimate);this.inProgress=!1;if(this.redraw){this.redraw=!1;a.call(this)}}function g(a){var c=a?a.newValue:!0;c||this.isSliderOpen&&b.call(this)}function h(a){var b=z.call(this,a);D=P.getWindowSize().width;return J>=D?this.leftSlider:i(b.right)?this.leftSlider?D-b.right-J>=0:this.isVisible(this.view)===!1&&b.right<=J:this.leftSlider?this.isVisible(this.view)===!0||b.left>=H:D-b.left-J<0}function i(a){var b=Number(a);return!isNaN(b)&&""!==a}function j(){F?F=!1:E=C(P.getWindowSize().width)}function k(a){if(this.isExternal)if(a){this.show();l(K,!0,e,this)}else l(E,!1,f,this)}function l(a,b,c,d){var e=P.getWindowSize(),f=e.width;if(b&&e.width<a-N||!b&&e.width>a){if(b){f+=M;f=f>a?a:f}else{f-=M;f=a>f?a:f}F=!0;window.resizeTo(f,e.height);setTimeout(m(a,f,b,c,d),O)}else{d.show();lpTag.taglets.lpUtil.runCallback(c,d)}}function m(a,b,c,d,e){return function(){var f=P.getWindowSize().width;b-N>f&&c&&window.moveBy(-M,0);l(a,c,d,e)}}function n(a){return function(){a.isVisible(a.view)&&window.resizeTo(C(E),P.getWindowSize().height)}}function o(){this.bindModel({path:this.uiPath.WINDOW_POSITION,callback:r,context:this})}function p(){this.unbindModel({path:this.uiPath.WINDOW_POSITION,callback:r,context:this})}function q(a){var b=this.getFirstElement(this.LPViewMap.minimizeIcon);this.removeClass(b,a?this.LPClassesMap.rightSliderMinimizeIcon:this.LPClassesMap.leftSliderMinimizeIcon);this.addClass(b,a?this.LPClassesMap.leftSliderMinimizeIcon:this.LPClassesMap.rightSliderMinimizeIcon)}function r(a,b){var c=z.call(this,a);D=P.getWindowSize().width;var d,e,f;if(b&&J>=D){f=this.leftSlider?"0px":"auto";e=this.leftSlider?"auto":"0px"}else if(h.call(this,a)){f=s(c,D);e="auto";d=this.isVisible(this.view)&&!this.leftSlider}else{e=t(c,D);f="auto";d=this.isVisible(this.view)&&this.leftSlider}u.call(this,d);this.appContext.uiStateManager.setWindowPosition({left:e,right:f,bottom:0,top:"auto"})}function s(a,b){var c=i(a.right)?a.right:b-(a.width+a.left);c=c>0?c:0;return c+"px"}function t(a,b){var c=i(a.left)?a.left:b-a.right-a.width;c=c>0?c:0;return c+"px"}function u(a){if(a){this.redraw=!0;b.call(this);this.redraw=!0}}function v(){this.isSliderOpen&&a.call(this)}function w(){this.createKeyframe(this.LPClassesMap.showLeftSliderKeyframes,x(5,[{prop:"width",asc:!0}],H),L);this.createKeyframe(this.LPClassesMap.showRightSliderKeyframes,x(5,[{prop:"width",asc:!0},{prop:"right",asc:!1}],H),L);this.createKeyframe(this.LPClassesMap.hideLeftSliderKeyframes,x(5,[{prop:"width",asc:!1}],H),L);this.createKeyframe(this.LPClassesMap.hideRightSliderKeyframes,x(5,[{prop:"width",asc:!1},{prop:"right",asc:!0}],H),L)}function x(a,b,c){var d,e=[];a-=1;for(var f=0;a>=f;f++){d={};d.percent=f*(100/a);d.animate=y(b,a,f,c);e.push(d)}return e}function y(a,b,c,d){for(var e,f="",g=0;g<a.length;g++){f+=a[g].prop+": ";e=a[g].asc?c*(100/b):(b-c)*(100/b);f+=Math.floor(e/100*d);f+="px; "}return f.trim()}function z(a){var b=this.getComputedStyle(this.minimized);return{right:A(a&&a.newValue.right,this.minimized.style.right),left:A(a&&a.newValue.left,this.minimized.style.left),width:B(b.width)}}function A(a,b){a=a||b;return"auto"===a?a:B(a)}function B(a){var b=parseInt(a,10);return isNaN(b)?"":b}function C(a){return I+10>a?I+10:a}var D,E,F,G,H=400,I=280,J=H+I,K=J+20,L=150,M=120,N=20,O=50,P=lpTag.unifiedWindow.applicationUtils;lpTag.unifiedWindow.SliderViewController=lpTag.unifiedWindow.SliderViewControllerBase.extend({ControllerName:"SliderViewController",LPClassesMap:{rightSlider:"lp_right_slider",leftSlider:"lp_left_slider",sliderAnimate:"lp_slider_animate_open",showLeftSliderKeyframes:"show_left_slider_animation",showRightSliderKeyframes:"show_right_slider_animation",hideLeftSliderKeyframes:"hide_left_slider_animation",hideRightSliderKeyframes:"hide_right_slider_animation",leftSliderMinimizeIcon:"lp_minimize-left-slider-icon",rightSliderMinimizeIcon:"lp_minimize-right-slider-icon"},initialize:function(a){this.minimized=this.appContext.wrapperWindow.getMinimizedElement();this.isExternal=this.appContext.conf.unifiedConf.poppedOut||this.unifiedConf.external;this.leftSlider=this.isExternal?!1:!0;this.isExternal&&this.appContext.browserStateManager.on(this.appContext.browserStateManager.EVENT_NAME.RESIZE,j,this);w.call(this)},events:function(){if(this.isExternal)window.onunload=n(this);else{this.bindModel({path:this.uiPath.WINDOW_MAXIMIZED,callback:g,context:this});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:v});this.bindModel({path:this.uiPath.WINDOW_EMBEDDED,callback:b,context:this})}},render:function(){this.isExternal||(this.dragInstance=this.dragableView({view:this.maximized,anchor:this.getFirstElement(this.LPViewMap.header),container:document.body,horizontal:!0,vertical:!1,sticky:!0,stickyHorizontal:!1,stickyVertical:!1,callback:this.dragComplete}));this.preventScroll({view:this.view});E=C(P.getWindowSize().width);this.hide()}});G=lpTag.unifiedWindow.SliderViewController.prototype;G.dragComplete=function(a){this.appContext.uiStateManager.setWindowPosition({left:a.left,right:a.right,bottom:0})};G.showSlider=function(){if(!this.isVisible(this.view)&&!this.inProgress){if(!this.isExternal){r.call(this,null,!0);o.call(this)}a.call(this);this.isSliderOpen=!0}};G.hideSlider=function(){if(this.isVisible(this.view)&&!this.inProgress){this.isSliderOpen=!1;b.call(this);this.isExternal||p.call(this);this.appContext.events.trigger({appName:"slider",eventName:this.VCEvents.SLIDER_CLOSED,data:this.views&&this.views[this.selectedViewId]})}};G.dispose=function(){this.removeAllViews();this.hideSlider();f.call(this);this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:v});this.appContext.browserStateManager.off(this.appContext.browserStateManager.EVENT_NAME.RESIZE,j);lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();!function(){function a(a){var d=this.appContext&&this.appContext.browserStateManager&&(!this.appContext.browserStateManager.isHidden()||this.appContext.browserStateManager.isFocus()),e=this.models.uiModel.get(this.uiPath.WINDOW_MAXIMIZED);d&&a>0?b.call(this,a):0>=a&&c.call(this);e||j.call(this)}function b(a){g.call(this,a);i.call(this);this.notificationCount=a}function c(){h.call(this);this.notificationCount=0}function d(){return f.call(this)+e.call(this)}function e(){var a=0;"number"==typeof this.widgetNotifications?a=this.widgetNotifications:this.models&&this.models.chatModel&&(a=this.models.chatModel.get(lpTag.unifiedWindow.chatModelPath.SDK_NOTIFICATIONS)||0);return a}function f(){var a=0,b=this.getModelParam(this.chatPath.LINES)||[],c=this.getModelParam(this.uiPath.LAST_LINE_VIEWED);if(c)for(var d=b.length-1;d>=0;d--){if(b[d]["@id"]===c["@id"]&&b[d].convId===c.convId)return a;isNaN(b[d]["@id"])||"agent"!==b[d].source||b[d].history||a++}return 0}function g(a){var b,c=1===a?this.translate("tooltip_Message"):this.translate("tooltip_Messages"),d=this.getFirstElement(this.LPViewMap.notificationText);this.translator.extendDictionary({notificationCount:a,notificationMsg:c},{locale:this.engConf.lang});b=this.translate("tooltip_NewMessageNotification");d.innerHTML=""+a;d.title=b;this.show({view:this.LPViewMap.notificationCounter,useClasses:!0})}function h(){this.hide({view:this.LPViewMap.notificationCounter,useClasses:!0})}function i(){this.appContext.deviceDetector.isDesktop()?this.shakeX(this.view):this.shakeY(this.view)}function j(){this.appContext.events.trigger({appName:this.unifiedWindowAppName,eventName:"notification",global:!0,data:{count:this.notificationCount}})}function k(){var a=d.call(this);if(a){c.call(this);j.call(this)}}var l;lpTag.unifiedWindow.MinimizedViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"MinimizedViewController",applicationName:"minimized_view",LPViewMap:{notificationText:"^notification_text",notificationCounter:"^notification_counter"},LPClassesMap:{visible:"lp_visible"},initialize:function(a){this.models=a.models;this.unifiedWindowAppName=lpTag.unifiedWindow.apps.UNIFIED_WINDOW;this.appEvents=this.appContext.events;this.windowConf=this.appContext.conf.windowConf;this.unifiedConf=this.appContext.conf.unifiedConf;this.engConf=this.appContext.conf.engConf;this.widgetNotifications=0},events:function(){this.bindModel({path:this.chatPath.LINES,context:this,callback:this.checkNotificationCount});this.bindModel({path:this.uiPath.LAST_LINE_VIEWED,context:this,callback:this.checkNotificationCount});this.bindModel({path:lpTag.unifiedWindow.chatModelPath.SDK_NOTIFICATIONS,context:this,callback:this.onWidgetNotifications});this.appEvents.bind({appName:this.unifiedWindowAppName,eventName:lpTag.unifiedWindow.events.uiState.MINIMIZED,context:this,func:this.checkNotificationCount});this.appEvents.bind({appName:this.unifiedWindowAppName,eventName:lpTag.unifiedWindow.events.uiState.MAXIMIZED,context:this,func:k});this.appContext.browserStateManager.on(this.appContext.browserStateManager.EVENT_NAME.FOCUS_CHANGE,this.checkNotificationCount,this)},render:function(){this.checkNotificationCount()}});l=lpTag.unifiedWindow.MinimizedViewController.prototype;l.onWidgetNotifications=function(a){this.widgetNotifications=a&&"number"==typeof a.newValue&&a.newValue||0;this.checkNotificationCount()};l.checkNotificationCount=function(){var b=d.call(this),c="undefined"==typeof this.notificationCount||this.notificationCount!==b;c&&a.call(this,b)};l.dispose=function(){this.appContext&&this.appContext.browserStateManager&&this.appContext.browserStateManager.off(this.appContext.browserStateManager.EVENT_NAME.FOCUS_CHANGE,this.checkNotificationCount);lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();!function(){function a(a,b,c){this.createView({template:"<div class='lp_lpview_mp lp_thank_you_container' data-lp-cust-id='dialogArea' role='alert'><div class='lp_image'><img src='{{imagesRepository}}/thank-you-dark.png' alt=''></div><div class='lp_lpview_title lp_title'>{{message}}</div></div>",target:this.LPViewMap.mainArea,wrapWithDiv:!1,textInjection:a,callback:b,context:c})}function b(a){return function(b){var d=c.bind(a);a.thankYouView=b;a.bindViewEvent({view:a.thankYouView,DOMEvent:"click",callback:d});a.animate(b,{duration:a.fadeInTimeout},null);a.appContext.events.trigger({appName:a.ControllerName,eventName:a.VCEvents.THANK_YOU_PAGE});a.closeThankYouTimeout=setTimeout(d,a.thankYouTimeout)}}function c(){this.rendered&&this.closeThankYouPage()}function d(a){var b=a&&a.newValue;b?this.addClass(this.view,this.LPClassesMap.actionsVisibility):this.removeClass(this.view,this.LPClassesMap.actionsVisibility)}function e(){if(!this.chatDOMAdded){if(this.addLogo){this.logoVC=new lpTag.unifiedWindow.LogoViewController({appContext:this.appContext,parent:this});s.addClass(this.getFirstElement(this.LPViewMap.mainArea),this.LPClassesMap.logo_top_margin);this.addViewController({viewController:this.logoVC,target:this.LPViewMap.mainArea})}this.transcriptVC=new lpTag.unifiedWindow.TranscriptViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1});this.chatVC=new lpTag.unifiedWindow.ChatViewController({models:this.models,appContext:this.appContext,textInjection:this.unifiedConf,wrapWithDiv:!1,resizeEvent:{onResize:this.onChatVCResize,onResizeContext:this,transitionView:this.view}});this.addViewController({viewController:this.transcriptVC,target:this.LPViewMap.engagementArea});this.addViewController({viewController:this.chatVC,target:this.LPViewMap.bottomArea});this.addViewController({viewController:this.coBrowseVC});this.transcriptVC.show();this.chatVC.show();this.chatDOMAdded=!0}}function f(a,b){j.call(this);this.chatVC&&this.chatVC.closeActions();this.survey=new lpTag.unifiedWindow.SurveyViewController({models:this.models,appContext:this.appContext,target:this.LPViewMap.mainArea,survey:a,surveyType:b,defaultSelect:this.translate("defaultSelect"),iconsRepository:this.unifiedConf.iconsRepository,imagesRepository:this.unifiedConf.imagesRepository});this.hideTranscriptArea();this.addViewController(this.survey)}function g(a){var b=a.data;b.appContext=this.appContext;b.target=this.getFirstElement(this.LPViewMap.mainArea);b.wrapWithDiv=!1;var c=new lpTag.unifiedWindow[b.ControllerName](b);this.addViewController({
viewController:c,target:b.target});h.call(this,!1);return c}function h(a){if(a){this.show(this.bottomArea);this.show(this.engagementArea)}else{this.hide(this.bottomArea);this.hide(this.engagementArea)}}function i(){h.call(this,!0)}function j(){this.appContext.wrapperWindow.removeMessage(!0)}function k(){this.connectionUnavailable=!0;this.showTooltip({text:this.translate("tooltip_ConnectionIssue"),type:this.tooltipType.notification})}function l(a){var b,c=a.channelType;c===lpTag.unifiedWindow.consts.engagementTypes.CHAT_ENGAGEMENT?b="tooltip_CloseToStartConversation":c===lpTag.unifiedWindow.consts.engagementTypes.MESSAGING_ENGAGEMENT&&(b="tooltip_CloseToStartChat");this.showTooltip({text:this.translate(b),type:this.tooltipType.notification,tooltipTimeout:5e3})}function m(){this.showTooltip({text:this.translate("startConversationError"),type:this.tooltipType.notification})}function n(){this.animate(this.tooltip,{duration:this.fadeOutTimeout,opacity:"0"},function(){if(this.tooltip){this.tooltip.parentNode.removeChild(this.tooltip);delete this.tooltip}})}function o(){if(this.connectionUnavailable){this.connectionUnavailable=!1;this.showTooltip({text:this.translate("tooltip_ConnectionReEstablished"),type:this.tooltipType.success,tooltipTimeout:3e3})}}function p(){var a=this;this.appContext.wrapperWindow.showClose(!1);g.call(this,{context:this,data:{header_key:"relogin",appContext:this.appContext,callbackTimeout:6e3,ControllerName:lpTag.unifiedWindow.ReauthenticationDialogViewController.ControllerName,callback:function(){window.location.href=a.appContext.appConfigurationManager.getExternalResourceURL(a.appContext.conf.engConf,a.appContext.conf.unifiedConf,a.appContext.conf.unifiedConf.poppedOut,!0)}}})}function q(a){if(a&&"SKIPPED"===a.status){this.closeSurvey();this.showTranscriptArea()}}var r,s=lpTag.taglets.lpUtil;lpTag.unifiedWindow.MaximizedViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"MaximizedViewController",applicationName:"maximize_view",template:"<div class='lp_lpview_mp lp_main_area' data-lp-point='main_area'><div class='lp_wait lpHide' data-lp-point='wait'></div><div class='lp_location_center' data-lp-point='engagement_area'></div><div class='lp_location_bottom' data-lp-point='bottom' data-lp-cust-id='input'></div></div>",thankYouTimeout:3e3,fadeOutTimeout:500,fadeInTimeout:150,endedHash:"#RIP",tooltipType:{notification:"notification",success:"success"},LPViewMap:{mainArea:"^main_area",engagementArea:"^engagement_area",waitArea:"^wait",locationBottom:"^bottom",bottomArea:".lp_location_bottom",mainWindow:"^maximized"},LPClassesMap:{actionsVisibility:"lp_actions_visible",noAnimation:"lp_no-animation",logo_top_margin:"lp_logo_top_margin"},initialize:function(a){this.transcriptState={isShownAfterChatEnd:!1};this.models=a.models;this.slider=a.slider;this.unifiedConf=this.appContext.conf.unifiedConf;this.chatDOMAdded=!1;this.addLogo=this.appContext.conf.windowConf&&this.appContext.conf.windowConf.logoPinToTop},events:function(){this.appContext.events.bind({appName:"*",eventName:this.VCEvents.DIALOG,context:this,func:g});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.DIALOG_CLOSED,context:this,func:i});this.appContext.events.bind({appName:"tooltip",eventName:"show",func:this.showTooltip,context:this});this.appContext.events.bind({appName:"*",eventName:this.EventName.application.PROCESSING,func:this.showWait,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.EventName.application.POST_CHAT_SURVEY,func:q,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.chat.MULTIPLE_CHANNELS_REQUESTED,func:l,context:this});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.CHAT,eventName:lpTag.unifiedWindow.events.chat.FAILED_START_CONVERSATION,func:m,context:this});this.bindModel({path:this.chatPath.SURVEYS_PRECHAT,callback:this.handlePreChatSurvey,context:this});this.bindModel({path:this.chatPath.SURVEYS_EXIT,callback:this.handleExitSurvey,context:this});this.bindModel({path:this.chatPath.SURVEYS_OFFLINE,callback:this.handleOfflineSurvey,context:this});this.bindModel({path:this.uiPath.STATE,callback:this.stateChanged,context:this});this.bindModel({path:this.uiPath.ACTIONS_VISIBLE,callback:d,context:this})},render:function(){if(!this.rendered){this.rendered=!0;this.mainWindow=this.getFirstElement(this.LPViewMap.mainWindow);this.engagementArea=this.getFirstElement(this.LPViewMap.engagementArea);this.bottomArea=this.getFirstElement(this.LPViewMap.locationBottom);this.waitArea=this.getFirstElement(this.LPViewMap.waitArea);this.createView({template:"<table class='lp_centralizer'><tbody><td><div class='lp_rotator-container'><div class='lp_rotator-container-bg'></div><div class='lp_rotator'><img src='{{imagesRepository}}/{{imageUrl}}' alt='{{imageAltText}}' role='alert'></div></div></td></tbody></table>",target:this.waitArea,wrapWithDiv:!1,textInjection:{imagesRepository:this.unifiedConf.imagesRepository,imageUrl:"loader_on_warmGray5_75.gif"}});this.addClass(this.bottomArea,this.LPClassesMap.noAnimation,500);this.addClass(this.engagementArea,this.LPClassesMap.noAnimation,500)}}});r=lpTag.unifiedWindow.MaximizedViewController.prototype;r.showWait=function(a){a="undefined"==typeof a?!0:a;var b={view:this.waitArea,useClasses:!0};if(a){this.closeSurvey();j.call(this);this.appContext.wrapperWindow.setTitle(this.translate("connecting"));this.show(b)}else this.hide(b)};r.disposeChatViews=function(){this.appContext.conf.widgetSDK?this.slider.getSelectedViewType()!==lpTag.unifiedWindow.consts.slider.viewType.widgetSDKView&&this.slider.hideSlider():this.slider.dispose();this.secureFormManagerVC.dispose();this.cobrowseInvitationVC.dispose()};r.addChatViews=function(){this.secureFormManagerVC=this.secureFormManagerVC||new lpTag.unifiedWindow.SecureFormsManagerViewController({models:this.models,appContext:this.appContext,sliderAPI:this.slider});this.cobrowseInvitationVC=this.cobrowseInvitationVC||new lpTag.unifiedWindow.CoBrowseInvitationManagerViewController({models:this.models,appContext:this.appContext,sliderAPI:this.slider})};r.handlePreChatSurvey=function(a){f.call(this,a,lpTag.unifiedWindow.SurveyType.PRE_CHAT)};r.handleExitSurvey=function(a){f.call(this,a,lpTag.unifiedWindow.SurveyType.EXIT_CHAT)};r.handleOfflineSurvey=function(a){f.call(this,a,lpTag.unifiedWindow.SurveyType.OFFLINE)};r.showTranscriptArea=function(){this.show(this.engagementArea);this.show(this.LPViewMap.locationBottom);this.chatVC&&(this.chatVC.transcriptWasShown=!0)};r.hideTranscriptArea=function(){this.hide(this.engagementArea);this.hide(this.LPViewMap.locationBottom)};r.stateChanged=function(a){var b=a.newValue;switch(b){case lpTag.unifiedWindow.State.APP_ENDED:case lpTag.unifiedWindow.State.NOT_FOUND:this.chatVC&&this.chatVC.closeActions();this.closeSurvey();this.showThankYouPage();break;case lpTag.unifiedWindow.State.REQUESTED:this.closeSurvey();break;case lpTag.unifiedWindow.State.WAITING:this.showWait(!1);j.call(this);this.closeSurvey();e.call(this);this.showTranscriptArea();this.addChatViews();break;case lpTag.unifiedWindow.State.CHATTING:this.showWait(!1);j.call(this);this.closeSurvey();e.call(this);this.showTranscriptArea();this.addChatViews();this.transcriptState.isShownAfterChatEnd=!0;break;case lpTag.unifiedWindow.State.POST_CHAT:this.showWait(!1);e.call(this);this.showTranscriptArea();this.transcriptState.isShownAfterChatEnd=!0;break;case lpTag.unifiedWindow.State.ENDED:this.chatVC&&this.chatVC.agentIsTyping(!1);this.disposeChatViews();break;case lpTag.unifiedWindow.State.AUTH_ERROR:this.dispose();break;case lpTag.unifiedWindow.State.CONNECTION_ISSUE:k.call(this);break;case lpTag.unifiedWindow.State.RESTART_AUTHENTICATION:p.call(this)}b!==lpTag.unifiedWindow.State.CONNECTION_ISSUE&&o.call(this)};r.closeSurvey=function(){if(this.survey){this.removeViewController(this.survey);this.survey=null}};r.showThankYouPage=function(){var c=b(this),d={imagesRepository:this.appContext.conf.unifiedConf.imagesRepository,message:this.appContext.translator.translate("thankYouMessage")};this.thankYouView||a.call(this,d,c,this)};r.closeThankYouPage=function(){var a=this;this.closeThankYouTimeout&&clearTimeout(this.closeThankYouTimeout);!this.unifiedConf.poppedOut&&!this.unifiedConf.external||s.getPropertyFromObject(this.appContext,"conf.engConf.async")||(window.location.hash=this.endedHash);if(this.transcriptState.isShownAfterChatEnd)this.animate(this.thankYouView,{duration:this.fadeOutTimeout,opacity:"0"},function(){a.hide(a.thankYouView);a.removeView(a.thankYouView);a.thankYouView=null;a.showTranscriptArea()});else if(!this.unifiedConf.poppedOut&&!this.unifiedConf.external){a.hide(a.thankYouView);a.removeView(a.thankYouView);a.thankYouView=null;a.appContext.events.trigger({appName:"Application",eventName:a.EventName.application.ENDED})}};r.showTooltip=function(a){function b(b){var d={duration:c.fadeInTimeout};d.opacity=a.type===c.tooltipType.success?"1":"0.92";c.animate(b,d,null);isNaN(a.tooltipTimeout)||(c.closeTooltip=setTimeout(function(){n.call(c)},a.tooltipTimeout))}var c=this;c.getTooltip(a.text,a.type,b)};r.getTooltip=function(a,b,c){var d=this;this.tooltip&&this.tooltip.parentNode.removeChild(this.tooltip);this.createView({template:"<div class='lp_tooltip lp_tooltip_{{type}}'><div class='lp_title' role='log' aria-live='assertive' aria-relevant='all' aria-atomic='false'>{{text}}</div></div>",target:this.LPViewMap.mainArea,wrapWithDiv:!1,textInjection:{text:a,type:b||this.tooltipType.notification},callback:function(a){d.tooltip=a;c&&"function"==typeof c&&c(d.tooltip)}});return this.tooltip};r.onChatVCResize=function(a){this.bottomArea.style.height=a.bottomAreaSize+"px";this.engagementArea.style.height="calc(100% - "+(a.bottomAreaSize+a.actionsAreaSize+15)+"px)"}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b=a.newValue;if(Array.isArray(this.enableState)&&this.enableState.indexOf(b)>=0||this.enableState===b)this.enable();else if(Array.isArray(this.disableState)&&this.disableState.indexOf(b)>=0||this.disableState===b)this.disable();else if(this.enableState||this.disableState||this.disableOnEnd||!this.enableOnStart)switch(b){case lpTag.unifiedWindow.State.APP_ENDED:case lpTag.unifiedWindow.State.NOT_FOUND:case lpTag.unifiedWindow.State.ERROR:case lpTag.unifiedWindow.State.POST_CHAT:this.disableOnEnd&&this.disable();break;case lpTag.unifiedWindow.State.WAITING:case lpTag.unifiedWindow.State.CHATTING:this.enableOnStart&&this.enable()}else this.enable()}function b(a){var b=a.context,c={context:b,data:{}};b.clicked&&!1===b.clicked.call(b,c)||b.appContext.events.trigger({appName:b.ControllerName,eventName:b.VCEvents.CLICKED,data:c})}function c(a,b){a.innerText?a.innerText=b:a.innerHTML=b}function d(a,b){if(a){a.alt=b;a.setAttribute("aria-hidden","true")}}function e(b){var c=this.getModelParam(this.uiPath.STATE);b.visible?a.call(this,{newValue:c}):this.shouldDisableOnActionsHidden&&this.disable();this.view.setAttribute("aria-hidden",(!b.visible).toString())}var f;lpTag.unifiedWindow.ActionViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ActionViewController",template:"<button class='lp_action_item' type='button' aria-hidden='true' disabled='disabled'><div class='lp_action_wrapper' aria-hidden='true'><div data-lp-point='icon' class='lp_{{className}}' data-lp-type='icon'><img src='{{iconsRepository}}/sprites_v1.png'></div><div class='lp_title' data-lp-point='title' data-lp-cust-id='actionsMenu_actionItem_text'>{{title}}</div></div></button>",iconClass:"",shouldDisableOnActionsHidden:!0,LPViewMap:{title:"^title",icon:"^icon"},initialize:function(a){this.models=a.models;this.isEnabled=!0;this.icon=this.getFirstElement(this.LPViewMap.icon)},events:function(){this.bindModel({path:this.uiPath.STATE,callback:a,context:this});this.bindViewEvent({view:this.view,DOMEvent:"click",callback:b});this.appContext.events.bind({appName:"*",eventName:this.EventName.uiState.ACTIONS_TOGGLE,context:this,func:e})},render:function(){this.setTitle();this.setIconClass();"undefined"!=typeof this.isEnabled&&this.setActionState(this.isEnabled)}});f=lpTag.unifiedWindow.ActionViewController.prototype;f.setIconClass=function(){this.iconClass&&this.icon&&this.addClass(this.icon,this.iconClass)};f.setTitle=function(a){var b=a||this.translate(this.title),e=this.getFirstElement(this.LPViewMap.title);e?c(e,b):this.view.title=b;this.view.setAttribute("aria-label",b);d(this.icon,b)};f.enableAction=function(){this.view.removeAttribute("disabled")};f.disableAction=function(){this.view.setAttribute("disabled","disabled")};f.setActionState=function(a){a?this.enableAction():this.disableAction()};f.setIconURL=function(a){if(this.icon){a.indexOf("/")<0&&(a=this.appContext.conf.unifiedConf.iconsRepository+"/"+a);this.icon.width=this.iconWidth;this.icon.height=this.iconHeight;this.icon.src=a}};f.disable=function(){if(this.isEnabled){this.isEnabled=!1;this.setActionState(this.isEnabled,this.iconDisabled)}};f.enable=function(){if(!this.isEnabled){this.isEnabled=!0;this.setActionState(this.isEnabled,this.iconEnabled)}};f.focusOnView=function(){this.view.focus()}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};window.lpTag.unifiedWindow.actions=window.lpTag.unifiedWindow.actions||{};!function(){var a;lpTag.unifiedWindow.actions.MuteSoundAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"MuteSoundAction",applicationType:"MuteSoundAction",titles:{mute:"MuteSoundAction",unMute:"UnmuteSoundAction"},title:"MuteSoundAction",isEnabled:!0,disableOnEnd:!0,enableState:[lpTag.unifiedWindow.State.WAITING,lpTag.unifiedWindow.State.CHATTING],iconClasses:{mute:"lp_mute-action-icon",unmute:"lp_unmute-action-icon"},initialize:function(){var a=this.getModelParam(this.uiPath.WINDOW_SOUND);this.setIconClass(a)},events:function(){this.bindModel({path:this.uiPath.WINDOW_SOUND,callback:this.soundStateChanged})}});a=lpTag.unifiedWindow.actions.MuteSoundAction.prototype;a.setIconClass=function(a){this.removeClass(this.icon,a?this.iconClasses.unmute:this.iconClasses.mute);this.addClass(this.icon,a?this.iconClasses.mute:this.iconClasses.unmute)};a.clicked=function(){this.isEnabled&&this.appContext.uiStateManager.setSoundState(!this.soundMuted)};a.soundStateChanged=function(a){if(a&&a.newValue!==this.soundMuted){this.soundMuted=a.newValue;this.setIconClass(this.soundMuted);this.setTitle(this.soundMuted?this.translate(this.titles.mute):this.translate(this.titles.unMute));this.setActionState(this.isEnabled,this.isEnabled?this.iconEnabled:this.iconDisabled)}}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};window.lpTag.unifiedWindow.actions=window.lpTag.unifiedWindow.actions||{};!function(){function a(a){var d,e,f="",h="";if(a){this.isAsync&&(a=j.sortByKeyValue(a,"time"));for(var i=0;i<a.length;++i){d=c.call(this,a[i]);d&&(f+=d.innerHTML)}e=window.open("","_blank","scrollbars=yes, resizable=yes, left=0, top=0, width=600, height=600");h=b();e.document.head.innerHTML=h;e.document.body.innerHTML=f;g.call(this,e.document.body,this.isLanguageRTL());e.print()}}function b(){return"<head><style>"+i+"</style></head>"}function c(a){var b,c,g,h=d.call(this,a)?this.templateRepository.systemLine:this.templateRepository.line;if(a.time){b=lpTag.lpUtils.getTime(a.time,this.getMonthNames(),this.translate("dayMonthGap"),this.translate("daySuffix"));this.translator.extendDictionary({time:b},{locale:this.appContext.conf.engConf.lang})}c=e.call(this,a);c&&c.trim()&&(g=this.createView({template:h,wrapWithDiv:!0,doNotAddChild:!0,textInjection:{source:f.call(this,a),text:c,time:b||""}}));return g}function d(a){return"system"===a.source&&this.appContext.conf.engConf.async===!0}function e(a){var b;if(a.textKey){a.dictionaryKey&&this.translator.extendDictionary(a.dictionaryKey,{locale:this.appContext.conf.engConf.lang});b=this.translate(a.textKey)}else b=!b&&a.json||a.type===lpTag.unifiedWindow.consts.chatEvents.RICH_CONTENT?this.translate(this.richContentSentKey):this.sanitizeText(a.text).text;return b}function f(a){var b="";switch(a.source){case"agent":b="info"===a.by?this.translate("info"):a.by;break;case"visitor":b=this.getModelParam(this.chatPath.VISITOR_NAME);break;case"system":b=this.translate("info")}return b}function g(a,b){if(b){a.style.direction="rtl";a.style.textAlign="right"}else{a.style.direction="ltr";a.style.textAlign="left"}}var h,i=".lp_print_line_text DIV {display: inline;}",j=lpTag.unifiedWindow.applicationUtils;lpTag.unifiedWindow.actions.PrintTranscriptAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"PrintTranscriptAction",applicationType:"PrintTranscriptAction",iconClass:"lp_print-transcript-action-icon",title:"PrintTranscriptAction",richContentSentKey:"richContentSent",templateRepository:{line:"<div class='lp_print_line'><div class='lp_print__line_time'>{{time}}</div><div class='lp_print_line_text'><span>{{source}}: {{text}}</span></div></div>",systemLine:"<div class='lp_print_line'><div class='lp_print_line_text'><span>{{source}}: {{text}}</span></div></div>"},enableOnStart:!0,initialize:function(){this.isAsync=this.appContext.conf.engConf.async}});h=lpTag.unifiedWindow.actions.PrintTranscriptAction.prototype;h.clicked=function(){var a=this.getModelParam(this.chatPath.LINES);this.printLines(a)};h.printLines=function(b){var c=this;this.loadResource(this.templateRepository.line,function(){a.call(c,b)})}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};window.lpTag.unifiedWindow.actions=window.lpTag.unifiedWindow.actions||{};!function(){var a;lpTag.unifiedWindow.actions.EmailTranscriptAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"EmailTranscriptAction",applicationType:"EmailTranscriptAction",iconClass:"lp_email-transcript-action-icon",title:"EmailTranscriptAction",disableOnEnd:!0,enableOnStart:!0,enableState:lpTag.unifiedWindow.State.CHATTING,isEnabled:!1,iconEnabled:"email_normal.png",iconDisabled:"email_dimmed.png",initialize:function(){this.isEnabled=!1},events:function(){this.appContext.events.bind({appName:lpTag.unifiedWindow.EmailTranscriptDialogViewController.ControllerName,eventName:this.VCEvents.DIALOG_CLOSED,context:this,func:this.focusOnView})}});a=lpTag.unifiedWindow.actions.EmailTranscriptAction.prototype;a.clicked=function(){if(this.isEnabled){var a={context:this,data:{ControllerName:lpTag.unifiedWindow.EmailTranscriptDialogViewController.ControllerName,dialogOpenedFrom:this.appConsts.views.ACTION_MENU}};this.appContext.events.trigger({appName:this.ControllerName,eventName:this.VCEvents.DIALOG,data:a})}}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.actions=lpTag.unifiedWindow.actions||{};!function(){var a;lpTag.unifiedWindow.actions.EndChatAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"EndChatAction",applicationType:"EndChatAction",iconClass:"lp_end-chat-action-icon",title:"EndChatAction",isEnabled:!0,disableOnEnd:!0,iconEnabled:"end_normal.png",iconDisabled:"end_dimmed.png",initialize:function(){if(this.appContext.conf.engConf.async){this.enableState=lpTag.unifiedWindow.State.CHATTING;this.disableState=[lpTag.unifiedWindow.State.WAITING,lpTag.unifiedWindow.State.CONNECTION_ISSUE]}else this.enableState=[lpTag.unifiedWindow.State.WAITING,lpTag.unifiedWindow.State.CHATTING]},events:function(){this.appContext.events.bind({appName:lpTag.unifiedWindow.EndChatDialogViewController.ControllerName,eventName:this.VCEvents.DIALOG_CLOSED,context:this,func:this.focusOnView})}});a=lpTag.unifiedWindow.actions.EndChatAction.prototype;a.clicked=function(){this.isEnabled&&this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.viewController.INITIATE_END_CHAT})};a.focusOnView=function(a){a.origin===this.appConsts.dialog.actions.CANCEL&&a.dialogOpenedFrom!==this.appConsts.views.TOP_MENU&&this.view.focus()}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.actions=lpTag.unifiedWindow.actions||{};!function(){var a;lpTag.unifiedWindow.actions.ForgetMeAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"ForgetMeAction",applicationType:"ForgetMeAction",iconClass:"lp_actions-forget-me-icon",title:"ForgetMeAction",isEnabled:!1,disableOnEnd:!1,enableState:[lpTag.unifiedWindow.State.CHATTING,lpTag.unifiedWindow.State.WAITING,lpTag.unifiedWindow.State.POST_CHAT],disableState:[lpTag.unifiedWindow.State.ERROR,lpTag.unifiedWindow.State.APP_ENDED],enableOnStart:!0,iconEnabled:"end_normal.png",iconDisabled:"end_dimmed.png",initialize:function(){},events:function(){this.appContext.events.bind({appName:lpTag.unifiedWindow.ForgetMeDialogViewController.ControllerName,eventName:this.VCEvents.DIALOG_CLOSED,context:this,func:this.focusOnView})}});a=lpTag.unifiedWindow.actions.ForgetMeAction.prototype;a.clicked=function(){this.isEnabled&&this.appContext.events.trigger({appName:this.ControllerName,eventName:this.EventName.viewController.SHOW_FORGET_ME})};a.focusOnView=function(a){a.origin===this.appConsts.dialog.actions.CANCEL&&a.dialogOpenedFrom!==this.appConsts.views.TOP_MENU&&this.view.focus()}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};window.lpTag.unifiedWindow.actions=window.lpTag.unifiedWindow.actions||{};!function(){function a(){var a=this.getModelParam(this.chatPath.TTR)||{};return a.markUrgencyEnabled?!0:!1}var b,c;lpTag.unifiedWindow.actions.MarkUrgencyAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"MarkUrgencyAction",applicationType:"MarkUrgencyAction",titles:{urgent:"MarkUrgentAction",dismiss:"DismissUrgentAction"},title:"MarkUrgentAction",isEnabled:!0,onOffHours:!1,disableOnEnd:!0,disableState:[lpTag.unifiedWindow.State.WAITING,lpTag.unifiedWindow.State.CONNECTION_ISSUE],enableState:lpTag.unifiedWindow.State.CHATTING,iconClasses:{urgent:"lp_mark_urgency-action-icon",dismiss:"lp_dismiss_urgency-action-icon"},initialize:function(){c=!1},events:function(){this.bindModel({path:this.chatPath.TTR,callback:this.urgencyStateChanged,context:this})},render:function(){this.setIconClass();this.setTitle(c?this.translate(this.titles.dismiss):this.translate(this.titles.urgent))}});b=lpTag.unifiedWindow.actions.MarkUrgencyAction.prototype;b.enable=function(){if(!this.isEnabled&&a.call(this)){this.isEnabled=!0;this.setActionState(this.isEnabled,this.iconEnabled)}};b.urgencyStateChanged=function(a){c=a.newValue.isUrgent;a.newValue.markUrgencyEnabled?this.enable():this.disable();this.render()};b.setIconClass=function(){this.removeClass(this.icon,c?this.iconClasses.urgent:this.iconClasses.dismiss);this.addClass(this.icon,c?this.iconClasses.dismiss:this.iconClasses.urgent)};b.clicked=function(){if(this.isEnabled){c=!c;this.render();this.appContext.conversationManager.setConversationUrgency(c)}}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};window.lpTag.unifiedWindow.actions=window.lpTag.unifiedWindow.actions||{};!function(){function a(a){a.popOut||f||window.close()}function b(a){return f?a.pop_out:a.pop_in}function c(a){var b=f?"PopOutAction":"PopInAction";a&&(b+="_topbar");return b}function d(a){this.imageEl&&(this.imageEl.alt=a)}var e,f;lpTag.unifiedWindow.actions.PopOutAction=lpTag.unifiedWindow.ActionViewController.extend({ControllerName:"PopOutAction",applicationType:"PopOutAction",iconClass:"",iconClasses:{pop_in:"lp_pop-in-action-icon",pop_out:"lp_pop-out-action-icon"},isEnabled:!0,disableOnEnd:!0,enableOnStart:!0,enableState:lpTag.unifiedWindow.State.CHATTING,shouldDisableOnActionsHidden:!1,initialize:function(a){this.topbarAction=a.topbarAction;f=!this.appContext.conf.unifiedConf.poppedOut;this.iconClass=b(this.iconClasses);this.title=c(this.topbarAction);this.topbarAction&&(this.imageEl=this.getFirstElement("img",this.view))},events:function(){this.bindModel({path:this.uiPath.ACTION_POPOUT_ENABLE,callback:this.handlePopoutState});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UISTATE,eventName:this.EventName.uiState.POP_OUT,func:a,context:this})},render:function(){var a=this.translate(this.title);this.setTitle(a);d.call(this,a)}});e=lpTag.unifiedWindow.actions.PopOutAction.prototype;e.dispose=function(){this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.UISTATE,eventName:this.EventName.uiState.POP_OUT,func:a,context:this});lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};e.handlePopoutState=function(a){a&&a.newValue===!0?this.enable():this.disable()};e.clicked=function(){if(this.isEnabled){this.appContext.events.trigger({appName:this.ControllerName,eventName:this.VCEvents.CLOSE_ACTIONS});f&&this.appContext.appConfigurationManager.openExternal(this.appContext.conf.engConf,this.appContext.conf.unifiedConf,!0,!1);this.appContext.uiStateManager.setEmbeddedState(!f)}}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(){var a;if(f.isDesktop()&&d.poppedOut||b()){a=this.getPopoutTopbarViewData();a&&a.view.focus()}}function b(){return"TEXTAREA"!==document.activeElement.tagName}var c,d,e,f;lpTag.unifiedWindow.ActionsManagerViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ActionsManagerViewController",template:"<div class='lp_actions_bar_container' data-lp-point='actions_bar_container' data-lp-cust-id='actionsMenu'><div class='lp_actions_bar' data-lp-point='actions_bar'><div class='lp_action_placeholder_wrapper' data-lp-point='action_placeholder_wrapper'></div><div class='lp_action_items_wrapper' data-lp-point='action_items_wrapper'></div></div><div class='lp_bottom_logo_bar {{logoClass}}' data-lp-point='bottom_logo'><span data-lp-type='icon' class='lp_bottom-logo-icon'><img src='{{imagesRepository}}/LP-logo-bottom.png' data-lp-cust-id='bottomLogo' alt='LivePerson'></span></div></div>",LPViewMap:{actionsBar:"^actions_bar",actionItemsWrapper:"^action_items_wrapper",actionPlaceholderWrapper:"^action_placeholder_wrapper",actionWrapper:"^action_placeholder",bottomLogo:"^bottom_logo",topbarPopout:"^popout"},preInitView:function(a){a.textInjection.logoClass=a.textInjection.hide_lp_logo?"lpHide":""},initialize:function(a){d=this.appContext.conf.unifiedConf;e=this.appContext.conf.engConf;f=this.appContext.deviceDetector;this.actions=[];this.models=a.models},events:function(){this.bindModel({path:this.uiPath.STATE,callback:this.handleChatStateChanged,context:this});this.bindModel({path:this.uiPath.WINDOW_EMBEDDED,callback:a,context:this})},render:function(){var a=this;this.loadResource("<div class='lp_action_placeholder' data-lp-cust-id='actionsMenu_actionItem'></div>",function(b){a.actionsResourceLoaded(b);a.customize(a.view)})}});c=lpTag.unifiedWindow.ActionsManagerViewController.prototype;c.addAction=function(a){var b={action:a};this.actions.push(b);var c=this.getFirstElement(this.LPViewMap.actionItemsWrapper,this.view);c.appendChild(a.view);this.css(a.view,{display:"inline-block"})};c.actionsResourceLoaded=function(a){this.addActionsMenuWrappers(a);this.addActions()};c.addActionsMenuWrappers=function(a){for(var b=3,c=2,e=0;c*b>e;e++)this.createView({template:a,target:this.LPViewMap.actionPlaceholderWrapper,wrapWithDiv:!1,textInjection:d})};c.addActions=function(){var a=lpTag.unifiedWindow.actions,b=this.appContext.conf.windowConf,c=this.getActionViewData(),g="safari"===lpTag.device.browserName().toLowerCase();(!b||b.email!==!1&&!e.async)&&this.addAction(new a.EmailTranscriptAction(c));b&&b.print===!1||!f.isDesktop()||this.addAction(new a.PrintTranscriptAction(c));b&&b.sound===!1||!f.isDesktop()||this.addAction(new a.MuteSoundAction(c));if(!g&&d.popoutSupported&&b&&b.popoutAction&&f.isDesktop()&&!d.external&&!e.async){this.addAction(new a.PopOutAction(c));this.popoutView=new a.PopOutAction(this.getPopoutTopbarViewData())}e.async&&b.markAsUrgent!==!1&&this.addAction(new a.MarkUrgencyAction(c));e.async&&e.allowUnauthMsg===!0&&b.clearHistory&&this.addAction(new a.ForgetMeAction(c));this.addAction(new a.EndChatAction(c))};c.getActionViewData=function(){return{engConf:e,wrapWithDiv:!1,appContext:this.appContext,models:this.models,unifiedConf:d,textInjection:d}};c.getPopoutTopbarViewData=function(){var a=this.getActionViewData();a.view=this.getFirstElement(this.LPViewMap.topbarPopout,this.appContext.wrapperWindow.getMaximizedElement());a.topbarAction=!0;return a};c.handleChatStateChanged=function(a){var b=a.newValue;if(this.popoutView){var c={view:this.popoutView.view,useClasses:!0,display:"inline-block"};b===lpTag.unifiedWindow.State.CHATTING||b===lpTag.unifiedWindow.State.WAITING?this.show(c):this.hide(c)}}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){this.trackInView({view:a,inView:this.view.parentNode,callback:g,bindOnce:!0,trackBottom:!1})}function b(a){a&&this.firstLineView?this.widgetContent.insertBefore(this.fragment,this.firstLineView):this.widgetContent.appendChild(this.fragment);this.fragment=null}function c(a){a.view.setAttribute("role","alert")}function d(a){a.view&&a.view.removeAttribute("role")}function e(a,b){var c=this,d="number"==typeof a?a:this.scrollToBottomTimeout;setTimeout(function(){if(c.view&&c.view.parentNode){c.view.parentNode.scrollTop=c.getWidgetContent().scrollHeight;b&&"function"==typeof b&&b.call(c)}},d);f.call(this)}function f(){this.appContext.events.trigger({appName:"*",eventName:this.VCEvents.LINES_VIEWED})}function g(){this.appContext.events.trigger({appName:"*",eventName:this.VCEvents.CONVERSATIONS_VIEWED})}function h(a){for(var b,c=this.models.chatModel.get(this.chatPath.LINES)||[],d=0;d<c.length;d++)if(c[d].localId===a){b=c[d];break}b&&b.state===this.messageStates.PENDING&&this.updateLine(b)}function i(){if(this.addLogo){this.logoVC=new lpTag.unifiedWindow.LogoViewController({appContext:this.appContext,context:this});this.addViewController({viewController:this.logoVC,target:this.LPViewMap.logoArea})}}function j(a,b){if(this.addAgentImage){"undefined"==typeof a&&(b=this.DEFAULT_AGENT_IMAGE);this.createView({template:"<div class='lp_agent_image_area_wrapper' data-lp-cust-id='agent'><img class='lp_image' src='{{url}}' alt='' data-lp-cust-id='agentImage' aria-hidden='true'></div>",wrapWithDiv:!1,textInjection:{url:k.call(this,b)},target:this.getFirstElement(this.LPViewMap.agentImageArea),context:this})}}function k(a){var b=this.appContext.conf.unifiedConf;return a.indexOf(this.LE_LEGACY_AGENT_URL_PREFIX)>-1?b.agentImageRepository+"/"+a.replace(/^.*[\\\/]/,""):l(a)?a:b.agentImageRepository+"/"+a}function l(a){return null!==a.match(/^http[s]*/)}function m(){if(this.addRotator){this.rotator=new lpTag.unifiedWindow.RotatorViewController({models:this.models,appContext:this.appContext,context:this});this.addViewController({viewController:this.rotator,target:this.LPViewMap.rotatorArea})}}function n(){this.widgetContent||(this.widgetContent=this.getFirstElement(this.LPViewMap.widgetContent));this.widgetContent.setAttribute("aria-live","assertive");this.widgetContent.setAttribute("aria-relevant","additions");this.widgetContent.setAttribute("aria-atomic","false")}function o(a,b){var c=this.translate(this.LINE_STATE_TRANSLATE_PREFIX+a);if(a===this.messageStates.ERROR){b.innerHTML="";this.createView({template:this.chatLineErrorState,target:b,textInjection:{wrapperClass:this.LPClassMap.transcriptError,text:c,url:this.errorIconURL,error:this.translate("errorIconAltText")}})}else b.innerHTML=c}function p(){if(this.scrollOnMaximized){this.scrollOnMaximized=!1;e.call(this,0)}}function q(){var a=this.getModelParam(this.uiPath.WINDOW_MAXIMIZED);this.scrollOnMaximized=!a}var r;lpTag.unifiedWindow.TranscriptViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"TranscriptViewController",
applicationType:"TranscriptViewController",template:"<div class='lp_lpview_widgetContent transcript_scroll' data-lp-cust-id='transcriptArea' role='log' aria-label='{{transcriptAreaLabel}}'><div data-lp-point='logo_area'></div><div data-lp-point='agent_image_area'></div><div data-lp-point='rotator_area'></div></div>",className:"lp_transcript_widget",scrollToBottomTimeout:300,removeAccessibilityAttrsTimeout:100,STATE_CLASS_PREFIX_REGEX:/state_[\w]+/gi,LINE_ID_PREFIX:"lp_line_",LINE_CLASS_PREFIX:"state_",LINE_STATE_TRANSLATE_PREFIX:"messagingState_",DEFAULT_AGENT_IMAGE:"agent1.png",LE_LEGACY_AGENT_URL_PREFIX:"/campaigns/assets/img/engagementWindow",messageStates:lpTag.unifiedWindow.MessageState,uiPath:lpTag.unifiedWindow.uiModelPath,chatLineErrorState:"<div class='{{wrapperClass}}wrapper'><span id='{{id}}' class='lp_error_text lp_text' data-lp-point='errorText' role='alert'>{{text}}</span> <span class='lp_warning'>!<span class='lp_voice_error'>{{error}}</span></span></div>",updatePendingStateTimeOut:2e3,scrollOnMaximized:!1,LPViewMap:{widgetContent:".lp_lpview_widgetContent",element:".lp_lpview_agent_is_typing",lineState:"^lp_line_state",agentImage:".lp_agent_image_area_wrapper",lineWrapper:".lp_chat_line_wrapper",logoArea:"^logo_area",agentImageArea:"^agent_image_area",rotatorArea:"^rotator_area"},LPClassMap:{transcriptError:"lp_TranscriptError_"},initialize:function(a){this.fragment=null;this.appContext=a.appContext;this.models=a.models;this.imagesRepository=this.appContext.conf.unifiedConf.imagesRepository;this.errorIconURL=this.imagesRepository+"/error-15x15.png";this.isAsync=this.appContext.conf.engConf.async;this.browserStateManager=this.appContext.browserStateManager;this.windowConf=this.appContext.conf.windowConf;this.addAgentImage=this.windowConf.agentImage!==!1;this.addLogo=this.windowConf&&!this.windowConf.logoPinToTop;this.addRotator=this.isAsync;this.createLineTypeFactories();this.hide()},events:function(){this.appContext.deviceDetector.isDesktop()?this.preventScroll({view:this.view.parentNode}):this.appContext.deviceDetector.isIOS()&&this.limitScroll({view:this.view.parentNode});this.bindModel({path:this.chatPath.LINES,callback:this.processLines});this.browserStateManager.on(this.browserStateManager.EVENT_NAME.ORIENTATION_CHANGE,f,this);this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:p});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.LINES_VIEWED,context:this,func:q});this.isAsync&&this.browserStateManager.on(this.browserStateManager.EVENT_NAME.FOCUS_CHANGE,f,this)},render:function(){i.call(this);j.call(this,this.windowConf.agentImage,this.windowConf.agentUrl);m.call(this);this.appContext.deviceDetector.isDesktop()&&n.call(this)}});r=lpTag.unifiedWindow.TranscriptViewController.prototype;r.createLineTypeFactories=function(){this.chatLineFactory=new lpTag.unifiedWindow.ChatLineViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1});this.autoMessageFactory=new lpTag.unifiedWindow.AutoMessageViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1});this.secureFormLineFactory=new lpTag.unifiedWindow.SecureFormLineViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1});this.richContentFactory=new lpTag.unifiedWindow.RichContentViewController({models:this.models,appContext:this.appContext,wrapWithDiv:!1})};r.addEvent=function(f,g,h){var i=this;this.fragment||(this.fragment=document.createDocumentFragment());this.widgetContent||(this.widgetContent=this.getFirstElement(this.LPViewMap.widgetContent));if(h.template){var j=document.createElement("div");j.innerHTML=h.template;h.view=j}if(!this.appContext.deviceDetector.isDesktop()){c(h);setTimeout(d.bind(this,h),this.removeAccessibilityAttrsTimeout)}this.fragment.appendChild(h.view);b.call(i,f);f?a.call(this,g&&h.view):setTimeout(function(){e.call(i,null,a.bind(i,g&&h.view))})};r.getWidgetContent=function(){this.widgetContent||(this.widgetContent=this.getFirstElement(this.LPViewMap.widgetContent));return this.widgetContent};r.scrollToBottom=e;r.processLines=function(a){var b=a.newValue;this.firstLineView=this.getFirstElement(this.LPViewMap.lineWrapper,this.view);if(b)for(var c=0;c<b.length;c++)b[c].update?this.updateLine(b[c]):this.addLine(b[c])};r.addLine=function(a){if(a.state===this.messageStates.PENDING&&this.isAsync){delete a.state;setTimeout(h.bind(this,a.localId),this.updatePendingStateTimeOut)}this.createEvent(a)};r.updateLine=function(a){this.isAsync&&"visitor"===a.source&&this.updateLineState(a)};r.updateLineState=function(a){if(!isNaN(a.localId)){var b,c=this.getFirstElement("#"+this.LINE_ID_PREFIX+a.localId,this.view),d=c.className,e=d.match(this.STATE_CLASS_PREFIX_REGEX),f=this.LINE_CLASS_PREFIX+a.state;e&&this.removeClass(c,e[0]);this.addClass(c,f);b=this.getFirstElement(this.LPViewMap.lineState,c);o.call(this,a.state,b)}};r.createEvent=function(a){var b={line:a,callback:this.addEvent.bind(this,a.history,a.track),context:this};if(a.textType===this.appConsts.RichContent.RICH_CONTENT_LINE)this.richContentFactory.createRichContentLine(b);else switch(a.type){case this.appConsts.chatEvents.SECURE_FORM:this.secureFormLineFactory.createSecureFormLine(b);break;case this.appConsts.chatEvents.INFO:this.autoMessageFactory.createAutoMessage(b);break;case this.appConsts.chatEvents.RICH_CONTENT:this.richContentFactory.createRichContentLine(b);break;default:this.chatLineFactory.createLine(b)}};r.dispose=function(){this.browserStateManager.off(this.browserStateManager.EVENT_NAME.ORIENTATION_CHANGE,f);this.isAsync&&this.browserStateManager.off(this.browserStateManager.EVENT_NAME.FOCUS_CHANGE,f);this.richContentFactory&&this.richContentFactory.dispose();this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:p});this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.LINES_VIEWED,context:this,func:q});lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(){clearTimeout(this.visitorTypingTimeoutRef);this.visitorTypingTimeoutRef=setTimeout(this.setTypingState.bind(this,!1),this.VISITOR_TYPING_TIMEOUT)}function b(){var a=this.getModelParam(this.uiPath.STATE),b=a===lpTag.unifiedWindow.State.CHATTING,c=this.appContext.conf.engConf.async&&a!==lpTag.unifiedWindow.State.CONNECTION_ISSUE&&a!==lpTag.unifiedWindow.State.PENDING;return c||b}function c(){this.appContext.uiStateManager.setActionsVisibility(!this.getModelParam(this.uiPath.ACTIONS_VISIBLE))}function d(){this.appContext.uiStateManager.setActionsVisibility(!1)}function e(a){var b=f.call(this);if(!this.inProcess&&this.transcriptWasShown){this.inProcess=!0;var c=a.newValue,d=this.getFirstElement(this.LPViewMap.actionsBarContainer),e=this.getFirstElement(this.LPViewMap.actionsButton);c?h.call(this,d,e):i.call(this,e);b&&g.call(this)}}function f(){return"undefined"==typeof this.inProcess}function g(){var a=this.getFirstElement(this.LPViewMap.actionsBarContainer),b=this.getModelParam(this.uiPath.ACTIONS_VISIBLE);if(b){this.removeClass(this.actionsButtonImage,this.LPClassesMap.actionsClosedIcon);this.addClass(this.actionsButtonImage,this.LPClassesMap.actionsOpenedIcon)}else{this.hide(a);this.removeClass(this.actionsButtonImage,this.LPClassesMap.actionsOpenedIcon);this.addClass(this.actionsButtonImage,this.LPClassesMap.actionsClosedIcon)}this.inProcess=!1;this.textarea&&t.call(this,this.textarea.textareaHeight);this.appContext.events.trigger({appName:"*",eventName:this.EventName.uiState.ACTIONS_TOGGLE,data:{visible:b}});a.setAttribute("aria-hidden",(!b).toString())}function h(a,b){b.title=this.translate("tooltip_CollapseActionMenu");b.setAttribute("aria-expanded","true");b.setAttribute("aria-label",b.title);this.show(a)}function i(a){a.title=this.translate("tooltip_ExpandActionMenu");a.setAttribute("aria-label",a.title);a.setAttribute("aria-expanded","false")}function j(a){var b={text:this.textarea.getValue()};b.text=this.trim(b.text);this.textarea.setValue("");a&&this.textarea.lpFocus();return b}function k(a){if(a.text&&""!==a.text){a.text=l.call(this,a.text);this.appContext.transcriptManager.sendLine(a);this.setTypingState(!1)}}function l(a){var b;if(q()){b=lpTag.taglets.cleanCCPatterns.clean(a);if(b!==a){a=b;m.call(this)}}return a}function m(){this.appContext.events.trigger({appName:"tooltip",eventName:"show",data:{text:this.translate("tooltip_AutoBlockCreditCardPatternsMessage"),tooltipTimeout:this.TOOLTIP_TIMEOUT}});n.call(this)}function n(){this.appContext.deviceDetector.isIOS()&&this.textareaDomEl.blur()}function o(a){this.appContext.events.trigger({appName:this.ControllerName,eventName:this.VCEvents.VISITOR_HAS_TYPED,data:{typing:a&&document.activeElement===this.textareaDomEl}})}function p(a){a?this.show(this.agentTyping):this.hide(this.agentTyping)}function q(){return lpTag.taglets&&lpTag.taglets.cleanCCPatterns}function r(a){return"which"in a?a.which:a.keyCode}function s(a){return!/^\s*$/.test(a)}function t(a,b){this.view.style.height=a+"px";this.onResize&&this.onResizeContext&&this.onResize.call(this.onResizeContext,{bottomAreaSize:a+v.call(this),actionsAreaSize:u.call(this)})}function u(){var a=this.getFirstElement(this.LPViewMap.actionsBarContainer),b=0;a&&this.getModelParam(this.uiPath.ACTIONS_VISIBLE)&&(b=a.clientHeight);return b}function v(){var a=this.getFirstElement(this.LPViewMap.inputContainer),b=0,c=0,d=0;if(a){c=this.getComputedStyle(a,"paddingTop");d=this.getComputedStyle(a,"paddingBottom");b=parseInt(c,10)+parseInt(d,10)}return b}var w;lpTag.unifiedWindow.ChatViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ChatViewController",applicationType:"ChatViewController",template:"<div class='lpview_bottom_container'><div class='lp_lpview_agent_is_typing lp_agent_is_typing' data-lp-point='agent_is_typing' role='region'>{{agentIsTypingText}}</div><div class='lp_bottom_area' data-lp-cust-id='input' data-lp-point='bottom_area' role='region' aria-live='polite'><button class='lp_actions_button' data-lp-point='actions_button' data-lp-cust-id='actions_button' type='button'><div data-lp-point='actions_button_image' data-lp-type='icon' class='lp_actions-closed-icon'><img src='{{iconsRepository}}/sprites_v1.png' alt='' aria-hidden='true'></div></button><div data-lp-point='actionsBar_placeholder_wrapper'></div><div class='lp_input_area' data-lp-point='input_container'></div><button class='lp_send_button' data-lp-point='send_button' title='{{tooltip_SendIcon}}'><div class='lp_send-icon' data-lp-type='icon' data-lp-point='send_button_image'><img src='{{iconsRepository}}/sprites_v1.png' alt=''></div></button></div></div>",type:"html",dialogDisplayed:!1,visitorTypingTimeoutRef:null,TOOLTIP_TIMEOUT:1e4,VISITOR_TYPING_TIMEOUT:5e3,actionVisibleAnimationTime:300,lineTemplateFile:{visitor:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} {{stateClass}}'><div class='lp_time' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}:</div><div class='lp_chat_line' data-lp-cust-id='transcript_bubble_visitor'><div class='lp_chat_arrow_border' data-lp-cust-id='transcript_bubble_visitorArrowBorder'></div><div class='lp_chat_arrow' data-lp-cust-id='transcript_bubble_visitorArrow'></div><div class='lp_line_state_wrapper'><span class='lp_title_text' data-lp-cust-id='transcript_bubble_visitor_text'>{{text}}</span> <span data-lp-point='lp_line_state' data-lp-cust-id='transcript_time' class='lp_line_state'>{{state}}</span></div></div></div>",agent:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} {{avatarVisibility}}'><div class='lp_time' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}:</div><img class='agent_avatar' data-lp-cust-id='agentAvatarUrl' alt='' aria-hidden='true'><div class='lp_chat_line' data-lp-cust-id='transcript_bubble_agent'><div class='lp_title_text' data-lp-cust-id='transcript_bubble_agent_text'>{{text}}</div></div><div class='lp_chat_arrow_border' data-lp-cust-id='transcript_bubble_agentArrowBorder'></div><div class='lp_chat_arrow' data-lp-cust-id='transcript_bubble_agentArrow'></div></div>",system:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}}'><div class='lp_time' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}:</div><div class='lp_chat_line' data-lp-cust-id='transcript_message'><div class='lp_title_text' data-lp-cust-id='transcript_message'>{{text}}</div></div><div class='lp_chat_arrow_border'></div><div class='lp_chat_arrow'></div></div>"},LPViewMap:{sendButton:"^send_button",sendButtonImage:"^send_button_image",input:"^chat_input",inputContainer:"^input_container",lineText:".lp_title_text",chatViewContainer:".lpview_bottom_container",actionsBarPlaceholderWrapper:"^actionsBar_placeholder_wrapper",agentIsTyping:"^agent_is_typing",actionsButtonImage:"^actions_button_image",actionsButton:"^actions_button",actionsBarContainer:"^actions_bar_container"},LPClassesMap:{actionsVisibility:"lp_actions_visible",noAnimation:"lp_no-animation",actionsClosedIcon:"lp_actions-closed-icon",actionsOpenedIcon:"lp_actions-opened-icon",textAreaClass:"lp_expandable_textarea"},initialize:function(a){this.span=1;this.models=a.models;this.transcriptWasShown=!1;if(a.resizeEvent){this.onResize=a.resizeEvent.onResize;this.onResizeContext=a.resizeEvent.onResizeContext;this.bindViewEvent({view:a.resizeEvent.transitionView,DOMEvent:"transition",callback:g,context:this})}this.textarea=new lpTag.unifiedWindow.ExpandableTextAreaViewController({appContext:this.appContext,targetView:this.getFirstElement(this.LPViewMap.inputContainer),minRows:1,maxRows:4,resizeCallback:t,context:this});this.textareaDomEl=this.textarea.textarea;this.actionsVC=new lpTag.unifiedWindow.ActionsManagerViewController({models:this.models,appContext:this.appContext,textInjection:this.appContext.conf.unifiedConf});this.addViewController({viewController:this.actionsVC,target:this.LPViewMap.actionsBarPlaceholderWrapper});var b=this.getFirstElement(this.LPViewMap.actionsBarContainer);b&&this.addClass(b,this.LPClassesMap.noAnimation,500);this.hide()},events:function(){this.bindViewEvent({selector:this.LPViewMap.sendButton,callback:this.sendButtonClicked,DOMEvent:"click"});this.bindViewEvent({selector:this.LPViewMap.sendButton,callback:this.sendButtonClicked,DOMEvent:this.appContext.deviceDetector.isMobile()||this.appContext.deviceDetector.isTablet()&&"touchend"});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.CLOSE_ACTIONS,context:this,func:d});this.appContext.events.bind({appName:"actions",eventName:"close",func:d,context:this});this.appContext.deviceDetector.isDesktop()||this.appContext.events.bind({appName:"input",eventName:"focus",func:d,context:this});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:this.focusOnChatInput});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.DIALOG,context:this,func:this.dialogOpen});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.DIALOG_CLOSED,context:this,func:this.dialogClose});this.appContext.events.bind({appName:"*",eventName:this.EventName.uiState.POP_OUT,context:this,func:g});this.bindViewEvent({selector:this.LPViewMap.input,callback:this.inputKeyPress,DOMEvent:"keypress",context:this});this.bindViewEvent({selector:this.LPViewMap.input,callback:this.inputKeyUp,DOMEvent:"keyup",context:this});this.bindViewEvent({selector:this.LPViewMap.input,callback:this.inputPaste,DOMEvent:"paste",context:this});this.bindViewEvent({selector:this.LPViewMap.input,callback:this.inputBlur,DOMEvent:"blur",context:this});this.bindViewEvent({view:window,callback:this.onBeforeUnload.bind(this),DOMEvent:"beforeunload",context:this});this.bindViewEvent({selector:this.LPViewMap.actionsButton,DOMEvent:(this.appContext.deviceDetector.isMobile()||this.appContext.deviceDetector.isTablet())&&this.appContext.deviceDetector.isIOS()?"touchend":"click",callback:c,context:this});this.appContext.deviceDetector.isAndroid()&&this.bindViewEvent({selector:this.LPViewMap.input,callback:this.inputFocus,DOMEvent:"focus"});this.bindModel({path:this.uiPath.ACTIONS_VISIBLE,callback:e,context:this});this.bindModel({path:this.uiPath.STATE,callback:this.stateChanged});this.bindModel({path:this.chatPath.AGENT_IS_TYPING,callback:this.agentIsTyping});this.appContext.deviceDetector.isDesktop()?this.preventScroll({view:this.textareaDomEl}):this.appContext.deviceDetector.isIOS()&&this.limitScroll({view:this.textareaDomEl})},render:function(){this.agentTyping=this.getFirstElement(this.LPViewMap.agentIsTyping);this.actionsButtonImage=this.getFirstElement(this.LPViewMap.actionsButtonImage);this.show();this.focusOnChatInput()}});w=lpTag.unifiedWindow.ChatViewController.prototype;w.dispose=function(){clearTimeout(this.visitorTypingTimeoutRef);this.appContext.events.unbind({appName:"actions",eventName:"close",func:d,context:this});this.appContext.deviceDetector.isDesktop()||this.appContext.events.unbind({appName:"input",eventName:"focus",func:d,context:this});lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};w.stateChanged=function(a){var b=!!this.appContext.conf.engConf.async;if(a.newValue)switch(a.newValue){case lpTag.unifiedWindow.State.WAITING:this.setInputState(!0);this.setSendButtonState(b);g.call(this);break;case lpTag.unifiedWindow.State.CONNECTION_ISSUE:case lpTag.unifiedWindow.State.PENDING:this.setSendButtonState(!1);break;case lpTag.unifiedWindow.State.CHATTING:this.setTypingState(!1);this.setInputState(!0);this.setSendButtonState(!0);break;case lpTag.unifiedWindow.State.APP_ENDED:this.setInputState(!1);this.setSendButtonState(!1);g.call(this);break;default:this.setInputState(!1);this.setSendButtonState(!1)}};w.setSendButtonState=function(a,b){var c=this.getFirstElement(this.LPViewMap.sendButton),d=this.getFirstElement(this.LPViewMap.sendButtonImage);b=b||this.getFirstElement(this.LPViewMap.input).value;if(a){c.title=this.translate("tooltip_SendIcon");this.removeClass(d,"lp_disabled")}else{c.title=this.translate("tooltip_SendIconDisabled");this.addClass(d,"lp_disabled")}c.disabled=a&&s(b)?null:"disabled"};w.setInputState=function(a){var b=this.getFirstElement(this.LPViewMap.input);if(a){this.alignInput();b.placeholder=this.translate("insertTextHere");b.disabled=null}else{b.value="";b.placeholder="";b.disabled="disabled"}};w.inputKeyPress=function(a){var c=r(a);if(13===c){if(b.call(this)){var d=j.call(this,!0);k.call(this,d)}this.stopPropagation(a);this.preventDefault(a)}};w.alignInput=function(){this.applyDirOnElement(this.textareaDomEl,this.textarea.getValue())};w.inputFocus=function(){this.appContext.uiStateManager.setActionsVisibility(!1)};w.inputBlur=function(){o.call(this,!1);this.setTypingState(!1)};w.inputKeyUp=function(){o.call(this,this.hasInputValue());b.call(this)&&this.setTypingState();this.alignInput()};w.inputPaste=function(){var a=this;setTimeout(function(){a.inputKeyUp()},0)};w.setTypingState=function(c){"boolean"!=typeof c&&(c=this.hasInputValue());c?a.call(this):clearTimeout(this.visitorTypingTimeoutRef);this.appContext.transcriptManager.setVisitorTyping(c);this.setSendButtonState(b.call(this),this.textarea.getValue())};w.hasInputValue=function(){var a=this.textarea.getValue();return"undefined"!=typeof a&&a.length>0};w.agentIsTyping=function(a){var b=a&&a.newValue;p.call(this,b)};w.sendButtonClicked=function(a){if(b.call(this)){this.textareaDomEl.blur();var c=j.call(this);k.call(this,c)}this.stopPropagation(a);this.preventDefault(a)};w.focusOnChatInput=function(){var a,b=this.getModelParam(this.uiPath.STATE);if(this.isFocusInsideApp()&&!this.dialogDisplayed&&(b===lpTag.unifiedWindow.State.WAITING||b===lpTag.unifiedWindow.State.CHATTING)){a=this.getFirstElement(this.LPViewMap.input);a&&a.focus()}};w.closeActions=function(){d.call(this)};w.dialogOpen=function(){this.dialogDisplayed=!0};w.onBeforeUnload=function(a){this.setTypingState(!1)};w.dialogClose=function(){this.dialogDisplayed=!1}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,b,d){var e,f=this.getFirstElement(this.LPViewMap.lineText,d);c(a.line,f,this);"agent"!==a.line.source&&this.applyDirOnElement(f,a.line.text);if(b&&"string"==typeof b){e=this.getFirstElement(this.LPViewMap.avatarImage,d);e&&(e.src=b)}j.runCallback(a.callback,a.context,{view:d})}function b(a){return a&&a.line&&(a.line.text||a.line.textKey)}function c(a,b,c){var d,e=a.text||c.translate(a.textKey);if("visitor"===a.source){b.innerHTML="";var f=document.createTextNode(e);b.appendChild(f)}else if(c.sanitize===!1)b.innerHTML=e;else{d=c.sanitizeText(e).text;-1!==d.indexOf("idnv_question")&&(d=c.removeElementByType(["IMG","A"],d));b.innerHTML=d}}function d(a,b){var c,d,e;if(this.lineStateSupported){c=this.translate("messagingState_"+a.line.state);d=a.line.state?this.STATE_CLASS_PREFIX+a.line.state:void 0}e={_id:a.line.localId,source:a.line.source,sender:h.call(this,a.line),time:a.line.time?this.SPACE_HTML_ENTITY+this.translate("at")+" "+j.getTime(a.line.time,this.getMonthNames(),this.translate("dayMonthGap"),this.translate("daySuffix")):"",state:c||"",stateClass:d||""};b&&"string"==typeof b?e.avatarVisibility=this.LPClassesMap.avatarDisplay:e.avatarVisibility=this.LPClassesMap.avatarHidden;return e}function e(a){var b,c=this.appContext.conf.windowConf.agentAvatar;if(c===!0||"true"===c){b=f.call(this,a.line.originatorId)||g.call(this,a.line);"string"!=typeof b&&(b=this.appContext.conf.windowConf.agentAvatarUrl)}return b}function f(a){var b=this.getModelParam(this.chatPath.PARTICIPANTS)||{};return b&&b[a]&&b[a].imgUrl}function g(a){var b=this.getModelParam(this.uiPath.AGENT_PICTURE_URL);return a.agentPictureUrl||b&&b[a.by]}function h(a){var b="";switch(a.source){case"agent":b=a.by;break;case"visitor":b=this.getModelParam(this.chatPath.VISITOR_NAME);break;case"system":b=this.translate("info")}return b}var i,j=lpTag.lpUtils;lpTag.unifiedWindow.ChatLineViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ChatLineViewController",applicationType:"ChatLineViewController",STATE_CLASS_PREFIX:"state_",SPACE_HTML_ENTITY:"&nbsp;",lineTemplateFile:{visitor:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} {{stateClass}}'><div class='lp_time' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}:</div><div class='lp_chat_line' data-lp-cust-id='transcript_bubble_visitor'><div class='lp_chat_arrow_border' data-lp-cust-id='transcript_bubble_visitorArrowBorder'></div><div class='lp_chat_arrow' data-lp-cust-id='transcript_bubble_visitorArrow'></div><div class='lp_line_state_wrapper'><span class='lp_title_text' data-lp-cust-id='transcript_bubble_visitor_text'>{{text}}</span> <span data-lp-point='lp_line_state' data-lp-cust-id='transcript_time' class='lp_line_state'>{{state}}</span></div></div></div>",agent:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} {{avatarVisibility}}'><div class='lp_time' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}:</div><img class='agent_avatar' data-lp-cust-id='agentAvatarUrl' alt='' aria-hidden='true'><div class='lp_chat_line' data-lp-cust-id='transcript_bubble_agent'><div class='lp_title_text' data-lp-cust-id='transcript_bubble_agent_text'>{{text}}</div></div><div class='lp_chat_arrow_border' data-lp-cust-id='transcript_bubble_agentArrowBorder'></div><div class='lp_chat_arrow' data-lp-cust-id='transcript_bubble_agentArrow'></div></div>",system:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}}'><div class='lp_time' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}:</div><div class='lp_chat_line' data-lp-cust-id='transcript_message'><div class='lp_title_text' data-lp-cust-id='transcript_message'>{{text}}</div></div><div class='lp_chat_arrow_border'></div><div class='lp_chat_arrow'></div></div>"},LPViewMap:{avatarImage:".agent_avatar",lineText:".lp_title_text"},LPClassesMap:{avatarDisplay:"agent_avatar_display",avatarHidden:"agent_avatar_hidden"},initialize:function(a){this.lineStateSupported=a.appContext.conf.engConf.async}});i=lpTag.unifiedWindow.ChatLineViewController.prototype;i.createLine=function(c){var f=e.call(this,c);b(c)&&(this.view=this.createView({template:this.lineTemplateFile[c.line.source],wrapWithDiv:!1,callback:a.bind(this,c,f),textInjection:d.call(this,c,f)}))}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){return function(b){d.runCallback(a.callback,a.context,{view:b})}}function b(){var a,b=this.appContext.conf.unifiedConf.displayShortlyMessage;if(b){a=this.appContext.translator.dictionary.getString("transcriptShortlyMessage");this.appContext.translator.extendDictionary({transcriptTtrMessage:a},{locale:this.appContext.conf.engConf.lang})}}var c,d=lpTag.lpUtils;lpTag.unifiedWindow.AutoMessageViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"AutoMessageViewController",applicationType:"AutoMessageViewController",templateFileName:"<div class='lp_chat_line_wrapper'><div class='lp_time lp_chat_line_auto_message' title='{{text}}' data-lp-cust-id='transcript_time'>{{text}}</div>{{html}}</div>",LPViewMap:{autoMessage:".lp_chat_line_auto_message"},LPClassesMap:{underline:"lp_underline"},initialize:function(a){b.call(this)}});c=lpTag.unifiedWindow.AutoMessageViewController.prototype;c.createAutoMessage=function(b){var c=b.line.time?d.getTime(b.line.time,this.getMonthNames(),this.translate("dayMonthGap"),this.translate("daySuffix")):"";this.appContext.translator.extendDictionary({time:c},{locale:this.appContext.conf.engConf.lang});this.view=this.createView({template:this.templateFileName,wrapWithDiv:!1,callback:a(b),textInjection:{text:this.translate(b.line.textKey),html:b.line.html||""}});b.line.hasSeparator&&this.addClass(this.LPViewMap.autoMessage,this.LPClassesMap.underline)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b,c=a.by||this.appContext.translator.translate("agent");this.translator.extendDictionary({agentName:c},{locale:this.appContext.conf.engConf.lang});b=this.createView({template:this.LINK_TEMPLATE,wrapWithDiv:!1,doNotAddChild:!0,textInjection:{uniqueId:a.uniqueId,className:this.LPClassesMap.link,formName:a.formName,title:this.translate(this.TITLE_KEY_PREFIX+a.textKey)}});this.translator.extendDictionary({secureFormName:b.outerHTML},{locale:this.appContext.conf.engConf.lang});a.text=this.translate(a.textKey);return a}function b(a){return function(b){b=b.view||b;c.call(this,b);f.runCallback(a.callback,a.context,{view:b})}}function c(a){var b=this.getFirstElement(this.LPViewMap.link,a);this.bindViewEvent({view:b,DOMEvent:"click",callback:this.fireClickEvent,context:this})}function d(){var a;if(this.currentOpenSFLink)a=this.currentOpenSFLink;else{var b=this.getElements(this.LPViewMap.link);a=b[b.length-1]}a&&a.focus&&a.focus()}var e,f=lpTag.lpUtils;lpTag.unifiedWindow.SecureFormLineViewController=lpTag.unifiedWindow.ChatLineViewController.extend({ControllerName:"SecureFormLineViewController",applicationType:"SecureFormLineViewController",appName:"secureForm",sanitize:!1,LINK_TEMPLATE:"<a href='javascript:void(0);' id='{{uniqueId}}' title='{{title}}' target='_self' style='text-decoration: underline; cursor: pointer' class='{{className}}'>{{formName}}</a>",TITLE_KEY_PREFIX:"secureForm_link_title_",LPViewMap:{link:".lp_secure_form_line"},LPClassesMap:{link:"lp_secure_form_line"},initialize:function(a){this.hide()},events:function(){this.appContext.events.bind({appName:"*",eventName:this.VCEvents.SLIDER_CLOSED,context:this,func:d})}});e=lpTag.unifiedWindow.SecureFormLineViewController.prototype;e.dispose=function(){this.appContext.events.unbind({appName:"*",eventName:this.VCEvents.SLIDER_CLOSED,context:this,func:d});lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};e.createSecureFormLine=function(c){var d=c&&c.line;d&&this.createLine({line:a.call(this,d),callback:b(c),context:this})};e.fireClickEvent=function(a){this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:lpTag.unifiedWindow.consts.SecureForm.LINK_CLICKED,data:{uniqueId:a.sourceElement.id}});this.currentOpenSFLink=a.sourceElement}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b=lpTag.taglets.lpUtil.getPropertyFromObject(a,"uiEvent.target.parentElement.parentElement.parentElement.parentElement.parentElement");if(b){var c=this.getFirstElement(this.LPViewMap.avatarImage,b),d=this.getFirstElement(this.LPViewMap.richContentRoot,b);if(0===a.offset&&0===a.prevOffset){c.className="agent_avatar hidden";d.className="lp_rich_content_line stretch"}else{c.className="agent_avatar shown";d.className="lp_rich_content_line"}}else this.logger.error("Error while trying to set Carousel Offset",this.ControllerName)}function b(){var a=this.getModelParam(this.uiPath.STATE),b=a===lpTag.unifiedWindow.State.CHATTING,c=this.appContext.conf.engConf.async&&a!==lpTag.unifiedWindow.State.CONNECTION_ISSUE&&a!==lpTag.unifiedWindow.State.PENDING;return c||b}function c(a,b,c){var d,e=this.getFirstElement(this.LPViewMap.lineText,c);m.call(this,a.line,e);"agent"!==a.line.source&&this.applyDirOnElement(e,a.line.text);if(b&&"string"==typeof b){d=this.getFirstElement(this.LPViewMap.avatarImage,c);d&&(d.src=b)}w.runCallback(a.callback,a.context,{view:c})}function d(a){var b,c=a.getAttribute(C);if(c){b=this.appContext.conversationManager.isCurrentConversation(c);return b}return!1}function e(a){var b=a.actionData&&a.actionData.type,c=this.appContext.conf.unifiedConf.isMessaging?d.call(this,a.uiEvent.target):!0;c&&k.call(this,i(a),z.ACTION_EVENT);b===A.PUBLISH_TEXT&&k.call(this,j(a),z.PUBLISH_TEXT)}function f(a){var b=a.actionData.web&&a.actionData.web.uri||a.actionData.uri;window.open(b,"_blank");e.call(this,a)}function g(a){var b=j(a),c={query:b.la+","+b.lo},d=lpTag.taglets.lpUtil.addQueryParams(v,c);window.open(d,"_blank");e.call(this,a)}function h(a){b.call(this)&&e.call(this,a)}function i(a){return a&&a.metadata||[]}function j(a){return a&&a.actionData||{}}function k(a,b){t.trigger({appName:B,eventName:b,data:{metadata:a,uniqueId:this.uniqueId||a.sequenceId||a.uniqueId}})}function l(a){return a&&a.line&&(a.line.text||a.line.textKey||a.line.json)}function m(a,b){var c,d=a.text||a.json;try{c=y.render(d);a.convId&&n(c,a.convId);b.appendChild(c);k.call(this,a,z.DISPLAYED)}catch(e){a.state=x.FAILED;this.logger.error("Error when trying to render rich content: "+e.message,this.ControllerName)}}function n(a,b){var c=a.querySelectorAll("*");if(c.length>0)for(var d=0;d<c.length;d++)"function"==typeof c[d].onclick&&c[d].setAttribute(C,b)}function o(a,b){var c,d,e;if(a&&a.line){if(this.lineStateSupported){c=this.translate("messagingState_"+a.line.state);d=a.line.state?this.STATE_CLASS_PREFIX+a.line.state:void 0}e={_id:a.line.localId,source:a.line.source,sender:s.call(this,a.line),time:a.line.time?this.SPACE_HTML_ENTITY+this.translate("at")+" "+w.getTime(a.line.time,this.getMonthNames(),this.translate("dayMonthGap"),this.translate("daySuffix")):"",state:c||"",stateClass:d||""};b&&"string"==typeof b?e.avatarVisibility=this.LPClassesMap.avatarDisplay:e.avatarVisibility=this.LPClassesMap.avatarHidden}return e}function p(a){var b,c=this.appContext.conf.windowConf.agentAvatar;if(c===!0||"true"===c){b=q.call(this,a.line.originatorId)||r.call(this,a.line);"string"!=typeof b&&(b=this.appContext.conf.windowConf.agentAvatarUrl)}return b}function q(a){var b=this.getModelParam(this.chatPath.PARTICIPANTS)||{};
return b&&b[a]&&b[a].imgUrl}function r(a){var b=this.getModelParam(this.uiPath.AGENT_PICTURE_URL);return a.agentPictureUrl||b&&b[a.by]}function s(a){var b="";switch(a.source){case"agent":b=a.by}return b}var t,u,v="https://www.google.com/maps/search/?api=1&",w=lpTag.lpUtils,x=lpTag.unifiedWindow.MessageState,y=lpTag.JsonPollock,z=lpTag.unifiedWindow.richContentStates,A=lpTag.unifiedWindow.consts.richContentActionTypes,B=lpTag.unifiedWindow.apps.RICH_CONTENT,C="data-conv-id";lpTag.unifiedWindow.RichContentViewController=lpTag.unifiedWindow.ChatLineViewController.extend({ControllerName:"RichContentViewController",applicationType:"RichContentViewController",templateFileName:"<div id='lp_line_{{_id}}' class='lp_chat_line_wrapper lp_{{source}} {{avatarVisibility}}'><div class='lp_time' title='{{sender}} {{time}}' data-lp-cust-id='transcript_time'><div class='lp_sender'>{{sender}}</div>{{time}}:</div><img class='agent_avatar' data-lp-cust-id='agentAvatarUrl' alt='{{sender}}'><div class='lp_rich_content_line' data-lp-cust-id='transcript_bubble_rich_content'><div class='lp_title_text' data-lp-cust-id='transcript_bubble_rich_content_text'></div></div></div>",LPViewMap:{avatarImage:".agent_avatar",lineText:".lp_title_text",richContentRoot:".lp_rich_content_line"},initialize:function(a){t=a.appContext.events;this.lineStateSupported=a.appContext.conf.engConf.async},events:function(){y.registerAction(A.LINK,f.bind(this));y.registerAction(A.NAVIGATE,g.bind(this));y.registerAction(A.PUBLISH_TEXT,h.bind(this));y.registerAction(A.CAROUSEL_OFFSET_CHANGE,a.bind(this))}});u=lpTag.unifiedWindow.RichContentViewController.prototype;u.createRichContentLine=function(a){if(a){var b=p.call(this,a);if(l(a)){this.uniqueId=a.line.sequenceId;this.view=this.createView({template:this.templateFileName,wrapWithDiv:!1,callback:c.bind(this,a,b),textInjection:o.call(this,a,b)})}}};u.dispose=function(){y&&y.unregisterAllActions&&y.unregisterAllActions();lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,b){var c=this.translate("surveyRequireField");switch(a){case this.QUESTION_TYPE.CHECKBOX:c=b&&b.length>1?this.translate("surveyRequireCheckbox"):this.translate("surveyRequireOption");break;case this.QUESTION_TYPE.RADIO:case this.QUESTION_TYPE.RADIO_HORIZONTAL:case this.QUESTION_TYPE.SELECT:c=this.translate("surveyRequireOption")}return c}function b(){for(var a,b=this.surveyLogic.getAllQuestions(!0),d=0;d<b.length;++d){a=this.createQuestion(b[d]);this.questionViews.push(a);this.appContext.deviceDetector.isIOS()&&this.bindViewEvent({view:this.questionViews[d],DOMEvent:"touchstart",callback:this.viewTapped})}f.call(this)&&(this.isSubmitSurveyDisabled=!0);this.pagingVC=new lpTag.unifiedWindow.PagingViewController({onInitialize:c(this),submitCallback:g,cancelCallback:h,validatorCallback:this.validateQuestionOnNext,activeIndexCallback:this.onActiveIndexChange,context:this,template:"<div class='lp_survey_view_container' data-lp-cust-id='surveyArea' role='region'><div class='lp_pages_area' data-lp-point='pages_area'></div><div class='lp_pagination-area'><div class='lp_buttons_area'><button class='lp_prev_button' data-lp-point='prev_button' data-lp-cust-id='cancel_button'>{{back}}</button> <button class='lp_cancel_button' data-lp-point='cancel_button' data-lp-cust-id='cancel_button'>{{cancel}}</button> <button class='lp_next_button' data-lp-point='next_button' data-lp-cust-id='button'>{{next}}</button> <button class='lp_submit_button' data-lp-point='submit_button' data-lp-cust-id='button'>{{submit}}</button> <button class='lp_close_survey_button' data-lp-point='close_survey_button' data-lp-cust-id='close_survey_button'>{{close}}</button></div><div class='lp_pager' data-lp-point='pager'></div></div></div>",appContext:this.appContext,pages:this.questionViews,target:this.LPViewMap.container,parent:this,headerText:this.headerText,textInjection:l.call(this,b.length),isLogicalSurvey:this.isLogicalSurvey,activeQuestions:this.surveyLogic.getActiveQuestionsIds()})}function c(a){return function(){d.call(a);this.onInitialize&&this.onInitialize()}}function d(){var a=!this.appContext.deviceDetector.isDesktop();a&&this.questionViews&&this.questionViews[0]&&this.questionViews[0].question.type===this.QUESTION_TYPE.CSAT?e():this.isFocusInsideApp()&&this.questionViews&&this.questionViews[0]&&"function"==typeof this.questionViews[0].setFocus&&this.questionViews[0].setFocus()}function e(){document.activeElement.blur()}function f(){return this.questionViews&&this.questionViews[0]&&this.questionViews[0].question.type===this.QUESTION_TYPE.CSAT?!0:!1}function g(){var a;if(this.validateSurvey()){a=this.surveyLogic.getJSONSurvey();a&&i.call(this,{survey:a.survey,status:a.survey&&a.survey.question.length>0?this.consts.csatStatus.FILLED:this.consts.csatStatus.SKIPPED,onError:this.onSubmitError,context:this})}}function h(){var a;a=this.sendDataOnCancel?{status:this.consts.csatStatus.SKIPPED}:null;i.call(this,a)}function i(a){var b,c;switch(this.surveyType){case lpTag.unifiedWindow.SurveyType.PRE_CHAT:b=lpTag.unifiedWindow.events.application.PRE_CHAT_SURVEY;break;case lpTag.unifiedWindow.SurveyType.EXIT_CHAT:a&&a.survey&&(a.survey.emailTranscriptSubject="Your chat transcript");b=lpTag.unifiedWindow.events.application.POST_CHAT_SURVEY;break;case lpTag.unifiedWindow.SurveyType.OFFLINE:b=lpTag.unifiedWindow.events.application.OFFLINE_SURVEY;break;default:b=lpTag.unifiedWindow.events.application.OFFLINE_SURVEY}if(lpTag.hooks&&lpTag.hooks.exec){c=lpTag.hooks.exec({name:lpTag.unifiedWindow.hooks.BEFORE_SUBMIT_SURVEY,data:{surveyType:b,questionsInfo:this.surveyLogic.getAllQuestions(),surveyData:a}});a=c&&c.data&&c.data.surveyData||a}this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:b,data:a})}function j(a){var b=a.newValue;this.pagingVC&&(b===lpTag.unifiedWindow.State.CONNECTION_ISSUE?this.pagingVC.enableSubmit(!1):this.pagingVC.enableSubmit(!0))}function k(a,b){if(a)for(var c=0;c<a.length;c++)if(a[c].id===b)return c;return-1}function l(a){if(a>0)return{};switch(this.surveyType){case lpTag.unifiedWindow.SurveyType.PRE_CHAT:return{submit:this.appContext.translator.translate("startChat")};case lpTag.unifiedWindow.SurveyType.EXIT_CHAT:case lpTag.unifiedWindow.SurveyType.OFFLINE:this.isCloseSurveyVisible=!0;return{};default:return{}}}function m(a,b,c,d){if(d){var e=b&&b.header?b.header+" "+c:c;a.setAttribute("aria-label",e);a.setAttribute("tabindex","0");a.setAttribute("role","region")}else{a.setAttribute("aria-live","assertive");a.setAttribute("role","presentation")}}function n(a){if(!a.questions)return!1;for(var b=!1,c=a.questions.question,d=0;d<c.length;d++)if(c[d]&&c[d].entry&&c[d].entry[0]&&c[d].entry[0].logic){b=!0;break}return b}var o,p=lpTag.taglets.lpUtil,q=150;lpTag.unifiedWindow.SurveyViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"SurveyViewController",applicationType:"SurveyViewController",className:"lp_survey_area",errorTemplateFileName:"<div class='{{wrapperClass}}wrapper' role='alert'><img class='lp_error_img' src='{{url}}' alt='{{errorAltText}}'><div id='{{id}}' class='lp_error_text lp_text' data-lp-point='errorText' aria-live='polite'>{{text}}</div></div>",QUESTION_TYPE:{TEXT_FIELD:"Text Field",TEXT_AREA:"Text Area",SELECT:"Dropdown Box",RADIO:"Radio Button",RADIO_HORIZONTAL:"Radio Button (side by side)",CHECKBOX:"Checkbox",CSAT:"CSAT"},LPViewMap:{lpSurveyArea:".lp_survey_area",question:".lp_question",label:".lp_question_label",container:".lp_survey_container",headerError:".lp_survey_header_error"},LPClassMap:{content:"lp_lpview_content",headerError:"lp_survey_header_error",SurveyError:"lp_surveyError_",logo_top_margin:"lp_logo_top_margin"},questionTemplates:["<input id='{{id}}' class='lp_input-field' aria-labelledby='{{ariaLabel}}' type='{{type}}' placeholder='{{defaultTextArea}}' aria-required='{{isMandatory}}'>","<span class='lp_radio_button' aria-labelledby='{{ariaLabel}}'><input id='{{inputId}}' type='radio' value='{{value}}' name='{{name}}'><label for='{{inputId}}'>{{label}}</label></span>","<select id='{{id}}' class='lp_select_field' aria-labelledby='{{ariaLabel}}' aria-required='{{isMandatory}}'></select>","<div class='lp_checkbox_button'><input id='{{inputId}}' type='checkbox' value='{{value}}' name='{{name}}'><label for='{{inputId}}'>{{label}}</label></div>","<div class='lp_question'><h3 id='{{id}}' class='lp_question_label'>{{label}}</h3><div class='lp_lpview_content lp_content'></div></div>","<textarea id='{{id}}' class='lp_textarea_field' aria-labelledby='{{ariaLabel}}' type='{{type}}' aria-required='{{isMandatory}}'></textarea>","<div id='{{id}}' class='lp_csat_rater' role='region'><form><fieldset class='lp_csat_rater_stars'><legend>{{label}}</legend><a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar5}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='5' aria-pressed='false' aria-label='{{label}} 5 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar4}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='4' aria-pressed='false' aria-label='{{label}} 4 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar3}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='3' aria-pressed='false' aria-label='{{label}} 3 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar2}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='2' aria-pressed='false' aria-label='{{label}} 2 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar1}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='1' aria-pressed='false' aria-label='{{label}} 1 {{of}} {{numberOfStars}}'></a></fieldset></form><div class='lp_csat_rater_current_rating' data-lp-point='current_rating' tabindex='0'>{{rating}}</div><div class='lp_survey_disclaimer'>{{csatDisclaimer}}</div></div>","<div class='{{wrapperClass}}wrapper' role='alert'><img class='lp_error_img' src='{{url}}' alt='{{errorAltText}}'><div id='{{id}}' class='lp_error_text lp_text' data-lp-point='errorText' aria-live='polite'>{{text}}</div></div>"],initialize:function(a){var c,d=a.survey&&a.survey.newValue;this.hasHeaderError=!1;this.isCloseSurveyVisible=!1;this.isSubmitSurveyDisabled=!1;this.activeIndex=0;this.questionViews=[];this.models=a.models;this.iconsRepository=a.iconsRepository;this.imagesRepository=a.imagesRepository;this.errorIconURL=this.imagesRepository+"/error-15x15.png";this.appContext=a.appContext;this.surveyType=a.surveyType;this.defaultSelect=a.defaultSelect;this.sendDataOnCancel=this.appContext.conf.engConf.async;this.consts=lpTag.unifiedWindow.consts;this.addLogo=p.getPropertyFromObject(this.appContext,"conf.windowConf.logoPinToTop");this.createView({elementType:"div",className:"lp_survey_bottom_spacer"});c=this.createView({elementType:"div",className:"lp_survey_container"});c.setAttribute("data-lp-cust-id","surveyArea");m(c,d,this.translate("surveyLabel"),this.appContext.deviceDetector.isDesktop());if(d){this.headerText=d.header;this.isLogicalSurvey=n(d);this.surveyLogic=new lpTag.taglets.SurveyLogic({survey:d});this.loadResource(this.questionTemplates,b)}this.addLogo&&p.addClass(this.getFirstElement(this.LPViewMap.lpSurveyArea),this.LPClassMap.logo_top_margin)},render:function(){this.customize(this.view)},events:function(){0!==this.questionViews.length&&this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:d});this.appContext.deviceDetector.isDesktop()?this.preventScroll({selector:this.LPViewMap.container,inView:this.view}):this.appContext.deviceDetector.isIOS()&&this.limitScroll({view:this.view.parentNode});this.appContext.browserStateManager.on(this.appContext.browserStateManager.EVENT_NAME.ORIENTATION_CHANGE,this.onActiveIndexChange,this);this.bindModel({path:this.uiPath.STATE,callback:j,context:this});this.appContext.events.bind({appName:"*",eventName:this.EventName.chat.SURVEY_ERROR,context:this,func:this.onSubmitError});this.appContext.events.bind({appName:"survey",eventName:"blur",func:this.validateQuestionOnBlur,context:this});this.appContext.events.bind({appName:"survey",eventName:"submitAnswer",func:this.submitAnswer,context:this});this.appContext.deviceDetector.isDesktop()||this.bindViewEvent({selector:this.LPViewMap.container,DOMEvent:"touchstart",callback:this.viewTapped});0!==this.questionViews.length&&this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:d});this.appContext.deviceDetector.isDesktop()?this.preventScroll({selector:this.LPViewMap.container,inView:this.view}):this.appContext.deviceDetector.isIOS()&&this.limitScroll({view:this.view.parentNode})}});o=lpTag.unifiedWindow.SurveyViewController.prototype;o.viewTapped=function(a){"INPUT"===document.activeElement.tagName&&"INPUT"!==a.target.tagName&&e()};o.submitAnswer=function(a){var b=a.isAnswerArray?a.answer:a.answer[0];this.surveyLogic.submitAnswer(a.questionId,b);this.isSubmitSurveyDisabled=!1;if(this.pagingVC){this.pagingVC.updateActivePages(this.surveyLogic.getActiveQuestionsIds());this.getModelParam(this.uiPath.STATE)!==lpTag.unifiedWindow.State.CONNECTION_ISSUE&&this.pagingVC.enableSubmit(!0)}};o.getErrorText=function(b){var c="";switch(b.error){case this.surveyLogic.errorTypes.EMAIL:c=this.translate("surveyRequireValidEmail");break;case this.surveyLogic.errorTypes.NUMBER:c=this.translate("surveyRequireNumericField");break;case this.surveyLogic.errorTypes.ILLEGAL_CHARS:c=this.translate("surveyIllilgalCharacters");break;case this.surveyLogic.errorTypes.REQUIRED:c=a.call(this,b.type,b.entry);break;case this.surveyLogic.errorTypes.LENGTH:this.translator.extendDictionary({specify_number:this.surveyLogic.questionsText.MAX_LENGTH});c=this.translate("surveyMaximumChars");break;default:c=a.call(this,b.type,b.entry)}return c};o.addHeaderError=function(a){if(!this.hasHeaderError){this.hasHeaderError=!0;var b=this.createView({template:this.errorTemplateFileName,wrapWithDiv:!0,doNotAddChild:!0,textInjection:{wrapperClass:this.LPClassMap.SurveyError,text:a,url:this.errorIconURL,errorAltText:this.translate("errorIconAltText")}});b.className+=" "+this.LPClassMap.headerError;var c=this.questionViews[0];if(c)if(this.appContext.deviceDetector.isDesktop()){c.view.parentNode.insertBefore(b,c.view);c.setFocus()}else{c.view.insertBefore(b,c.view.firstChild);this.pagingVC.setActiveIndex(0)}}};o.removeHeaderError=function(){if(this.hasHeaderError){this.hasHeaderError=!1;var a=this.getFirstElement(this.LPViewMap.headerError);a&&a.parentNode.removeChild(a)}};o.onActiveIndexChange=function(a){"number"!=typeof a&&(a=this.activeIndex);this.activeIndex>=0&&lpTag.uiframework.scrollManager.unregisterView(this.questionViews[this.activeIndex]);this.activeIndex=a;var b=lpTag.lpUtils.getElementsByClass(this.questionViews[this.activeIndex].view,this.LPClassMap.content,[])[0],c=this.getComputedStyle(b.parentNode,"height",10),d=c<b.clientHeight;d&&lpTag.uiframework.scrollManager.registerView(b,this.appContext.deviceDetector.isIOS())};o.validateQuestion=function(a){var b=this.getQuestionViewById(a.id);if(b){if(this.surveyLogic.validateQuestion(a)){b.cleanError();return!0}b.setError(this.getErrorText(a));return!1}};o.validateQuestionOnNext=function(a){this.removeHeaderError();return this.validateQuestion(this.surveyLogic.getQuestionByIndex(a))};o.validateQuestionOnBlur=function(a){var b=this;this.validationTimeout=setTimeout(function(){b.validateQuestion(a.question)},q)};o.validateSurvey=function(){for(var a,b=!0,c=this.surveyLogic.validateSurvey(!0),d=this.surveyLogic.getAllQuestions(!0),e=0;e<d.length;e++){a=this.getQuestionViewById(d[e].id);if(k(c.questionsNeeded,d[e].id)>=0){a.setError(this.getErrorText(d[e]));if(b){a.setFocus();a.view.scrollIntoView(!1);b=!1}}else a.cleanError()}this.removeHeaderError();return c.surveyValid};o.getQuestionViewById=function(a){for(var b,c=0;c<this.questionViews.length;c++)if(this.questionViews[c].question.id===a){b=this.questionViews[c];break}return b};o.dispose=function(){clearTimeout(this.validationTimeout);lpTag.uiframework.scrollManager.unregisterView(this.view);if(this.questionViews){for(var a=0;a<this.questionViews.length;a++){this.questionViews[a].dispose();this.questionViews[a]=null;this.appContext.deviceDetector.isIOS()&&this.unbindViewEvent({view:this.questionViews[a],DOMEvent:"touchstart",callback:this.viewTapped})}this.questionViews.length=0}this.surveyLogic.dispose();this.appContext&&this.appContext.browserStateManager&&this.appContext.browserStateManager.off(this.appContext.browserStateManager.EVENT_NAME.ORIENTATION_CHANGE,this.onActiveIndexChange);this.appContext.events.unbind({appName:"survey",eventName:"blur",func:this.validateQuestionOnBlur,context:this});this.appContext.events.unbind({appName:"survey",eventName:"submitAnswer",func:this.submitAnswer,context:this});lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};o.createQuestion=function(a){var b,c={appContext:this.appContext,question:a,defaultSelect:this.defaultSelect,iconsRepository:this.iconsRepository,imagesRepository:this.imagesRepository};if(a){switch(a.type){case this.QUESTION_TYPE.TEXT_FIELD:b=new lpTag.unifiedWindow.Survey.TextFieldQuestion(c);break;case this.QUESTION_TYPE.TEXT_AREA:b=new lpTag.unifiedWindow.Survey.TextAreaQuestion(c);break;case this.QUESTION_TYPE.SELECT:b=new lpTag.unifiedWindow.Survey.DropDownQuestion(c);break;case this.QUESTION_TYPE.RADIO:case this.QUESTION_TYPE.RADIO_HORIZONTAL:b=new lpTag.unifiedWindow.Survey.RadioButtonQuestion(c);break;case this.QUESTION_TYPE.CHECKBOX:b=new lpTag.unifiedWindow.Survey.CheckBoxQuestion(c);break;case this.QUESTION_TYPE.CSAT:b=new lpTag.unifiedWindow.Survey.CSATQuestion(c)}return b}};o.onSubmitError=function(){if(this.appContext.deviceDetector.isDesktop()){var a=this.getFirstElement(this.LPViewMap.container);a&&(a.scrollTop=0)}this.addHeaderError(this.translate("surveyGeneralError"))}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(){var a=this.getValue();this.textarea.title=""===a?"":this.translate("defaultTextArea")}var b;lpTag.unifiedWindow.ExpandableTextAreaViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"ExpandableTextAreaViewController",applicationType:"ExpandableTextAreaViewController",templateName:"<textarea class='lpview_form_textarea {{cssClass}}' data-lp-cust-id='input_text' data-lp-point='chat_input' rows='{{rows}}' maxlength='{{maxLength}}' aria-label='{{defaultTextArea}}' title='{{defaultTextArea}}'></textarea>",LPViewMap:{textarea:"lp_expandable_textarea"},initialize:function(a){this.appContext=a.appContext;this.targetView=a.targetView;this.beforeView=a.beforeView;this.textareaClass=this.LPViewMap.textarea;this.minRows=a.minRows||3;this.maxRows=a.maxRows||10;this.maxLength=2e3;this.resizeCallback=a.resizeCallback;this.scrollCallback=a.scrollCallback;this.context=a.context||this;this.createTextAreaView()},events:function(){this.bindViewEvent({view:this.textarea,DOMEvent:"keyup",callback:this.handleKeyUp});this.bindViewEvent({view:this.textarea,DOMEvent:"paste",callback:this.resizeTextarea});this.bindViewEvent({view:this.textarea,DOMEvent:"cut",callback:this.resizeTextarea});this.bindViewEvent({view:this.textarea,DOMEvent:"dragend",callback:this.resizeTextarea});this.bindViewEvent({view:this.textarea,DOMEvent:"drop",callback:this.resizeTextarea});this.bindViewEvent({view:this.textarea,DOMEvent:"input",callback:this.resizeTextarea})},render:function(){}});b=lpTag.unifiedWindow.ExpandableTextAreaViewController.prototype;b.setDefaultValues=function(){this.textareaLineHeight=this.getComputedStyle(this.textarea,"lineHeight",10);this.textareaMinHeight=this.textareaLineHeight*this.minRows;this.textareaMaxHeight=this.textareaLineHeight*this.maxRows;this.textareaHeight=this.getComputedStyle(this.textarea,"height",10);this.textareaMinHeight=this.textareaHeight>=this.textareaLineHeight?this.textareaHeight:this.textareaMinHeight;this.defaultValues=!0};b.createTextAreaView=function(){var a={cssClass:this.textareaClass,rows:this.minRows,maxLength:this.maxLength,defaultTextArea:this.translate("defaultTextArea")};this.textarea=this.createView({template:this.templateName,textInjection:a,wrapWithDiv:!1,target:this.targetView,beforeView:this.beforeView});this.setScroll(!1)};b.setScroll=function(a){if(this.scrollEnabled!==a){var b;b=a?"auto":"hidden";this.textarea.style.overflowY=b;this.scrollEnabled=a;this.applyScrollCallback(a)}};b.applyResizeCallback=function(a,b){this.resizeCallback&&this.context&&this.resizeCallback.call(this.context,a,b)};b.applyScrollCallback=function(a){this.scrollCallback&&this.context&&this.scrollCallback.call(this.context,a)};b.resizeTextarea=function(){if(!this.resizeTextareaTimeout){var a=this;this.resizeTextareaTimeout=setTimeout(function(){a.resizeTextareaTimeout=null;a.delayedResizeTextarea()},0)}};b.delayedResizeTextarea=function(){var a,b,c=!window.addEventListener;this.defaultValues||this.setDefaultValues();if(c){a=this.getSelection();b=this.textarea.scrollHeight}this.textarea.style.height="auto";c||(b=this.textarea.scrollHeight);var d;if(b!==this.textareaHeight){if(b>this.textareaMaxHeight){d=this.textareaMaxHeight;this.setScroll(!0)}else if(b<this.textareaMinHeight){d=this.textareaMinHeight;this.setScroll(!1)}else{d=b;this.setScroll(!1)}var e=d-this.textareaHeight;e&&this.applyResizeCallback(d,e);this.textareaHeight=d}this.textarea.style.height=this.textareaHeight+"px";a&&this.setSelection(a.start,a.end)};b.getValue=function(){return this.textarea.value};b.setValue=function(a){if(this.textarea.value!==a){this.textarea.value=a;this.resizeTextarea()}else this.lpFocus()};b.lpFocus=function(){if(this.textarea&&!this.textarea.disabled){var a=this.getComputedStyle(this.textarea,"height",10);a&&this.textarea.focus()}};b.handleKeyUp=function(b){b=b||event;var c=b.keyCode||b.which;switch(c){case 13:break;case 33:break;case 34:break;case 35:break;case 36:break;case 37:break;case 38:break;case 39:break;case 40:break;default:this.resizeTextarea()}a.call(this)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){var a;lpTag.unifiedWindow.CoBrowseInvitationViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"CoBrowseInvitationViewController",template:"<div class='lp_cobrowse_invitation_widget'><div class='lp_image'><img src='{{imagesRepository}}/cobrowse_icon.png' alt=''></div><p role='alert' class='lp_cb_invitation_text'>{{invitationText}}</p><div class='lp_cb_offer'><button data-lp-cust-id='button' class='lp_cb_button lp_cb_button_accept'>{{acceptBtn}}</button> <button data-lp-cust-id='button' class='lp_cb_button lp_cb_button_reject'>{{rejectBtn}}</button></div></div>",coBrowseEvents:lpTag.unifiedWindow.events.coBrowseEvents,focusElement:void 0,LPViewMap:{inviteText:".lp_cb_invitation_text",acceptButton:".lp_cb_button_accept",rejectButton:".lp_cb_button_reject"},LPClassesMap:{invitation_container:"lp_cobrowse_invitation_widget",hidden:"lp_hidden"},preInitView:function(b){a=b.appContext.coBrowseManager;var c=a.customizeTranslation("cobrowseInvitation"),d=a.customizeTranslation("cobrowseAcceptBtn"),e=a.customizeTranslation("cobrowseRejectBtn");this.textInjection={invitationText:this.sanitizeText(c).text,acceptBtn:this.sanitizeText(d).text,rejectBtn:this.sanitizeText(e).text,imagesRepository:b.appContext.conf.unifiedConf.imagesRepository}},events:function(){this.bindViewEvent({selector:this.LPViewMap.acceptButton,callback:this.onAccept,DOMEvent:"click",context:this});this.bindViewEvent({selector:this.LPViewMap.rejectButton,callback:this.onReject,DOMEvent:"click",context:this})},initialize:function(a){this.serviceId=a.serviceId;this.appContext=a.appContext;this.focusElement=this.getFirstElement(this.LPViewMap.acceptButton)},onAccept:function(){this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.ACCEPTED,this.serviceId);var b=a.customizeTranslation("cobrowseSessionStarting");this.getFirstElement(this.LPViewMap.inviteText).textContent=this.sanitizeText(b).text;this.getFirstElement(this.LPViewMap.acceptButton).style.display="none";this.getFirstElement(this.LPViewMap.rejectButton).style.display="none"},onReject:function(){this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.DECLINE,this.serviceId);var b=a.customizeTranslation("cobrowseInvitationRejected");this.getFirstElement(this.LPViewMap.inviteText).textContent=this.sanitizeText(b).text;this.getFirstElement(this.LPViewMap.acceptButton).style.display="none";this.getFirstElement(this.LPViewMap.rejectButton).style.display="none"},onInitialize:function(){var a=this;setTimeout(function(){a.focusElement.focus()},100)}})}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(){this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.INVITED,context:this,func:d});this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.CANCELED,context:this,func:f});this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.DECLINE,context:this,func:c});lpTag.events.unbind({appName:lpTag.unifiedWindow.apps.COBROWSE,eventName:this.coBrowseEvents.STARTED,context:this,func:g});this.appContext.events.unbind({appName:"slider",eventName:this.VCEvents.SLIDER_CLOSED,context:this,func:h});this.appContext.events.unbind({appName:lpTag.unifiedWindow.apps.CHAT,eventName:this.chatEvents.STATE,context:this,func:i})}function b(){this.appContext&&this.appContext.coBrowseManager&&this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.DECLINE,this.serviceId)}function c(){this.invitationActive=!1;window.setTimeout(j.bind(this),n)}function d(a){if(this.isEmbedded){this.invitationActive=!0;this.serviceId=a.serviceId;this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.OFFERED,this.serviceId);k.call(this,a,this.serviceId);l.call(this,this.serviceId);this.offerTimeoutRef=setTimeout(e.bind(this),this.appContext.coBrowseManager.COBROWSE_OFFER_TIMEOUT)}}function e(){this.invitationActive=!1;j.call(this);this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.TIMEOUT,this.serviceId)}function f(){this.invitationActive=!1;j.call(this)}function g(){this.invitationActive=!1;window.setTimeout(j.bind(this),n);this.appContext.deviceDetector.isDesktop()||this.appContext.uiStateManager.setWindowState(!1)}function h(a){a.type===lpTag.unifiedWindow.consts.slider.viewType.CoBrowseInvite&&this.invitationActive&&this.appContext.coBrowseManager.publishCoBrowseEvent(this.coBrowseEvents.DECLINE,this.serviceId)}function i(a){if(a===this.chatState.WAITING){this.invitationActive=!1;j.call(this)}}function j(){clearTimeout(this.offerTimeoutRef);this.sliderAPI.hideSlider();this.sliderAPI.removeView(this.serviceId)}function k(a){var b=new lpTag.unifiedWindow.CoBrowseInvitationViewController({models:this.models,appContext:this.appContext,serviceId:a.serviceId,wrapWithDiv:!1}),c=this.appContext.coBrowseManager.customizeTranslation("cobrowseInvitationHeading");this.sliderAPI.addView(b.view,this.sanitizeText(c).text,a.serviceId,lpTag.unifiedWindow.consts.slider.viewType.CoBrowseInvite)}function l(a){if("undefined"!=typeof a){this.sliderAPI.setSelectedView(a);this.sliderAPI.showSlider()}}var m,n=3e3;lpTag.unifiedWindow.CoBrowseInvitationManagerViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"CoBrowseInvitationManagerViewController",coBrowseEvents:lpTag.unifiedWindow.events.coBrowseEvents,chatEvents:lpTag.unifiedWindow.events.chat,chatState:lpTag.unifiedWindow.State,rendered:!1,initialize:function(a){this.sliderAPI=a.sliderAPI;this.isEmbedded=!this.appContext.conf.unifiedConf.poppedOut&&!this.appContext.conf.unifiedConf.external;this.bindEvents();this.invitationActive=!0;this.isEmbedded&&this.bindModel({path:this.uiPath.STATE,callback:this.stateChanged,context:this})},bindEvents:function(){this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.INVITED,context:this,func:d});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.CANCELED,context:this,func:f});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:this.coBrowseEvents.DECLINE,context:this,func:c});lpTag.events.bind({appName:lpTag.unifiedWindow.apps.COBROWSE,eventName:this.coBrowseEvents.STARTED,context:this,func:g});this.appContext.events.bind({appName:"slider",eventName:this.VCEvents.SLIDER_CLOSED,context:this,func:h});this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.CHAT,eventName:this.chatEvents.STATE,context:this,func:i})},render:function(){this.hide();this.rendered=!0}});m=lpTag.unifiedWindow.CoBrowseInvitationManagerViewController.prototype;m.dispose=function(){j.call(this);a.call(this);lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};m.stateChanged=function(a){var c=a.newValue;c===lpTag.unifiedWindow.State.ENDED||c===lpTag.unifiedWindow.State.NOT_FOUND?b.call(this):(c===lpTag.unifiedWindow.State.APP_ENDED||c===lpTag.unifiedWindow.State.NOT_FOUND)&&j.call(this)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){if(!b.call(this,a&&a.info.uniqueId)){var c=new lpTag.unifiedWindow.SecureFormViewController({models:this.models,appContext:this.appContext,secureForm:a,wrapWithDiv:!1,textInjection:{formName:a.info.secureFormName,imagesRepository:this.appContext.conf.unifiedConf.imagesRepository}});this.secureForms.push({uniqueId:a.info.uniqueId,view:c});this.sliderAPI.addView(c.view,a.info.secureFormName,a.info.uniqueId,lpTag.unifiedWindow.consts.slider.viewType.PCIFormView)}}function b(a){for(var b=0;b<this.secureForms.length;b++)if(this.secureForms[b].uniqueId===a)return this.secureForms[b]}function c(a){var b=this.chatPath.SECURE_FORMS;return this.getModelParam({name:b.name,path:b.path+"."+a})}function d(b){var d=b&&b.uniqueId;if("undefined"!=typeof d){a.call(this,c.call(this,d));this.sliderAPI.setSelectedView(d);this.sliderAPI.showSlider();this.sliderAPI.focusOnMinimize()}}var e,f=lpTag.unifiedWindow.apps.SECURE_FORM;lpTag.unifiedWindow.SecureFormsManagerViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"SecureFormsManagerViewController",secureForms:[],rendered:!1,initialize:function(a){this.sliderAPI=a.sliderAPI},events:function(){this.appContext.events.bind({appName:f,eventName:lpTag.unifiedWindow.consts.SecureForm.LINK_CLICKED,context:this,func:d})},render:function(){this.hide();this.rendered=!0}});e=lpTag.unifiedWindow.SecureFormsManagerViewController.prototype;e.dispose=function(){for(var a=0;a<this.secureForms.length;a++)if(this.secureForms[a].dispose){this.secureForms[a].dispose();this.sliderAPI.removeView(this.secureForms[a].uniqueId)}lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){!a||a.newValue!==lpTag.unifiedWindow.State.WAITING||this.secureFormData.formState!==m.SEND&&this.secureFormData.formState!==m.RECEIVED&&this.secureFormData.formState!==m.VIEWED||this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:m.ABORTED,data:{uniqueId:this.secureFormData.info.uniqueId}})}function b(a){var b="";switch(a){case m.SUBMIT:b=this.translate("secureFormSubmittedMessage");break;case m.ABORTED:
case m.ERROR:b=this.translate("secureFormErrorMessage");break;case m.VIEWED_ON_ANOTHER_TAB:b=this.appContext.conf.engConf.async?this.translate("secureFormErrorMessage"):this.translate("secureFormOpenedInAnotherTabMessage")}var c=this.getFirstElement(this.LPViewMap.message);if(c&&""!==b){c.innerHTML=b;this.getFirstElement(this.LPViewMap.messageContainer).focus()}}function c(){if(this.view){var a=this.createView({template:"<table class='lp_centralizer'><tbody><td><div class='lp_rotator-container'><div class='lp_rotator-container-bg'></div><div class='lp_rotator'><img src='{{imagesRepository}}/{{imageUrl}}' alt='{{imageAltText}}' role='alert'></div></div></td></tbody></table>",target:this.waitArea,wrapWithDiv:!1,textInjection:{imagesRepository:this.appContext.conf.unifiedConf.imagesRepository,imageUrl:"loader_on_warmGray5_75.gif"}});this.view.appendChild(a);this.hide(this.getFirstElement(this.LPViewMap.iFrame))}}function d(){if(this.view){var a=this.getFirstElement(this.LPViewMap.loader);if(a){this.view.removeChild(a);this.show(this.getFirstElement(this.LPViewMap.iFrame))}}}function e(){this.timeoutRef=setTimeout(function(){(this.secureFormData.formState===m.SEND||this.secureFormData.formState===m.RECEIVED)&&this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:m.ERROR,data:{uniqueId:this.secureFormData.info.uniqueId,message:{errorReason:"Secure form load failed (Waited for "+n/1e3+" seconds)"}}})}.bind(this),n)}function f(){this.timeoutRef&&clearTimeout(this.timeoutRef)}function g(){return"https://"+lpTag.csds.getDomain("tokenizer")}function h(a){var b=this.getFirstElement(this.LPViewMap.iFrame);if(a.source===b.contentWindow){var c=k(a.data);this.translator.extendDictionary({secureFormName:this.secureFormData.info.secureFormName},{locale:this.appContext.conf.engConf.lang});this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:c.state,data:{uniqueId:this.secureFormData.info.uniqueId,message:c,text:this.translate("secureForm_line_"+c.state)}})}}function i(a,b,c){this.receiveMessageCallback=j(a,b,c);this.bindViewEvent({view:window,DOMEvent:"message",callback:this.receiveMessageCallback})}function j(a,b,c){return function(d){if("string"==typeof a&&d.origin!==a||"[object Function]"===Object.prototype.toString.call(a))return!1;lpTag.lpUtils.runCallback(b,c,d);return void 0}}function k(a){try{var b=JSON.parse(a);b.state=b.state||m.SUBMIT;return b}catch(c){return{state:a}}}var l,m=lpTag.unifiedWindow.secureFormStates,n=2e4,o="about:blank";lpTag.unifiedWindow.SecureFormViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"SecureFormViewController",template:"<div class='secure_form_container'><iframe class='lp_secure_form_iframe' src='about:blank' aria-label='{{formName}}' style='width: 100%; height: 100%'></iframe><div class='secure_form_message' role='alert' tabindex='-1'><div class='lp_image'><img src='{{imagesRepository}}/secure_form_icon.png' alt=''></div><div class='lp_lpview_title lp_title'>{{secureFormMessage}}</div></div></div>",CLASS_STATE_PREFIX:"_secure_form_state",LPViewMap:{iFrame:"iframe",loader:".lp_centralizer",message:".lp_title",messageContainer:".secure_form_message"},LPClassesMap:{secure_form_container:"secure_form_container"},timeoutRef:null,currentFormState:null,fetchingForm:!1,formLoaded:!1,events:function(){this.bindModel({path:this.uiPath.STATE,callback:a,context:this})},initialize:function(a){this.secureFormData=a.secureForm;this.appContext=a.appContext;this.bindModel({path:this.getModelPath(a.secureForm),callback:this.handleStateChanged})}});l=lpTag.unifiedWindow.SecureFormViewController.prototype;l.loadIFrame=function(){var a=this.getFirstElement(this.LPViewMap.iFrame);c.call(this);e.call(this);if(!this.formLoaded&&!this.fetchingForm&&a.src===o){this.fetchingForm=!0;this.appContext.SecureFormManager.getFormUrl(this.secureFormData.info.uniqueId,function(b){this.fetchingForm=!1;this.formLoaded=!0;if(b){a.src=b;i.call(this,g(),h,this)}else this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.SECURE_FORM,eventName:m.ERROR,data:{uniqueId:this.secureFormData.info.uniqueId,message:{errorReason:"There is a problem with the form url"}}})}.bind(this))}};l.unloadIFrame=function(){var a=this.getFirstElement(this.LPViewMap.iFrame);a.src=o;this.unbindViewEvent({view:window,DOMEvent:"message",callback:this.receiveMessageCallback});this.receiveMessageCallback=null};l.handleStateChanged=function(){var a;this.secureFormData=this.getModelParam(this.getModelPath(this.secureFormData));a=this.secureFormData.formState;if(a&&this.currentFormState!==a){this.currentFormState=a;this.view.className="";this.addClass(this.view,a+this.CLASS_STATE_PREFIX);this.addClass(this.view,this.LPClassesMap.secure_form_container);switch(this.currentFormState){case m.SEND:case m.RECEIVED:this.loadIFrame();break;case m.VIEWED:d.call(this);f.call(this);break;default:d.call(this);f.call(this);b.call(this,this.secureFormData.formState);this.unloadIFrame()}}};l.getModelPath=function(a){var b=this.chatPath.SECURE_FORMS;return{name:b.name,path:b.path+"."+a.info.uniqueId}}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){var a;lpTag.unifiedWindow.WidgetManagerViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"WidgetManagerViewController",windowSDKEvents:null,widgetSDKEventNames:null,wsdkModel:null,widgetModelPath:null,util:null,currentWidgetVC:null,sliderAPI:null,widgetsVC:[],widgetLifeCyleBindingMap:{},widgetNotifications:{},isParentWindow:null,disableWidgetAutoShow:!1,windowIsPaused:!1,isWidgetVisible:!1,isSliderVisible:!1,lastShownWidgetId:null,OPEN_SLIDER_DELAY:400,MAX_WIDGETS:5,initialize:function(a){var b;this.log=lpTag.unifiedWindow.log;this.sliderAPI=a.sliderAPI;this.windowSDKEvents=a.windowSDKEvents;this.wsdkModel=a.wsdkModel;this.widgetSDKEventNames=lpTag.unifiedWindow.events.widgetSDK;this.widgetModelPath=lpTag.unifiedWindow.widgetModelPath;this.widgetSDKAPI=lpTag.LPWidgetSDK.API;this.util=lpTag.taglets.lpUtil;this.appContext=a.appContext;this.widgetLifeCyleBindingMap={};this.widgetNotifications={};this.widgetsVC=[];this.isParentWindow=!this.appContext.conf.unifiedConf.poppedOut;b=this._validateWidgetsConfig(Array.isArray(this.appContext.conf.widgetSDK)&&this.appContext.conf.widgetSDK[0]&&this.appContext.conf.widgetSDK[0].widgets);b=b.slice(0,this.MAX_WIDGETS);if(Array.isArray(b)&&b.length>0){this._createLifecycleBindingEntries();this._createWidgetViewControllers(b);this._restoreNotificationsCount();this._bindEvents();if(this.appContext.deviceDetector.isDesktop()){this.disableWidgetAutoShow=this.appContext.WidgetManager.getLastSliderState()===!1;this._showLastSessionWidget()}}},_createLifecycleBindingEntries:function(){var a;for(var b in this.widgetSDKAPI.states){a=this.widgetSDKAPI.states[b];Array.isArray(this.widgetLifeCyleBindingMap[a])||(this.widgetLifeCyleBindingMap[a]=[])}},_restoreNotificationsCount:function(){this.widgetNotifications=this.appContext.WidgetManager.getWidgetsNotifications();this._publishNotifications()},_createWidgetViewControllers:function(a){var b,c=this.appContext.WidgetManager.getWidgetsStatus();a.forEach(function(a){if(a&&c[a.id]!==!1){b=new lpTag.unifiedWindow.WidgetViewController({widgetsConfig:a,sliderAPI:this.sliderAPI,windowSDKEvents:this.windowSDKEvents,wsdkModel:this.wsdkModel,appContext:this.appContext});this.widgetsVC.push(b);this._addWidgetStateHandling(b);if(c[a.id]===!0){this._removeWidgetStateHandling(a.id);b.init()}}}.bind(this))},_showLastSessionWidget:function(){var a,b=this.appContext.WidgetManager.getLastShownWidgetId();if(b){a=this._getWidgetDataById(b).widget;a&&setTimeout(function(){a.init();this._showWidget(a)}.bind(this),this.OPEN_SLIDER_DELAY)}},_addWidgetStateHandling:function(a){Array.isArray(this.widgetLifeCyleBindingMap[a.getWidgetStartState()])&&this.widgetLifeCyleBindingMap[a.getWidgetStartState()].push(a)},_removeWidgetStateHandling:function(a){var b,c;if("string"==typeof a)for(var d in this.widgetLifeCyleBindingMap){c=this.widgetLifeCyleBindingMap[d];b=c.map(function(a){return a.getId()}).indexOf(a);b>=0&&c.splice(b,1)}},_bindEvents:function(){this.bindedEvents=this.bindedEvents||[];this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:this.widgetSDKEventNames.INIT,context:this,func:this._onSDKButtonClicked}));this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:this.widgetSDKEventNames.WIDGET_AREA_STATE,context:this,func:this._onSliderStateChanged}));this.wsdkModel.bind(this.widgetModelPath.WINDOW_UI,this._onWindowStateChanged,this);this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:this.widgetSDKEventNames.CONVERSATION_STATE,context:this,func:this._onChatStateChanged}));this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:this.widgetSDKEventNames.PARTICIPANTS,context:this,func:this._onParticipantsEvent}));this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:this.widgetSDKEventNames.CONVERSATION_INFO,context:this,func:this._onConversationInfoEvent}));this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:this.widgetSDKEventNames.MESSAGES,context:this,func:this._onLineEvent}));this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.WIDGET_NOTIFICATION,context:this,func:this._onWidgetNotification}));this.bindedEvents.push(this.windowSDKEvents.bind({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.DISPOSED_WIDGET_ID,context:this,func:this._disposeWidgetVC}));this.bindedEvents.push(this.appContext.events.bind({appName:lpTag.unifiedWindow.apps.UISTATE,eventName:lpTag.unifiedWindow.events.uiState.EMBEDDED_CHANGED,context:this,func:this._handleEmbeddedStateChanged}))},_onSDKButtonClicked:function(){this.isWidgetVisible?this.util.runCallback(this.sliderAPI.hideSlider,this.sliderAPI):this._showWidget(this._getWidgetToShow(this._getInitiatedWidgets()));this.disableWidgetAutoShow=!1},_handleEmbeddedStateChanged:function(){this.isWidgetVisible=this.appContext.WidgetManager.getLastSliderState()},_onSliderStateChanged:function(a){this.log.info("_onSliderStateChanged: "+a.isOpened+" "+a.type,this.ControllerName);var b=this.currentWidgetVC&&this.currentWidgetVC.getId(),c=this.lastShownWidgetId&&this.lastShownWidgetId!==b,d=a.type===lpTag.unifiedWindow.consts.slider.viewType.widgetSDKView;this.isSliderVisible=a.isOpened;this.isWidgetVisible=this.isSliderVisible&&d;if(this.isWidgetVisible)if(c)this._handleSwappedWidgets(this.lastShownWidgetId,b);else{this._triggerEventToWidget(this.widgetSDKAPI.events.UI_WIDGET,{isShown:!0},b);this.lastShownWidgetId=b}else{this._triggerEventToWidget(this.widgetSDKAPI.events.UI_WIDGET,{isShown:!1},b);this.lastShownWidgetId=null;this.currentWidgetVC=null}},_handleSwappedWidgets:function(a,b){this._triggerEventToWidget(this.widgetSDKAPI.events.UI_WIDGET,{isShown:!0},b);this.lastShownWidgetId=b;a&&a!==b&&this._triggerEventToWidget(this.widgetSDKAPI.events.UI_WIDGET,{isShown:!1},a)},_onWindowStateChanged:function(a){this.isMaximized=a&&a.newValue&&a.newValue.isMaximized;this._triggerEventToAllWidgets(this.widgetSDKAPI.events.UI_WINDOW,{isMaximized:this.isMaximized});this.isMaximized&&(this.isWidgetVisible?this._clearWidgetNotification(this.currentWidgetVC.getId()):this.pendingWidgetToShow&&this._showPendingWidget())},_showPendingWidget:function(){setTimeout(function(){this._showWidget(this.pendingWidgetToShow);this.pendingWidgetToShow=null}.bind(this),this.OPEN_SLIDER_DELAY)},_onChatStateChanged:function(a){var b=this.widgetLifeCyleBindingMap[a];if(lpTag.unifiedWindow.State.PAUSED===a)this.windowIsPaused=!0;else if(lpTag.unifiedWindow.State.RESUME_PAUSED===a){this.windowIsPaused=!1;this._onReturnFromPopout()}else this._handleWidgetsStates(b)},_onReturnFromPopout:function(){var a,b=this.appContext.WidgetManager.getLastShownWidgetId(),c=this.appContext.WidgetManager.getWidgetsStatus();this._restoreNotificationsCount();if(c)for(var d in c){a=this._getWidgetDataById(d).widget;if(c[d]===!1)this._disposeWidgetVC(d);else if(c[d]===!0&&a){a.init();this._removeWidgetStateHandling(d)}}if(b){a=this._getWidgetDataById(b).widget;a&&setTimeout(function(){this._showWidget(a)}.bind(this),this.OPEN_SLIDER_DELAY)}else this.appContext.WidgetManager.getLastSliderState()===!1&&this.util.runCallback(this.sliderAPI.hideSlider,this.sliderAPI)},_handleWidgetsStates:function(a){var b,c=[];if(Array.isArray(a)){a.forEach(function(a){if(a&&!a.isDisposed()){a.init();this.appContext.deviceDetector.isDesktop()&&a.showAfterInitiation()&&c.push(a)}}.bind(this));b=this._getWidgetToShow(c);this.disableWidgetAutoShow||!b||this.isSliderVisible||this._showWidget(b)}},_onParticipantsEvent:function(a){a&&this._triggerEventToAllWidgets(this.widgetSDKAPI.events.PARTICIPANTS,a)},_onConversationInfoEvent:function(a){a&&this._triggerEventToAllWidgets(this.widgetSDKAPI.events.CONVERSATION_INFO,a)},_onLineEvent:function(a){a&&this._triggerEventToAllWidgets(this.widgetSDKAPI.events.MESSAGES,a)},_onWidgetNotification:function(a){var b=a.widgetId;this.isMaximized?this.isWidgetVisible&&b===this.currentWidgetVC.getId()||this._handleWidgetNotification(b):this._handleWidgetNotification(b)},_triggerEventToAllWidgets:function(a,b,c){var d,e,f,g=this.util.getUID();c=c||[];for(var h=0;h<this.widgetsVC.length;h++){e=this.widgetsVC[h];d=e.getId();f=!1;for(var i=0;i<c.length;i++)if(c[i]===d){f=!0;break}f||this._triggerEventToWidget(a,b,d,g)}},_triggerEventToWidget:function(a,b,c,d){var e;if(!this.windowIsPaused){e=this._getWidgetDataById(c).widget;d=d||this.util.getUID();e&&e.trigger&&e.trigger(a,{id:d,type:a,data:b})}},_showWidget:function(a){var b;if(a){b=this.appContext.WidgetManager.isWindowMaximized();if(b){this.currentWidgetVC=a;this.currentWidgetVC.showWidget();this._clearWidgetNotification(this.currentWidgetVC.getId());this._removeWidgetStateHandling(this.currentWidgetVC.getId())}else this.pendingWidgetToShow=a}},_getWidgetToShow:function(a){var b=Array.isArray(a)&&a.length>0&&a||[],c=b[0];b.forEach(function(a){a.getPriority()>c.getPriority()&&(c=a)}.bind(this));return c},_getWidgetDataById:function(a){var b={widget:null,index:-1};if(a)for(var c=0;c<this.widgetsVC.length;c++)if(this.widgetsVC[c].getId()===a){b.widget=this.widgetsVC[c];b.index=c;break}return b},_getInitiatedWidgets:function(){return this.widgetsVC.filter(function(a){return a.isInitiated()===!0||a.isError()})||[]},_validateWidgetsConfig:function(a){var b,c,d,e,f,g=[];if(Array.isArray(a))for(var h=0;h<a.length;h++){d=!1;e=!1;c=!1;b=a[h];d="object"==typeof b&&"string"==typeof b.url&&b.url.length>0&&"string"==typeof b.name&&b.name.length>0;if(d){if("string"==typeof b.startState){f=Object.keys(this.widgetSDKAPI.states);for(var i=0;i<f.length;i++)this.widgetSDKAPI.states[f[i]]===b.startState&&(e=!0)}e||(b.startState=this.widgetSDKAPI.states.ACCEPTED);"boolean"!=typeof b.showOnInit&&(b.showOnInit=!1);b.id=encodeURIComponent(b.name.trim().replace(" ","_"));b.url=decodeURIComponent(b.url.trim());b.priority=a.length-h;for(var j=0;j<g.length;j++)if(g[j].id===b.id){c=!0;break}c||g.push(b)}}return g},_disposeWidgetVC:function(a){var b=this._getWidgetDataById(a),c=b.widget,d=b.index;if(c){c.dispose();this.widgetsVC.splice(d,1);this._removeWidgetStateHandling(a);this.currentWidgetVC=this.currentWidgetVC&&this.currentWidgetVC.getId()===a?null:this.currentWidgetVC;this.appContext.WidgetManager.handleWidgetDisposal(a)}},_handleWidgetNotification:function(a){if(!this.windowIsPaused){this.widgetNotifications[a]=this.widgetNotifications[a]||0;this.widgetNotifications[a]+=1;this.appContext.WidgetManager.setWIdgetsNotifications(this.widgetNotifications);this._publishNotifications()}},_clearWidgetNotification:function(a){if(!this.windowIsPaused){this.widgetNotifications[a]=0;this.appContext.WidgetManager.setWIdgetsNotifications(this.widgetNotifications);this._publishNotifications()}},_publishNotifications:function(){var a=0;if(this.widgetNotifications){for(var b in this.widgetNotifications)a+=this.widgetNotifications[b];this.windowSDKEvents.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.NOTIFICATION,data:a})}},_unbindEvents:function(){this.bindedEvents.forEach(function(a){this.windowSDKEvents.unbind(a)}.bind(this));this.wsdkModel.unbind(this.widgetModelPath.WINDOW_UI,this._onWindowStateChanged,this)}});a=lpTag.unifiedWindow.WidgetManagerViewController.prototype;a.dispose=function(){this._unbindEvents();this.widgetsVC.forEach(function(a){a&&this._disposeWidgetVC(a.getId())}.bind(this));this.widgetsVC=[];this.widgetLifeCyleBindingMap={};this.sliderAPI.dispose()}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a,b){if(d[a]){c=c||{};c[a]={eventName:a,data:b}}}var b,c,d;lpTag.unifiedWindow.WidgetViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"WidgetViewController",sliderAPI:null,widgetsConfig:null,imageRepository:null,windowSDKEvents:null,util:null,showOnInit:!1,priority:-1,courier:null,state:null,WAIT_FOR_SLIDER_AVAILABILITY_TIME:400,MAX_OPEN_SLIDER_TRIES:5,STATE_TYPE:{inititating:"initiating",initiated:"initiated",errorOnInitiation:"errorOnInitiation",disposed:"disposed"},MAX_LOADING_TIME:3e3,initialize:function(a){this.sliderAPI=a.sliderAPI;this.widgetsConfig=a.widgetsConfig;this.windowSDKEvents=a.windowSDKEvents;this.appContext=a.appContext;this.util=lpTag.taglets.lpUtil;this.widgetSDKAPI=lpTag.LPWidgetSDK.API;d={};d[this.widgetSDKAPI.events.PARTICIPANTS]=!0},_initWidget:function(){var a=this.widgetsConfig;this.state=this.STATE_TYPE.inititating;this.showOnInit=a.showOnInit;this.priority=a.priority;if(a&&a.url&&"string"==typeof a.name){this._createWidgetCourier();this.state=this.STATE_TYPE.initiated;this.windowSDKEvents.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.INITIATED_WIDGET_ID,data:this.getId()})}},_createWidgetCourier:function(){var a,b=this._getParametesForWidgetCreation()||this.widgetsConfig.url,c={context:this,reload:this.reloadWidget},d={width:"100%",height:"100%"};d["border-color"]="transparent";try{a=new lpTag.Chronos.PostMessageCourier({target:{url:b,callback:this._onCourierInitiatedCallback,context:this,useObjects:this.appContext.deviceDetector.isIE()?!1:!0,style:d,container:this.getFirstElement(this.view)},removeDispose:!0});this.sliderAPI.addView(this.getFirstElement(this.view),"",this.getId(),lpTag.unifiedWindow.consts.slider.viewType.widgetSDKView,c)}catch(e){this.logger.error("Error on courier initiation for: "+this.getId(),this.ControllerName);this._handleError()}this.courierErrorTimeout=setTimeout(function(){this.state!==this.STATE_TYPE.initiated&&this._handleError()}.bind(this),this.MAX_LOADING_TIME);this.courier=a},_getParametesForWidgetCreation:function(){var a=[];this.getId()&&a.push({key:lpTag.unifiedWindow.consts.widgetSDK.WIDGET_NAME,value:this.getId()});this.appContext.conf.unifiedConf.accountId&&a.push({key:lpTag.unifiedWindow.consts.widgetSDK.ACCOUNT_ID,value:this.appContext.conf.unifiedConf.accountId});return this.util.addQueryParams(this.widgetsConfig.url,a)},_onCourierInitiatedCallback:function(a,b){if(a)this._handleError();else{this.iframe=this._setIframeAccessibilityAttrs(b);this._runPendingEventsData();this.setWidgetCommandEvents()}},_runPendingEventsData:function(){for(var a in c)c.hasOwnProperty(a)&&this.trigger(a,c[a].data);c=null},_handleError:function(){if(this.STATE_TYPE.errorOnInitiation!==this.state||this.STATE_TYPE.disposed!==this.state){this.logger.error("_handleError: Failed to init widget communication",this.ControllerName);this.state=this.STATE_TYPE.errorOnInitiation}},_setIframeAccessibilityAttrs:function(a){if(a.constructor===HTMLIFrameElement){a.setAttribute("tabindex","0");a.setAttribute("role","region");a.setAttribute("aria-label","widget area");a.setAttribute("title","widget area");return a}},setWidgetCommandEvents:function(){if(this.courier){this.courier.comply({appName:this.widgetSDKAPI.appName,cmdName:this.widgetSDKAPI.commands.NOTIFICATION,func:this._onWidgetNotification,context:this});this.courier.comply({appName:this.widgetSDKAPI.appName,cmdName:this.widgetSDKAPI.commands.DISPOSE,func:this._onDisposeCommand,context:this})}},_onWidgetNotification:function(a){this.logger.info("_onNotification: on notification",this.ControllerName);a=a||{};a.widgetId=a.id||this.getId();this.windowSDKEvents.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.WIDGET_NOTIFICATION,data:a})},_onDisposeCommand:function(a){a===this.getId()&&this.windowSDKEvents.trigger({appName:lpTag.unifiedWindow.apps.WINDOW_SDK,eventName:lpTag.unifiedWindow.events.widgetSDK.DISPOSED_WIDGET_ID,data:a})},_addToSlider:function(){this.sliderAPI.setSelectedView(this.getId());this.sliderAPI.showSlider();this.sliderAPI.focusOnMinimize()}});b=lpTag.unifiedWindow.WidgetViewController.prototype;b.getId=function(){return this.widgetsConfig&&this.widgetsConfig.id};b.showAfterInitiation=function(){return this.showOnInit};b.getPriority=function(){return this.priority};b.getWidgetStartState=function(){return this.widgetsConfig.startState};b.getEvents=function(){return this.widgetsConfig.events};b.trigger=function(b,c){this.courier?this.courier.trigger({appName:this.widgetSDKAPI.appName,eventName:b,data:c}):a.call(this,b,c)};b.reloadWidget=function(){if(this.state!==this.STATE_TYPE.inititating){if(this.courier){this.courier.dispose();this.courier=null}this.iframe=null;this._initWidget()}};b.init=function(){null===this.state&&this._initWidget()};b.showWidget=function(){var a,b=0;if(this.sliderAPI.isInProgress())a=setInterval(function(){b++;if(this.sliderAPI.isInProgress())this.MAX_OPEN_SLIDER_TRIES===b&&clearInterval(a);else{this.init();this._addToSlider();clearInterval(a)}}.bind(this),this.WAIT_FOR_SLIDER_AVAILABILITY_TIME);else{this.init();this._addToSlider()}};b.isInitiated=function(){return this.state===this.STATE_TYPE.initiated};b.isDisposed=function(){return this.state===this.STATE_TYPE.disposed};b.isError=function(){return this.state===this.STATE_TYPE.errorOnInitiation};b.dispose=function(){if(this.state!==this.STATE_TYPE.disposed){this.state=this.STATE_TYPE.disposed;this.sliderAPI.getSelectedViewId()===this.getId()&&this.util.runCallback(this.sliderAPI.hideSlider,this.sliderAPI);this.sliderAPI.removeView(this.getId());if(this.courierErrorTimeout){clearTimeout(this.courierErrorTimeout);this.courierErrorTimeout=null}this.courier.dispose()}}}();!function(){lpTag.unifiedWindow.LogoViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"LogoViewController",initialize:function(a){this.appContext=a.appContext;this.windowConf=this.appContext.conf.windowConf},render:function(){this.windowConf.logoImage&&this.windowConf.logoUrl&&this.createView({template:"<div class='lp_logo_area_wrapper' title='{{altText}}' data-lp-cust-id='logoAltText'><a class='lp_logo_link {{disableLinkClass}}' href='{{targetUrl}}' target='_blank' title='{{altText}}' data-lp-cust-id='logoTarget' {{tabindex}}><div class='lp_logo_image_wrapper' data-lp-cust-id='logo'><img src='{{url}}' alt='{{altText}}' class='lp_image' data-lp-cust-id='logoImage'></div></a></div>",wrapWithDiv:!1,textInjection:{url:this.windowConf.logoUrl,targetUrl:this.windowConf.logoRedirectUrl||"javascript:void(0);",disableLinkClass:this.windowConf.logoRedirectUrl?"":"disableLinkClass",tabIndex:this.windowConf.logoRedirectUrl?"":"tabindex='0'",altText:this.windowConf.logoAltText||this.translate("defaultAltLogoText")}})}})}();!function(){function a(){var a=this.getFirstElement(this.LPViewMap.link);a.onclick=c.bind(this);this.failedToLoadHistory&&d.call(this)}function b(a){var b=!1,c=a&&a.newValue;if(c&&c.length>0)for(var d=0;d<c.length&&!b;){c[d]&&c[d].history&&(b=!0);d++}b&&this.hideRotator()}function c(){this.appContext.events.trigger({appName:"*",eventName:this.VCEvents.RETRY_GET_HISTORY});d.call(this)}function d(){var a=this.getFirstElement(this.LPViewMap.wrapper);this.removeClass(a,"lpHide");f.call(this);e.call(this)}function e(){for(var a,b=[{message:this.translate("transcriptRotatorFirstMessage"),hideImage:!1,hideLink:!0},{message:this.translate("transcriptRotatorSecondMessage"),hideImage:!0,hideLink:!1}],c=0;c<b.length;c++){a=setTimeout(g.bind(this,b[c]),this.updateRotatorTimeouts[c]);this.updateRotatorTimeoutIDs.push(a)}}function f(){for(var a=0;a<this.updateRotatorTimeoutIDs.length;a++)clearTimeout(this.updateRotatorTimeoutIDs[a]);this.updateRotatorTimeoutIDs=[];g.call(this,{message:this.translate("transcriptRotatorDefaultMessage"),hideImage:!1,hideLink:!0})}function g(a){var b=this.getFirstElement(this.LPViewMap.wrapper),c=this.getFirstElement(this.LPViewMap.text,b),d=this.getFirstElement(this.LPViewMap.link,b),e=this.getFirstElement(this.LPViewMap.image,b);c.innerText=a&&a.message;this.toggle(a&&!a.hideImage,{view:e,useClasses:!0});this.toggle(a&&!a.hideLink,{view:d,useClasses:!0})}var h;lpTag.unifiedWindow.RotatorViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"RotatorViewController",updateRotatorTimeouts:[1e4,3e4],LPViewMap:{wrapper:".lp_transcript_rotator_wrapper",text:"^lp_transcript_rotator_text",link:"^lp_transcript_rotator_link",image:".lp_transcript_rotator_image"},initialize:function(a){this.appContext=a.appContext;this.updateRotatorTimeoutIDs=[];this.failedToLoadHistory=this.appContext.conf.unifiedConf.failedToLoadHistory},events:function(){this.bindModel({path:this.chatPath.LINES,callback:b});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.CONVERSATIONS_VIEWED,context:this,func:d})},render:function(){this.createView({template:"<div class='lp_transcript_rotator_wrapper lpHide'><div class='lp_transcript_rotator_image'><img src='{{imagesRepository}}/{{imageUrl}}' alt='' class='lp_image'></div><div class='lp_transcript_rotator_text'><span class='text' data-lp-point='lp_transcript_rotator_text'>{{text}}</span>&nbsp;<a href='#' data-lp-point='lp_transcript_rotator_link'>{{linkText}}</a></div></div>",wrapWithDiv:!1,textInjection:{imagesRepository:this.appContext.conf.unifiedConf.imagesRepository,imageUrl:"loader_anim_bgwhite_16.gif",text:this.translate("transcriptRotatorDefaultMessage"),linkText:this.translate("transcriptRotatorLinkText")},callback:a.bind(this)})}});h=lpTag.unifiedWindow.RotatorViewController.prototype;h.hideRotator=function(){var a=this.getFirstElement(this.LPViewMap.wrapper);if(a){f.call(this);this.addClass(a,"lpHide")}}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){this.appContext.events.trigger({appName:this.ControllerName,eventName:this.VCEvents.DIALOG_CLOSED,data:{origin:a,dialogOpenedFrom:this.dialogOpenedFrom}});this.appContext.events.trigger({appName:"*",eventName:lpTag.unifiedWindow.events.viewController.MAXIMIZE_VISIBLE})}var b;lpTag.unifiedWindow.DialogViewController=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"DialogViewController",template:"<div class='lp_lpview_mp lp_dialog_container' data-lp-cust-id='dialogArea' role='alertdialog' aria-labelledby='dialog_title dialog_subtitle'><div class='lp_center_div_wrapper'><div class='lp_center_div_inner'><div class='lp_center_div_inner_content'><div class='lp_lpview_title lp_title' id='dialog_title'>{{title}}</div><div class='lp_lpview_title lp_subtitle lp_hidden' id='dialog_subtitle' data-lp-point='subtitle_text'>{{subtitle}}</div><div class='lp_buttons_area'><button class='lp_cancel_button' data-lp-point='cancel_button' data-lp-cust-id='cancel_button'>{{cancel}}</button> <button class='lp_confirm_button' data-lp-point='confirm_button' data-lp-cust-id='button'>{{confirm}}</button></div></div></div></div></div>",focusElement:void 0,errorId:void 0,LPViewMap:{confirmButton:"^confirm_button",cancelButton:"^cancel_button",innerContainer:"^center_div_inner",error:"^dialog_input_error"},LPClassesMap:{error:"lp_error"},initialize:function(a){a.successCallback&&(this.successCallback=a.successCallback);a.cancelCallback&&(this.cancelCallback=a.cancelCallback);this.appContext=a.appContext;this.dialogOpenedFrom=a.dialogOpenedFrom;var b=this.appContext.deviceDetector.isDesktop()?"1":"0.92";this.animate(this.view,{duration:300,opacity:b})},onInitialize:function(){this.focusOnElement()},events:function(){this.bindViewEvent({selector:this.LPViewMap.confirmButton,DOMEvent:"click",callback:this.confirmClicked});this.bindViewEvent({selector:this.LPViewMap.cancelButton,DOMEvent:"click",callback:this.cancelClicked});(this.appContext.deviceDetector.isMobile()||this.appContext.deviceDetector.isTablet())&&this.bindViewEvent({view:this.view,DOMEvent:"touchstart",callback:this.viewTapped});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.MAXIMIZE_VISIBLE,context:this,func:this.focusOnElement})}});b=lpTag.unifiedWindow.DialogViewController.prototype;b.viewTapped=function(){"INPUT"===document.activeElement.tagName&&this.hasInputFocused&&document.activeElement.blur()};b.successCallback=function(){};b.cancelCallback=function(){};b.confirmClicked=function(){if(this.validate()){this.successCallback();this.closeDialog(this.appConsts.dialog.actions.CONFIRM)}};b.cancelClicked=function(){this.closeDialog(this.appConsts.dialog.actions.CANCEL,this.cancelCallback)};b.focusOnElement=function(){this.focusElement&&this.focusElement.focus()};b.validate=function(){return!0};b.showError=function(a,b){var c=this;this.errorView||this.createView({template:"<img class='lp_email_error_img' data-lp-point='email_error_img' src='{{url}}' alt='' aria-hidden='true'><div id='{{id}}' class='lp_email_error_text' class='lp_text' data-lp-point='email_error_text' aria-live='polite'>{{text}}</div>",wrapWithDiv:!0,target:this.LPViewMap.error,textInjection:{text:a,url:this.appContext.conf.unifiedConf.imagesRepository+"/error-15x15.png",id:this.errorId},callback:function(a){c.errorView=a;c.errorView.setAttribute("role","alert");c.errorView.setAttribute("class","lp_dialog_alert")}});this.setErrorAttrs(b);this.shakeX(this.getFirstElement(this.LPViewMap.innerContainer))};b.hideError=function(){this.removeView(this.errorView);this.errorView=null;this.removeErrorAttrs()};b.setErrorAttrs=function(){this.addClass(this.LPViewMap.innerContainer,this.LPClassesMap.error);this.setErrorAccessibilityAttrs()};b.removeErrorAttrs=function(){this.removeClass(this.LPViewMap.innerContainer,this.LPClassesMap.error);this.removeErrorAccessibilityAttrs()};b.setErrorAccessibilityAttrs=function(){var a=this.focusElement;a.setAttribute("aria-describedby",this.errorId);a.setAttribute("aria-invalid","true");a.focus()};b.removeErrorAccessibilityAttrs=function(){var a=this.focusElement;a.removeAttribute("aria-describedby");a.removeAttribute("aria-invalid")};b.closeDialog=function(b,c){a.call(this,b);this.view.removeAttribute("role");var d=this;this.animate(this.view,{duration:500,opacity:"0"},function(){c&&"function"==typeof c&&c.call(d);d.dispose()})}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b=new RegExp(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);return b.test(a)}var b;lpTag.unifiedWindow.EmailTranscriptDialogViewController=lpTag.unifiedWindow.DialogViewController.extend({ControllerName:"EmailTranscriptDialogViewController",template:"<div class='lp_lpview_mp lp_dialog_container' data-lp-cust-id='dialogArea'><div class='lp_center_div_wrapper'><div class='lp_center_div_inner' data-lp-point='center_div_inner'><div class='lp_center_div_inner_content'><div id='lp_transcript_title' class='lp_lpview_title lp_title lp_email_transcript'>{{title}}</div><input class='lp_dialog_input' data-lp-point='dialog_input' type='email' aria-labelledby='lp_transcript_title'><div class='lp_dialog_input_error' data-lp-point='dialog_input_error'></div><div class='lp_buttons_area'><button class='lp_cancel_button lp_email_transcript' data-lp-point='cancel_button' data-lp-cust-id='cancel_button'>{{cancel}}</button> <button class='lp_confirm_button lp_email_transcript' data-lp-point='confirm_button' data-lp-cust-id='button'>{{confirm}}</button></div></div></div></div></div>",
TOOLTIP_TIMEOUT:3e3,emailAddress:void 0,errorId:"lp_transcript_error",LPViewMap:{confirmButton:"^confirm_button",cancelButton:"^cancel_button",input:"^dialog_input",error:"^dialog_input_error",innerContainer:"^center_div_inner"},LPClassesMap:{error:"lp_error"},preInitView:function(){this.textInjection={title:this.translate("dialog_email_transcript"),confirm:this.translate("submit"),cancel:this.translate("cancel")}},initialize:function(){this.focusElement=this.getFirstElement(this.LPViewMap.input)}});b=lpTag.unifiedWindow.EmailTranscriptDialogViewController.prototype;b.cancelCallback=function(){this.hideError()};b.validate=function(){var b=this.focusElement.value;if(a(b)){this.emailAddress=b;this.appContext.events.trigger({appName:"tooltip",eventName:"show",data:{text:this.translate("tooltip_EmailTranscriptSentConfirmation"),tooltipTimeout:this.TOOLTIP_TIMEOUT}});this.hideError();return!0}this.showError(this.translate("inputEmailError"));return!1};b.successCallback=function(){this.appContext.chatStateManager.emailTranscript(this.emailAddress,"Your chat transcript");this.view.focus()}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){var b=this.getFirstElement(this.LPViewMap.confirmButton),c=a.newValue;c===lpTag.unifiedWindow.State.CONNECTION_ISSUE?b.setAttribute("disabled","disabled"):b.removeAttribute("disabled")}var b;lpTag.unifiedWindow.EndChatDialogViewController=lpTag.unifiedWindow.DialogViewController.extend({ControllerName:"EndChatDialogViewController",LPViewMap:{confirmButton:"^confirm_button",cancelButton:"^cancel_button"},preInitView:function(){this.textInjection={title:this.translate("end_chat_alert"),confirm:this.translate("yes"),cancel:this.translate("no")}},events:function(){this.bindModel({path:this.uiPath.STATE,callback:a,context:this})},initialize:function(){this.focusElement=this.getFirstElement(this.LPViewMap.cancelButton)}});b=lpTag.unifiedWindow.EndChatDialogViewController.prototype;b.successCallback=function(){this.appContext.uiStateManager.setActionsVisibility(!1);this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.application.END_CHAT})}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};var proto;lpTag.unifiedWindow.ForgetMeDialogViewController=lpTag.unifiedWindow.DialogViewController.extend({ControllerName:"ForgetMeDialogViewController",LPViewMap:{confirmButton:"^confirm_button",cancelButton:"^cancel_button",subtitleElement:"^subtitle_text"},preInitView:function(){var a=this.models.uiModel.get(lpTag.unifiedWindow.uiModelPath.STATE.path),b=[lpTag.unifiedWindow.State.ENDED,lpTag.unifiedWindow.State.PENDING,lpTag.unifiedWindow.State.APP_ENDED,lpTag.unifiedWindow.State.WAITING],c=this.translate("forget_me_dialog_subtitle_on_active_chat");-1!==b.indexOf(a)&&(c=this.translate("forget_me_dialog_subtitle"));this.textInjection={title:this.translate("forget_me_dialog"),confirm:this.translate("yes"),cancel:this.translate("no"),subtitle:c}},render:function(){lpTag.taglets.lpUtil.removeClass(this.subtitleElement,"lp_hidden")},events:function(){this.bindModel({path:this.uiPath.STATE,callback:_stateChanged,context:this})},initialize:function(){this.focusElement=this.getFirstElement(this.LPViewMap.cancelButton);this.subtitleElement=this.getFirstElement(this.LPViewMap.subtitleElement)}});proto=lpTag.unifiedWindow.ForgetMeDialogViewController.prototype;proto.successCallback=function(){this.appContext.uiStateManager.setActionsVisibility(!1);this.appContext.events.trigger({appName:lpTag.unifiedWindow.apps.UNIFIED_WINDOW,eventName:lpTag.unifiedWindow.events.application.END_CHAT});this.appContext.events.trigger({appName:"*",eventName:lpTag.unifiedWindow.events.chat.FORGET_ME,global:!0})};window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(){for(var a,b=[],c=1;2>=c;c++){a=this.getFirstElement(this.LPViewMap["input"+c]);b.push(a)}return b}function b(){for(var a=[],b=0;b<this.inputs.length;b++)this.inputs[b].value||a.push(this.inputs[b]);return a}function c(){for(var a=0;a<this.inputs.length;a++)this.removeClass(this.inputs[a],this.LPClassesMap.error)}var d;lpTag.unifiedWindow.IdnvDialogViewController=lpTag.unifiedWindow.DialogViewController.extend({ControllerName:"IdnvDialogViewController",template:"<div class='lp_lpview_mp lp_dialog_container' data-lp-cust-id='dialogArea' role='dialog'><div class='lp_center_div_wrapper'><div class='lp_center_div_inner' data-lp-point='center_div_inner'><fieldset class='lp_center_div_inner_content'><legend class='lp_lpview_title lp_title' id='idnv_dialog_title'>{{title}}</legend><div class='lp_idnv_container'><div class='lp_idnv_wrapper'><label for='idnv_input_1'>{{idnvChar1}}</label><input id='idnv_input_1' class='lp_dialog_input lp_idnv_input' data-lp-point='dialog_input_1' aria-describedby='idnv_dialog_title' type='password' maxlength='1' aria-required='true'></div><div class='lp_idnv_wrapper'><label for='idnv_input_2'>{{idnvChar2}}</label><input id='idnv_input_2' class='lp_dialog_input lp_idnv_input' data-lp-point='dialog_input_2' aria-describedby='idnv_dialog_title' type='password' maxlength='1' aria-required='true'></div><div class='lp_dialog_input_error' data-lp-point='dialog_input_error' role='alert' aria-atomic='true'></div></div><div class='lp_buttons_area'><button class='lp_cancel_button' data-lp-point='cancel_button' data-lp-cust-id='cancel_button'>{{cancel}}</button> <button class='lp_confirm_button' data-lp-point='confirm_button' data-lp-cust-id='button'>{{confirm}}</button></div></fieldset></div></div></div>",errorId:"lp_idnv_error",LPViewMap:{confirmButton:"^confirm_button",cancelButton:"^cancel_button",input1:"^dialog_input_1",input2:"^dialog_input_2",error:"^dialog_input_error",innerContainer:"^center_div_inner"},preInitView:function(a){var b;this.idnvData=a.idnvData;b=this.idnvData.fields;this.textInjection={title:this.injectTextDefaults(this.translate("idnvDialogTitle",!0),{idnvChar1:b.firstChar,idnvChar2:b.secondChar,idnvType:b.typeField}),confirm:this.translate("submit"),cancel:this.translate("cancel"),idnvChar1:b.firstChar,idnvChar2:b.secondChar}},initialize:function(){this.inputs=a.call(this);this.focusElement=this.inputs[0]},events:function(){this.appContext.events.bind({appName:"*",eventName:this.EventName.chatState.ENDED,context:this,func:this.closeDialog});this.appContext.events.bind({appName:"*",eventName:this.VCEvents.DIALOG_STATE_CHANGED,context:this,func:this.closeDialog})}});d=lpTag.unifiedWindow.IdnvDialogViewController.prototype;d.cancelCallback=function(){this.hideError();this.appContext.idnvManager.sendIdnvCancelLine(this.idnvData.encodedFields)};d.successCallback=function(){var a={firstChar:this.inputs[0].value,secondChar:this.inputs[1].value,idnvData:this.idnvData};this.appContext.idnvManager.sendIdnvSubmitLine(a)};d.validate=function(){var a=b.call(this);if(0===a.length){this.hideError();return!0}this.hideError();this.showError(this.translate("idnvInputError"),a);return!1};d.setErrorAttrs=function(a){c.call(this);for(var b=0;b<a.length;b++)this.addClass(a[b],this.LPClassesMap.error);this.addClass(this.LPViewMap.error,this.LPClassesMap.error);this.focusElement=a[0];this.setErrorAccessibilityAttrs()};d.removeErrorAttrs=function(){c.call(this);this.removeClass(this.LPViewMap.error,this.LPClassesMap.error);this.removeErrorAccessibilityAttrs()}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){var a;lpTag.unifiedWindow.ReauthenticationDialogViewController=lpTag.unifiedWindow.DialogViewController.extend({ControllerName:"ReauthenticationDialogViewController",template:"<div class='lp_lpview_mp lp_dialog_container' data-lp-cust-id='dialogArea' role='alertdialog' aria-labelledby='dialog_title'><div class='lp_center_div_wrapper'><div class='lp_center_div_inner'><div class='lp_center_div_inner_content'><div class='lp_icons_area'><div class='icon'><img src='{{imagesRepository}}/embedded-error.png' alt='' aria-hidden='true'></div></div><div class='lp_lpview_title lp_title lp_title_large_padding' id='dialog_title'>{{title}}</div><div class='lp_buttons_area'><button class='lp_confirm_button lp_single_button' data-lp-point='confirm_button' data-lp-cust-id='button'>{{confirm}}</button></div></div></div></div></div>",LPViewMap:{confirmButton:"^confirm_button"},preInitView:function(a){this.data=a;var b=this.translate("authExpired"),c=this.translate("redirect");if(a.appContext.conf.engConf.allowUnauthMsg){b=this.translate("unauthExpired");c=this.translate("reload")}this.textInjection={title:b,confirm:c,imagesRepository:a.appContext.conf.unifiedConf.imagesRepository};isNaN(a.callbackTimeout)||(this.timeout=setTimeout(function(){lpTag.lpUtils.runCallback(a.callback,a.context)},a.callbackTimeout))},initialize:function(){this.focusElement=this.getFirstElement(this.LPViewMap.confirmButton);this.data.header_key&&this.appContext.wrapperWindow.setTitle(this.translate(this.data.header_key))}});a=lpTag.unifiedWindow.ReauthenticationDialogViewController.prototype;a.successCallback=function(){this.timeout&&clearTimeout(this.timeout);lpTag.lpUtils.runCallback(this.data.callback,this.data.context)}}();window.lpTag=window.lpTag||{};window.lpTag.unifiedWindow=window.lpTag.unifiedWindow||{};!function(){function a(a){for(var b=this.getElements(this.tagName),c=0;c<b.length;c++)b[c].setAttribute("aria-describedby",a)}function b(){for(var a=this.getElements(this.tagName),b=0;b<a.length;b++)a[b].removeAttribute("aria-describedby")}var c;lpTag.unifiedWindow.BaseSurveyQuestion=lpTag.unifiedWindow.BaseViewController.extend({ControllerName:"BaseSurveyQuestion",applicationType:"BaseSurveyQuestion",errorTemplateFileName:"<div class='{{wrapperClass}}wrapper' role='alert'><img class='lp_error_img' src='{{url}}' alt='{{errorAltText}}'><div id='{{id}}' class='lp_error_text lp_text' data-lp-point='errorText' aria-live='polite'>{{text}}</div></div>",wrapperTemplateFileName:"<div class='lp_question'><h3 id='{{id}}' class='lp_question_label'>{{label}}</h3><div class='lp_lpview_content lp_content'></div></div>",prefixMap:{label:"lbl_",error:"err_"},LPViewMap:{errorWrapper:".surveyError_wrapper",errorText:"^errorText"},LPClassMap:{label:"lp_question_label",content:"lp_lpview_content",error:"lp_error",surveyError:"lp_surveyError_"},initialize:function(a){this.hasError=!1;if(a.question){this.question=a.question;this.errorIconURL=a.imagesRepository+"/error-15x15.png";this.appContext=a.appContext;this.container=this.createDivWrapper(a.question);this.defaultSelect=a.defaultSelect;this.containerId=this.container.getAttribute("id");this.answerArea=lpTag.lpUtils.getElementsByClass(this.container,this.LPClassMap.content,[])[0];this.errorId=this.prefixMap.error+this.question.id}}});c=lpTag.unifiedWindow.BaseSurveyQuestion.prototype;c.getQuestionType=function(a){if(!this.appContext.deviceDetector.isDesktop()){if("email"===a)return"email";if("numeric"===a)return"number"}return"text"};c.bindFocusAndBlurEvents=function(a){this.appContext.deviceDetector.isDesktop()||this.bindViewEvent({view:a,DOMEvent:"blur",appName:"input",eventData:{focusOnField:!0},callback:this.fireBlurEvent})};c.bindTextFieldEvents=function(a){this.bindViewEvent({view:a,DOMEvent:"keyup",callback:this.submitInputAnswer});this.bindViewEvent({view:a,DOMEvent:"input",callback:this.submitInputAnswer});this.bindViewEvent({view:a,DOMEvent:"paste",callback:this.submitInputAnswer});this.bindViewEvent({view:a,DOMEvent:"cut",callback:this.submitInputAnswer});this.bindViewEvent({view:a,DOMEvent:"dragend",callback:this.delaySubmitInputAnswer});this.bindViewEvent({view:a,DOMEvent:"drop",callback:this.delaySubmitInputAnswer});if(this.appContext.deviceDetector.isDesktop()){this.bindViewEvent({view:a,DOMEvent:"keypress",callback:this.stopBubblingUp});this.bindViewEvent({view:a,DOMEvent:"blur",callback:this.fireBlurEvent})}this.bindFocusAndBlurEvents(a)};c.submitInputAnswer=function(a){"number"===a.target.type&&a.target.validity&&a.target.validity.badInput?a.target.value="":a.sourceElement.id&&this.submitAnswer(this.question.id,this.extractAnswerByValue(a.sourceElement.value))};c.delaySubmitInputAnswer=function(a){var b=this;setTimeout(function(){b.submitInputAnswer(a)},0)};c.setError=function(b){if(this.hasError)b!==this.errorText&&(this.getFirstElement(this.LPViewMap.errorText,this.errorView).innerHTML=b);else{this.hasError=!0;this.addClass(this.container,this.LPClassMap.error);this.errorView=this.createView({template:this.errorTemplateFileName,wrapWithDiv:!1,doNotAddChild:!0,textInjection:{wrapperClass:this.LPClassMap.surveyError,text:b,url:this.errorIconURL,id:this.errorId}});this.appContext.deviceDetector.isMobile()&&this.errorView.setAttribute("role","alert");this.container.appendChild(this.errorView);a.call(this,this.errorId)}this.errorText=b};c.cleanError=function(){this.removeClass(this.container,this.LPClassMap.error);this.errorView&&this.container.removeChild(this.errorView);this.errorView=null;this.errorText="";this.errorText="";this.hasError=!1;b.call(this,this.errorId)};c.setFocus=function(){this.focusOnElement(this.tagName)};c.dispose=function(){lpTag.unifiedWindow.BaseViewController.prototype.dispose.call(this)};c.createDivWrapper=function(a){var b=this.createView({template:this.wrapperTemplateFileName,wrapWithDiv:!1,textInjection:{label:a.label,id:this.prefixMap.label+a.id}}),c=lpTag.lpUtils.getElementsByClass(b,this.LPClassMap.label,[])[0],d=lpTag.lpUtils.getElementsByClass(b,this.LPClassMap.content,[])[0];if(a.mandatory){var e=document.createElement("SPAN");e.innerHTML="*";e.className="lp_mandatory";c.appendChild(e)}b.appendChild(d);return b};c.stopBubblingUp=function(a){var b="which"in a?a.which:a.keyCode;if(13===b){this.stopPropagation(a);"TEXTAREA"!==document.activeElement.tagName&&this.preventDefault(a)}};c.fireBlurEvent=function(){this.appContext.events.trigger({appName:"survey",eventName:"blur",data:{question:this.question}})};c.extractAnswerByValue=function(a){return this.question.entry&&this.question.entry[a]?this.question.entry[a].value:a};c.submitAnswer=function(a,b){var c=b.constructor===Array;b=c?b:[b];this.appContext.events.trigger({appName:"survey",eventName:"submitAnswer",data:{questionId:a,answer:b,isAnswerArray:c}})}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};!function(){var a;lpTag.unifiedWindow.Survey.CheckBoxQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"CheckBoxQuestion",className:"lp_question_wrapper",checkboxWrapperClass:"lp_checkbox_wrapper",templateFileName:"<div class='lp_checkbox_button'><input id='{{inputId}}' type='checkbox' value='{{value}}' name='{{name}}'><label for='{{inputId}}'>{{label}}</label></div>",wrapperTemplateFileName:"<fieldset class='lp_question' title='{{label}}'><legend id='{{id}}' class='lp_question_label'>{{label}}</legend><div class='lp_lpview_content lp_content'></div></fieldset>",prefix:"inp_",tagName:"input",initialize:function(a){this.answers=[]},render:function(){var a,b,c=document.createElement("div");c.className=this.checkboxWrapperClass;for(var d=0;d<this.question.entry.length;++d){a=this.question.entry[d];b=this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{inputId:d+"_"+this.question.id,value:d,name:this.prefix+this.question.id,type:this.getQuestionType(this.question.validationType),label:a.displayValue||a.value,isMandatory:this.question.mandatory.toString()}});if(a.checked===!0||"true"==a.checked){b.setAttribute("checked","checked");this.answers.push(a.value)}c.appendChild(b);this.answerArea.appendChild(c);this.bindViewEvent({view:b,DOMEvent:"click",callback:this.submitCheckboxAnswer})}}});a=lpTag.unifiedWindow.Survey.CheckBoxQuestion.prototype;a.submitCheckboxAnswer=function(a){if(a.sourceElement&&"undefined"!=typeof a.sourceElement.checked){var b=this.extractAnswerByValue(a.sourceElement.value);if(a.sourceElement.checked)this.answers.push(b);else{var c=this.answers.indexOf(b);-1!==c&&this.answers.splice(c,1)}this.submitAnswer(this.question.id,this.answers)}}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};!function(){var a;lpTag.unifiedWindow.Survey.DropDownQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"DropDownQuestion",className:"lp_question_wrapper",templateFileName:"<select id='{{id}}' class='lp_select_field' aria-labelledby='{{ariaLabel}}' aria-required='{{isMandatory}}'></select>",prefix:"sel_",tagName:"select",render:function(){var a,b,c=this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{id:this.prefix+this.question.id,ariaLabel:this.prefixMap.label+this.question.id,isMandatory:this.question.mandatory.toString()}}),d=[{value:this.defaultSelect||"pick one..."}];d=d.concat(this.question.entry);for(var e=0;e<d.length;++e){a=d[e];b=document.createElement("OPTION");b.setAttribute("value",e-1);b.innerHTML=a.value;(a.checked===!0||"true"==a.checked)&&b.setAttribute("selected","selected");c.appendChild(b)}this.answerArea.appendChild(c);this.bindDropdownEvents(c)}});a=lpTag.unifiedWindow.Survey.DropDownQuestion.prototype;a.bindDropdownEvents=function(a){this.bindViewEvent({view:a,DOMEvent:"change",callback:this.submitInputAnswer});this.bindFocusAndBlurEvents(a)}}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};!function(){lpTag.unifiedWindow.Survey.TextAreaQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"TextAreaQuestion",className:"lp_question_wrapper",templateFileName:"<textarea id='{{id}}' class='lp_textarea_field' aria-labelledby='{{ariaLabel}}' type='{{type}}' aria-required='{{isMandatory}}'></textarea>",prefix:"txt_",tagName:"textarea",render:function(){var a=this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{id:this.prefix+this.question.id,ariaLabel:this.prefixMap.label+this.question.id,type:this.getQuestionType(this.question.validationType),isMandatory:this.question.mandatory.toString()}});a.placeholder=this.translate("defaultTextArea");this.question.lastKnownValue&&(a.value=this.question.lastKnownValue);this.answerArea.appendChild(a);this.bindTextFieldEvents(a)}})}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};!function(){lpTag.unifiedWindow.Survey.TextFieldQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"TextFieldQuestion",className:"lp_question_wrapper",templateFileName:"<input id='{{id}}' class='lp_input-field' aria-labelledby='{{ariaLabel}}' type='{{type}}' placeholder='{{defaultTextArea}}' aria-required='{{isMandatory}}'>",prefix:"txt_",tagName:"input",render:function(){var a=this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{id:this.prefix+this.question.id,ariaLabel:this.prefixMap.label+this.question.id,type:this.getQuestionType(this.question.validationType),isMandatory:this.question.mandatory.toString()}});this.question.lastKnownValue&&(a.value=this.question.lastKnownValue);this.appContext.deviceDetector.isIOS()&&"number"===a.attributes.type.value&&a.setAttribute("pattern","[0-9]*");this.answerArea.appendChild(a);this.bindTextFieldEvents(a)}})}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};!function(){lpTag.unifiedWindow.Survey.RadioButtonQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"RadioButtonQuestion",className:"lp_question_wrapper",radioWrapperClass:"lp_radiobutton_wrapper",templateFileName:"<span class='lp_radio_button' aria-labelledby='{{ariaLabel}}'><input id='{{inputId}}' type='radio' value='{{value}}' name='{{name}}'><label for='{{inputId}}'>{{label}}</label></span>",wrapperTemplateFileName:"<fieldset class='lp_question' title='{{label}}'><legend id='{{id}}' class='lp_question_label'>{{label}}</legend><div class='lp_lpview_content lp_content'></div></fieldset>",prefix:"inp_",tagName:"input",render:function(){var a,b,c=document.createElement("div");c.className=this.radioWrapperClass;for(var d=0;d<this.question.entry.length;++d){a=this.question.entry[d];b=this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{inputId:d+"_"+this.question.id,value:d,name:this.prefix+this.question.id,type:this.getQuestionType(this.question.validationType),label:a.displayValue||a.value,isMandatory:this.question.mandatory.toString(),ariaLabel:this.prefixMap.label+this.question.id}});(a.checked===!0||"true"==a.checked)&&b.setAttribute("checked","checked");c.appendChild(b);this.answerArea.appendChild(c);this.bindViewEvent({view:b,DOMEvent:"click",callback:this.submitInputAnswer})}}})}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow=lpTag.unifiedWindow||{};lpTag.unifiedWindow.Survey=lpTag.unifiedWindow.Survey||{};!function(){var a=lpTag.unifiedWindow.applicationUtils;lpTag.unifiedWindow.Survey.CSATQuestion=lpTag.unifiedWindow.BaseSurveyQuestion.extend({ControllerName:"CSATQuestion",className:"lp_question_wrapper",templateFileName:"<div id='{{id}}' class='lp_csat_rater' role='region'><form><fieldset class='lp_csat_rater_stars'><legend>{{label}}</legend><a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar5}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='5' aria-pressed='false' aria-label='{{label}} 5 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar4}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='4' aria-pressed='false' aria-label='{{label}} 4 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar3}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='3' aria-pressed='false' aria-label='{{label}} 3 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar2}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='2' aria-pressed='false' aria-label='{{label}} 2 {{of}} {{numberOfStars}}'></a> <a href='javascript:void(0)' class='lp_csat_rater_star' role='button' title='{{labelStar1}}' data-lp-point='star' data-lp-cust-id='star' data-lp-rating='1' aria-pressed='false' aria-label='{{label}} 1 {{of}} {{numberOfStars}}'></a></fieldset></form><div class='lp_csat_rater_current_rating' data-lp-point='current_rating' tabindex='0'>{{rating}}</div><div class='lp_survey_disclaimer'>{{csatDisclaimer}}</div></div>",prefix:"csat_",csatLevelPrefix:"csatLevel_",tagName:"div",defaultCSATLevel:0,numberOfStars:5,cssClasses:{defaultStarClass:"lp_csat_rater_star",chosenStarClass:"lp_csat_rater_star chosen"},previousChosenRating:void 0,LPViewMap:{star:"^star",current:"^current_rating"},submitCSATAnswer:function(a){if(a.sourceElement.getAttribute("data-lp-rating")){this.submitAnswer(this.question.id,a.sourceElement.getAttribute("data-lp-rating"));this.toggleChosen(a.sourceElement);a.sourceElement.setAttribute("aria-pressed",!0)}},toggleChosen:function(b){a.isDomNode(b)||(b=this.getElementsByClass(this.view,this.cssClasses.defaultStarClass,[])[this.numberOfStars-b]);var c=b.getAttribute("data-lp-rating");this.cachedPrevious&&(this.cachedPrevious.className=this.cssClasses.defaultStarClass);b.className=this.cssClasses.chosenStarClass;this.getElements(this.LPViewMap.current,this.view)[0].innerHTML=this.translate(this.csatLevelPrefix+c);this.cachedPrevious=b},render:function(){this.createView({template:this.templateFileName,wrapWithDiv:!1,textInjection:{id:this.prefix+this.question.id,defaultCSATLevel:this.defaultCSATLevel,rating:this.translate(this.csatLevelPrefix+this.defaultCSATLevel),csatDisclaimer:this.translate("csatDisclaimer"),label:this.translate("csatRatingQuestion"),of:this.translate("outOf"),numberOfStars:this.numberOfStars,labelStar1:this.translate("csatLevel_1"),labelStar2:this.translate("csatLevel_2"),labelStar3:this.translate("csatLevel_3"),labelStar4:this.translate("csatLevel_4"),labelStar5:this.translate("csatLevel_5")}});this.bindViewEvent({selector:this.LPViewMap.star,DOMEvent:"click",callback:this.submitCSATAnswer})}})}();window.lpTag=window.lpTag||{};lpTag.unifiedWindow.Application=function(a,b){function c(a,b){if("object"==typeof a&&"object"==typeof b){ha=a.uiState&&a.uiState.engConf.ssoKey;ia=a.uiState&&a.uiState.engConf.redirect_uri;sa=a.uiState&&a.uiState.engConf.async;y();h(a);z();g(b);o();sa?p(d,q):d()}else wa.error("init: Could not init - did not required configuration",ta)}function d(a){i();j();m();r(a);s()}function e(){k();if(Q){Q.dispose();Q=null}X.clear();if(S){S.dispose();S=null}if(M){M.dispose();M=null}if(N){N.dispose();N=null}if(O){O.dispose();O=null}if(P){P.dispose();P=null}if(T){T.dispose();T=null}if(U){U.dispose();U=null}ja&&ja.dispose();ka&&ka.dispose();la&&la.dispose();if(K){K.dispose();K=null}if(Z){Z.dispose();Z=null}G.dispose()}function f(){return ya}function g(a){R=a.sessionManager;pa.appConfigurationManager=H=a.appConfigurationManager;pa.browserStateManager=E=a.browserStateManager;pa.deviceDetector=F=a.deviceDetector;pa.wrapperWindow=G=a.wrapperWindow;pa.events=I=a.events}function h(a){pa.conf.windowConf=ba=a.window;pa.conf.unifiedConf=ca=a.unified;pa.conf.uiState=da=a.uiState;pa.conf.engConf=da.engConf;pa.conf.authConf=t(da.engConf);sa||(pa.conf.widgetSDK=a.unified.widgetSDK)}function i(){ua.UIModelPath();ua.ChatModelPath();pa.conf.widgetSDK&&ua.WidgetModelPath()}function j(){if(I&&I.bind&&I.once){I.bind({appName:"ChatStateManager",eventName:"ended",func:l});I.once({appName:"API",eventName:"initialized",func:D})}}function k(){if(I&&I.unbind){I.unbind({appName:"ChatStateManager",eventName:"ended",func:l});I.unbind({appName:"API",eventName:"initialized",func:D})}}function l(){ya=!0}function m(){ea=new window.liveperson.uiframework.latest.LPModel;pa.conf.widgetSDK&&(ga=new window.liveperson.uiframework.latest.LPModel);w(da);fa=new lpTag.uiframework.LPPersistentModel({accountId:ca.accountId,storageKey:ca.sessionId,secureStorageLocation:ca.secureStorageLocation,modelName:"UIState"},da);qa={uiModel:fa,chatModel:ea};pa.conf.engConf&&pa.conf.engConf.allowUnauthMsg&&fa.bind(lpTag.unifiedWindow.uiModelPath.STATE,n)}function n(a){if(pa.conf.engConf.allowUnauthMsg){var b=a&&a.newValue;switch(b){case lpTag.unifiedWindow.State.APP_ENDED:case lpTag.unifiedWindow.State.POST_CHAT:R.dispose()}}}function o(){pa.authenticationManager=aa=new ua.AuthenticationManager({appContext:pa})}function p(a,b){wa.info("_authenticate for messaging",ta);var c=function(c){if(c)va.runCallback(a,null,{authenticationData:c});else{wa.error("There is no authentication data",ta);va.runCallback(b)}};aa.authenticate(c,b)}function q(){da.engConf.allowUnauthMsg?I.trigger({appName:lpTag.unifiedWindow.apps.CHAT,eventName:lpTag.unifiedWindow.events.chat.ERROR,data:{errorType:lpTag.unifiedWindow.consts.errorTypes.FAILED_START_CONVERSATION_ERROR,keepError:!0}}):I.trigger({appName:lpTag.unifiedWindow.apps.CHAT,eventName:lpTag.unifiedWindow.events.chat.ERROR,data:{errorType:lpTag.unifiedWindow.consts.errorTypes.AUTH_ERROR,keepError:!0}})}function r(a){a=a||{};pa.translator=$=new ua.Translator(da.engConf.lang);ca.external||(pa.heartBeatManager=Q=new ua.HeartBeatManager({accountId:ca.accountId,storageKey:ca.sessionId,secureStorageLocation:ca.secureStorageLocation,poppedOut:ca.poppedOut},{browserStateManager:E,events:I}));pa.coBrowseManager=W=new ua.CoBrowseManager({events:I,lpModel:ea,appContext:pa});pa.idnvManager=V=new ua.IdnvManager({lppModel:fa,appContext:pa});pa.uiStateManager=X=new ua.UIStateManager({lppModel:fa,lpModel:ea,events:I,browserStateManager:E,appContext:pa,NativeSDK:pa.conf.unifiedConf.NativeSDK});F.isDesktop()||(pa.viewPortManager=L=new ua.ViewPortManager(F));if(sa){K=new ua.MessagingDelegate(A(),I);pa.lineStatesManager=O=new ua.LineStatesManager({lppModel:fa,lpModel:ea,apiDelegate:K,events:I,browserStateManager:E});pa.conversationManager=N=new ua.ConversationManager(ba,qa,da,{appContext:pa,apiDelegate:K,events:I,authenticationData:a.authenticationData});pa.ttrManager=P=new ua.TtrManager({lppModel:fa,lpModel:ea,events:I,features:xa,conversationManager:N})}else{K=new ua.ChatDelegate(A(),I);pa.chatStateManager=M=new ua.ChatStateManager(ba,qa,da,{appContext:pa,apiDelegate:K,events:I});ca.external&&ca.NativeSDK&&(Z=ua.webViewPlugin({events:I,log:wa,IOS:ca.IOS}))}if(pa.conf.widgetSDK){J=new lpTag.Events;pa.WidgetManager=Y=new ua.WidgetManager({events:I,lpModel:ea,lppModel:fa,wsdkModel:ga,appContext:pa,windowSDKEvents:J})}pa.transcriptManager=S=new ua.TranscriptManager({events:I,lpModel:ea,lppModel:fa,apiDelegate:K,coBrowseManager:W,idnvManager:V,browserStateManager:E,lineStatesManager:O,appContext:pa});pa.SecureFormManager=T=new ua.SecureFormManager({events:I,lpModel:ea,lppModel:fa,browserStateManager:E,apiManager:sa?N:M,appContext:pa});pa.richContentManager=U=new ua.RichContentManager({lpModel:ea,lppModel:fa,apiManager:sa?N:M,appContext:pa})}function s(){var a={agentImage:!0,logoImage:!0};pa.themer=_=new lpTag.unifiedWindow.Themer(x(ba),ca,a);ua.soundManager(qa,F,ca)}function t(a){var b=lpTag.unifiedWindow.consts.authConnectorTypes,c=a.connector&&a.connector.type,d=va.getURLParams(window.location.search),e=c===b.OAUTH_CODE||c===b.OAUTH_IMPLICIT||!a.async&&c===b.S2S;return e?{connector:a.connector,ssoKey:u(d),redirect_uri:v()}:a.authConnId?{connector:{id:a.authConnId},ssoKey:u(d),redirect_uri:v()}:null}function u(a){return ha||a&&a.ssoKey||ca.authToken}function v(a){var b=ca.useOAuth2Standard||pa.conf.engConf.connector&&pa.conf.engConf.connector.configuration&&pa.conf.engConf.connector.configuration.rfcCompliance;return ia||a&&a.redirect_uri||(!b||!ca.external)&&lpTag.unifiedWindow.consts.defaultRedirectUri||lpTag.lpUtils.getCurrentUrlWithoutParams()}function w(a){a.engConf&&a.engConf.ssoKey&&delete a.engConf.ssoKey}function x(a){return va.isEmpty(a.customStyle)?lpTag.unifiedWindow.defaultStyle:a.customStyle}function y(){pa={conf:{},keys:{}}}function z(){pa.keys.appKey=oa=ca.debug?Ba.chat.qa:Ba.chat.production}function A(){var a={accountId:ca.accountId,availabilityPolicy:da.engConf.availabilityPolicy,appKey:oa,domain:ca.domain,asyncMessagingDomain:ca.asyncMessagingDomain,idpDomain:ca.idpDomain,messagingHistoryDomain:ca.messagingHistoryDomain,secureStorageLocation:ca.secureStorageLocation,sessionId:ca.sessionId,useSecureStorage:!da.engConf.isPopOut,failureTolerance:19,reconnectTimeout:C(ca.chatReconnectTimeout),ssoKey:u(pa.conf.authConf),redirect_uri:v(pa.conf.authConf),survey:da.engConf.survey,customVariables:da.engConf.customVariables,svid:da.engConf.svid,ssid:da.engConf.ssid,scid:da.engConf.scid,eid:da.engConf.eid,ename:da.engConf.ename,cid:da.engConf.cid,connectorId:B(da.engConf),lang:da.engConf.lang,runWithRules:da.engConf.runWithRules,visitorId:da.engConf.visitorId,interactionTimeout:R.getSessionTimeout(),skill:da.engConf.skill,skillId:da.engConf.skillId,agent:da.engConf.agent,maxWaitTime:da.engConf.maxWaitTime,visitorProfile:da.engConf.visitorProfile,surveyName:da.engConf.surveyName,visitorIp:da.engConf.visitorIp,serviceQueue:da.engConf.serviceQueue,queuePriority:da.engConf.queuePriority,preSurveyId:ba.surveyPreChatId,preChatLines:da.engConf.preChatLines,surveyOfflineId:da.engConf.isOffline&&da.engConf.surveyOfflineId||ba.surveyOfflineId,exitSurveyId:ba.surveyPostChatId,offsiteEngContext:da.engConf.isOffline&&da.engConf.offsiteEngContext};return a}function B(a){return a&&a.allowUnauthMsg&&a.connector&&a.connector.id}function C(a){var b=F.getDeviceFamilyName().toLowerCase();return a&&"number"==typeof a[b]?1e3*a[b]:null}function D(){ra&&clearTimeout(ra);if(pa){ja=new lpTag.unifiedWindow.WrapperWindowExtender({models:qa,appContext:pa,wrapWithDiv:!1
});na=new lpTag.unifiedWindow.SliderViewController({models:qa,appContext:pa,target:pa.wrapperWindow.getMaximizedElement(),textInjection:pa.conf.unifiedConf});ka=new lpTag.unifiedWindow.MaximizedViewController({models:qa,appContext:pa,textInjection:pa.conf.unifiedConf,target:document.querySelector('[data-lp-point="maximized"] [data-lp-point="main"]'),slider:na});la=new lpTag.unifiedWindow.MinimizedViewController({models:qa,appContext:pa,textInjection:pa.conf.unifiedConf,view:document.querySelector('[data-lp-point="minimized"] [data-lp-point="main"]')});pa.conf.widgetSDK&&(ma=new lpTag.unifiedWindow.WidgetManagerViewController({appContext:pa,sliderAPI:na,windowSDKEvents:J,wsdkModel:ga}))}else if(za>=Aa){wa.info("_createViewControllers: retrying numberOfRetries="+Aa,ta);Aa++;ra=setTimeout(D,0)}else wa.error("_createViewControllers: number of retries exceeded.",ta)}var E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta="Application",ua=lpTag.unifiedWindow,va=lpTag.taglets.lpUtil,wa=ua.log,xa=lpTag&&lpTag.features,ya=!1,za=10,Aa=0,Ba={chat:{dev:"e54d98e4810e4c93a8a7738bb3e9a321",qa:"50aae09500274faa9aea8ccf6c78ce28",production:"721c180b09eb463d9f3191c41762bb68"},collaboration:{dev:"a213e4a5450848cbbf12f63747d38376",qa:"c533acb2dd7e439995325014f84b3484",production:"42c22b57e5144838a72d891fbbf160ea"}};c(a,b);return{methods:{isDisposed:f,end:e}}};lpTag.unifiedWindow.Application.v="9.3.0.7-release_3840";