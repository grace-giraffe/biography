/*
 jQuery JSON plugin 2.4.0 | code.google.com/p/jquery-json  Categorizr.js: Device Detection Scripts | https://github.com/Skookum/categorizr.js/blob/master/license.md  http://mths.be/placeholder v2.0.7 by @mathias */
if(typeof HRBData=="undefined")document.write('<script type="text/javascript" src="/includes/js/hrb-common-data.js" charset="utf-8">\x3c/script>');var g_partner_id=0;var g_partner_cid="";var g_omatica_price=true;var g_b_ws_partner_id_different=false;var g_dr_url_info="";var g_b_drInfoInCookie=false;var ffaCampaignCheck=document.location.href.toLowerCase();
if((ffaCampaignCheck.indexOf("/ffa/index.html?otppartnerid=180")!=-1||ffaCampaignCheck.indexOf("/ffa/?otppartnerid=180")!=-1)&&ffaCampaignCheck.indexOf("campaignid=")==-1)document.location=document.location.href+"&campaignId=pw_mcm_180_0001";
var HRB=function($){var _setCookie=function(key,value,ttl,path,domain,secure,lvl){var _temp=window.location.hostname;if(lvl=="root")var domain_lvl=_temp.substr(_temp.indexOf("."));else if(lvl=="sub")domain_lvl=window.location.hostname;cookie=[key+"="+escape(value),"path="+(!path||path==""?"/":path),"domain="+(!domain||domain==""?domain_lvl:domain)];var exp="";if(ttl){if(parseInt(ttl)=="NaN")exp="";else{now=new Date;now.setTime(now.getTime()+parseInt(ttl)*60*60*1E3);exp=now.toGMTString()}cookie.push(exp)}if(secure)cookie.push("secure");
return document.cookie=cookie.join("; ")};var _setSessionCookie=function(key,value,lvl){_setCookie(key,value,null,"/","","",lvl)};var _wscReg=[/,"sn":"\/loginRedirect.html\?TaxType/g,/"bpr":"/g,/"sn":null,"lm":"\/tax-software/g,/&FV=T&HT=F&/g,/\/online-tax-filing/g,/\.html/g,/"pl":"O","on"/g,/"pl":"S","on"/g,/"rv":null,"rt":null,"ppr":"/g,/"sk":{"win":/g,/{"pid":"/g,/","rv":"0","rt":"0"}/g,/premium/g,/deluxe/g,/TaxYear=2017","lm":"/g,/","ppr":"/g];var _urlLookup={"TCX":"https://login.taxes.hrblock.com/",
"MYACCT":"https://myaccount.hrblock.com/","CMRY":"https://store.hrblock.com/","DEDPRO":"https://www.deductionpro.com/dpro/Welcome.jsp","HRB":"","HRB1":"http://www.hrblock.com","GUA":"https://loginrouter.hrblock.com/","SEARCH":"search3","SEG2":"https://remotetax.hrblock.com/mytaxalpha/login"};var def_pricing='{"status":{"tco":0,"tcs":0,"ver":1},"partner":{"cid":"otpPartnerID=0","name":"-","typ":"normal","welcome":"na","otpPartnerID":"0","tunnel":0,"partnerID":"0","active":1},'+'"prodList":['+'{"pid":"64",                "bpr":"0.00",  "ppr":"0.00",  "sk":"NA",         "sn":"-","lm":"/tax-offices/","pl":"R","on":"-","rv":"0","rt":"0"},'+
'{"pid":"31",                "bpr":"0.00",  "ppr":"0.00",  "sk":"NA",         "sn":"-","lm":"/online-tax-filing/","pl":"O","on":"parent","rv":"0","rt":"0"},'+'{"pid":"201",               "bpr":"0.00",  "ppr":"-1",    "sk":"TCFFED",     "sn":"/loginRedirect.html?TaxType=TCF&FV=T&HT=F&TaxYear=2017","lm":"/online-tax-filing/free-online-tax-filing/","pl":"O","on":"free_edition_fed","rv":"","rt":""},'+'{"pid":"202",               "bpr":"29.99",  "ppr":"29.99",    "sk":"TCFSTA", "sn":"-","lm":"202.html","pl":"O","on":"free_edition-state","rv":"0","rt":"0"},'+
'{"pid":"45",                "bpr":"49.99", "ppr":"49.99", "sk":"TCFReview",  "sn":"-","lm":"/online-tax-filing/","pl":"O","on":"taxpro_review_for_free","rv":"","rt":""},'+'{"pid":"Free201PlusTpr45",  "bpr":"49.99", "ppr":"49.99", "sk":"",           "sn":"-","lm":"","pl":"O","on":"free w tpr","rv":"","rt":""},'+'{"pid":"204",               "bpr":"49.99", "ppr":"49.99", "sk":"TCDFED",     "sn":"/loginRedirect.html?TaxType=TCD&FV=T&HT=F&TaxYear=2017","lm":"/online-tax-filing/deluxe-online-tax-filing/","pl":"O","on":"deluxe_fed","rv":"","rt":""},'+
'{"pid":"205",               "bpr":"39.99", "ppr":"39.99", "sk":"TCDSTA",     "sn":"-","lm":"205.html","pl":"O","on":"deluxe_state","rv":"0","rt":"0"},'+'{"pid":"46",                "bpr":"79.99", "ppr":"79.99", "sk":"TCDReview",  "sn":"-","lm":"/online-tax-filing/","pl":"O","on":"taxpro_review_for_deluxe","rv":"","rt":""},'+'{"pid":"Deluxe204PlusTpr46","bpr":"129.98","ppr":"129.98","sk":"",           "sn":"-","lm":"","pl":"O","on":"deluxe w tpr","rv":"","rt":""},'+'{"pid":"32",                "bpr":"69.99", "ppr":"69.99", "sk":"PAID1040FED","sn":"/loginRedirect.html?TaxType=OPP&FV=T&HT=F&TaxYear=2017","lm":"/online-tax-filing/premium-online-tax-filing/","pl":"O","on":"premium","rv":"","rt":""},'+
'{"pid":"192",               "bpr":"39.99", "ppr":"39.99", "sk":"PAID1040STA","sn":"-","lm":"192.html","pl":"O","on":"premium_state","rv":"0","rt":"0"},'+'{"pid":"44",                "bpr":"89.99", "ppr":"89.99", "sk":"OPPReview",  "sn":"-","lm":"/online-tax-filing/","pl":"O","on":"taxpro_review_for_premium","rv":"","rt":""},'+'{"pid":"Prem32PlusTpr44",   "bpr":"159.98","ppr":"159.98","sk":"",           "sn":"-","lm":"","pl":"O","on":"prem w tpr","rv":"","rt":""},'+'{"pid":"47",                "bpr":"94.99", "ppr":"94.99", "sk":"SEPFed",     "sn":"/loginRedirect.html?TaxType=SEP&FV=T&HT=F&TaxYear=2017","lm":"/online-tax-filing/self-employed-online-tax-filing/","pl":"O","on":"selfemployed_fed_return","rv":"","rt":""},'+
'{"pid":"48",                "bpr":"39.99", "ppr":"39.99", "sk":"SEPSta",     "sn":"-","lm":"","pl":"O","on":"selfemployed_state_return","rv":"","rt":""},'+'{"pid":"49",                "bpr":"89.99", "ppr":"89.99", "sk":"SEPReview",  "sn":"-","lm":"/online-tax-filing/self-employed-online-tax-filing/","pl":"O","on":"taxpro_review_for_selfemployed","rv":"","rt":""},'+'{"pid":"SelfEmp47PlusTpr49","bpr":"184.98","ppr":"184.98","sk":"",           "sn":"-","lm":"","pl":"O","on":"se w tpr","rv":"","rt":""},'+
'{"pid":"85",                "bpr":"0.00",  "ppr":"0.00",  "sk":"FREE1040FED","sn":"/loginRedirect.html?TaxType=OTP&FV=T&HT=F&TaxYear=2017","lm":"product.jsp?productId=85","pl":"O","on":"ffa","rv":"","rt":""},'+'{"pid":"189",               "bpr":"0.00",  "ppr":"0.00",  "sk":"FREE1040STA","sn":"-","lm":"product.jsp?productId=189","pl":"O","on":"ffa_st","rv":"0","rt":"0"},'+'{"pid":"199",               "bpr":"29.95", "ppr":"29.95", "sk":{"win":"WDBF","mac":"MDBF"},"sn":"-","lm":"/tax-software/basic-tax-software/","pl":"S","on":"tcs_basic_fed","rv":"173","rt":"3.9827"},'+
'{"pid":"206",               "bpr":"44.95", "ppr":"44.95", "sk":{"win":"WDDF","mac":"MDDF"},"sn":"-","lm":"/tax-software/deluxe-tax-software/","pl":"S","on":"tcs_deluxe_fed","rv":"0","rt":"0"},'+'{"pid":"207",               "bpr":"54.95", "ppr":"54.95", "sk":{"win":"WDDA","mac":"MDDA"},"sn":"-","lm":"/tax-software/deluxe-tax-software/","pl":"S","on":"tcs_deluxe_state","rv":"1649","rt":"4.1431"},'+'{"pid":"36",                "bpr":"74.95", "ppr":"74.95", "sk":{"win":"WDPA","mac":"MDPA"},"sn":"-","lm":"/tax-software/premium-tax-software/","pl":"S","on":"tcs_premium_fed","rv":"444","rt":"4.0113"},'+
'{"pid":"38",                "bpr":"89.95", "ppr":"89.95", "sk":{"win":"WDPH","mac":"MDPH"},"sn":"-","lm":"/tax-software/premium-small-business-tax-software/","pl":"S","on":"tcs_home_and_business","rv":"22","rt":"2.5455"},'+'{"pid":"39",                "bpr":"39.95", "ppr":"39.95", "sk":{"win":"","mac":""},        "sn":"-","lm":"/tax-software/state-editions.html","pl":"S","on":"tcs_state","rv":"0","rt":"0"}]}';var _priceObj=null;var _pageObj=null;return{spclEmpSolPartnerId:"9423",bIsSpclEmpSolPartner:false,
bForcePartnerChange:false,test:false,page:{_srchPartner:{"localhost123":{"p":2007,"t":"q"},"google":{"p":2054,"t":"q"},"yahoo":{"p":2055,"t":"p"},"bing":{"p":2056,"t":"q"},"aol":{"p":2057,"t":"query|userQuery"},"netscape":{"p":2058,"t":"query|userQuery"},"ask":{"p":2059,"t":"q|ask"}},getPageProperties:function(){if(_pageObj==null){_pageObj=new Page;var ref=document.referrer;_pageObj.setPath(document.location.pathname);var cmpn_id=HRB.tools.getQueryUrl("CampaignID");var qsmap={};var qs=window.location.search;
qs.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function($0,$1,$2,$3){qsmap[$1]=$3});_pageObj.setQueryMap(qsmap);_pageObj.setReferrer(ref);_pageObj.setCampaignId(cmpn_id);var referrer_query=ref!=null&&ref.indexOf("?")!=-1?ref.substr(ref.indexOf("?")):"";var term="";var termarr;for(partner in HRB.page._srchPartner){HRB.tools.log("Referrer Check: Is it "+partner);var ptrobj=ref.indexOf(partner)>=0?HRB.page._srchPartner[partner]:null;if(ptrobj!=null){_pageObj.setRefPartner(ptrobj.p);termarr=ptrobj.t.split("|");
for(j=0;j<termarr.length;j++){term=referrer_query==""?"":HRB.tools.getQueryParam(termarr[j],referrer_query);if(j==0&&term==null)if(_pageObj.getRefPartner()==2059)term=referrer_query==""?"":HRB.tools.getQueryParam(termarr[j+1],referrer_query);else term=referrer_query=="userQuery-nfd"?"":HRB.tools.getQueryParam(termarr[j+1],referrer_query);break}_pageObj.setSearchTerm(term);HRB.tools.log("Referrer Check: Referrer was '"+partner+"' and search term was '"+term+"'");break}}return _pageObj}else return _pageObj}},
settings:{officeMaps:{"enableSignedUrlCall":false}},dataLayer:{},integration:{configLookup:{"CMYR":"2017","TAXYEAR":"2017"},getURL:function(module){return _urlLookup[module]},getConfig:function(module){return HRB.integration.configLookup[module]},delayedProductStartNow:function(opt){HRB.tools.log("DTM:delayedProductStartNow() waiting "+HRBData.config.dtmDelay+" milliseconds...");setTimeout(function(){HRB.integration.productStartNow(opt)},HRBData.config.dtmDelay)},delayedProductStartNowFinish:function(opt,
targetURL){HRB.tools.log("DTM:delayedProductStartNowFinish() waiting "+HRBData.config.dtmDelay+" milliseconds...");setTimeout(function(){HRB.integration.productStartNowFinish(opt,targetURL)},HRBData.config.dtmDelay)},productStartNow:function(opt){var pid_val=HRB.partner.fromCookie()!=null?HRB.partner.fromCookie():0;var cm_offid="";if(HRB.session.getValue("digitalriver")!=null)cm_offid="/"+HRB.tools.getQueryParam("CamryID",HRB.session.getValue("digitalriver"));if(document.location.href.indexOf("symantec.html")!=
-1)cm_offid="/0BA7F90C";if(cm_offid=="/null")cm_offid="/";if(opt.pid==197){window.open(this.getURL("DEDPRO"),"dedpro","");return}var u="";var def_found="";var pInfo=HRB.products.getProducts().getProductInfo(opt.pid);var plInfo=HRB.products.getProducts().getProductsByPlatform("S");var cmURL;if(opt.type=="dn"){if(typeof opt.os=="undefined")opt.os="win";for(var k=0;k<plInfo.length;k++)if(opt.pid==plInfo[k].pid){def_found="Y";if(opt.pid==39)cmURL="state/"+opt.yr+"/"+opt.st+"/"+opt.os;else cmURL=opt.yr+
"/"+pInfo.sk[opt.os]}if(def_found=="Y")u="checkout/"+cmURL;else if(def_found==""&&opt.pid!=40)u="checkout/"+opt.yr+"/"+opt.pid;else if(def_found==""&&opt.pid==40)u="checkout/bstate/"+opt.yr+"/"+opt.st+"/"+opt.os;if(HRB.test)return u;if(HRBData.config.softwareCartMaintenance)window.top.location="/service_unavailable.html?action=softcartmaint";else window.top.location=this.getURL("CMRY")+u+cm_offid+"?pid="+pid_val}else{var bShowTprPrompt=true;HRB.tools.log("TPR: bShowTprPrompt:"+bShowTprPrompt);var bTprSentRequest=
typeof opt.tprPopup!="undefined"&&opt.tprPopup.toUpperCase()=="Y"?true:false;HRB.tools.log("TPR: bTprSentRequest:"+bTprSentRequest);if(bShowTprPrompt){HRB.tools.log("TPR: prompt enabled");if(bTprSentRequest){HRB.tools.log("TPR: Start Now came from the TPR prompt");if(typeof opt.attachTpr!="undefined"&&opt.attachTpr.toUpperCase()=="Y"){HRB.tools.log("TPR: opt.attachTpr is:"+opt.attachTpr+", so client DID attached TPR in the prompt");var tprSelections=HRB.session.getValue("tprSelections");var tprSelectionsObj=
jQuery.parseJSON(tprSelections);tprSelectionsObj[opt.pid]="Y";HRB.session.storeValue("tprSelections",JSON.stringify(tprSelectionsObj))}else HRB.tools.log("TPR: opt.attachTpr is:"+opt.attachTpr+", so client DID NOT attached TPR in the prompt")}else{HRB.tools.log("TPR: Start Now came from regular Start Now button not from TPR prompt");if(HRB.ui.getTPRbyProduct(opt.pid).toUpperCase()=="Y")HRB.tools.log("TPR: Client already attached TPR so don't show prompt. Continue normal processing.");else{HRB.productForTprPrompt=
opt.pid;try{HRB.tools.log("TPR: Show TPR Prompt");showTprPopup();return}catch(e$0){HRB.tools.log("TPR: Error calling showTprPopup(). Continue normal processing.")}}}}else HRB.tools.log("TPR: Adobe T&T didn't enable TPR prompt on this page, continue normal processing.");u=pInfo.sn;if(u.indexOf("loginRedirect.html")!=-1){var mInfo=HRB.session.getValue("main_cookie");if(mInfo!=null){if(mInfo.substring(0,1)!="&")mInfo="&"+mInfo;u=u+mInfo}}if(HRB.test)return u;var tcxUrl=u.substr(u.indexOf("?")+1);var taxType=
HRB.tools.getQueryParam("taxtype",tcxUrl);taxType=taxType.toLowerCase();HRBData.digital_data.page_title=taxType=="py"?"opp":taxType;HRBData.digital_data.page_title+="_login";HRBData.digital_data.page_sub_section="online_taxes";HRB.analytics.callRule("vpage_global");HRB.tools.unsetCookie("wsc","");var disallowedParms=["ctrack","srchterm","orpid","otppartnerid","productid","tpage","pgm","cid","ocsstat","offerid","coname","coid","showpanels","sr","oauth_consumer_key","oauth_nonce","oauth_signature_method",
"oauth_timestamp","oauth_version","oauth_signature","uid"];for(var x=0;x<disallowedParms.length;x++)tcxUrl=HRB.tools.removeParameter(tcxUrl,disallowedParms[x]);tcxUrl+="&PS=Y";var srchterm=HRB.tools.getQueryParam("srchterm",HRB.tools.getCookie("main_cookie"));if(srchterm!=null)tcxUrl+="&siteID="+srchterm;var temp=tcxUrl.split("&&");tcxUrl=temp.join("&");var TCXDomain=HRB.integration.getURL("TCX");var lastChar=TCXDomain[TCXDomain.length-1];var slash=lastChar=="/"?"":"/";var strTargetURL=TCXDomain+
slash+"hrblock/login/LoginRegistration.hrbx?"+tcxUrl;try{if(HRB.tools.checkEnv()=="DEV"||HRB.tools.checkEnv()=="QA"){tcxUrl=tcxUrl.replace("=2016","=2017");strTargetURL=TCXDomain+slash+"hrblock/login/LoginRegistration.hrbx?"+tcxUrl}}catch(e$1){}if(HRB.ui.getTPRbyProduct(opt.pid).toUpperCase()=="Y"){HRB.tools.log("TPR: adding RS=Y to GUA url");strTargetURL+="&RS=Y"}strTargetURL+="&showStartwithoutAccount=true&origin=hrblock.product.sn";if(taxType.toLowerCase()=="otp"&&HRB.products.getProducts().getPartnerType().toLowerCase()!=
"ffa")window.top.location("https://www.hrblock.com/index.html?ocsstat=15-"+usePartnerId);else HRB.integration.delayedProductStartNowFinish(opt,strTargetURL)}},productStartNowFinish:function(opt,strTargetURL){HRB.tools.log("going to "+strTargetURL);try{if(HRBData.config.guaMaintenance){window.top.location=HRBData.config.guaMaintPage;return}}catch(e$2){}if(opt.guapage=="true")if(strTargetURL.toLowerCase().indexOf("&rs=y")==-1)window.top.location="/lp/sign-in/index.html?tpr=false";else window.top.location=
"/lp/sign-in/index.html?tpr=true";else if(opt.nw)window.open(strTargetURL);else window.top.location=strTargetURL},productLearnMore:function(opt){if(opt.pid==197){window.open(this.getURL("DEDPRO"),"dedpro","");return}var pInfo=HRB.products.getProducts().getProductInfo(opt.pid);var destURL=pInfo.lm;if(HRB.test)return destURL;if(opt.nw)window.open(this.getURL("HRB")+destURL);else window.top.location=this.getURL("HRB")+destURL},getGUAUrl:function(viewType){try{if(HRBData.config.guaMaintenance){window.top.location=
HRBData.config.guaMaintPage;return}}catch(e$3){}var bMaint=false;if(bMaint)window.top.location="https://maintenance.hrblock.com/hrblockmaintenance/maintenance.aspx";else{var gua_url="loginrouter/login?viewType="+viewType+"&origin=hrblock.li";if(window.location.href.indexOf("/espanol")!=-1)gua_url+="&lang=es";if(HRB.test)return gua_url;window.top.location=this.getURL("GUA")+gua_url}},getMyAccUrl:function(){var myAccUrl="mytax/login?origin=hrblock.ec.sn";if(HRB.test)return myAccUrl;return this.getURL("MYACCT")+
myAccUrl},getApptUrl:function(id){var apptUrl=id>0?HRB.locator.getAppointmentCalendarPath(null)+id:"/tax-offices/tax-pro-finder.html";if(HRB.test)return apptUrl;window.top.location=this.getURL("HRB")+apptUrl},submitEmail:function(opts){opts.event.preventDefault();emailval=opts.form.email.value;var emailRegex=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;messageDiv=$(opts.form).hasClass("form-email")?$(".generic-message"):$(".tile-generic-message");HRB.aria.clearAlert();if(!emailval.match(emailRegex)){messageDiv.html('<font color="#e0e055"><span class="reader">Error. </span>The email address is not valid.</font>');
if(messageDiv.selector==".tile-generic-message")messageDiv.html('<font color="#e0e055"><span class="reader">The email address <br/>is not valid</span>');opts.form.email.setAttribute("aria-invalid","true");opts.form.email.focus();return false}else{opts.form.email.setAttribute("aria-invalid","false");var postData="store_email="+emailval+"&tax_tips_subscribe=COUPON&tax_tips_store=STORE";var msgThanks="Thank you for your registration.";var msgAlready="Your e-mail address is already registered.";var msgError=
"An error occurred, please try later.";$.ajax({"type":"GET","url":"/taxtip/TaxtipEmailServlet","data":postData,"success":function(data){if(typeof data!="undefined"){var success_email=data.split("_")[1].split(":")[1];var success_store=data.split("_")[0].split(":")[1];if(success_email=="true"&&success_store=="true")messageDiv.html("<b>"+msgThanks+"</b>");else if(success_store=="true")messageDiv.html("<b>"+msgThanks+"</b>");else if(success_store=="false"){messageDiv.html("<span class='reader'>Error.</span><font color='#ff0000'>"+
msgAlready+"</font>");if(messageDiv.selector==".tile-generic-message")messageDiv.html("<span class='reader'>Error.</span><font color='#ff0000'>Your e-mail address is <br/>already registered.</font>")}else messageDiv.html('<span class="reader">Error.</span><font color="#ff0000">Please try later.</font>')}},error:function(){messageDiv.html('<span class="reader">Error.</span><font color="#ff0000">Please try later.</font>')}})}}},aria:{clearAlert:function(){var oldAlert=$("#alert");if(oldAlert.length!=
0)$("#alert").remove()},setAlert:function(msg){var newAlert=document.createElement("div");newAlert.setAttribute("aria-live","polite");newAlert.setAttribute("role","alert");newAlert.setAttribute("id","alert");newAlert.setAttribute("class","reader");var msg=document.createTextNode(msg);newAlert.appendChild(msg);$("body").append(newAlert)}},tools:{checkEnv:function(){return"PROD"},toTitleCase:function(str,arraySkipTheseWords){var newStr=str.replace(/\w\S*/g,function(txt){if($.inArray(txt,arraySkipTheseWords)!=
-1)return txt;else return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()});return newStr},IsValidImage:function(url,callback){$("<img>",{src:url,error:function(){callback(url,false)},load:function(){callback(url,true)}})},isArray:function(o){return Object.prototype.toString.call(o)==="[object Array]"},isObject:function(o){return typeof o==="object"},logger:function(msg){if(this.getQueryUrl("debug")==1){var dbg_win=window.open("","debugwin","resizable=1,width=600,height=350,scrollbars=1");
dbg_win.document.write("<body><div id='d3' style='font-family:Verdana;font-size:11px;'><p align=center></p>"+msg+"</body>")}},log:function(){if(window.console&&window.console.log)window.console.log(Array.prototype.slice.call(arguments));else{var winmsg="";for(var i=0;i<Array.prototype.slice.call(arguments).length;i++)winmsg+=Array.prototype.slice.call(arguments)[i]+"<br><br>";this.logger(winmsg)}},_compress:function(_wsc){for(var i=0;i<_wscReg.length;i++)_wsc=_wsc.replace(_wscReg[i],"!"+String.fromCharCode(97+
i));return _wsc},_decompress:function(_wsc){for(var j=_wscReg.length-1;j>=0;j--)_wsc=_wsc.replace(new RegExp("!"+String.fromCharCode(97+j),"g"),_wscReg[j].source.replace(/\\/g,""));return _wsc},getQueryParam:function(key,src){if(src!=null&&src.charAt(0)!="?"&&src.charAt(0)!="&")src="&"+src;var re=new RegExp("[?&]"+key+"=([^&$]*)","i");var offset=src!=null?src.search(re):-1;if(offset==-1)return null;return RegExp.$1},getParameterByName:function(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,
"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.search);return results==null?"":decodeURIComponent(results[1].replace(/\+/g," "))},getQueryUrl:function(key){return HRB.tools.getQueryParam(key,location.search)},removeParameter:function(queryString,parameter){var prefix=encodeURIComponent(parameter)+"=";var pars=queryString.split(/[&;]/g);for(var i=pars.length;i-- >0;)if(pars[i].toLowerCase().lastIndexOf(prefix.toLowerCase(),0)!==-1)pars.splice(i,1);queryString=pars.length>
0?pars.join("&"):"";return queryString},getBscId:function(){var strId=Math.random()+"";strId=strId.slice((strId.length-2)*-1);return strId},getCookie:function(key){var tmpcookie=unescape(document.cookie);tmp=tmpcookie.match(new RegExp(key+'=[a-zA-Z0-9-. "(){},=|:%/&_+]+($|;)',"g"));if(!tmp||!tmp[0]||tmp=="")return null;else return tmp[0].substring(key.length+1,tmp[0].length).replace(";","")},unsetCookie:function(key,path,domain){path=!path||typeof path!="string"?"":path;domain=!domain||typeof domain!=
"string"?"":domain;if(HRB.tools.getCookie(key))_setCookie(key,"","Thu, 01-Jan-70 00:00:01 GMT",path,domain)}},ui:{BVratings:function(){var api_server="https://api.bazaarvoice.com/data";var api_key="ovsi8a5tfp6mt8dsemh8dkb3b";var num_items=5;var api_version="5.4";var productIdMap={free:"201",deluxe:"204",premium:"32",selfemployed:"47",basic_software:"199",deluxe_software:"207",premium_software:"36",business_software:"38"};function requestRatings(productID,cb){$.getJSON(api_server+"/statistics.json?callback=?",
{apiversion:api_version,passkey:api_key,filter:"productid:"+productID,stats:"reviews"}).done(cb).fail(function(jqxhr,textStatus,error){cb(textStatus+", "+error)})}function writeRatings($el){var productID=$el.data("bvratingId");productID=productIdMap[productID]||(isNaN(productID)?null:productID);if(!productID){console.log("data-bvrating-id needs a mapped string or number value");return false}requestRatings(productID,function(json){var reviewCount=json.Results[0].ProductStatistics.ReviewStatistics.TotalReviewCount;
var overallRating=Math.round(json.Results[0].ProductStatistics.ReviewStatistics.AverageOverallRating*10)/10;overallRating=overallRating.toFixed(1);var numOfStars=5;var $stars=$el.find("[data-bvrating-stars]");var $rating=$el.find("[data-bvrating-rating]");var $count=$el.find("[data-bvrating-count]");$rating.text(overallRating);$count.text("("+reviewCount+")");if($stars.length>0)for(var i=1;i<=numOfStars;i++){var starOffset=Math.round(i<=overallRating?0:(1-overallRating%1)*100);var $starInner=$("<div/>",
{"class":"star-inner"}).appendTo($("<div/>",{"class":"star-box"}).appendTo($stars));if(i-overallRating<1)$starInner.append($("<div/>",{"class":"star-highlight",style:"padding-right:"+starOffset+"%"}))}console.log("bv:","id:",productID,"ovarallRating:",overallRating,"reviewCount:",reviewCount,". set by:",$el)})}return{requestRatings:requestRatings,writeRatings:writeRatings}}(),initializeTprObject:function(){HRB.session.initItem("tprSelections",JSON.stringify(HRB.session.tprSelections))},setTprByProduct:function(){var HRBUI=
this;var jsTPRProductId={"js-tpr-47":47,"js-tpr-201":201,"js-tpr-204":204,"js-tpr-32":32};function getProductId(element){var classNames=element.className;var jsClass=classNames.replace(/mdl-checkbox__input/,"").trim();return jsTPRProductId[jsClass]}function handleCheckBoxes(event){var tprSelections=HRB.session.getValue("tprSelections");var tprSelectionsObj=jQuery.parseJSON(tprSelections);var productID=getProductId(event.target);tprSelectionsObj[productID]=$(event.target).is(":checked")?"Y":"N";HRB.session.storeValue("tprSelections",
JSON.stringify(tprSelectionsObj));HRB.products.displayPricing();HRBUI.setMDLTprSelections()}$(document).on("change",'input[class*="js-tpr-"]',function(event){handleCheckBoxes(event)})},setMDLTprSelections:function(){},getTPRbyProduct:function(productId){var tprSelections=HRB.session.getValue("tprSelections");var tprSelectionsObj=jQuery.parseJSON(tprSelections);var selected="";$.each(tprSelectionsObj,function(i,item){if(i==productId){selected=item;return false}});return selected},setBVRatingsText:function(pid){return},
setAccessibilityLandmarks:function(){var obj=$("div.content:first");if(obj.length==1)if(typeof obj.attr("role")==="undefined")obj.attr("role","main")},setAccessibilityTileContentLinkText:function(){$(".tile-cta").each(function(){if(typeof $(this).attr("aria-label")==="undefined"&&typeof $(this).attr("aria-describedby")==="undefined"&&typeof $(this).attr("aria-labelledby")==="undefined")try{var html=$(this).html();var obj=$(this).closest("div");if(obj.hasClass("tile-content")){var childObj=obj.children(":header(0)");
var childTxt=childObj.text();var childHtml=childObj.html();if(childTxt!="undefined"){$(this).attr("aria-label",childObj.text()+". ");$(this).removeAttr("title")}}}catch(e$4){}})},setSoftwareOpSysSelectionText:function(){return;var bAddReader=false;var osName=null;var readerForWin="Windows operating system selected.";var readerForMac="Mac operating system selected.";var readerTxt=null;$("input[name=product-choice]:radio").each(function(){if(typeof $(this).attr("aria-label")==="undefined")try{if($(this).val()==
"win")$(this).attr("aria-label",readerForWin);else if($(this).val()=="mac")$(this).attr("aria-label",readerForMac)}catch(e$5){}})},setSoftwareDownloadAccessibilityText:function(){$(".download-style-1").on("focus",function(event){if(typeof $(this).attr("aria-label")==="undefined")try{var parentFormObj=$(this).closest("form");var opsys=$("input[name=product-choice]:checked",$(parentFormObj)).val();var labelTxt=$(this).text()+". Current operating system selected is "+(opsys=="win"?"windows. ":opsys==
"mac"?"mac. ":"");$(this).attr("aria-label",labelTxt)}catch(e$6){}})},setAccessibilityProductLinkText:function(){var productIdTextXref={201:"Our online free edition product. ",204:"Our online deluxe product. ",32:"Our online premium product. ",199:"Our basic software. ",207:"Our deluxe plus state software. ",206:"Our deluxe software. ",36:"Our premium software. ",38:"Our premium and business software. "};$('[class*="track-"]').each(function(){var x=null;var data=null;var action=null;var suffix=null;
if(typeof $(this).attr("aria-label")==="undefined")try{x=$.toJSON($(this).data("track"));if(typeof x!="undefined"){data=jQuery.parseJSON(x);if(typeof $(this).data("track")=="undefined");else if(data.daat=="1");else{suffix="";action=data.type;if(action=="sn"||action=="xxxdn"||action=="lm")if($(this).is("a")){var originalHtml=$(this).html();if(action=="sn")suffix="Start Now. ";else if(action=="dn")suffix="Download Now. ";else if(action=="lm")suffix="Learn More. ";$(this).removeAttr("title");$(this).attr("aria-label",
productIdTextXref[data.pid]+suffix)}}}}catch(e$7){}})},setDisclaimerBehavior:function(){function openDisclaimer($button,$list){$list.slideDown("fast");$button.attr("aria-expanded","true");$button.find("span.icon-caret-right").removeClass("icon-caret-right").addClass("icon-caret-down")}function closeDisclaimer($button,$list){$list.slideUp("fast");$button.attr("aria-expanded","false");$button.find("span.icon-caret-down").removeClass("icon-caret-down").addClass("icon-caret-right")}function closeAllSecondaryDisclaimers(){$("#legal-disclaimer ol").slideUp("fast");
$('#legal-disclaimer [id^="disclaimer-link-"]').attr("aria-expanded","false");$('#legal-disclaimer [id^="disclaimer-link-"]').find("span.icon-caret-down").removeClass("icon-caret-down").addClass("icon-caret-right")}function toggleDisclaimer($button,$list){var disclaimerIsOpen=$button.attr("aria-expanded"),notPrimaryBtn=$button.attr("id")!=="disclaimer-link";if(disclaimerIsOpen=="true")closeDisclaimer($button,$list);else{if(notPrimaryBtn)closeAllSecondaryDisclaimers();openDisclaimer($button,$list)}}
$("#legal-disclaimer #disclaimer-link").on("click",function(){var $disclaimerBtn=$(this),$disclaimerList=$("#disclaimer-list");toggleDisclaimer($disclaimerBtn,$disclaimerList)});$("#legal-disclaimer").on("click",'[id^="disclaimer-link-"]',function(){var $disclaimerBtn=$(this),$disclaimerList=$disclaimerBtn.next("ol");toggleDisclaimer($disclaimerBtn,$disclaimerList)});$("body").on("click",".js-disclaimer-link",function(){var disclaimerNumber=$(this).text().replace(/\D/g,""),$disclaimerLink=$(this);
var linkPosition=$(window).scrollTop();var $disclaimerBtn=$("#legal-disclaimer #disclaimer-link"),$disclaimerList=$("#disclaimer-list");openDisclaimer($disclaimerBtn,$disclaimerList);if(disclaimerNumber<20){$disclaimerBtn=$("#disclaimer-link-full-site");$disclaimerList=$("#disclaimer-list-full-site")}else if(disclaimerNumber>=20&&disclaimerNumber<40){$disclaimerBtn=$("#disclaimer-link-file-online");$disclaimerList=$("#disclaimer-list-file-online")}else if(disclaimerNumber>=40&&disclaimerNumber<60){$disclaimerBtn=
$("#disclaimer-link-tax-software");$disclaimerList=$("#disclaimer-list-tax-software")}else if(disclaimerNumber>=60&&disclaimerNumber<79);else if(disclaimerNumber>=79&&disclaimerNumber<109){$disclaimerBtn=$("#disclaimer-link-retail");$disclaimerList=$("#disclaimer-list-retail")}else if(disclaimerNumber>=109&&disclaimerNumber<160){$disclaimerBtn=$("#disclaimer-link-financial-services");$disclaimerList=$("#disclaimer-list-financial-services")}else if(disclaimerNumber>=160){$disclaimerBtn=$("#disclaimer-link-itc");
$disclaimerList=$("#disclaimer-list-itc")}closeAllSecondaryDisclaimers();openDisclaimer($disclaimerBtn,$disclaimerList);$("#legal-disclaimer #disclaimer-return-btn").remove();$("#legal-disclaimer li").removeClass("disclaimer-highlight");$('#legal-disclaimer li[data-disclaimer-number="'+disclaimerNumber+'"]').addClass("disclaimer-highlight");var $activeDisclaimer=$(".disclaimer-highlight"),originalHtml=$activeDisclaimer.html();$activeDisclaimer.html('<button id="disclaimer-return-btn" tabindex="-1"><span class="icon-caret-up"></span><span class="reader">Back to previous position</span></button> '+
originalHtml+' <span class="reader">Use Escape or Return to go back to previous position</span>');if($activeDisclaimer.length!==0)setTimeout(function(){$("html,body").animate({scrollTop:$activeDisclaimer.offset().top-190+"px",complete:$("#disclaimer-return-btn").focus()})},500);$("#legal-disclaimer li.disclaimer-highlight").on("click keydown",function(e){if(e.target.nodeName!="A"){e.stopPropagation();e.preventDefault();if(e.type=="click"||e.keyCode==13||e.keyCode==27||e.keyCode==9){$("html,body").animate({scrollTop:linkPosition+
"px"});$activeDisclaimer.html(originalHtml);$disclaimerLink.focus()}}})});$('a[href="#legal-disclaimer"]').each(function(){$(this).attr("href","javascript:void()");var html=$(this).html();$(this).html('<span class="reader">Disclaimer number </span><span>'+html+'</span><span class="reader">. Scrolls to bottom of page.</span>')})},deleteAllPods:function(exceptThisPod){$(".pod-info").each(function(index){var data=jQuery.parseJSON($.toJSON($(this).data("pod-info")));if(data.path!=exceptThisPod)$(this).remove()});
$("header").remove();$("footer").remove();$("#mobile-nav").remove();$(".extra-help").remove();$(".partner-footer").remove();$(".splash").remove();$("#legal-disclaimer").remove();$("iframe").remove()},setAccessibilityForBlankTarget:function(){$("a[target='_blank']").each(function(e){var url=$(this).attr("href");if(typeof $(this).attr("onclick")==="undefined")if(url.indexOf("#")==-1){$(this).attr("href","javascript:openWin('"+url+"');");$(this).removeAttr("target");if(typeof $(this).attr("aria-label")===
"undefined"&&typeof $(this).attr("aria-labelledby")==="undefined"&&typeof $(this).attr("aria-describedby")==="undefined"){var _text=$(this).text();if(_text.match(".$"))_text=_text.substr(0,_text.length);_text=_text+". Link opens in new window.";$(this).attr("aria-label",_text)}}});$("a").each(function(){if($(this).attr("href")=="#")$(this).attr("href","javascript:void()");if($(this).text().length==0){var _aria_label=$(this).attr("aria-label");var _title=$(this).attr("title");var bAriaFound=false;
var bTitleFound=false;if(typeof _aria_label!="undefined"&&_aria_label.length>0)bAriaFound=true;if(typeof _title!="undefined"&&_title.length>0)bTitleFound=true;if(!bAriaFound&&!bTitleFound);}})},setAccessibilityHeadingTags:function(){$(".tile .tile-content").each(function(){var h3Obj=$(this).find("h3");if(h3Obj!="undefined"){var h2Obj=h3Obj.clone().insertAfter(h3Obj);h2Obj.replaceWith($("<h2 class='reader'>"+h3Obj.html()+"</h2>"));h3Obj.attr("aria-hidden","true")}})},setAccessibilityArticleTags:function(){$("article").each(function(){if(typeof $(this).attr("aria-label")===
"undefined"&&typeof $(this).attr("aria-labelledby")==="undefined")try{var headText=$(this).find(":header").first().text();if(headText!=""){$(this).attr("aria-label",headText);$(this).attr("role","contentinfo")}else{$(this).attr("aria-label","Article detailed information");$(this).attr("role","contentinfo")}}catch(e$8){}})},select:function(){var $selectBox=null;var $component=null;var $id=null;var $selectBoxContainer=null;var $dropDown=null;var $index=-1;var $li=null;var TAB_KEY=9;var ENTER_KEY=13;
var ESC_KEY=27;var SPACE_BAR_KEY=32;var UP_ARROW_KEY=38;var DOWN_ARROW_KEY=40;return{config:function(component){$component=component;$id=$($component).attr("id");this.initialize();this.handlers()},initialize:function(){$selectBoxContainer=$("<div>",{width:$($component).outerWidth(),html:'<div class="'+$id+' select-box" tabindex="0"></div>'});$selectBoxContainer.addClass("ui-select");$selectBoxContainer.attr("role","combobox");$selectBoxContainer.attr("aria-live","polite");$selectBoxContainer.attr("aria-autocomplete",
"list");$selectBoxContainer.attr("aria-haspopup","true");$selectBoxContainer.attr("aria-expandeded","false");$selectBoxContainer.attr("aria-owns","");$selectBoxContainer.attr("aria-label","Press enter key or spacebar to toggle the menu. Choose item using up or down arrow. ");$dropDown=$("<ul>");$dropDown.addClass("drop-down");$index=-1;$dropDown.attr("tabindex","-1");$dropDown.attr("aria-hidden","true");$dropDown.attr("role","listbox");$selectBox=$selectBoxContainer.find("."+$id);$($component).find("option").each(function(i){var option=
$(this);if(i==$($component).attr("selectedIndex")){$selectBox.html(option.text());$index=i-1}if(option.data("skip")){$selectBox.html(option.text());return true}var data="";if(option.data("icon"))data='<img src="'+option.data("icon")+'">';if(option.data("html-text"))data=data+"<span>"+option.data("html-text")+"</span>";var li=$("<li>",{html:data});li.attr("role","option");li.click(function(){$selectBox.html(option.text());$dropDown.trigger("hide");$component.val(option.val());return false});$($dropDown).append(li)});
$selectBoxContainer.append($dropDown.hide());$($component).hide();$($component).after($selectBoxContainer)},handlers:function(){$dropDown.bind("show",function(){if($dropDown.is(":animated"))return false;$selectBoxContainer.css("z-index","99999");$selectBoxContainer.attr("aria-expandeded","true");$selectBox.addClass("expanded");$dropDown.attr("aria-hidden","false");$dropDown.slideDown()}).bind("hide",function(){if($dropDown.is(":animated"))return false;$selectBoxContainer.attr("aria-expandeded","true");
$selectBox.removeClass("expanded");$dropDown.attr("aria-hidden","true");$dropDown.slideUp(function(){$selectBoxContainer.css("z-index","0")})}).bind("toggle",function(){if($selectBox.hasClass("expanded"))$dropDown.trigger("hide");else $dropDown.trigger("show")});$selectBox.click(function(){$dropDown.trigger("toggle");return false});$selectBox.blur(function(){$dropDown.trigger("hide");return false});$selectBox.bind("keydown",function(e){if(e.keyCode==ENTER_KEY||e.keyCode==SPACE_BAR_KEY){if($li!=null){$selectBox.html($li.text());
$($id).val($li.val())}$dropDown.trigger("toggle")}if(e.keyCode==ESC_KEY)$dropDown.trigger("hide");if(e.keyCode==DOWN_ARROW_KEY){var $children=$dropDown.children();$children.removeClass("hover");if($index<$children.length-1)$index++;$children.each(function(i){if(i==$index)$li=$(this)});$li.addClass("hover");return false}else if(e.keyCode==UP_ARROW_KEY){if($index>0)$index--;else $index=0;var $children=$dropDown.children();$children.removeClass("hover");$li=null;$children.each(function(i){if(i==$index)$li=
$(this)});$li.addClass("hover");return false}else if(e.keyCode==TAB_KEY)return true;return false})}}},accordion:function(){var $accordion;var $accordions;var TAB_KEY=9;var ENTER_KEY=13;var ESC_KEY=27;var SPACE_BAR_KEY=32;var UP_ARROW_KEY=38;var DOWN_ARROW_KEY=40;var $prev=null;var $prevClickedObj=null;return{config:function(accordion){$accordion=accordion;$accordion.attr("role","tablist");$($accordion).find(".accordion-toggle").attr("tabindex","0");$($accordion).find(".accordion-toggle").attr("role",
"tab");$($accordion).find(".accordion-toggle").attr("aria-expanded","false");$($accordion).find(".accordion-toggle").attr("aria-selected","false");$($accordion).find(".accordion-body").attr("aria-hidden","true");$($accordion).find(".accordion-body").attr("role","tabpanel");$($accordion).find(".accordion-body").find("a").attr("tabindex","-1");_this=this;this.initialize();this.handlers()},initialize:function(){$accordions=$($accordion).find(".accordion-toggle");$($accordions).each(function(ind){var $aria_controls=
$(this).attr("href");$aria_controls=$aria_controls.substr(1);$(this).attr("aria-controls",$aria_controls)})},handlers:function(){$accordions.bind("focus",function(e){if($prev!=null&&$prev!=this){$($prev).removeClass("in");$($prev).addClass("collapsed");$($prev).attr("aria-selected","false");$($prev).attr("aria-expanded","false");$($accordion).find("#"+$($prev).attr("aria-controls")).attr("aria-hidden","true");$($accordion).find("#"+$($prev).attr("aria-controls")).attr("tabindex","-1");$($accordion).find("#"+
$($prev).attr("aria-controls")).find("a").attr("tabindex","-1");$($accordion).find("#"+$($prev).attr("aria-controls")).removeClass("in");$($accordion).find("#"+$($prev).attr("aria-controls")).animate({height:"0px"})}if($prev!=this){$(this).attr("aria-label",$(this).text()+". Press spacebar to toggle the menu. ");$(this).attr("aria-selected","true")}$prev=this});$accordions.bind("click",function(e){if($(this).is(".in")){$($accordion).find("#"+$(this).attr("aria-controls")).find("a").attr("tabindex",
"-1");$(this).attr("aria-selected","false");$(this).attr("aria-expanded","false");$($accordion).find("#"+$(this).attr("aria-controls")).attr("aria-hidden","true")}else{$($accordion).find("#"+$(this).attr("aria-controls")).find("a").attr("tabindex","0");$(this).attr("aria-selected","true");$(this).attr("aria-expanded","true");$($accordion).find("#"+$(this).attr("aria-controls")).attr("aria-hidden","false")}if($prevClickedObj!=null&&$prevClickedObj!=this){$($accordion).find("#"+$($prevClickedObj).attr("aria-controls")).find("a").attr("tabindex",
"-1");$($prevClickedObj).attr("aria-selected","false");$($prevClickedObj).attr("aria-expanded","false");$($accordion).find("#"+$($prevClickedObj).attr("aria-controls")).attr("aria-hidden","true")}if($prevClickedObj!=this){$(this).attr("aria-label",$(this).text()+". Press spacebar to toggle the menu. ");$(this).attr("aria-selected","true")}$prevClickedObj=this});$accordions.bind("keydown",function(e){if(e.keyCode==ENTER_KEY||e.keyCode==SPACE_BAR_KEY){_this.toggle(this);return false}else if(e.keyCode==
ESC_KEY){if($prev!=null){$($prev).removeClass("in");$($prev).addClass("collapsed");$($prev).attr("aria-selected","false");$($prev).attr("aria-expanded","false");$($accordion).find("#"+$($prev).attr("aria-controls")).attr("aria-hidden","true");$($accordion).find("#"+$($prev).attr("aria-controls")).attr("tabindex","-1");$($accordion).find("#"+$($prev).attr("aria-controls")).find("a").attr("tabindex","-1");$($accordion).find("#"+$($prev).attr("aria-controls")).removeClass("in");$($accordion).find("#"+
$($prev).attr("aria-controls")).animate({height:"0px"})}}else if(e.keyCode==DOWN_ARROW_KEY){var curNdx=$accordions.index(this);var $nextAcc=null;if(curNdx==$accordions.length-1)$nextAcc=$accordions.first();else $nextAcc=$accordions.eq(curNdx+1);$($nextAcc).focus();return true}else if(e.keyCode==UP_ARROW_KEY){var curNdx=$accordions.index(this);var $prevAcc=null;if(curNdx==0)$prevAcc=$accordions.last();else $prevAcc=$accordions.eq(curNdx-1);$($prevAcc).focus();return true}})},toggle:function(obj){if($(obj).is(".collapsed"))_this.show(obj);
else _this.hide(obj)},show:function(obj){$(obj).attr("aria-expanded","true");$(obj).addClass("in");$(obj).removeClass("collapsed");$($accordion).find("#"+$(obj).attr("aria-controls")).attr("aria-hidden","false");$($accordion).find("#"+$(obj).attr("aria-controls")).addClass("in");$($accordion).find("#"+$(obj).attr("aria-controls")).attr("tabindex","0");$($accordion).find("#"+$(obj).attr("aria-controls")).css("height","auto");$($accordion).find("#"+$(obj).attr("aria-controls")).find("a").attr("tabindex",
"0")},hide:function(obj){$(obj).attr("aria-expanded","false");$(obj).addClass("collapsed");$(obj).removeClass("in");$($accordion).find("#"+$(obj).attr("aria-controls")).attr("aria-hidden","true");$($accordion).find("#"+$(obj).attr("aria-controls")).removeClass("in");$($accordion).find("#"+$(obj).attr("aria-controls")).attr("tabindex","-1");$($accordion).find("#"+$(obj).attr("aria-controls")).css("height","0px");$($accordion).find("#"+$(obj).attr("aria-controls")).find("a").attr("tabindex","-1")}}}},
permanent:{config:{"per_val":"PERMANENT","overlay":"PERMANENT","tpgGroup":"PERMANENT"},storeValue:function(name,value){HRB.tools.log("permanent.storeValue("+name+","+value+")");var _store=HRB.permanent.config[name];if(_store=="PERMANENT")if("localStorage"in window&&window["localStorage"]!==null)if(!HRB.session.sessionStorageStatus.isPrivateBrowsing)localStorage[name]=value;else HRB.tools.log("permanent.storeValue("+name+","+value+"). Apple Private Browse detected. Cookie/Local Storage disabled."+
name+" will not be written.")},getValue:function(name){var _store=HRB.permanent.config[name];if(_store=="PERMANENT")if("localStorage"in window&&window["localStorage"]!==null)if(typeof localStorage[name]!=="undefined")if(localStorage[name]!=="null"&&localStorage[name].indexOf("data")>0)return localStorage[name];else return null;else return null}},session:{config:{"initialReferer":{"typ":"STORE","lvl":"root"},"testSS":{"typ":"STORE","lvl":"root"},"olay":{"typ":"STORE","lvl":"root"},"ci":{"typ":"STORE",
"lvl":"root"},"bvReviewSelector":{"typ":"STORE","lvl":"root"},"refundEst":{"typ":"STORE","lvl":"root"},"wsc":{"typ":"STORE","lvl":"sub"},"main_cookie":{"typ":"COOKIE","lvl":"root"},"camry_cookie":{"typ":"EITHER","lvl":"sub"},"bsc_sessiontrack":{"typ":"COOKIE","lvl":"root"},"digitalriver":{"typ":"COOKIE","lvl":"root"},"hrblockCampaignIDcookie":{"typ":"COOKIE","lvl":"sub"},"hrbopfc":{"typ":"COOKIE","lvl":"sub"},"HRBStore":{"typ":"COOKIE","lvl":"sub"},"OI":{"typ":"STORE","lvl":"root"},"CityImgData":{"typ":"STORE",
"lvl":"root"},"calculatorUsage":{"typ":"STORE","lvl":"sub"},"tpfUsage":{"typ":"STORE","lvl":"sub"},"drawer":{"typ":"STORE","lvl":"sub"},"bundle":{"typ":"STORE","lvl":"sub"},"testAndTarget":{"typ":"STORE","lvl":"sub"},"softwareHelp":{"typ":"STORE","lvl":"sub"},"noByAddr":{"typ":"STORE","lvl":"sub"},"noByLoc":{"typ":"STORE","lvl":"sub"},"tprSelections":{"typ":"STORE","lvl":"sub"}},sessionStorageStatus:{"storageTested":false,"isSupported":false,"isEnabled":false,"isPrivateBrowsing":false},storeValue:function(name,
value){HRB.tools.log("3.1) session.storeValue("+name+","+value+")");HRB.tools.log("3.2) session.storeValue:"+JSON.stringify(HRB.session.sessionStorageStatus));if(typeof HRB.session.config[name]=="undefined"){HRB.session.config[name]={};HRB.session.config[name].typ="STORE";HRB.session.config[name].lvl="sub"}var _store=HRB.session.config[name].typ;var _lvl=HRB.session.config[name].lvl;if(name=="testSS"){HRB.tools.log("3.3) session.storeValue: testing session storage now...");if(typeof Storage!=="undefined"){HRB.session.sessionStorageStatus.isSupported=
true;HRB.tools.log("3.4) session.storeValue: session storage supported!");try{sessionStorage["testSS"]="1";HRB.tools.log("3.4a) session.storeValue: session storage enabled!");HRB.session.sessionStorageStatus.isEnabled=true}catch(e$9){HRB.tools.log("3.4b) session.storeValue: session storage disabled!");HRB.session.sessionStorageStatus.isEnabled=false;HRB.session.sessionStorageStatus.isPrivateBrowsing=true}}HRB.session.sessionStorageStatus.storageTested=true;HRB.tools.log("3.5) session.storeValue: "+
JSON.stringify(HRB.session.sessionStorageStatus));return}HRB.tools.log("4.0) This cookie "+name+" has type "+_store);HRB.tools.log("4.1) "+JSON.stringify(HRB.session.sessionStorageStatus));if(HRB.session.sessionStorageStatus.isSupported&&!HRB.session.sessionStorageStatus.isEnabled){HRB.tools.log("4.2) session.storeValue("+name+","+value+"). Apple Private Browse detected. Cookie/Local Storage disabled."+name+" will not be written.");return false}if(_store=="EITHER")if(typeof Storage!=="undefined")try{HRB.tools.log("5.1a) setting "+
name+" as a COOKIE with value "+value);sessionStorage[name]=value;return true}catch(e$10){HRB.tools.log("5.1b) session.storeValue("+name+","+value+"):"+e$10.message);return false}else{HRB.tools.log("5.1c) session.storeValue("+name+","+value+"):"+e.message);_setSessionCookie(name,value,_lvl)}else if(_store=="COOKIE"){HRB.tools.log("5.2) setting "+name+" as a COOKIE with value "+value);_setSessionCookie(name,value,_lvl)}else if(_store=="STORE")if(typeof Storage!=="undefined")try{HRB.tools.log("5.3a) setting "+
name+" as a COOKIE with value "+value);sessionStorage[name]=value;return true}catch(e$11){HRB.tools.log("5.3b) session.storeValue("+name+","+value+"):"+e$11.message);return false}},getValue:function(name){var store;if(typeof HRB.session.config[name]=="undefined")store="STORE";else store=HRB.session.config[name].typ;HRB.tools.log("1) session storage: getValue("+name+") of type "+store);if(store=="EITHER")if(typeof Storage!=="undefined")if(typeof sessionStorage[name]!=="undefined"){HRB.tools.log("2a) session storage: getValue("+
name+") of type "+store+" returned from storage");return sessionStorage[name]}else{HRB.tools.log("2b) session storage: getValue("+name+") of type "+store+" returning null");return null}else{HRB.tools.log("2c) session storage: getValue("+name+") of type "+store+" returning from cookie");return HRB.tools.getCookie(name)}else if(store=="COOKIE"){HRB.tools.log("3) session storage: getValue("+name+") of type "+store+" returning from cookie");return HRB.tools.getCookie(name)}else if(store=="STORE")if(typeof sessionStorage[name]!==
"undefined"){HRB.tools.log("4a) session storage: getValue("+name+") of type "+store+" returned from storage");return sessionStorage[name]}else{HRB.tools.log("4b) session storage: getValue("+name+") of type "+store+" returning null");return null}},removeItem:function(key){sessionStorage.removeItem(key)},initItem:function(key,value){sessionStorage[key]=value},officePod:{"clientInfo":{"lat":"","lon":"","distanceToMyOffice":"","cityImageAddressUrl":"","geoPromptCount":"0","geoPromptAnswered":"0","no":{"mapUrl":"",
"tax_id":""}},"oi":{"mapUrl":"","tax_id":""}},clientInfo:{"location":{"byCurrentPosition":{"lat":"","lon":""},"byAddress":{"lat":"","lon":"","address":""}},"geoAskedAlready":false,"geoAllowed":false},noByAddr:{"srchAddr":"","srchLat":"","srchLon":""},noByLoc:{"srchLat":"","srchLon":""},calculatorUsage:{"te":{"s":0,"c":0},"w4":{"s":0,"c":0},"hc":{"s":0,"c":0}},tpfUsage:{"contactId":0,"emeraldSeasonStartDate":"","emeraldPreSeasonStartDate":"","emeraldSeasonEndDate":"","taxSeasonStartDate":"","taxSeasonEndDate":""},
testSessionStorage:function(){HRB.session.storeValue("testSS","0")},tprSelections:{201:"N",204:"N",32:"N",47:"N"}},location:{getLocation:{"ip":"168.137.32.32","country_code":"US","country_name":"United States","region_code":"MO","region_name":"Missouri","city":"Kansas City","zipcode":"64111","latitude":39.0572,"longitude":-94.5933,"metro_code":"616","areacode":"816"},getCurrentLocation:function(callbackSuccess,callbackFailure){var ci=HRB.session.getValue("ci");if(ci==null)HRB.session.initItem("ci",
JSON.stringify(HRB.session.clientInfo));var ciObj=jQuery.parseJSON(ci);if(ciObj.geoAllowed){var pos={};pos.coords={};pos.coords.latitude=ciObj.location.byCurrentPosition.lat;pos.coords.longitude=ciObj.location.byCurrentPosition.lon;callbackSuccess(pos)}else{ciObj.geoAskedAlready=true;if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(pos){ciObj.location.byCurrentPosition.lat=pos.coords.latitude;ciObj.location.byCurrentPosition.lon=pos.coords.longitude;ciObj.geoAllowed=true;
HRB.session.storeValue("ci",JSON.stringify(ciObj));callbackSuccess(pos)},function(error){ciObj.geoAllowed=false;HRB.session.storeValue("ci",JSON.stringify(ciObj));switch(error.code){case error.PERMISSION_DENIED:HRB.locator.geoDenied=true;break;case error.POSITION_UNAVAILABLE:break;case error.TIMEOUT:break;case error.UNKNOWN_ERROR:break}callbackFailure(error)});else{ciObj.geoAllowed=false;HRB.session.storeValue("ci",JSON.stringify(ciObj));callbackFailure(null)}}}},search:{getSearch:function(opts){opts.event.preventDefault();
term=opts.form.searchbox.value;var where=opts.form.sectionbox!=undefined?opts.form.sectionbox.value:null;var var1=where!=null?"x1=section;q1="+where+";":"";if(term==""){alert("please enter text to search");return false}else searchurl="http://"+HRB.integration.getURL("SEARCH")+".hrblock.com/?"+var1+"q="+escape(term);if(HRB.test)return searchurl;location.href=searchurl}},locator:{baOffice:false,officeId:null,isBAOffice2:function(officeId){var url="/locator-service/officeservice/tpf/001/data/getOfficeDetailsByTaxID";
$.ajax({url:url+"?oid="+officeId,async:false,method:"GET",success:function(poResponse){if(poResponse&&poResponse.ftLocations&&poResponse.ftLocations.length>0)if(poResponse.ftLocations[0].aff_nm=="BA"){HRB.locator.baOffice=true;HRB.locator.officeType="BA"}else{HRB.locator.baOffice=false;HRB.locator.officeType="REG"}else{HRB.locator.baOffice=false;HRB.locator.officeType=""}},error:function(e){HRB.tools.log("isBAOffice2 Failed : "+e);HRB.locator.officeType=""}})},getRootPath:function(officeType){if(officeType==
null){var oi=HRB.session.getValue("OI");var oiObj=jQuery.parseJSON(oi);var officeType=oiObj.clientInfo.no.officeType;if(officeType=="BA")return"/ba-appointments/tax-offices/local-offices/";else return"/tax-offices/local-offices/"}else if(officeType=="BA")return"/ba-appointments/tax-offices/local-offices/";else return"/tax-offices/local-offices/"},getOfficeProfilePath:function(officeType){return HRB.locator.getRootPath(officeType)+"index.html#!/"+HRB.locator.getLocale()+"/office-profile/"},getAppointmentCalendarPath:function(officeType){return HRB.locator.getRootPath(officeType)+
"appointment-setting.html#/"+HRB.locator.getLocale()+"/calendar/"},getAppointmentPath:function(officeType){return HRB.locator.getRootPath(officeType)+"appointment-setting.html#/"+HRB.locator.getLocale()+"/appointment/"},getOfficeDirectionPath:function(officeType){return HRB.locator.getRootPath(officeType)+"office-directions.html#!/"+HRB.locator.getLocale()+"/direction/"},getOfficeLocatorPath:function(officeType){return HRB.locator.getRootPath(officeType)+"index.html#!/"+HRB.locator.getLocale()+"/office-locator/"},
getOfficesForAddressOrZip:function(officeType){return HRB.locator.getRootPath(officeType)+"index.html#!/"+HRB.locator.getLocale()+"/office-list/"},getLocale:function(){var locale="en";try{if(window.location.pathname&&window.location.pathname.indexOf("espanol")==1)locale="es"}catch(e$12){}return locale},mapSize:"170x140",geoSupport:false,geoDenied:false,geoUnavailable:false,geoTimeout:false,geoError:false,default_opts:{url:"/tax-offices/local-offices/#!/en/office-list/",typemap:{"hc":"healthcare=1",
"samplekey":"value"}},getLocations:function(opts){var def=HRB.locator.default_opts;opts.event.preventDefault();var zip=opts.form.zipcode.value;if(zip==""){$(".map-office-pod .find-office-txt").html("Address cannot be blank");$(".map-office-pod .find-office-txt").css({"color":"red"});return false}var finalurl=def.url+zip;if(typeof opts.type!="undefined")finalurl+="&"+def.typemap[opts.type];if(HRB.libraries.isHrObj()&&HR.Utils.isMobile.any()){finalurl="/tax-offices/local-offices/#!/en/office-list/"+
zip;HRB.tools.log("mobile:"+HRB.libraries.isHrObj()&&HR.Utils.isMobile.any())}HRB.tools.log("Form submitted post to "+finalurl);location.href=finalurl},updateSessionInfoAfterAppointmentMade:function(){},formatAddress:function(addr1,addr2,addr3,city,state,zip){var fa=$.trim(addr1);if(addr2!="")fa+="<br>"+$.trim(addr2);fa+="<br>"+city+","+state+" "+zip;return fa},getOfficeHours:function(o){var resp={"seasonClosed":"","pastClosing":"","hours":"","closed":""};var days=["sun","mon","tues","wed","thur",
"fri","sat"];var today=days[(new Date).getDay()];var hours=o["week1_"+days[(new Date).getDay()]];if(hours!=null&&hours.indexOf(">")>-1){oh=hours.substr(hours.indexOf(">")+1);if(oh.toLowerCase()=="closed")if(HRB.tools.getQueryUrl("ol")=="force-my-office-open")resp.hours="9 - 4";else{resp.closed="1";resp.hours="Closed"}else resp.hours=oh}if(HRB.tools.getQueryUrl("ol")=="office-closed")resp.closed="1";return resp},getNearestOfficeInfoOnly:function(reqObj,callbackSuccess,callbackFailure){var url="/locator-service/officeservice/ol/001/jsonp/getOfficeDetailsOrderByDistance?query=";
url=url+"lt:"+reqObj.lat+","+reqObj.lon+"|d:80|s:s&callback=?";var noObj={};HRB.tools.log("getNearestOfficeInfoOnly: Nearest office url : "+url);$.getJSON(url,null,function(r){if(typeof r=="undefined"){HRB.tools.log("getNearestOfficeInfoOnly:getOfficeDetailsOrderByDistance:no response");callbackFailure(noObj)}else if(typeof r.statusCode!="undefined"&&r.statusCode.toLowerCase()=="failed"){HRB.tools.log("getNearestOfficeInfoOnly:getOfficeDetailsOrderByDistance:status:"+r.statusCode+","+r.statusMessage);
callbackFailure(noObj)}else if(typeof r.ftLocations!="undefined"&&r.ftLocations!=null&&r.ftLocations.length>0){var officeObj=r.ftLocations[0];for(var index=0;index<r.ftLocations.length;index++){officeObj=r.ftLocations[index];if(officeObj.fatp_ind!=0&&officeObj.aff_nm!="BA"&&(officeObj.cdas==2||officeObj.yr_round_ind==1))break;officeObj=null}if(officeObj!=null){HRB.tools.log("officeObj : "+JSON.stringify(officeObj));noObj.tax_id=officeObj.tax_id;if(officeObj.aff_nm=="BA"){HRB.locator.baOffice=true;
HRB.locator.officeType="BA"}else{HRB.locator.baOffice=false;HRB.locator.officeType="REG"}noObj.officeType=HRB.locator.officeType;noObj.latitude=officeObj.Latitude;noObj.longitude=officeObj.Longitude;noObj.addressLine=officeObj.AddressLine;noObj.addressLine2=officeObj.AddressLine2;noObj.addressLine3=officeObj.AddressLine3;noObj.primaryCity=officeObj.PrimaryCity;noObj.subdivision=officeObj.Subdivision;noObj.seas_close_ind=officeObj.seas_close_ind;noObj.postalCode=officeObj.PostalCode;noObj.countryRegion=
officeObj.CountryRegion;noObj.distance=officeObj.distance;noObj.tax_phone=officeObj.tax_phone;noObj.week1_sun=officeObj.week1_sun;noObj.week1_mon=officeObj.week1_mon;noObj.week1_tues=officeObj.week1_tues;noObj.week1_wed=officeObj.week1_wed;noObj.week1_thur=officeObj.week1_thur;noObj.week1_fri=officeObj.week1_fri;noObj.week1_sat=officeObj.week1_sat;noObj.seas_close_ind=officeObj.seas_close_ind;noObj.fatp_ind=officeObj.fatp_ind;noObj.formattedAddress=HRB.locator.formatAddress(noObj.addressLine,noObj.addressLine2,
noObj.addressLine3,noObj.primaryCity,noObj.subdivision,noObj.postalCode);if(HRB.settings.officeMaps.enableSignedUrlCall){HRB.tools.log("getNearestOfficeMapUrl():get signed url...");var req=[{"path":"","query":"","key":"1"}];req[0].path="/maps/api/staticmap";req[0].query="center="+noObj.latitude+","+noObj.longitude+"&client=gme-hrbtaxgroupinc1&zoom=15&size="+HRB.locator.mapSize+"&sensor=false&markers=color:green%7Clabel:*%7C"+noObj.latitude+","+noObj.longitude+"";var reqStr=escape(JSON.stringify(req));
$.getJSON("/locator-service/officeservice/ol/001/jsonp/getSignedURL?req="+reqStr+"&callback=?",null,function(dd){if(typeof dd=="undefined")HRB.tools.log("getNearestOfficeMapUrl:getSignedURL:no response");if(dd.status.toLowerCase()=="failed")HRB.tools.log("getNearestOfficeMapUrl:getSignedURL:status:"+r.status+","+r.statusMessage);else{HRB.tools.log("getNearestOfficeMapUrl():signed url..."+noObj.mapUrl);noObj.mapUrl="//maps.googleapis.com"+dd.signedURL[1]}})}noObj.todaysHours=HRB.locator.getOfficeHours(noObj);
noObj.officeDetailsUrl=HRB.locator.getOfficeProfilePath(noObj.officeType)+noObj.tax_id;noObj.makeApptUrl=HRB.locator.getAppointmentCalendarPath(noObj.officeType)+noObj.tax_id;noObj.directionsUrl=HRB.locator.getOfficeDirectionPath(noObj.officeType)+noObj.postalCode;if(noObj.fatp_ind!=1){noObj.showMakeApptCTA=false;noObj.showCallOfficeCTA=true}else{noObj.showMakeApptCTA=true;noObj.showCallOfficeCTA=false}callbackSuccess(noObj)}else callbackFailure(noObj)}else{HRB.tools.log("getNearestOfficeInfoOnly:getOfficeDetailsOrderByDistance:status:"+
r.statusCode+","+r.statusMessage);callbackFailure(noObj)}})},getNextAppointmentTime:function(officeId,callbackSuccess,callbackFailure){var nextApptObj={"apptDate":"","apptTime":"","apptLink":"","msg":""};HRB.locator.getContactId(function(tpfUsageObj){var contactId=tpfUsageObj.contactId;HRB.tools.log("Office Pod contactId - "+contactId);HRB.locator.getAppointments(officeId,tpfUsageObj,null,function(officeAppointmentList){if(officeAppointmentList.length>0&&officeAppointmentList[0].appointmentList!=
null&&officeAppointmentList[0].appointmentList.length>0){var appointmentList=officeAppointmentList[0].appointmentList;var itemsPerPage=1;var total=appointmentList.length;if(total>itemsPerPage)appointmentList=appointmentList.slice(0,itemsPerPage);for(var index=0;index<appointmentList.length;index++){var obj=appointmentList[index];var linkPattern=officeId+"/"+obj.appointmentToken;if(obj.employeeId!=null&&obj.employeeId!=0)linkPattern=officeId+"/"+obj.employeeId+"/"+obj.appointmentToken;var displayStartTime=
obj.formattedStartDate.replace(/\s+/g,"");var date=displayStartTime.substring(0,displayStartTime.lastIndexOf("/"));var startTime=displayStartTime.substring(displayStartTime.indexOf("|")+1,displayStartTime.length);if(index==0){nextApptObj.apptDate=date;nextApptObj.apptTime=startTime;nextApptObj.apptLink=HRB.locator.getAppointmentPath("NON-BA")+linkPattern;nextApptObj.msg="appointment found";callbackSuccess(nextApptObj)}}}else{nextApptObj.msg="no appointment found";callbackSuccess(nextApptObj)}},function(jqXHR,
textStatus,e){respMsg=textStatus;nextApptObj.msg=respMsg;callbackFailure(nextApptObj)})},function(jqXHR,textStatus,e){respMsg=textStatus;nextApptObj.msg=respMsg;callbackFailure(nextApptObj)})},formatSysDate:function(){var sysTime=new Date;var sysMonth=sysTime.getMonth()+1;var sysDay=sysTime.getDate();var sysYear=sysTime.getFullYear();var date=sysYear+"-";if(sysMonth<10)date=date+"0"+sysMonth+"-";else date=date+sysMonth+"-";if(sysDay<10)date=date+"0"+sysDay;else date=date+sysDay;return date},getUserLocaleTime:function(){var restrictionHrs=
2;var returnTime;var userTime=(new Date).toLocaleTimeString();var tmpd=new Date;var tmphr=tmpd.getHours();if(tmphr>12)tmphr=tmphr-12;var hr=tmphr;var min=tmpd.getMinutes();var offset=hr-(new Date).getHours();if(min>0)hr++;hr=hr+restrictionHrs-offset;if(hr<=8)returnTime="08:00:00";else if(hr>8&&hr<=23)returnTime=hr+":00:00";else if(hr>23)returnTime="23:00:00";return returnTime},getContactId:function(successCallback,errorCallback){var tpfUsage=HRB.session.getValue("tpfUsage");var tpfUsageObj=null;var contactId=
0;var payload="";if(tpfUsage!=null){tpfUsageObj=jQuery.parseJSON(tpfUsage);contactId=tpfUsageObj.contactId}else{HRB.tools.log("initialize tpfUsage with value "+JSON.stringify(HRB.session.tpfUsage));HRB.session.storeValue("tpfUsage",JSON.stringify(HRB.session.tpfUsage));tpfUsage=HRB.session.getValue("tpfUsage");tpfUsageObj=jQuery.parseJSON(tpfUsage)}if(contactId==0)$.ajax({"type":"GET","url":"/gateway/services/tpf/meta/appmeta","data":payload,"success":function(data,textStatus,jqXHR){contactId=data.response.contactId;
HRB.tools.log("ContactId : "+contactId);if(tpfUsageObj!=null){tpfUsageObj.contactId=contactId;tpfUsageObj.emeraldSeasonStartDate=data.response.emeraldSeasonStartDate.replace(/-/g,"/");tpfUsageObj.emeraldPreSeasonStartDate=data.response.emeraldPreSeasonStartDate.replace(/-/g,"/");tpfUsageObj.emeraldSeasonEndDate=data.response.emeraldSeasonEndDate.replace(/-/g,"/");tpfUsageObj.taxSeasonStartDate=data.response.taxSeasonStartDate.replace(/-/g,"/");tpfUsageObj.taxSeasonEndDate=data.response.taxSeasonEndDate.replace(/-/g,
"/");HRB.session.storeValue("tpfUsage",JSON.stringify(tpfUsageObj))}successCallback(tpfUsageObj)},"error":function(jqXHR,textStatus,e){errorCallback(jqXHR,textStatus,e)}});else successCallback(tpfUsageObj)},getTaxPros:function(officeId,contactId,successCallback,errorCallback){var taxProBasicRequest={};taxProBasicRequest.officeId=officeId;taxProBasicRequest.contactId=contactId;var payload=JSON.stringify(taxProBasicRequest);var employeeList=[];HRB.tools.log("Office Pod - "+payload);$.ajax({headers:{"Accept":"application/json",
"Content-Type":"application/json"},"type":"POST","url":"/gateway/services/tpf/taxpro/basicinfo-bm","data":payload,"success":function(data,textStatus,jqXHR){if(data.response!=null&&data.response.taxProList){var taxProList=data.response.taxProList;for(var i=0;i<taxProList.length;i++)if(taxProList[i].seasonalityIndicator=="A"||taxProList[i].seasonalityIndicator=="D")employeeList.push(taxProList[i].employeeId)}successCallback(employeeList)},"error":function(jqXHR,textStatus,e){errorCallback(jqXHR,textStatus,
e)}})},getTaxProDetails:function(officeId,contactId,employeeList,successCallback,errorCallback){var taxProDetailsRequest={};taxProDetailsRequest.officeId=officeId;taxProDetailsRequest.contactId=contactId;taxProDetailsRequest.employeeList=employeeList;var payload=JSON.stringify(taxProDetailsRequest);var taxPro=[];HRB.tools.log("Office Pod - "+payload);$.ajax({headers:{"Accept":"application/json","Content-Type":"application/json"},"type":"POST","url":"/gateway/services/tpf/taxpro/details-officeid-empidlist",
"data":payload,"success":function(data,textStatus,jqXHR){HRB.tools.log("getTaxProDetails - "+data);if(data.response!=null&&data.response.taxProList&&data.response.taxProList.length>0)taxPro=data.response.taxProList[0];successCallback(taxPro)},"error":function(jqXHR,textStatus,e){errorCallback(jqXHR,textStatus,e)}})},getAppointments:function(officeId,tpfUsageObj,employeeList,successCallback,errorCallback){var appmntReqObj={};appmntReqObj.numberOfSlots=50;appmntReqObj.duration="";appmntReqObj.clientRating=
1;appmntReqObj.earliestAppointment=true;appmntReqObj.multiState=false;appmntReqObj.appointmentServiceType="OFFICE";appmntReqObj.spanishIndicator=false;appmntReqObj.slotFilter="TP";appmntReqObj.officeList=[officeId];appmntReqObj.employeeList=[employeeList];appmntReqObj.appointmentStartDateTime=HRB.locator.formatSysDate()+"T08:00:00";appmntReqObj.appointmentEndDateTime=HRB.locator.formatSysDate()+"T22:00:00";appmntReqObj.contactId=tpfUsageObj.contactId;appmntReqObj.appointmentStartDateTimeUser=HRB.locator.formatSysDate()+
"T"+HRB.locator.getUserLocaleTime();appmntReqObj.serviceType=1;appmntReqObj.catpFlowType="CATPNonBestMatch";appmntReqObj.employeeRole=1;var payload=JSON.stringify(appmntReqObj);HRB.tools.log("Office Pod - "+payload);$.ajax({headers:{"Accept":"application/json","Content-Type":"application/json"},"type":"POST","url":"/gateway/services/tpf/appointment/available-slots","data":payload,"success":function(data,textStatus,jqXHR){var officeAppointmentList=[];if(data!=null&&data.response!=null&&data.response.officeAppointmentList!=
null&&data.response.officeAppointmentList.length>0)officeAppointmentList=data.response.officeAppointmentList;successCallback(officeAppointmentList)},"error":function(jqXHR,textStatus,e){errorCallback(jqXHR,textStatus,e)}})}},analytics:{callRule:function(ruleName){HRB.tools.log('DTM: hrb.js: HRB.analytics.callRule: calling _satellite.track("'+ruleName+'")');try{_satellite.track(ruleName)}catch(e$13){HRB.tools.log("DTM: hrb.js: HRB.analytics.callRule: error! :"+e$13);return false}return true}},personalization:{processApptConfirmation:function(oid,
apptid,tpid,st,appdt,apptm){return true}},datatrack:{processPixels:function(data){if(typeof data!="undefined"&&typeof data.px!="undefined"){var tokens=data.px;HRB.tools.log("processPixels : "+tokens);var tokenArray=tokens.split(",");$.each(tokenArray,function(index,token){HRB.tools.log("px : "+token);processPixelTracking(token)})}else HRB.tools.log("Info Only: dataTrack did not specify any pixels to fire.")}},pixel:{processPixel:function(token){processPixelTracking.apply(this,arguments)}},libraries:{isHrObj:function(){return typeof HR===
"undefined"?false:true},isCategorizr:function(){return typeof categorizr==="undefined"?false:true}},omniture:{doAnalytics:function(obj,classValue){if(typeof omni_pagename=="undefined")omni_pagename="wasundefined";for(key in obj)HRBData.digital_data[key]=obj[key];HRBData.digital_data.page_message="";var ruleNameToCall="";obj.pid=typeof obj.pid!="undefined"?obj.pid:"-1";var ruleNameToCall=typeof obj.rule!="undefined"?obj.rule:"n/a";var trackElementLinkName=typeof obj.linkname!="undefined"?obj.linkname:
"n/a";var trackElementLocation=typeof obj.loc!="undefined"?obj.loc:"n/a";var trackElementName=typeof obj.nm!="undefined"?obj.nm:"n/a";HRBData.digital_data.product_name="n/a";HRBData.digital_data.pid=obj.pid;HRBData.digital_data.click_linkname=trackElementLinkName;HRBData.digital_data.loc=trackElementLocation;HRBData.digital_data.nm=trackElementName;if(ruleNameToCall=="rc")ruleNameToCall="regular_click";if(ruleNameToCall=="n/a")if(typeof obj.trackevents=="undefined"&&typeof obj.trackvars=="undefined")ruleNameToCall=
"regular_click";else{HRB.tools.log("DTM:hrb.js:trackevents and/or trackvars found.  link must be updated with DTM sytnax.");try{HRB.tools.log("DTM:hrb.js:trackevents value was '"+JSON.stringify(obj.trackevents)+"'")}catch(e$14){}try{HRB.tools.log("DTM:hrb.js:trackvars value was '"+JSON.stringify(obj.trackvars)+"'")}catch(e$15){}}if(typeof obj.trackvars=="undefined"||obj.trackvars=="")obj.trackvars={};if(obj.type=="sn")if(ruleNameToCall=="n/a")ruleNameToCall="online_product_start_now";if(obj.type==
"dn")if(ruleNameToCall=="n/a")ruleNameToCall="software_download";if(obj.type=="sn"||obj.type=="dn"){var pl;try{pl=HRB.products.getProducts().getProductPlatform(obj.pid)}catch(e$16){HRB.tools.log("doAnalytics:Exception Handler:obj.pid is:"+obj.pid)}var pl_val=pl=="O"?"tco":pl=="R"?"off":pl=="S"?"tcs":"nfd";HRBData.digital_data.product_channel=pl_val;obj.trackevents=typeof obj.trackevents!="undefined"?obj.trackevents+",event14":"event14";HRBData.digital_data.events=obj.trackevents!=""?obj.trackevents:
null;if(obj.pid=="-1"){HRBData.digital_data.product_id="unknown product id";HRBData.digital_data.product_name="unknown product name";if(obj.type=="dn"){obj.trackvars.eVar10="software"+"-"+"unknown product id"+"-"+obj.nm+"-"+omni_pagename+"-"+trackElementLinkName;obj.trackvars.prop5="D=v10";HRBData.digital_data.product_channel="tcs"}else{obj.trackvars.eVar10="online"+"-"+"unknown product id"+"-"+obj.nm+"-"+omni_pagename+"-"+trackElementLinkName;obj.trackvars.prop5="D=v10";HRBData.digital_data.product_channel=
"tco"}}else{obj.trackvars.eVar10=pl_val+"-"+obj.pid+"-"+HRB.products.getProducts().getProductName(obj.pid)+"-"+omni_pagename+"-"+trackElementLinkName;obj.trackvars.prop5="D=v10";HRBData.digital_data.product_name=HRB.products.getProducts().getProductName(obj.pid)}}obj.trackvars.eVar48=omni_pagename+"/nav/"+trackElementLocation+"/"+trackElementName;if(HRBData.digital_data.dtmEnabled)if(ruleNameToCall!="n/a"){HRB.analytics.callRule(ruleNameToCall);HRB.tools.log("DTM:hrb.js:HRB.analytics.callRule('"+
ruleNameToCall+"') complete. Continued...");HRB.tools.log("data was:"+JSON.stringify(HRBData.digital_data,4))}else{HRB.tools.log("DTM:hrb.js:since ruleNameToCall is "+ruleNameToCall+" calling scode in legacy format.");try{this.recordEvent(this,obj,classValue)}catch(e$17){HRB.tools.log("DTM: hrb.js: 1: failed calling scode in legacy format. Error:"+e$17)}}else try{this.recordEvent(this,obj,classValue)}catch(e$18){HRB.tools.log("DTM: hrb.js: 2: failed calling legacy omniture. Error:"+e$18)}},recordEvent:function(obj,
dataObj,classValue){var data=this.buildOmnitureObject($.toJSON(dataObj));HRB.tools.log("DTM: hrb.js: recordEvent():calling scode in legacy format. Your link "+classValue+" was not DTM compliant OR adobedtm.js not in page.");this.webAnalytics(obj,data,classValue)},buildOmnitureObject:function(data){var bUseReferenceVars=data.indexOf("@ref:")!=-1?true:false;dataObj=jQuery.parseJSON(data);var obj={"trackvars":{},"trackevents":"","linktype":""};var trackVars=typeof dataObj.trackvars!="undefined"?dataObj.trackvars:
null;var trackEvents=typeof dataObj.trackevents!="undefined"?dataObj.trackevents:null;var trackLinkType=typeof dataObj.linktype!="undefined"?dataObj.linktype:"o";obj.trackvars=trackVars;obj.trackevents=trackEvents;obj.linktype=trackLinkType;var attrName;var keyValue;if(bUseReferenceVars)for(key in obj.trackvars){HRB.tools.log("key: "+key+" has value "+obj.trackvars[key]);if(obj.trackvars.hasOwnProperty(key))if(obj.trackvars[key].indexOf("@ref:")==0){keyValue=obj.trackvars[key];attrName=keyValue.substr(5);
HRB.tools.log("for key '"+key+"', replace keyValue '"+keyValue+"' with '"+HRB.dataLayer[attrName]);obj.trackvars[key]=HRB.dataLayer[attrName];HRB.tools.log("obj.trackvars["+key+"] now has value '"+obj.trackvars[key]+"'")}}return obj},webAnalytics:function(callerHref,omniObj,classValue){var s=s_gi(s_hrb.account);s.prop19=s.pageName==""?"":s.pageName;s.prop20=s.prop19;s.eVar100="Legacy call format. Update "+classValue+" to use call rule";s.linkTrackVars="eVar100,";var tvar=omniObj.trackvars;for(key in tvar)if(tvar.hasOwnProperty(key)){s[key]=
tvar[key];if(typeof s.linkTrackVars=="undefined"||typeof s.linkTrackVars!="undefined"&&s.linkTrackVars.toLowerCase()=="none")s.linkTrackVars="";s.linkTrackVars+=key+","}if(omniObj.trackevents){s.events=omniObj.trackevents;s.linkTrackEvents=omniObj.trackevents;s.linkTrackVars+="events"}s.linkType=omniObj.linktype;if(typeof g_exceptionToRecord!="undefined"&&g_exceptionToRecord!=""){HRB.tools.log("DTM: hrb.js: OMNITURE CALL: LEGACY ROUTE! - Exception Call");s.tl(callerHref,s.linkType,g_exceptionToRecord);
g_exceptionToRecord=""}else{HRB.tools.log("DTM: hrb.js: OMNITURE CALL: LEGACY ROUTE!");s.tl(true,s.linkType,s.prop19)}for(key in tvar)if(tvar.hasOwnProperty(key))s[key]="";s.linkTrackVars="None";s.linkTrackEvents="None";s.events=""},recordVirtualPage:function(o){processPixelTracking("omnivirtual","channel="+o.channel+"&subchannel="+o.subchannel+"&page_id="+o.pageid+"&"+o.evars+"&"+o.props+"&events="+o.events+"&products="+o.products+"&rnd="+Math.random())}},partner:{offermatica_ptnr_id:null,fromSearchEngine:function(){return HRB.page.getPageProperties().getRefPartner()},
fromURL:function(){return HRB.tools.getQueryUrl("otpPartnerId")},fromCookie:function(){var m_cookie=HRB.session.getValue("main_cookie");return HRB.tools.getQueryParam("otpPartnerId",m_cookie)},setOffermatica:function(offermatica_ptnr_id){this.offermatica_ptnr_id=offermatica_ptnr_id},fromOffermatica:function(){return this.offermatica_ptnr_id},determinePartnerId:function(){var partner_id=0;var o_partner_id=HRB.partner.fromOffermatica();var u_partner_id=HRB.partner.fromURL();var c_partner_id=HRB.partner.fromCookie();
var s_partner_id=HRB.partner.fromSearchEngine();partner_id=o_partner_id!=null?o_partner_id:u_partner_id!=null?u_partner_id:c_partner_id!=null?c_partner_id:s_partner_id!=null?s_partner_id:0;return partner_id}},products:{default_opts:{url:"/hrb/services/pricingservice/"},getProducts:function(){return _priceObj},isLateSeasonPartner:function(pid){try{if(HRBData.config.lspPartners.indexOf(pid+"")!=-1)return true;else return false}catch(e$19){return false}},displayPricing:function(){HRB.tools.log("displayPricing: ****************** BEGIN ****************");
$('[class*="product-price"]').each(function(ind){if($(this).hasClass("product-price")){try{var data=jQuery.parseJSON($.toJSON($(this).data("product")))}catch(e$20){HRB.tools.log("displayPricing: 1:"+e$20)}var pid=data.pid;if(typeof pid!="undefined"&&pid!=null){try{var attrItemProp=$(this).attr("itemprop");var attrContent=$(this).attr("content");if(typeof attrItemProp!==typeof undefined&&attrItemProp!==false&&(typeof attrContent!==typeof undefined&&attrContent!==false)){var contentPrice=parseFloat(_priceObj.getProductInfo(pid).ppr);
if(contentPrice<0)contentPrice="0.00";$(this).attr("content",contentPrice)}}catch(e$21){HRB.tools.log("displayPricing: error setting price schema info:"+e$21)}var originalPid=pid;var bShowTprPrice=false;if(HRBData.config.bEnableTprPriceUpdate)if(pid=="32"|pid=="47"|pid=="201"|pid=="204"&&HRB.ui.getTPRbyProduct(pid).toUpperCase()=="Y"){switch(pid){case "201":if(data.skipTpr);else{pid="Free201PlusTpr45";bShowTprPrice=true}break;case "204":if(data.skipTpr);else{pid="Deluxe204PlusTpr46";bShowTprPrice=
true}break;case "32":if(data.skipTpr);else{pid="Prem32PlusTpr44";bShowTprPrice=true}break;case "47":if(data.skipTpr);else{pid="SelfEmp47PlusTpr49";bShowTprPrice=true}break;default:}HRB.tools.log("TPR: original pid:"+originalPid+", using this pid for price "+pid)}var prdinfo=_priceObj.getProductInfo(pid);if(prdinfo=="undefined"||prdinfo==null)HRB.tools.log("displayPricing: can't find product data for product id '"+pid+"'");else{if(prdinfo.pl=="S"){if(_priceObj.getObj().status.tcs==0)$("[data-product*="+
pid+"]").css("color","#7D007D")}else if(_priceObj.getObj().status.tco==0)$("[data-product*="+pid+"]").css("color","#7D007D");var _ppr=Number(parseFloat(prdinfo.ppr).toFixed(2));var _bpr=Number(parseFloat(prdinfo.bpr).toFixed(2));var prHTML="";if(_ppr<0)prHTML="$0"+"&nbsp;";else if(_ppr==0)prHTML="$"+prdinfo.bpr;else if(_ppr<_bpr){var lineBreak=data.lb;var formatHtml="&nbsp;";if(lineBreak)formatHtml="<br>";if($(this).hasClass("strike-through-last"))prHTML="$"+prdinfo.ppr+formatHtml+"<del>$"+prdinfo.bpr+
"</del>";else prHTML="<del>$"+prdinfo.bpr+"</del>"+formatHtml+"$"+prdinfo.ppr+"&nbsp;"}else prHTML="$"+prdinfo.bpr;this.innerHTML=prHTML;HRB.tools.log("displayPricing: set "+pid+" "+prdinfo.on+' price as "'+prHTML+'"')}}}});try{}catch(e$22){HRB.tools.log("error setting Tax Pro Review check boxes")}try{HRB.tools.log("displayPricing: notifying page that displayPricing is complete");displayPricingComplete()}catch(e$23){HRB.tools.log("displayPricing: page did not implement displayPricingComplete()")}try{HrbTunneled.processPartnerDrawer()}catch(e$24){HRB.tools.log("displayPricing: error calling HRB.tunneled.processPartnerDrawer():"+
e$24+". Is partner-drawer.html on the page?")}var _tmp_ppobj=_priceObj.getObj();for(i=0;i<_tmp_ppobj.prodList.length;i++){$(".bvRatings .bvProdRating .prodRating"+_tmp_ppobj.prodList[i].pid).css("width",23*_tmp_ppobj.prodList[i].rt+"px");$(".bvRatings .bvProdReviews"+_tmp_ppobj.prodList[i].pid).html(_tmp_ppobj.prodList[i].rv+" customer reviews");$(".bvRatings").css({"visibility":"visible","display":"block"})}HRB.tools.log("displayPricing: ****************** END ****************")},processPricing:function(){otp_partner_id=
g_partner_id;HRB.tools.log("otp_partner_id: "+otp_partner_id);if(HRB.session.getValue("bsc_sessiontrack")==null)HRB.session.storeValue("bsc_sessiontrack",HRB.tools.getBscId(),"","/",".hrblock.com","");var opts=HRB.products.default_opts;_priceObj=new PartnerProduct;var cmry_id=HRB.tools.getQueryUrl("CamryID");if(HRBData.config.bAddCamryIdToZero&&(otp_partner_id==0||otp_partner_id==2631))cmry_id=HRBData.config.CamryIdForZero;var wscCookie=HRB.session.getValue("wsc");HRB.tools.log("wsc cookie value: "+
wscCookie);if(wscCookie!=null){HRB.tools.log("inside wsc condition");var decompress=HRB.tools._decompress(wscCookie);HRB.tools.log("Decompressed wscCookie: "+decompress);try{_priceObj.setObj(jQuery.parseJSON(decompress)._partner_product);if(otp_partner_id==_priceObj.getObj().partner.otpPartnerID&&!HRB.bForcePartnerChange){if(HRB.products.getProducts().getPartnerType().toLowerCase()=="ffa"){if(HRB.page.getPageProperties().getPath().indexOf("/ffa/")!=0&&HRB.page.getPageProperties().getPath().indexOf("/popup/")==
-1&&HRB.page.getPageProperties().getPath()!="/loginRedirect.html"&&HRB.page.getPageProperties().getPath().indexOf("/online-contact/")!=0){document.location="/ffa/"+location.search;return}}else if(HRB.page.getPageProperties().getPath().indexOf("/ffa/")==0){document.location="/"+location.search;return}HRB.products.displayPricing();return}else _priceObj.setObj(jQuery.parseJSON(def_pricing))}catch(e$25){HRB.tools.log("processPricing : "+e$25)}}else try{_priceObj.setObj(jQuery.parseJSON(def_pricing))}catch(e$26){}HRB.tools.log("processPricing",
"calling ajax");var postData='data={"pid":'+otp_partner_id+',"ven":"cm","yr":'+HRB.integration.getConfig("CMYR")+',"prodList":[{"id":"34","sk":"0"},{"id":"36","sk":"WDPA"},{"id":"38","sk":"WDPH"},{"id":"206","sk":"WDDF"},{"id":"207","sk":"WDDA"},{"id":"199","sk":"WDBF"},{"id":"39","sk":""}],"offerid":'+cmry_id+',"pgm":null}';var bAdjustPartnerBase=false;var basePrice="";$.ajax({"type":"GET","url":opts.url,"dataType":"json","data":postData,"timeout":5E3,beforeSend:function(request){request.setRequestHeader("TRACKINGIDTOKEN",
"5fe2d3e1ba5bd581b22348564a794978255664a0")},"success":function(data){var tmppartner=_priceObj.getPartnerInfo();var jsonProductObj={};jsonProductObj={"basePrice":"","bvrating":"","bvreview":"","learnMore":"","partnerPrice":"","platform":"O","productId":"Free201PlusTpr45","productName":"","serviceName":"","skuText":"","startNow":""};data["productVOList"].push(jsonProductObj);jsonProductObj={"basePrice":"","bvrating":"","bvreview":"","learnMore":"","partnerPrice":"","platform":"O","productId":"Deluxe204PlusTpr46",
"productName":"","serviceName":"","skuText":"","startNow":""};data["productVOList"].push(jsonProductObj);jsonProductObj={"basePrice":"","bvrating":"","bvreview":"","learnMore":"","partnerPrice":"","platform":"O","productId":"Prem32PlusTpr44","productName":"","serviceName":"","skuText":"","startNow":""};data["productVOList"].push(jsonProductObj);jsonProductObj={"basePrice":"","bvrating":"","bvreview":"","learnMore":"","partnerPrice":"","platform":"O","productId":"SelfEmp47PlusTpr49","productName":"",
"serviceName":"","skuText":"","startNow":""};data["productVOList"].push(jsonProductObj);tmppartner.cid=data.partnerVO.cid;tmppartner.partnerName=data.partnerVO.partnerName;tmppartner.partnerType=data.partnerVO.partnerType;tmppartner.otpPartnerID=data.partnerVO.otpPartnerID;tmppartner.partnerTunnel=data.partnerVO.partnerTunnelInd;tmppartner.partnerID=data.partnerVO.partnerID;tmppartner.partnerActive=data.partnerVO.partnerActiveStatusInd;tmppartner.welcome=data.partnerVO.partnerWelcomeText;if(HRBData.config.bEnableBasePriceChange&&
HRB.products.isLateSeasonPartner(tmppartner.otpPartnerID))bAdjustPartnerBase=true;var FreePP=0;var FreeBP=0;var FreeTPR=0;var DeluxePP=0;var DeluxeBP=0;var DeluxeTPR=0;var PremiumPP=0;var PremiumBP=0;var PremiumTPR=0;var SelfEmpPP=0;var SelfEmpBP=0;var SelfEmpTPR=0;for(var j=0;j<data.productVOList.length;j++){var tmpObj=_priceObj.getProductInfo(data.productVOList[j].productId);if(tmpObj!=null){basePrice=data.productVOList[j].basePrice;if(bAdjustPartnerBase)try{if(typeof HRBData.config.lsp[tmpObj.pid]!=
"undefined")basePrice=HRBData.config.lsp[tmpObj.pid]}catch(e$27){HRB.tools.log("hrb.js:no special price for product #"+tmpObj.pid+" found.  Using "+basePrice)}tmpObj.bpr=basePrice;tmpObj.ppr=data.productVOList[j].partnerPrice;tmpObj.sn=data.productVOList[j].startNow;tmpObj.rt=data.productVOList[j].bvrating;tmpObj.rv=data.productVOList[j].bvreview;var id=data.productVOList[j].productId;switch(id){case "201":FreePP=data.productVOList[j].partnerPrice;FreeBP=basePrice;break;case "45":FreeTPR=data.productVOList[j].partnerPrice;
break;case "204":DeluxePP=data.productVOList[j].partnerPrice;DeluxeBP=basePrice;break;case "46":DeluxeTPR=data.productVOList[j].partnerPrice;break;case "32":PremiumPP=data.productVOList[j].partnerPrice;PremiumBP=basePrice;break;case "44":PremiumTPR=data.productVOList[j].partnerPrice;break;case "47":SelfEmpPP=data.productVOList[j].partnerPrice;SelfEmpBP=basePrice;case "49":SelfEmpTPR=data.productVOList[j].partnerPrice;break;default:}}}for(i=0;i<data.statusVOs.length;i++){_priceObj.getObj().status.tcs=
data.statusVOs[i].errorCode=="CM-SOFTWARE-PRICE-FAILED-NO-CONNECTION"?0:1;_priceObj.getObj().status.tco=data.statusVOs[i].errorCode=="ONLINE-PRICE-FAILED-NO-CONNECTION"?0:1}FreePP=FreePP=="-1"?0:FreePP;DeluxePP=DeluxePP=="-1"?0:DeluxePP;PremiumPP=PremiumPP=="-1"?0:PremiumPP;SelfEmpPP=SelfEmpPP=="-1"?0:SelfEmpPP;for(var j=0;j<data.productVOList.length;j++){var tmpObj=_priceObj.getProductInfo(data.productVOList[j].productId);if(tmpObj!=null){if(tmpObj.pid=="Free201PlusTpr45"){tmpObj.ppr=(parseFloat(FreePP)+
parseFloat(FreeTPR)).toFixed(2);tmpObj.bpr=(parseFloat(FreeBP)+parseFloat(FreeTPR)).toFixed(2);HRB.tools.log("TPR: set pid "+tmpObj.pid+" bpr:"+tmpObj.bpr+", and ppr:"+tmpObj.ppr)}if(tmpObj.pid=="Deluxe204PlusTpr46"){tmpObj.ppr=(parseFloat(DeluxePP)+parseFloat(DeluxeTPR)).toFixed(2);tmpObj.bpr=(parseFloat(DeluxeBP)+parseFloat(DeluxeTPR)).toFixed(2);HRB.tools.log("TPR: Deluxe PPR:"+DeluxePP+". Deluxe BPR:"+DeluxeBP);HRB.tools.log("TPR: set pid "+tmpObj.pid+" bpr:"+tmpObj.bpr+", and ppr:"+tmpObj.ppr)}if(tmpObj.pid==
"Prem32PlusTpr44"){tmpObj.ppr=(parseFloat(PremiumPP)+parseFloat(PremiumTPR)).toFixed(2);tmpObj.bpr=(parseFloat(PremiumBP)+parseFloat(PremiumTPR)).toFixed(2);HRB.tools.log("TPR: set pid "+tmpObj.pid+" bpr:"+tmpObj.bpr+", and ppr:"+tmpObj.ppr)}if(tmpObj.pid=="SelfEmp47PlusTpr49"){tmpObj.ppr=(parseFloat(SelfEmpPP)+parseFloat(SelfEmpTPR)).toFixed(2);tmpObj.bpr=(parseFloat(SelfEmpBP)+parseFloat(SelfEmpTPR)).toFixed(2);HRB.tools.log("TPR: set pid "+tmpObj.pid+" bpr:"+tmpObj.bpr+", and ppr:"+tmpObj.ppr)}}}var drawerObj=
{"closed":"","hasLogo":false,"logoPath":"","hasCoupon":false,"couponPath":"","partnerName":""};HRB.session.storeValue("drawer",null);HRB.tools.log("New Object"+$.toJSON(_priceObj));var compress=HRB.tools._compress($.toJSON(_priceObj));HRB.tools.log("compress object: "+compress);HRB.session.storeValue("wsc",compress);HRB.tools.log("processPricing: writing digitalriver with "+cmry_id);HRB.session.storeValue("digitalriver",cmry_id);useThisCID=data.partnerVO.cid;if(useThisCID=="no__thanks"||useThisCID==
"0"||useThisCID=="na")useThisCID="";if(data.partnerVO.otpPartnerID!=g_partner_id){HRB.tools.log("Since "+data.partnerVO.otpPartnerID+" != "+g_partner_id+" lets overwrite main_cookie");g_b_ws_partner_id_different=true;g_partner_cid=useThisCID;g_partner_id=data.partnerVO.otpPartnerID;HRB.session.storeValue("main_cookie","&otpPartnerId="+g_partner_id+"&PartnerId="+g_partner_id)}processDigitalRiverCookie();if(HRB.products.getProducts().getPartnerType().toLowerCase()=="ffa"){if(HRB.page.getPageProperties().getPath().indexOf("/ffa/")!=
0&&HRB.page.getPageProperties().getPath().indexOf("/popup/")==-1&&HRB.page.getPageProperties().getPath()!="/loginRedirect.html"&&HRB.page.getPageProperties().getPath().indexOf("/online-contact/")!=0){document.location="/ffa/"+location.search;return}}else if(HRB.page.getPageProperties().getPath().indexOf("/ffa/")==0){document.location="/?otpPartnerId="+_priceObj.getObj().partner.otpPartnerID;return}HRB.products.displayPricing()},error:function(request,status,error){HRB.tools.log("ajax Error:"+request.responseText);
HRB.products.displayPricing()}})}}}}(jQuery);function offermaticaPartnerSelect(om_partner_id){HRB.tools.log("T&T:offermaticaPartnerSelect("+om_partner_id+")");HRB.partner.setOffermatica(om_partner_id)}
function Page(){var tunneled=false;var queryMap=null;var ref=null;var refPartner=null;var searchTerm=null;var campaignId=null;var path=null;this.setQueryMap=function(queryMap){this.queryMap=queryMap};this.getQueryMap=function(){return this.queryMap};this.setReferrer=function(ref){this.ref=ref};this.getReferrer=function(){return this.ref};this.setRefPartner=function(refPtr){this.refPartner=refPtr};this.getRefPartner=function(){return this.refPartner};this.setSearchTerm=function(srchTerm){this.searchTerm=
srchTerm};this.getSearchTerm=function(){return this.searchTerm};this.setCampaignId=function(campId){this.campaignId=campId};this.getCampaignId=function(){return this.campaignId};this.setPath=function(path){this.path=path};this.getPath=function(){return this.path}}
function PartnerProduct(){this.getObj=function(){return this._partner_product};this.setObj=function(prodlist){this._partner_product=prodlist};this.getPartnerInfo=function(){return this._partner_product.partner};this.getProductInfo=function(prodID){var t_prodlist=this._partner_product.prodList;for(var i=0;i<t_prodlist.length;i++)if(t_prodlist[i].pid==prodID)return t_prodlist[i];return null};this.getProductsByPlatform=function(platform){var prodarr=new Array;var t_prodlist=this._partner_product.prodList;
for(var i=0;i<t_prodlist.length;i++)if(t_prodlist[i].pl==platform)prodarr[prodarr.length]=t_prodlist[i];return prodarr};this.getProductBasePrice=function(prodID){return this.getProductInfo(prodID).bpr};this.getProductPartnerPrice=function(prodID){return this.getProductInfo(prodID).ppr};this.getPartnerTunnel=function(){return this._partner_product.partner.partnerTunnel};this.getPartnerWelcomeText=function(){return this._partner_product.partner.welcome};this.getPartnerType=function(){return this._partner_product.partner.partnerType};
this.getProductName=function(prodID){if(prodID!=-1)if(this._partner_product.prodList.length)return this.getProductInfo(prodID).on;else return"nfd";else return"nfd"};this.getProductPlatform=function(prodID){if(this._partner_product.prodList.length)return this.getProductInfo(prodID).pl}}
function processMainCookie(){var g_partner_id_from_search_engine=HRB.partner.fromSearchEngine();var g_partner_id_from_url=HRB.partner.fromURL();var g_partner_id_from_cookie=HRB.partner.fromCookie();var g_partner_id_from_offermatica=HRB.partner.fromOffermatica();if(g_partner_id==HRB.spclEmpSolPartnerId){HRB.bIsSpclEmpSolPartner=true;if(HRBData.config.bSpclEmpSolEnabled&&g_partner_id_from_url==HRB.spclEmpSolPartnerId)HRB.bForcePartnerChange=true}HRB.tools.log("processMainCookie():g_partner_id_from_search_engine:"+
g_partner_id_from_search_engine);HRB.tools.log("processMainCookie():g_partner_id_from_url:"+g_partner_id_from_url);HRB.tools.log("processMainCookie():g_partner_id_from_cookie:"+g_partner_id_from_cookie);HRB.tools.log("processMainCookie():g_partner_id_from_offermatica:"+g_partner_id_from_offermatica);HRB.tools.log("<b>Inside processMainCookie</b>");var qs="";var tempQS="";qs=location.search;HRB.tools.log("1 query:"+qs);var temp=qs.split("&");var newQS="";for(var x=0;x<temp.length;x++)if(temp[x].indexOf("omnisource")==
-1){if(x!=0)newQS+="&";newQS+=temp[x]}qs=unescape(newQS);HRB.tools.log("2 query:"+qs);if(g_partner_id_from_offermatica!=""&&g_partner_id_from_offermatica!=null){HRB.tools.log("processMainCookie(): writing partner id '"+g_partner_id_from_offermatica+"' assigned by offermatica. Call setCookie('main_cookie','otpPartnerId="+g_partner_id+"&PartnerId="+g_partner_id+"')<br/>");HRB.session.storeValue("main_cookie","&otpPartnerId="+g_partner_id+"&PartnerId="+g_partner_id)}else if(g_partner_id_from_url!=""&&
g_partner_id_from_url!=null)if(g_partner_id_from_url==g_partner_id_from_cookie&&!HRB.bForcePartnerChange)HRB.tools.log("processMainCookie(): no need to write/re-write main_cookie since g_partner_id_from_url["+g_partner_id_from_url+"] == g_partner_id_from_cookie["+g_partner_id_from_cookie+"].  Re-writing would delete site-visit parm values anyway.<br/>");else{if(qs.indexOf("?")!=-1)qs=qs.slice(qs.indexOf("?")+1);tempQS=qs.toLowerCase();iBeginPos=tempQS.indexOf("otppartnerid");qs=qs.substring(0,iBeginPos)+
"otpPartnerId="+qs.substring(iBeginPos+13,qs.length);HRB.tools.log("processMainCookie(): g_partner_id_from_url["+g_partner_id_from_url+"] != g_partner_id_from_cookie["+g_partner_id_from_cookie+"] so write g_partner_id["+g_partner_id+"] to the cookie.<br/>");HRB.session.storeValue("main_cookie","&"+qs+"&PartnerID="+g_partner_id)}else if(g_partner_id_from_cookie!=""&&g_partner_id_from_cookie!=null)HRB.tools.log("processMainCookie(): g_partner_id_from_cookie["+g_partner_id_from_cookie+"] is not == '' and not == null, so don't write main_cookie.<br/>");
else if(g_partner_id_from_search_engine!=""&&g_partner_id_from_search_engine!=null){HRB.tools.log("processMainCookie(): g_partner_id_from_search_engine["+g_partner_id_from_search_engine+"] valued so write it to main_cookie.<br/>");HRB.session.storeValue("main_cookie","&otpPartnerId="+g_partner_id+"&PartnerId="+g_partner_id_from_search_engine+"&srchTerm="+HRB.page.getPageProperties().getSearchTerm())}else{if(qs.indexOf("?")!=-1)qs=qs.slice(qs.indexOf("?")+1);HRB.tools.log("processMainCookie(): no partner id available from anywhere so use default partner id for this domain + current query string.<br/>");
HRB.session.storeValue("main_cookie","&"+qs+"&otpPartnerId="+g_partner_id+"&PartnerID="+g_partner_id)}}function getDR_cookie_info(){var cookieVal="";g_b_drInfoInCookie=false;if(HRB.session.getValue("digitalriver")!=null){cookieVal=HRB.tools.getQueryParam("CamryID",HRB.session.getValue("digitalriver"));if(cookieVal!=null&&cookieVal!=""){cookieVal="CamryID="+cookieVal;g_b_drInfoInCookie=true}}return cookieVal}function getDR_ws_info(){return useThisCID}
function processDigitalRiverCookie(){var tcid=HRB.tools.getQueryUrl("CamryID");if(tcid!=null)g_dr_url_info="CamryID="+HRB.tools.getQueryUrl("CamryID");HRB.tools.log("<b>Inside processDigitalRiverCookie</b>");var pidFromSoftwareCookie=HRB.tools.getQueryParam("otppartnerid",HRB.session.getValue("digitalriver"));HRB.tools.log("pidFromSoftwareCookie:"+pidFromSoftwareCookie);if(g_partner_id!=pidFromSoftwareCookie){HRB.session.storeValue("digitalriver","");HRB.tools.log("processDigitalRiverCookie: write digitalriver with empty string");
HRB.tools.log("processDigitalRiverCookie : g_partner_id:"+g_partner_id+" != getCookiePartnerId:"+pidFromSoftwareCookie)}var dr_cookie_info=getDR_cookie_info();var dr_ws_info=getDR_ws_info();var tempValue="";if(g_b_ws_partner_id_different){tempValue=g_partner_cid;HRB.tools.log("processDigitalRiverCookie: use DR info from pricing service response :"+tempValue)}else if(g_dr_url_info!=""&&(g_partner_id==pidFromSoftwareCookie||!g_b_drInfoInCookie)){tempValue=g_dr_url_info;HRB.tools.log("processDigitalRiverCookie: use DR info from url :"+
tempValue)}else if(g_b_drInfoInCookie&&g_partner_id==pidFromSoftwareCookie){tempValue=dr_cookie_info;HRB.tools.log("processDigitalRiverCookie: use DR info from COOKIE :"+tempValue)}else if(dr_ws_info!=null&&dr_ws_info!=""&&dr_ws_info!=0){tempValue=dr_ws_info;HRB.tools.log("processDigitalRiverCookie: use DR info from ws call:"+tempValue);if(HRBData.config.bAddCamryIdToZero&&(otp_partner_id==0||otp_partner_id==2631))tempValue="CamryID="+HRBData.config.CamryIdForZero}else tempValue="";g_partner_cid=
tempValue;if(tempValue!="")tempValue="&otppartnerid="+g_partner_id+"&"+tempValue;HRB.session.storeValue("digitalriver",tempValue);HRB.tools.log("processDigitalRiverCookie :: value digitalriver with "+tempValue);HRB.tools.log("processDigitalRiverCookie :: main cookie:"+HRB.session.getValue("main_cookie")+" DR cookie:"+HRB.session.getValue("digitalriver"))}
function campaignIdCheck(){var g_campaign_id=HRB.tools.getQueryUrl("CampaignID");HRB.tools.log("top of campaignIdCheck(): CampaignID in url is '"+g_campaign_id);if(g_campaign_id!=null){HRB.session.storeValue("hrblockCampaignIDcookie","CampaignID="+g_campaign_id);HRB.tools.log("campaignIdCheck(): cookie 'hrblockCampaignIDcookie' set to 'CampaignID="+g_campaign_id+"'.<br/>")}else HRB.tools.log("campaignIdCheck(): do not write cookie 'hrblockCampaignIDcookie' since it wasn't in the url.<br/>")}
g_sys={checkEnv:function(){return HRB.tools.checkEnv()}};
function getYodleeParameters(){var yodleeParms="";var m_cookie=HRB.session.getValue("main_cookie");if(m_cookie!=null&&m_cookie.indexOf("oauth")!=-1){yodleeParms="&coname="+encodeURIComponent(HRB.tools.getQueryParam("coname",m_cookie));yodleeParms+="&coid="+encodeURIComponent(HRB.tools.getQueryParam("coid",m_cookie));yodleeParms+="&oauth_consumer_key="+encodeURIComponent(HRB.tools.getQueryParam("oauth_consumer_key",m_cookie));yodleeParms+="&oauth_nonce="+encodeURIComponent(HRB.tools.getQueryParam("oauth_nonce",
m_cookie));yodleeParms+="&oauth_signature_method="+encodeURIComponent(HRB.tools.getQueryParam("oauth_signature_method",m_cookie));yodleeParms+="&oauth_timestamp="+encodeURIComponent(HRB.tools.getQueryParam("oauth_timestamp",m_cookie));yodleeParms+="&oauth_version="+encodeURIComponent(HRB.tools.getQueryParam("oauth_version",m_cookie));yodleeParms+="&oauth_signature="+encodeURIComponent(HRB.tools.getQueryParam("oauth_signature",m_cookie));yodleeParms+="&uid="+encodeURIComponent(HRB.tools.getQueryParam("uid",
m_cookie))}return yodleeParms}function WinOpen_(page,w,h){popupWin=open(page,"popup","status=yes,toolbar=no,directories=no,scrollbars=yes,menubar=no,resizable=yes,width="+w+",height="+h);popupWin.focus()}
function getAddress(position){var lat=position.coords.latitude;var lon=position.coords.longitude;$('input[name="geo"]').val(lat+","+lon);$.getJSON("/locator-service/officeservice/ol/001/data/getOfficeDetailsOrderByDistance?query=lt:"+lat+","+lon+"|d:30|s:s&callback=?",null,function(results){$(".map").attr("src","//maps.googleapis.com/maps/api/staticmap?center="+lat+","+lon+"&zoom=15&size="+HRB.locator.mapSize+"&sensor=false&markers=color:green%7Clabel:*%7C"+lat+","+lon+"");$("#officeAddrTmpl").tmpl(results.ftLocations[0]).appendTo(".tax_office");
$("#officeAddrTmpl").tmpl(results.ftLocations[0]).appendTo(".office-address");$("#office-id").val(results.ftLocations[0].tax_id)});$.getJSON("//maps.googleapis.com/maps/api/geocode/json?latlng="+lat+","+lon+"&sensor=true",null,function(dd){try{$('input[name="add"]').val(dd.results[0].formatted_address)}catch(e$28){}})}HRB.tools.log("TEST SESSION STORAGE");HRB.session.testSessionStorage();if(HRB.session.getValue("OI")==null)HRB.session.storeValue("OI",JSON.stringify(HRB.session.officePod));
HRB.tools.log("T&T:g_omatica_price:"+g_omatica_price);if(g_omatica_price)if(allow_offermatica_test()){$("body").append('<div class="mboxDefault"></div>');try{mboxCreate("PRICE_MBOX");HRB.tools.log("T&T:PRICE_MBOX created")}catch(e$29){HRB.tools.log("T&T:PRICE_MBOX not created because pages did not include mbox.js")}}
function allow_offermatica_test(){var bAllowTest=false;var pid_from_cookie=HRB.partner.fromCookie();var pid_from_url=HRB.partner.fromURL();var pid_to_use;if(hasValue(pid_from_url))pid_to_use=pid_from_url;else if(hasValue(pid_from_cookie))pid_to_use=pid_from_cookie;else pid_to_use=0;var offermatica_pids=new Array("","0");for(var i=0;i<offermatica_pids.length;i++)if(offermatica_pids[i]==pid_to_use){bAllowTest=true;break}HRB.tools.log("T&T: allow_offermatica_test():check if '"+pid_to_use+"' is '' or '0':returning: "+
bAllowTest);return bAllowTest}function hasValue(v){if(typeof v!="undefined"&&v!=null&&v!="")return true;return false}
$(document).ready(function(){try{if(HRBData.config.guaMaintenance){var linkHrefValue="";$("a").each(function(){linkHrefValue=$(this).attr("href");if(linkHrefValue.indexOf("loginrouter")!=-1)$(this).attr("href",HRBData.config.guaMaintPage)})}}catch(e$30){}$('[class^="form-search"]').submit(function(event){HRB.search.getSearch({"form":this,"event":event})});$(".form-appointment").submit(function(event){HRB.locator.getLocations({"form":this,"event":event})});$(".location-cta").click(function(event){});
$(".appointment-cta").click(function(event){HRB.integration.getApptUrl($(this).closest("form").find("#office-id").val())});$(".form-email").submit(function(event){HRB.integration.submitEmail({"form":this,"event":event})});$(".tile-email-submit").submit(function(event){HRB.integration.submitEmail({"form":this,"event":event})});$(".create-account").on("click",function(){var $type=$("#product-type").val();window.location="/online-tax-filing/create-account.html?taxType="+$type;return false});$("a.click-tab").on("click",
function(){var $href=$(this).data("href");$('a[href="'+$href+'"]').trigger("click")});$(".speed-bump").click(function(){var $href=$(this).data("href");$(".speed-bump-continue").on("click",function(){window.location=$href;return false})});$(".product-tab-activate").on("click",function(e){$("#product-info-anchor").click()});$(".compare-tab-activate").on("click",function(e){$("#compare-anchor").click()});$(".requirements-tab-activate").on("click",function(e){$("#requirements-anchor").click()});$(".reviews-tab-activate").on("click",
function(e){$("#reviews-anchor").click()});var hasNav=HRB.tools.getParameterByName("nav");if(hasNav)setTimeout(function(){var $offset=$("#"+hasNav).offset().top;$('a[href="#'+hasNav+'"]').trigger("click");$("html, body").animate({scrollTop:$offset-150});return false},500);g_partner_id=HRB.partner.determinePartnerId();if(g_partner_id==2007)document.location="/?otpPartnerId=0";processMainCookie();campaignIdCheck();HRB.ui.initializeTprObject();HRB.products.processPricing();try{HRB.tools.log("calling partnerIdDetermined('"+
g_partner_id+"').");partnerIdDetermined(g_partner_id)}catch(e$31){HRB.tools.log("calling partnerIdDetermined('"+g_partner_id+"') returned: '"+e$31+"'. Containing page does NOT need to implement function partnerIdDetermined().")}$(document).on("click",'[class*="track-"]',function(event){if(typeof $(this).data("track")=="undefined")HRB.tools.log(".ready: element has no data-track attribute.");else{var data=jQuery.parseJSON($.toJSON($(this).data("track")));if($(this).hasClass("accordion-toggle"))if($(this).hasClass("collapsed"))return;
var classValue=$(this).attr("class");HRB.omniture.doAnalytics(data,classValue);HRB.datatrack.processPixels(data);var preventdef=typeof data.pd!="undefined"?data.pd:"false";if(preventdef=="true")event.preventDefault();else return true;if(data.type=="sn")HRB.integration.productStartNow(data);if(data.type=="lm")HRB.integration.productLearnMore(data);if(data.type=="dn"){var y=$(this).closest("form");var _swObj=jQuery.parseJSON($.toJSON($(this).data("track")));_swObj.os=y.find('[name="product-choice"]:checked').val();
if(typeof _swObj.os=="undefined")_swObj.os="win";if(_swObj.os=="win")if(y.find("#state").val()==0){alert("Please select a  State.");return false}else _swObj.st=y.find("#state").val();else if(_swObj.os=="mac")if(y.find("#state-mac").val()==0){alert("Please select a  State.");return false}else _swObj.st=y.find("#state-mac").val();if(typeof _swObj.pid=="undefined")if(_swObj.os=="mac")_swObj.pid=_swObj.skum;else if(_swObj.os=="win")_swObj.pid=_swObj.skuw;_swObj.yr=typeof _swObj.yr!="undefined"?_swObj.yr:
HRB.integration.getConfig("CMYR");HRB.integration.productStartNow(_swObj)}}});HRB.pixel.processPixel();HRB.ui.setTprByProduct();HRB.ui.setMDLTprSelections();HRB.ui.setSoftwareOpSysSelectionText();HRB.ui.setSoftwareDownloadAccessibilityText();var disclaimerNumber=HRB.tools.getQueryUrl("odisc");var reg=/^\d+$/;if(disclaimerNumber!=null&&reg.test(disclaimerNumber))$('<sup><a id="disclaimer-link'+disclaimerNumber+'"class="js-disclaimer-link" aria-hidden="true" tab-index="-1" href="#legal-disclaimer" style="display:none;visiblity:hidden">'+
disclaimerNumber+"</a></sup>").appendTo($("body"));HRB.ui.setDisclaimerBehavior();HRB.ui.setAccessibilityProductLinkText();HRB.ui.setAccessibilityTileContentLinkText();HRB.ui.setAccessibilityForBlankTarget();HRB.ui.setAccessibilityLandmarks();HRB.ui.setAccessibilityHeadingTags();HRB.ui.setAccessibilityArticleTags();$("select.fancy").each(function(){HRB.ui.select().config($(this))});$(".accordion").each(function(){HRB.ui.accordion().config($(this))});$(document.body).on("keydown","*[role=button]",
function(e){if($(this).is("a")){if(e.keyCode==32)$(this).trigger("click")}else if(e.keyCode==32||e.keyCode==13)$(this).trigger("click")});try{if(HRBData.digital_data.dtmEnabled)if(!HRBData.digital_data.satellitePageBottomHasFired){HRBData.digital_data.satellitePageBottomHasFired=true;HRB.tools.log("DTM: hrb.js: calling _satellite.pageBottom()");_satellite.pageBottom();HRB.tools.log("DTM:common-bottom.html: _satellite.publishDate | buildDate : "+_satellite.publishDate+" | "+_satellite.buildDate)}}catch(e$32){HRB.tools.log("DTM: hrb.js:error calling _satellite.pageBottom():"+
e$32)}$(".js-phone-number").click(function(event){try{if(HRB.libraries.isHrObj()&&HR.Utils.isMobile.any()){var dialedNum=this.textContent;HRBData.digital_data.loc="b";HRBData.digital_data.nm="phone number click";HRBData.digital_data.office_phone_number=dialedNum;_satellite.track("click_to_call_opened");HRB.tools.log("DTM: Call rule click_to_call_opened")}}catch(e$33){HRB.tools.log("DTM: Call rule click : Error "+e$33)}});if(disclaimerNumber!=null&&reg.test(disclaimerNumber))$("#disclaimer-link"+disclaimerNumber).trigger("click");
if(HRB.tools.getQueryUrl("showPodInfo")=="1")$('[class^="pod-info"]').on("click",function(event){if($("#deletePods").length==0){var data=jQuery.parseJSON($.toJSON($(this).data("pod-info")));var podPath=typeof data.path!="undefined"?data.path:"unknown pod";$(this).append("<div>"+podPath+"</div>");$(this).append('<a id="deletePods" href="javascript:HRB.ui.deleteAllPods(\''+podPath+"');\">Delete All Pods Except This</a>")}});if(HRB.session.getValue("initialReferer")==null)if(document.referrer!="")HRB.session.storeValue("initialReferer",
document.referrer);else if(HRB.tools.getQueryUrl("ivrtype")!=null&&HRB.tools.getQueryUrl("ivrtype")!="")HRB.session.storeValue("initialReferer","ivr-"+HRB.tools.getQueryUrl("ivrtype"));else HRB.session.storeValue("initialReferer","n/a");if(HRB.session.getValue("ci")==null)HRB.session.initItem("ci",JSON.stringify(HRB.session.clientInfo));if(HRB.session.getValue("noByAddr")==null)HRB.session.initItem("noByAddr",JSON.stringify(HRB.session.noByAddr));if(HRB.session.getValue("noByLoc")==null)HRB.session.initItem("noByLoc",
JSON.stringify(HRB.session.noByLoc));$.ajaxSetup({cache:true});$("[data-bvrating-id]").each(function(){HRB.ui.BVratings.writeRatings($(this))})});function openWin(url){window.open(url)}
function processPixelTracking(_token){var bVirtualPageToken=typeof _token!="undefined"&&_token!=null&&_token=="omnivirtual"?true:false;var _url_or_token=null;var add_params=null;if(typeof _token!="undefined"&&_token!=null&&_token!=""){_url_or_token=_token;if(typeof arguments[1]!="undefined"&&arguments[1]!=null&&arguments[1]!="")add_params=arguments[1];HRB.tools.log("###processPixelTracking:TOKEN '"+_token+"' specified.  Additional parameters (if any) are: "+add_params)}else if(typeof location.pathname!=
"undefined"||location.pathname!=null){_url_or_token=location.pathname;if(_url_or_token.indexOf("/")!=-1&&_url_or_token.indexOf(".html")==-1)_url_or_token=_url_or_token+"index.html";if(location.href.indexOf("ttiptitle")!=-1)if(typeof g_tax_tip_id!="undefined")_url_or_token="TAXTIP";var urlParam=location.search;if((typeof location.search!="undefined"||urlParam!=null)&&urlParam.indexOf("action=findappointment")!=-1)_url_or_token=_url_or_token+location.search;HRB.tools.log("###processPixelTracking:TOKEN not specified. _url_or_token:"+
_url_or_token)}var pixel_obj={_pixelobj:[{pagetoken:"bv-roi-appt-conf",pixel:["bv-roi-appt-conf.html"]},{pagetoken:"bv-roi-office-profile",pixel:["bv-roi-office-profile.html"]},{pagetoken:"bv-roi-office-locator",pixel:["bv-roi-office-locator.html"]}],getPixels:function(_url_or_token){var tmppathname=location.pathname;if(tmppathname.indexOf("/")!=-1&&tmppathname.indexOf(".html")==-1)tmppathname=tmppathname+"index.html";for(var i=0;i<this._pixelobj.length;i++)if(this._pixelobj[i].pagetoken==_url_or_token)if(typeof this._pixelobj[i].exclusion!=
"undefined"){var _excl_px=new Array;for(var j=0;j<this._pixelobj[i].exclusion.length;j++){var exclusionArr=this._pixelobj[i].exclusion[j].split("$");var matchfound=false;for(var k=0;k<exclusionArr.length;k++){var regex=new RegExp(exclusionArr[k]);if(tmppathname.match(regex)!=null){matchfound=true;break}}if(!matchfound)_excl_px[_excl_px.length]=this._pixelobj[i].pixel[j]}return _excl_px}else return this._pixelobj[i].pixel;return null},getExtImagePixels:function(_url_or_token){var tmppathname=location.pathname;
if(tmppathname.indexOf("/")!=-1&&tmppathname.indexOf(".html")==-1)tmppathname=tmppathname+"index.html";for(var i=0;i<this._pixelobj.length;i++)if(this._pixelobj[i].pagetoken==_url_or_token)if(typeof this._pixelobj[i].imgpixel!="undefined")return this._pixelobj[i].imgpixel;else return null;return null}};var pixDiv=document.createElement("div");pixDiv.setAttribute("id","hrb_pixel_tracker_div");pixDiv.style.width="0px";pixDiv.style.height="0px";pixDiv.style.overflow="hidden";document.body.appendChild(pixDiv);
var pixel_arr_gen=null;if(typeof _token!="undefined"&&_token!=null&&_token!="")pixel_arr_gen=null;else pixel_arr_gen=pixel_obj.getPixels("GENERIC");var pixel_arr=pixel_obj.getPixels(_url_or_token);if(pixel_arr!=null){if(pixel_arr_gen!=null)pixel_arr=pixel_arr_gen.concat(pixel_arr)}else pixel_arr=pixel_arr_gen;if(pixel_arr!=null)for(var i=0;i<pixel_arr.length;i++)if(pixel_arr[i]!=null){var _ifobj=pixelCreateIFrame(pixel_arr[i],add_params);pixDiv.appendChild(_ifobj)}var pixel_extImage=pixel_obj.getExtImagePixels(_url_or_token);
if(pixel_extImage!=null){var imgpixel=new Image;imgpixel.src=pixel_extImage;HRB.tools.log("###processPixelTracking:Image Pixel source is "+pixel_extImage)}}
function createIframe(_frameURL,_attr){var rand_frameid="pixel_frame_"+parseInt(Math.random()*100);var iframe=document.createElement("IFRAME");if(typeof _attr=="undefined"||_attr==null){iframe.style.width="30px";iframe.style.height="0px";iframe.style.border="0px";iframe.width="30px";iframe.height="0px";iframe.title="pixel-iframe-"+Math.floor(Math.random()*1E3+1);iframe.setAttribute("tabindex","-1");iframe.setAttribute("aria-hidden","true")}else{iframe.style.width=_attr.w+"px";iframe.style.height=
_attr.h+"px";iframe.width=_attr.w+"px";iframe.height=_attr.h+"px";if(typeof _attr.b!="undefined"){iframe.style.border=_attr.b+"px";iframe.frameBorder=_attr.b}else{iframe.style.border="0px";iframe.frameBorder=0}if(typeof _attr.s!="undefined")iframe.scrolling=_attr.s==1?"yes":"no";else iframe.style.scrolling="no"}iframe.id=rand_frameid;iframe.src=_frameURL;HRB.tools.log("###processPixelTracking:createIframe("+_frameURL+","+_attr+"): iframe source is "+_frameURL);return iframe}
function pixelCreateIFrame(_frameURL,add_param){_frameURL="/includes/pixel/pix_"+_frameURL+(add_param==null?"":"?"+add_param);return createIframe(_frameURL)}function omnitureOnClick(){}
(function($){var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},hasOwn=Object.prototype.hasOwnProperty;$.toJSON=typeof JSON==="object"&&JSON.stringify?JSON.stringify:function(o){if(o===null)return"null";var pairs,k,name,val,type=$.type(o);if(type==="undefined")return undefined;if(type==="number"||type==="boolean")return String(o);if(type==="string")return $.quoteString(o);if(typeof o.toJSON==="function")return $.toJSON(o.toJSON());
if(type==="date"){var month=o.getUTCMonth()+1,day=o.getUTCDate(),year=o.getUTCFullYear(),hours=o.getUTCHours(),minutes=o.getUTCMinutes(),seconds=o.getUTCSeconds(),milli=o.getUTCMilliseconds();if(month<10)month="0"+month;if(day<10)day="0"+day;if(hours<10)hours="0"+hours;if(minutes<10)minutes="0"+minutes;if(seconds<10)seconds="0"+seconds;if(milli<100)milli="0"+milli;if(milli<10)milli="0"+milli;return'"'+year+"-"+month+"-"+day+"T"+hours+":"+minutes+":"+seconds+"."+milli+'Z"'}pairs=[];if($.isArray(o)){for(k=
0;k<o.length;k++)pairs.push($.toJSON(o[k])||"null");return"["+pairs.join(",")+"]"}if(typeof o==="object"){for(k in o)if(hasOwn.call(o,k)){type=typeof k;if(type==="number")name='"'+k+'"';else if(type==="string")name=$.quoteString(k);else continue;type=typeof o[k];if(type!=="function"&&type!=="undefined"){val=$.toJSON(o[k]);pairs.push(name+":"+val)}}return"{"+pairs.join(",")+"}"}};$.evalJSON=typeof JSON==="object"&&JSON.parse?JSON.parse:function(str){return eval("("+str+")")};$.secureEvalJSON=typeof JSON===
"object"&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+str+")");throw new SyntaxError("Error parsing JSON, source is not valid.");};$.quoteString=function(str){if(str.match(escape))return'"'+str.replace(escape,function(a){var c=meta[a];if(typeof c==="string")return c;c=a.charCodeAt();return"\\u00"+
Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"';return'"'+str+'"'}})(jQuery);
!function($){$(function(){$.support.transition=function(){var transitionEnd=function(){var el=document.createElement("bootstrap"),transEndEventNames={"WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend","transition":"transitionend"},name;for(name in transEndEventNames)if(el.style[name]!==undefined)return transEndEventNames[name]}();return transitionEnd&&{end:transitionEnd}}()})}(window.jQuery);
!function($){var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.prototype.close=function(e){var $this=$(this),selector=$this.attr("data-target"),$parent;if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}$parent=$(selector);e&&e.preventDefault();$parent.length||($parent=$this.hasClass("alert")?$this:$this.parent());$parent.trigger(e=$.Event("close"));if(e.isDefaultPrevented())return;$parent.removeClass("in");
function removeElement(){$parent.trigger("closed").remove()}$.support.transition&&$parent.hasClass("fade")?$parent.on($.support.transition.end,removeElement):removeElement()};var old=$.fn.alert;$.fn.alert=function(option){return this.each(function(){var $this=$(this),data=$this.data("alert");if(!data)$this.data("alert",data=new Alert(this));if(typeof option=="string")data[option].call($this)})};$.fn.alert.Constructor=Alert;$.fn.alert.noConflict=function(){$.fn.alert=old;return this};$(document).on("click.alert.data-api",
dismiss,Alert.prototype.close)}(window.jQuery);
!function($){var Button=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.button.defaults,options)};Button.prototype.setState=function(state){var d="disabled",$el=this.$element,data=$el.data(),val=$el.is("input")?"val":"html";state=state+"Text";data.resetText||$el.data("resetText",$el[val]());$el[val](data[state]||this.options[state]);setTimeout(function(){state=="loadingText"?$el.addClass(d).attr(d,d):$el.removeClass(d).removeAttr(d)},0)};Button.prototype.toggle=function(){var $parent=
this.$element.closest('[data-toggle="buttons-radio"]');$parent&&$parent.find(".active").removeClass("active");this.$element.toggleClass("active")};var old=$.fn.button;$.fn.button=function(option){return this.each(function(){var $this=$(this),data=$this.data("button"),options=typeof option=="object"&&option;if(!data)$this.data("button",data=new Button(this,options));if(option=="toggle")data.toggle();else if(option)data.setState(option)})};$.fn.button.defaults={loadingText:"loading..."};$.fn.button.Constructor=
Button;$.fn.button.noConflict=function(){$.fn.button=old;return this};$(document).on("click.button.data-api","[data-toggle^=button]",function(e){var $btn=$(e.target);if(!$btn.hasClass("btn"))$btn=$btn.closest(".btn");$btn.button("toggle")})}(window.jQuery);
!function($){var Carousel=function(element,options){this.$element=$(element);this.$indicators=this.$element.find(".carousel-indicators");this.options=options;this.options.pause=="hover"&&this.$element.on("mouseenter",$.proxy(this.pause,this)).on("mouseleave",$.proxy(this.cycle,this))};Carousel.prototype={cycle:function(e){if(!e)this.paused=false;if(this.interval)clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval));
return this},getActiveIndex:function(){this.$active=this.$element.find(".item.active");this.$items=this.$active.parent().children();return this.$items.index(this.$active)},to:function(pos){var activeIndex=this.getActiveIndex(),that=this;if(pos>this.$items.length-1||pos<0)return;if(this.sliding)return this.$element.one("slid",function(){that.to(pos)});if(activeIndex==pos)return this.pause().cycle();return this.slide(pos>activeIndex?"next":"prev",$(this.$items[pos]))},pause:function(e){if(!e)this.paused=
true;if(this.$element.find(".next, .prev").length&&$.support.transition.end){this.$element.trigger($.support.transition.end);this.cycle(true)}clearInterval(this.interval);this.interval=null;return this},next:function(){if(this.sliding)return;return this.slide("next")},prev:function(){if(this.sliding)return;return this.slide("prev")},slide:function(type,next){var $active=this.$element.find(".item.active"),$next=next||$active[type](),isCycling=this.interval,direction=type=="next"?"left":"right",fallback=
type=="next"?"first":"last",that=this,e;this.sliding=true;isCycling&&this.pause();$next=$next.length?$next:this.$element.find(".item")[fallback]();e=$.Event("slide",{relatedTarget:$next[0],direction:direction});if($next.hasClass("active"))return;if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");this.$element.one("slid",function(){var $nextIndicator=$(that.$indicators.children()[that.getActiveIndex()]);$nextIndicator&&$nextIndicator.addClass("active")})}if($.support.transition&&
this.$element.hasClass("slide")){this.$element.trigger(e);if(e.isDefaultPrevented())return;$next.addClass(type);$next[0].offsetWidth;$active.addClass(direction);$next.addClass(direction);this.$element.one($.support.transition.end,function(){$next.removeClass([type,direction].join(" ")).addClass("active");$active.removeClass(["active",direction].join(" "));that.sliding=false;setTimeout(function(){that.$element.trigger("slid")},0)})}else{this.$element.trigger(e);if(e.isDefaultPrevented())return;$active.removeClass("active");
$next.addClass("active");this.sliding=false;this.$element.trigger("slid")}isCycling&&this.cycle();return this}};var old=$.fn.carousel;$.fn.carousel=function(option){return this.each(function(){var $this=$(this),data=$this.data("carousel"),options=$.extend({},$.fn.carousel.defaults,typeof option=="object"&&option),action=typeof option=="string"?option:options.slide;if(!data)$this.data("carousel",data=new Carousel(this,options));if(typeof option=="number")data.to(option);else if(action)data[action]();
else if(options.interval)data.pause().cycle()})};$.fn.carousel.defaults={interval:false,pause:"hover"};$.fn.carousel.Constructor=Carousel;$.fn.carousel.noConflict=function(){$.fn.carousel=old;return this};$(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var $this=$(this),href,$target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")),options=$.extend({},$target.data(),$this.data()),slideIndex;$target.carousel(options);var $active=
$target.find(".item.next, .item.prev");setTimeout(function(){$active.focus()},800);if(slideIndex=$this.attr("data-slide-to"))$target.data("carousel").pause().to(slideIndex).cycle();e.preventDefault()})}(window.jQuery);
!function($){var Collapse=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.collapse.defaults,options);if(this.options.parent)this.$parent=$(this.options.parent);this.options.toggle&&this.toggle()};Collapse.prototype={constructor:Collapse,dimension:function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"},show:function(){var dimension,scroll,actives,hasData;if(this.transitioning||this.$element.hasClass("in"))return;dimension=this.dimension();
scroll=$.camelCase(["scroll",dimension].join("-"));actives=this.$parent&&this.$parent.find("> .accordion-group > .in");if(actives&&actives.length){hasData=actives.data("collapse");if(hasData&&hasData.transitioning)return;actives.collapse("hide");hasData||actives.data("collapse",null)}this.$element[dimension](0);this.transition("addClass",$.Event("show"),"shown");$.support.transition&&this.$element[dimension](this.$element[0][scroll])},hide:function(){var dimension;if(this.transitioning||!this.$element.hasClass("in"))return;
dimension=this.dimension();this.reset(this.$element[dimension]());this.transition("removeClass",$.Event("hide"),"hidden");this.$element[dimension](0)},reset:function(size){var dimension=this.dimension();this.$element.removeClass("collapse")[dimension](size||"auto")[0].offsetWidth;this.$element[size!==null?"addClass":"removeClass"]("collapse");return this},transition:function(method,startEvent,completeEvent){var that=this,complete=function(){if(startEvent.type=="show")that.reset();that.transitioning=
0;that.$element.trigger(completeEvent)};this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;this.transitioning=1;this.$element[method]("in");$.support.transition&&this.$element.hasClass("collapse")?this.$element.one($.support.transition.end,complete):complete()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var old=$.fn.collapse;$.fn.collapse=function(option){return this.each(function(){var $this=$(this),data=$this.data("collapse"),options=$.extend({},
$.fn.collapse.defaults,$this.data(),typeof option=="object"&&option);if(!data)$this.data("collapse",data=new Collapse(this,options));if(typeof option=="string")data[option]()})};$.fn.collapse.defaults={toggle:true};$.fn.collapse.Constructor=Collapse;$.fn.collapse.noConflict=function(){$.fn.collapse=old;return this};$(document).on("click.collapse.data-api","[data-toggle=collapse]",function(e){var $this=$(this),href,target=$this.attr("data-target")||e.preventDefault()||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,
""),option=$(target).data("collapse")?"toggle":$this.data();$this[$(target).hasClass("in")?"addClass":"removeClass"]("collapsed");$(target).collapse(option)})}(window.jQuery);
!function($){var toggle="[data-toggle=dropdown]",Dropdown=function(element){var $el=$(element).on("click.dropdown.data-api",this.toggle);$("html").on("click.dropdown.data-api",function(){$el.parent().removeClass("open")})};Dropdown.prototype={constructor:Dropdown,toggle:function(e){var $this=$(this),$parent,isActive;if($this.is(".disabled, :disabled"))return;$parent=getParent($this);isActive=$parent.hasClass("open");clearMenus();if(!isActive){if("ontouchstart"in document.documentElement)$('<div class="dropdown-backdrop"/>').insertBefore($(this)).on("click",
clearMenus);$parent.toggleClass("open")}$this.focus();return false},keydown:function(e){var $this,$items,$active,$parent,isActive,index;if(!/(38|40|27)/.test(e.keyCode))return;$this=$(this);e.preventDefault();e.stopPropagation();if($this.is(".disabled, :disabled"))return;$parent=getParent($this);isActive=$parent.hasClass("open");if(!isActive||isActive&&e.keyCode==27){if(e.which==27)$parent.find(toggle).focus();return $this.click()}$items=$("[role=menu] li:not(.divider):visible a",$parent);if(!$items.length)return;
index=$items.index($items.filter(":focus"));if(e.keyCode==38&&index>0)index--;if(e.keyCode==40&&index<$items.length-1)index++;if(!~index)index=0;$items.eq(index).focus()}};function clearMenus(){$(".dropdown-backdrop").remove();$(toggle).each(function(){getParent($(this)).removeClass("open")})}function getParent($this){var selector=$this.attr("data-target"),$parent;if(!selector){selector=$this.attr("href");selector=selector&&/#/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,"")}$parent=selector&&
$(selector);if(!$parent||!$parent.length)$parent=$this.parent();return $parent}var old=$.fn.dropdown;$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data("dropdown");if(!data)$this.data("dropdown",data=new Dropdown(this));if(typeof option=="string")data[option].call($this)})};$.fn.dropdown.Constructor=Dropdown;$.fn.dropdown.noConflict=function(){$.fn.dropdown=old;return this};$(document).on("click.dropdown.data-api",clearMenus).on("click.dropdown.data-api",
".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.dropdown.data-api",toggle+", [role=menu]",Dropdown.prototype.keydown)}(window.jQuery);
!function($){var Modal=function(element,options){this.options=options;this.$element=$(element).delegate('[data-dismiss="modal"]',"click.dismiss.modal",$.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};Modal.prototype={constructor:Modal,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var that=this,e=$.Event("show");this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented())return;this.isShown=true;this.escape();
this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");if(!that.$element.parent().length)that.$element.appendTo(document.body);that.$element.show();if(transition)that.$element[0].offsetWidth;that.$element.addClass("in").attr("aria-hidden",false);that.enforceFocus();transition?that.$element.one($.support.transition.end,function(){that.$element.focus().trigger("shown")}):that.$element.focus().trigger("shown")})},hide:function(e){e&&e.preventDefault();var that=this;
e=$.Event("hide");this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=false;this.escape();$(document).off("focusin.modal");this.$element.removeClass("in").attr("aria-hidden",true);$.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var that=this;$(document).on("focusin.modal",function(e){if(that.$element[0]!==e.target&&!that.$element.has(e.target).length)that.$element.focus()})},escape:function(){var that=
this;if(this.isShown&&this.options.keyboard)this.$element.on("keyup.dismiss.modal",function(e){e.which==27&&that.hide()});else if(!this.isShown)this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var that=this,timeout=setTimeout(function(){that.$element.off($.support.transition.end);that.hideModal()},500);this.$element.one($.support.transition.end,function(){clearTimeout(timeout);that.hideModal()})},hideModal:function(){var that=this;this.$element.hide();this.backdrop(function(){that.removeBackdrop();
that.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null},backdrop:function(callback){var that=this,animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body);this.$backdrop.click(this.options.backdrop=="static"?$.proxy(this.$element[0].focus,this.$element[0]):$.proxy(this.hide,
this));if(doAnimate)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!callback)return;doAnimate?this.$backdrop.one($.support.transition.end,callback):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one($.support.transition.end,callback):callback()}else if(callback)callback()}};var old=$.fn.modal;$.fn.modal=function(option){return this.each(function(){var $this=$(this),data=$this.data("modal"),
options=$.extend({},$.fn.modal.defaults,$this.data(),typeof option=="object"&&option);if(!data)$this.data("modal",data=new Modal(this,options));if(typeof option=="string")data[option]();else if(options.show)data.show()})};$.fn.modal.defaults={backdrop:true,keyboard:true,show:true};$.fn.modal.Constructor=Modal;$.fn.modal.noConflict=function(){$.fn.modal=old;return this};$(document).on("click.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||
href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());e.preventDefault();$target.modal(option).one("hide",function(){$this.focus()})})}(window.jQuery);
!function($){var Tooltip=function(element,options){this.init("tooltip",element,options)};Tooltip.prototype={constructor:Tooltip,init:function(type,element,options){var eventIn,eventOut,triggers,trigger,i;this.type=type;this.$element=$(element);this.options=this.getOptions(options);this.enabled=true;triggers=this.options.trigger.split(" ");for(i=triggers.length;i--;){trigger=triggers[i];if(trigger=="click")this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if(trigger!=
"manual"){eventIn=trigger=="hover"?"mouseenter":"focus";eventOut=trigger=="hover"?"mouseleave":"blur";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this));this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(options){options=$.extend({},$.fn[this.type].defaults,this.$element.data(),options);if(options.delay&&
typeof options.delay=="number")options.delay={show:options.delay,hide:options.delay};return options},enter:function(e){var defaults=$.fn[this.type].defaults,options={},self;this._options&&$.each(this._options,function(key,value){if(defaults[key]!=value)options[key]=value},this);self=$(e.currentTarget)[this.type](options).data(this.type);if(!self.options.delay||!self.options.delay.show)return self.show();clearTimeout(this.timeout);self.hoverState="in";this.timeout=setTimeout(function(){if(self.hoverState==
"in")self.show()},self.options.delay.show)},leave:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type);if(this.timeout)clearTimeout(this.timeout);if(!self.options.delay||!self.options.delay.hide)return self.hide();self.hoverState="out";this.timeout=setTimeout(function(){if(self.hoverState=="out")self.hide()},self.options.delay.hide)},show:function(){var $tip,pos,actualWidth,actualHeight,placement,tp,e=$.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(e);
if(e.isDefaultPrevented())return;$tip=this.tip();this.setContent();if(this.options.animation)$tip.addClass("fade");placement=typeof this.options.placement=="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;$tip.detach().css({top:0,left:0,display:"block"});this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);pos=this.getPosition();actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight;switch(placement){case "bottom":tp=
{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2};break;case "top":tp={top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2};break;case "left":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth};break;case "right":tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width};break}this.applyPlacement(tp,placement);this.$element.trigger("shown")}},applyPlacement:function(offset,placement){var $tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,
actualWidth,actualHeight,delta,replace;$tip.offset(offset).addClass(placement).addClass("in");actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight;if(placement=="top"&&actualHeight!=height){offset.top=offset.top+height-actualHeight;replace=true}if(placement=="bottom"||placement=="top"){delta=0;if(offset.left<0){delta=offset.left*-2;offset.left=0;$tip.offset(offset);actualWidth=$tip[0].offsetWidth;actualHeight=$tip[0].offsetHeight}this.replaceArrow(delta-width+actualWidth,actualWidth,
"left")}else this.replaceArrow(actualHeight-height,actualHeight,"top");if(replace)$tip.offset(offset)},replaceArrow:function(delta,dimension,position){this.arrow().css(position,delta?50*(1-delta/dimension)+"%":"")},setContent:function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title);$tip.removeClass("fade in top bottom left right")},hide:function(){var that=this,$tip=this.tip(),e=$.Event("hide");this.$element.trigger(e);if(e.isDefaultPrevented())return;
$tip.removeClass("in");function removeWithAnimation(){var timeout=setTimeout(function(){$tip.off($.support.transition.end).detach()},500);$tip.one($.support.transition.end,function(){clearTimeout(timeout);$tip.detach()})}$.support.transition&&this.$tip.hasClass("fade")?removeWithAnimation():$tip.detach();this.$element.trigger("hidden");return this},fixTitle:function(){var $e=this.$element;if($e.attr("title")||typeof $e.attr("data-original-title")!="string")$e.attr("data-original-title",$e.attr("title")||
"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var el=this.$element[0];return $.extend({},typeof el.getBoundingClientRect=="function"?el.getBoundingClientRect():{width:el.offsetWidth,height:el.offsetHeight},this.$element.offset())},getTitle:function(){var title,$e=this.$element,o=this.options;title=$e.attr("data-original-title")||(typeof o.title=="function"?o.title.call($e[0]):o.title);return title},tip:function(){return this.$tip=this.$tip||$(this.options.template)},
arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(e){var self=e?$(e.currentTarget)[this.type](this._options).data(this.type):this;self.tip().hasClass("in")?self.hide():self.show()},destroy:function(){this.hide().$element.off("."+
this.type).removeData(this.type)}};var old=$.fn.tooltip;$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data("tooltip"),options=typeof option=="object"&&option;if(!data)$this.data("tooltip",data=new Tooltip(this,options));if(typeof option=="string")data[option]()})};$.fn.tooltip.Constructor=Tooltip;$.fn.tooltip.defaults={animation:true,placement:"top",selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
trigger:"hover focus",title:"",delay:0,html:false,container:false};$.fn.tooltip.noConflict=function(){$.fn.tooltip=old;return this}}(window.jQuery);
!function($){var Popover=function(element,options){this.init("popover",element,options)};Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype,{constructor:Popover,setContent:function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title);$tip.find(".popover-content")[this.options.html?"html":"text"](content);$tip.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||
this.getContent()},getContent:function(){var content,$e=this.$element,o=this.options;content=(typeof o.content=="function"?o.content.call($e[0]):o.content)||$e.attr("data-content");return content},tip:function(){if(!this.$tip)this.$tip=$(this.options.template);return this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}});var old=$.fn.popover;$.fn.popover=function(option){return this.each(function(){var $this=$(this),data=$this.data("popover"),options=typeof option==
"object"&&option;if(!data)$this.data("popover",data=new Popover(this,options));if(typeof option=="string")data[option]()})};$.fn.popover.Constructor=Popover;$.fn.popover.defaults=$.extend({},$.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});$.fn.popover.noConflict=function(){$.fn.popover=old;return this}}(window.jQuery);
!function($){function ScrollSpy(element,options){var process=$.proxy(this.process,this),$element=$(element).is("body")?$(window):$(element),href;this.options=$.extend({},$.fn.scrollspy.defaults,options);this.$scrollElement=$element.on("scroll.scroll-spy.data-api",process);this.selector=(this.options.target||(href=$(element).attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a";this.$body=$("body");this.refresh();this.process()}ScrollSpy.prototype={constructor:ScrollSpy,refresh:function(){var self=
this,$targets;this.offsets=$([]);this.targets=$([]);$targets=this.$body.find(this.selector).map(function(){var $el=$(this),href=$el.data("target")||$el.attr("href"),$href=/^#\w/.test(href)&&$(href);return $href&&$href.length&&[[$href.position().top+(!$.isWindow(self.$scrollElement.get(0))&&self.$scrollElement.scrollTop()),href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){self.offsets.push(this[0]);self.targets.push(this[1])})},process:function(){var scrollTop=this.$scrollElement.scrollTop()+
this.options.offset,scrollHeight=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,maxScroll=scrollHeight-this.$scrollElement.height(),offsets=this.offsets,targets=this.targets,activeTarget=this.activeTarget,i;if(scrollTop>=maxScroll)return activeTarget!=(i=targets.last()[0])&&this.activate(i);for(i=offsets.length;i--;)activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(!offsets[i+1]||scrollTop<=offsets[i+1])&&this.activate(targets[i])},activate:function(target){var active,selector;this.activeTarget=
target;$(this.selector).parent(".active").removeClass("active");selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]';active=$(selector).parent("li").addClass("active");if(active.parent(".dropdown-menu").length)active=active.closest("li.dropdown").addClass("active");active.trigger("activate")}};var old=$.fn.scrollspy;$.fn.scrollspy=function(option){return this.each(function(){var $this=$(this),data=$this.data("scrollspy"),options=typeof option=="object"&&option;
if(!data)$this.data("scrollspy",data=new ScrollSpy(this,options));if(typeof option=="string")data[option]()})};$.fn.scrollspy.Constructor=ScrollSpy;$.fn.scrollspy.defaults={offset:10};$.fn.scrollspy.noConflict=function(){$.fn.scrollspy=old;return this};$(window).on("load",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);$spy.scrollspy($spy.data())})})}(window.jQuery);
!function($){var Tab=function(element){this.element=$(element)};Tab.prototype={constructor:Tab,show:function(){var $this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.attr("data-target"),previous,$target,e;if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}if($this.parent("li").hasClass("active"))return;previous=$ul.find(".active:last a")[0];e=$.Event("show",{relatedTarget:previous});$this.trigger(e);if(e.isDefaultPrevented())return;
$target=$(selector);this.activate($this.parent("li"),$ul);this.activate($target,$target.parent(),function(){$this.trigger({type:"shown",relatedTarget:previous})})},activate:function(element,container,callback){var $active=container.find("> .active"),transition=callback&&$.support.transition&&$active.hasClass("fade");function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active");element.addClass("active");if(transition){element[0].offsetWidth;element.addClass("in")}else element.removeClass("fade");
if(element.parent(".dropdown-menu"))element.closest("li.dropdown").addClass("active");callback&&callback()}transition?$active.one($.support.transition.end,next):next();$active.removeClass("in")}};var old=$.fn.tab;$.fn.tab=function(option){return this.each(function(){var $this=$(this),data=$this.data("tab");if(!data)$this.data("tab",data=new Tab(this));if(typeof option=="string")data[option]()})};$.fn.tab.Constructor=Tab;$.fn.tab.noConflict=function(){$.fn.tab=old;return this};$(document).on("click.tab.data-api",
'[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault();$(this).tab("show")})}(window.jQuery);
!function($){var Typeahead=function(element,options){this.$element=$(element);this.options=$.extend({},$.fn.typeahead.defaults,options);this.matcher=this.options.matcher||this.matcher;this.sorter=this.options.sorter||this.sorter;this.highlighter=this.options.highlighter||this.highlighter;this.updater=this.options.updater||this.updater;this.source=this.options.source;this.$menu=$(this.options.menu);this.shown=false;this.listen()};Typeahead.prototype={constructor:Typeahead,select:function(){var val=
this.$menu.find(".active").attr("data-value");this.$element.val(this.updater(val)).change();return this.hide()},updater:function(item){return item},show:function(){var pos=$.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});this.$menu.insertAfter(this.$element).css({top:pos.top+pos.height,left:pos.left}).show();this.shown=true;return this},hide:function(){this.$menu.hide();this.shown=false;return this},lookup:function(event){var items;this.query=this.$element.val();if(!this.query||
this.query.length<this.options.minLength)return this.shown?this.hide():this;items=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source;return items?this.process(items):this},process:function(items){var that=this;items=$.grep(items,function(item){return that.matcher(item)});items=this.sorter(items);if(!items.length)return this.shown?this.hide():this;return this.render(items.slice(0,this.options.items)).show()},matcher:function(item){return~item.toLowerCase().indexOf(this.query.toLowerCase())},
sorter:function(items){var beginswith=[],caseSensitive=[],caseInsensitive=[],item;while(item=items.shift())if(!item.toLowerCase().indexOf(this.query.toLowerCase()))beginswith.push(item);else if(~item.indexOf(this.query))caseSensitive.push(item);else caseInsensitive.push(item);return beginswith.concat(caseSensitive,caseInsensitive)},highlighter:function(item){var query=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return item.replace(new RegExp("("+query+")","ig"),function($1,match){return"<strong>"+
match+"</strong>"})},render:function(items){var that=this;items=$(items).map(function(i,item){i=$(that.options.item).attr("data-value",item);i.find("a").html(that.highlighter(item));return i[0]});items.first().addClass("active");this.$menu.html(items);return this},next:function(event){var active=this.$menu.find(".active").removeClass("active"),next=active.next();if(!next.length)next=$(this.$menu.find("li")[0]);next.addClass("active")},prev:function(event){var active=this.$menu.find(".active").removeClass("active"),
prev=active.prev();if(!prev.length)prev=this.$menu.find("li").last();prev.addClass("active")},listen:function(){this.$element.on("focus",$.proxy(this.focus,this)).on("blur",$.proxy(this.blur,this)).on("keypress",$.proxy(this.keypress,this)).on("keyup",$.proxy(this.keyup,this));if(this.eventSupported("keydown"))this.$element.on("keydown",$.proxy(this.keydown,this));this.$menu.on("click",$.proxy(this.click,this)).on("mouseenter","li",$.proxy(this.mouseenter,this)).on("mouseleave","li",$.proxy(this.mouseleave,
this))},eventSupported:function(eventName){var isSupported=eventName in this.$element;if(!isSupported){this.$element.setAttribute(eventName,"return;");isSupported=typeof this.$element[eventName]==="function"}return isSupported},move:function(e){if(!this.shown)return;switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault();this.prev();break;case 40:e.preventDefault();this.next();break}e.stopPropagation()},keydown:function(e){this.suppressKeyPressRepeat=~$.inArray(e.keyCode,
[40,38,9,13,27]);this.move(e)},keypress:function(e){if(this.suppressKeyPressRepeat)return;this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation();e.preventDefault()},focus:function(e){this.focused=true},blur:function(e){this.focused=false;if(!this.mousedover&&this.shown)this.hide()},click:function(e){e.stopPropagation();
e.preventDefault();this.select();this.$element.focus()},mouseenter:function(e){this.mousedover=true;this.$menu.find(".active").removeClass("active");$(e.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=false;if(!this.focused&&this.shown)this.hide()}};var old=$.fn.typeahead;$.fn.typeahead=function(option){return this.each(function(){var $this=$(this),data=$this.data("typeahead"),options=typeof option=="object"&&option;if(!data)$this.data("typeahead",data=new Typeahead(this,
options));if(typeof option=="string")data[option]()})};$.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1};$.fn.typeahead.Constructor=Typeahead;$.fn.typeahead.noConflict=function(){$.fn.typeahead=old;return this};$(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(e){var $this=$(this);if($this.data("typeahead"))return;$this.typeahead($this.data())})}(window.jQuery);
!function($){var Affix=function(element,options){this.options=$.extend({},$.fn.affix.defaults,options);this.$window=$(window).on("scroll.affix.data-api",$.proxy(this.checkPosition,this)).on("click.affix.data-api",$.proxy(function(){setTimeout($.proxy(this.checkPosition,this),1)},this));this.$element=$(element);this.checkPosition()};Affix.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var scrollHeight=$(document).height(),scrollTop=this.$window.scrollTop(),position=this.$element.offset(),
offset=this.options.offset,offsetBottom=offset.bottom,offsetTop=offset.top,reset="affix affix-top affix-bottom",affix;if(typeof offset!="object")offsetBottom=offsetTop=offset;if(typeof offsetTop=="function")offsetTop=offset.top();if(typeof offsetBottom=="function")offsetBottom=offset.bottom();affix=this.unpin!=null&&scrollTop+this.unpin<=position.top?false:offsetBottom!=null&&position.top+this.$element.height()>=scrollHeight-offsetBottom?"bottom":offsetTop!=null&&scrollTop<=offsetTop?"top":false;
if(this.affixed===affix)return;this.affixed=affix;this.unpin=affix=="bottom"?position.top-scrollTop:null;this.$element.removeClass(reset).addClass("affix"+(affix?"-"+affix:""))};var old=$.fn.affix;$.fn.affix=function(option){return this.each(function(){var $this=$(this),data=$this.data("affix"),options=typeof option=="object"&&option;if(!data)$this.data("affix",data=new Affix(this,options));if(typeof option=="string")data[option]()})};$.fn.affix.Constructor=Affix;$.fn.affix.defaults={offset:0};$.fn.affix.noConflict=
function(){$.fn.affix=old;return this};$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this),data=$spy.data();data.offset=data.offset||{};data.offsetBottom&&(data.offset.bottom=data.offsetBottom);data.offsetTop&&(data.offset.top=data.offsetTop);$spy.affix(data)})})}(window.jQuery);
(function(jQuery){if(window.XDomainRequest)jQuery.ajaxTransport(function(s){if(s.crossDomain&&s.async){if(s.timeout){s.xdrTimeout=s.timeout;delete s.timeout}var xdr;return{send:function(_,complete){function callback(status,statusText,responses,responseHeaders){xdr.onload=xdr.onerror=xdr.ontimeout=jQuery.noop;xdr=undefined;complete(status,statusText,responses,responseHeaders)}xdr=new window.XDomainRequest;xdr.onload=function(){callback(200,"OK",{text:xdr.responseText},"Content-Type: "+xdr.contentType)};
xdr.onerror=function(){callback(404,"Not Found")};xdr.onprogress=function(){};if(s.xdrTimeout){xdr.ontimeout=function(){callback(0,"timeout")};xdr.timeout=s.xdrTimeout}xdr.open(s.type,s.url,true);xdr.send(s.hasContent&&s.data||null)},abort:function(){if(xdr){xdr.onerror=jQuery.noop();xdr.abort()}}}}})})(jQuery);
(function(){var root=this;var previousUnderscore=root._;var breaker={};var ArrayProto=Array.prototype,ObjProto=Object.prototype,FuncProto=Function.prototype;var getTime=Date.now||function(){return(new Date).getTime()};var push=ArrayProto.push,slice=ArrayProto.slice,concat=ArrayProto.concat,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty;var nativeForEach=ArrayProto.forEach,nativeMap=ArrayProto.map,nativeReduce=ArrayProto.reduce,nativeReduceRight=ArrayProto.reduceRight,nativeFilter=
ArrayProto.filter,nativeEvery=ArrayProto.every,nativeSome=ArrayProto.some,nativeIndexOf=ArrayProto.indexOf,nativeLastIndexOf=ArrayProto.lastIndexOf,nativeIsArray=Array.isArray,nativeKeys=Object.keys,nativeBind=FuncProto.bind;var _=function(obj){if(obj instanceof _)return obj;if(!(this instanceof _))return new _(obj);this._wrapped=obj};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=_;exports._=_}else root._=_;_.VERSION="1.5.2";var each=_.each=
_.forEach=function(obj,iterator,context){if(obj==null)return;if(nativeForEach&&obj.forEach===nativeForEach)obj.forEach(iterator,context);else if(obj.length===+obj.length)for(var i=0,length=obj.length;i<length;i++){if(iterator.call(context,obj[i],i,obj)===breaker)return}else{var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++)if(iterator.call(context,obj[keys[i]],keys[i],obj)===breaker)return}};_.map=_.collect=function(obj,iterator,context){var results=[];if(obj==null)return results;if(nativeMap&&
obj.map===nativeMap)return obj.map(iterator,context);each(obj,function(value,index,list){results.push(iterator.call(context,value,index,list))});return results};var reduceError="Reduce of empty array with no initial value";_.reduce=_.foldl=_.inject=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduce&&obj.reduce===nativeReduce){if(context)iterator=_.bind(iterator,context);return initial?obj.reduce(iterator,memo):obj.reduce(iterator)}each(obj,function(value,
index,list){if(!initial){memo=value;initial=true}else memo=iterator.call(context,memo,value,index,list)});if(!initial)throw new TypeError(reduceError);return memo};_.reduceRight=_.foldr=function(obj,iterator,memo,context){var initial=arguments.length>2;if(obj==null)obj=[];if(nativeReduceRight&&obj.reduceRight===nativeReduceRight){if(context)iterator=_.bind(iterator,context);return initial?obj.reduceRight(iterator,memo):obj.reduceRight(iterator)}var length=obj.length;if(length!==+length){var keys=
_.keys(obj);length=keys.length}each(obj,function(value,index,list){index=keys?keys[--length]:--length;if(!initial){memo=obj[index];initial=true}else memo=iterator.call(context,memo,obj[index],index,list)});if(!initial)throw new TypeError(reduceError);return memo};_.find=_.detect=function(obj,iterator,context){var result;any(obj,function(value,index,list){if(iterator.call(context,value,index,list)){result=value;return true}});return result};_.filter=_.select=function(obj,iterator,context){var results=
[];if(obj==null)return results;if(nativeFilter&&obj.filter===nativeFilter)return obj.filter(iterator,context);each(obj,function(value,index,list){if(iterator.call(context,value,index,list))results.push(value)});return results};_.reject=function(obj,iterator,context){return _.filter(obj,function(value,index,list){return!iterator.call(context,value,index,list)},context)};_.every=_.all=function(obj,iterator,context){iterator||(iterator=_.identity);var result=true;if(obj==null)return result;if(nativeEvery&&
obj.every===nativeEvery)return obj.every(iterator,context);each(obj,function(value,index,list){if(!(result=result&&iterator.call(context,value,index,list)))return breaker});return!!result};var any=_.some=_.any=function(obj,iterator,context){iterator||(iterator=_.identity);var result=false;if(obj==null)return result;if(nativeSome&&obj.some===nativeSome)return obj.some(iterator,context);each(obj,function(value,index,list){if(result||(result=iterator.call(context,value,index,list)))return breaker});
return!!result};_.contains=_.include=function(obj,target){if(obj==null)return false;if(nativeIndexOf&&obj.indexOf===nativeIndexOf)return obj.indexOf(target)!=-1;return any(obj,function(value){return value===target})};_.invoke=function(obj,method){var args=slice.call(arguments,2);var isFunc=_.isFunction(method);return _.map(obj,function(value){return(isFunc?method:value[method]).apply(value,args)})};_.pluck=function(obj,key){return _.map(obj,function(value){return value[key]})};_.where=function(obj,
attrs,first){if(_.isEmpty(attrs))return first?void 0:[];return _[first?"find":"filter"](obj,function(value){for(var key in attrs)if(attrs[key]!==value[key])return false;return true})};_.findWhere=function(obj,attrs){return _.where(obj,attrs,true)};_.max=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.max.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return-Infinity;var result={computed:-Infinity,value:-Infinity};each(obj,function(value,index,
list){var computed=iterator?iterator.call(context,value,index,list):value;computed>result.computed&&(result={value:value,computed:computed})});return result.value};_.min=function(obj,iterator,context){if(!iterator&&_.isArray(obj)&&obj[0]===+obj[0]&&obj.length<65535)return Math.min.apply(Math,obj);if(!iterator&&_.isEmpty(obj))return Infinity;var result={computed:Infinity,value:Infinity};each(obj,function(value,index,list){var computed=iterator?iterator.call(context,value,index,list):value;computed<
result.computed&&(result={value:value,computed:computed})});return result.value};_.shuffle=function(obj){var rand;var index=0;var shuffled=[];each(obj,function(value){rand=_.random(index++);shuffled[index-1]=shuffled[rand];shuffled[rand]=value});return shuffled};_.sample=function(obj,n,guard){if(n==null||guard){if(obj.length!==+obj.length)obj=_.values(obj);return obj[_.random(obj.length-1)]}return _.shuffle(obj).slice(0,Math.max(0,n))};var lookupIterator=function(value){return _.isFunction(value)?
value:function(obj){return obj[value]}};_.sortBy=function(obj,value,context){var iterator=value==null?_.identity:lookupIterator(value);return _.pluck(_.map(obj,function(value,index,list){return{value:value,index:index,criteria:iterator.call(context,value,index,list)}}).sort(function(left,right){var a=left.criteria;var b=right.criteria;if(a!==b){if(a>b||a===void 0)return 1;if(a<b||b===void 0)return-1}return left.index-right.index}),"value")};var group=function(behavior){return function(obj,value,context){var result=
{};var iterator=value==null?_.identity:lookupIterator(value);each(obj,function(value,index){var key=iterator.call(context,value,index,obj);behavior(result,key,value)});return result}};_.groupBy=group(function(result,key,value){(_.has(result,key)?result[key]:result[key]=[]).push(value)});_.indexBy=group(function(result,key,value){result[key]=value});_.countBy=group(function(result,key){_.has(result,key)?result[key]++:result[key]=1});_.sortedIndex=function(array,obj,iterator,context){iterator=iterator==
null?_.identity:lookupIterator(iterator);var value=iterator.call(context,obj);var low=0,high=array.length;while(low<high){var mid=low+high>>>1;iterator.call(context,array[mid])<value?low=mid+1:high=mid}return low};_.toArray=function(obj){if(!obj)return[];if(_.isArray(obj))return slice.call(obj);if(obj.length===+obj.length)return _.map(obj,_.identity);return _.values(obj)};_.size=function(obj){if(obj==null)return 0;return obj.length===+obj.length?obj.length:_.keys(obj).length};_.first=_.head=_.take=
function(array,n,guard){if(array==null)return void 0;return n==null||guard?array[0]:slice.call(array,0,n)};_.initial=function(array,n,guard){return slice.call(array,0,array.length-(n==null||guard?1:n))};_.last=function(array,n,guard){if(array==null)return void 0;if(n==null||guard)return array[array.length-1];else return slice.call(array,Math.max(array.length-n,0))};_.rest=_.tail=_.drop=function(array,n,guard){return slice.call(array,n==null||guard?1:n)};_.compact=function(array){return _.filter(array,
_.identity)};var flatten=function(input,shallow,output){if(shallow&&_.every(input,_.isArray))return concat.apply(output,input);each(input,function(value){if(_.isArray(value)||_.isArguments(value))shallow?push.apply(output,value):flatten(value,shallow,output);else output.push(value)});return output};_.flatten=function(array,shallow){return flatten(array,shallow,[])};_.without=function(array){return _.difference(array,slice.call(arguments,1))};_.uniq=_.unique=function(array,isSorted,iterator,context){if(_.isFunction(isSorted)){context=
iterator;iterator=isSorted;isSorted=false}var initial=iterator?_.map(array,iterator,context):array;var results=[];var seen=[];each(initial,function(value,index){if(isSorted?!index||seen[seen.length-1]!==value:!_.contains(seen,value)){seen.push(value);results.push(array[index])}});return results};_.union=function(){return _.uniq(_.flatten(arguments,true))};_.intersection=function(array){var rest=slice.call(arguments,1);return _.filter(_.uniq(array),function(item){return _.every(rest,function(other){return _.indexOf(other,
item)>=0})})};_.difference=function(array){var rest=concat.apply(ArrayProto,slice.call(arguments,1));return _.filter(array,function(value){return!_.contains(rest,value)})};_.zip=function(){var length=_.max(_.pluck(arguments,"length").concat(0));var results=new Array(length);for(var i=0;i<length;i++)results[i]=_.pluck(arguments,""+i);return results};_.object=function(list,values){if(list==null)return{};var result={};for(var i=0,length=list.length;i<length;i++)if(values)result[list[i]]=values[i];else result[list[i][0]]=
list[i][1];return result};_.indexOf=function(array,item,isSorted){if(array==null)return-1;var i=0,length=array.length;if(isSorted)if(typeof isSorted=="number")i=isSorted<0?Math.max(0,length+isSorted):isSorted;else{i=_.sortedIndex(array,item);return array[i]===item?i:-1}if(nativeIndexOf&&array.indexOf===nativeIndexOf)return array.indexOf(item,isSorted);for(;i<length;i++)if(array[i]===item)return i;return-1};_.lastIndexOf=function(array,item,from){if(array==null)return-1;var hasIndex=from!=null;if(nativeLastIndexOf&&
array.lastIndexOf===nativeLastIndexOf)return hasIndex?array.lastIndexOf(item,from):array.lastIndexOf(item);var i=hasIndex?from:array.length;while(i--)if(array[i]===item)return i;return-1};_.range=function(start,stop,step){if(arguments.length<=1){stop=start||0;start=0}step=arguments[2]||1;var length=Math.max(Math.ceil((stop-start)/step),0);var idx=0;var range=new Array(length);while(idx<length){range[idx++]=start;start+=step}return range};var ctor=function(){};_.bind=function(func,context){var args,
bound;if(nativeBind&&func.bind===nativeBind)return nativeBind.apply(func,slice.call(arguments,1));if(!_.isFunction(func))throw new TypeError;args=slice.call(arguments,2);return bound=function(){if(!(this instanceof bound))return func.apply(context,args.concat(slice.call(arguments)));ctor.prototype=func.prototype;var self=new ctor;ctor.prototype=null;var result=func.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result)return result;return self}};_.partial=function(func){var args=
slice.call(arguments,1);return function(){return func.apply(this,args.concat(slice.call(arguments)))}};_.bindAll=function(obj){var funcs=slice.call(arguments,1);if(funcs.length===0)throw new Error("bindAll must be passed function names");each(funcs,function(f){obj[f]=_.bind(obj[f],obj)});return obj};_.memoize=function(func,hasher){var memo={};hasher||(hasher=_.identity);return function(){var key=hasher.apply(this,arguments);return _.has(memo,key)?memo[key]:memo[key]=func.apply(this,arguments)}};_.delay=
function(func,wait){var args=slice.call(arguments,2);return setTimeout(function(){return func.apply(null,args)},wait)};_.defer=function(func){return _.delay.apply(_,[func,1].concat(slice.call(arguments,1)))};_.throttle=function(func,wait,options){var context,args,result;var timeout=null;var previous=0;options||(options={});var later=function(){previous=options.leading===false?0:getTime();timeout=null;result=func.apply(context,args)};return function(){var now=getTime();if(!previous&&options.leading===
false)previous=now;var remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0){clearTimeout(timeout);timeout=null;previous=now;result=func.apply(context,args)}else if(!timeout&&options.trailing!==false)timeout=setTimeout(later,remaining);return result}};_.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result;return function(){context=this;args=arguments;timestamp=getTime();var later=function(){var last=getTime()-timestamp;if(last<wait)timeout=setTimeout(later,
wait-last);else{timeout=null;if(!immediate)result=func.apply(context,args)}};var callNow=immediate&&!timeout;if(!timeout)timeout=setTimeout(later,wait);if(callNow)result=func.apply(context,args);return result}};_.once=function(func){var ran=false,memo;return function(){if(ran)return memo;ran=true;memo=func.apply(this,arguments);func=null;return memo}};_.wrap=function(func,wrapper){return function(){var args=[func];push.apply(args,arguments);return wrapper.apply(this,args)}};_.compose=function(){var funcs=
arguments;return function(){var args=arguments;for(var i=funcs.length-1;i>=0;i--)args=[funcs[i].apply(this,args)];return args[0]}};_.after=function(times,func){return function(){if(--times<1)return func.apply(this,arguments)}};_.keys=nativeKeys||function(obj){if(obj!==Object(obj))throw new TypeError("Invalid object");var keys=[];for(var key in obj)if(_.has(obj,key))keys.push(key);return keys};_.values=function(obj){var keys=_.keys(obj);var length=keys.length;var values=new Array(length);for(var i=
0;i<length;i++)values[i]=obj[keys[i]];return values};_.pairs=function(obj){var keys=_.keys(obj);var length=keys.length;var pairs=new Array(length);for(var i=0;i<length;i++)pairs[i]=[keys[i],obj[keys[i]]];return pairs};_.invert=function(obj){var result={};var keys=_.keys(obj);for(var i=0,length=keys.length;i<length;i++)result[obj[keys[i]]]=keys[i];return result};_.functions=_.methods=function(obj){var names=[];for(var key in obj)if(_.isFunction(obj[key]))names.push(key);return names.sort()};_.extend=
function(obj){each(slice.call(arguments,1),function(source){if(source)for(var prop in source)obj[prop]=source[prop]});return obj};_.pick=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));each(keys,function(key){if(key in obj)copy[key]=obj[key]});return copy};_.omit=function(obj){var copy={};var keys=concat.apply(ArrayProto,slice.call(arguments,1));for(var key in obj)if(!_.contains(keys,key))copy[key]=obj[key];return copy};_.defaults=function(obj){each(slice.call(arguments,
1),function(source){if(source)for(var prop in source)if(obj[prop]===void 0)obj[prop]=source[prop]});return obj};_.clone=function(obj){if(!_.isObject(obj))return obj;return _.isArray(obj)?obj.slice():_.extend({},obj)};_.tap=function(obj,interceptor){interceptor(obj);return obj};var eq=function(a,b,aStack,bStack){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a instanceof _)a=a._wrapped;if(b instanceof _)b=b._wrapped;var className=toString.call(a);if(className!=toString.call(b))return false;
switch(className){case "[object String]":return a==String(b);case "[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==+b;case "[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return false;var length=aStack.length;while(length--)if(aStack[length]==a)return bStack[length]==b;var aCtor=a.constructor,bCtor=b.constructor;if(aCtor!==bCtor&&
!(_.isFunction(aCtor)&&aCtor instanceof aCtor&&_.isFunction(bCtor)&&bCtor instanceof bCtor))return false;aStack.push(a);bStack.push(b);var size=0,result=true;if(className=="[object Array]"){size=a.length;result=size==b.length;if(result)while(size--)if(!(result=eq(a[size],b[size],aStack,bStack)))break}else{for(var key in a)if(_.has(a,key)){size++;if(!(result=_.has(b,key)&&eq(a[key],b[key],aStack,bStack)))break}if(result){for(key in b)if(_.has(b,key)&&!size--)break;result=!size}}aStack.pop();bStack.pop();
return result};_.isEqual=function(a,b){return eq(a,b,[],[])};_.isEmpty=function(obj){if(obj==null)return true;if(_.isArray(obj)||_.isString(obj))return obj.length===0;for(var key in obj)if(_.has(obj,key))return false;return true};_.isElement=function(obj){return!!(obj&&obj.nodeType===1)};_.isArray=nativeIsArray||function(obj){return toString.call(obj)=="[object Array]"};_.isObject=function(obj){return obj===Object(obj)};each(["Arguments","Function","String","Number","Date","RegExp"],function(name){_["is"+
name]=function(obj){return toString.call(obj)=="[object "+name+"]"}});if(!_.isArguments(arguments))_.isArguments=function(obj){return!!(obj&&_.has(obj,"callee"))};if(typeof/./!=="function")_.isFunction=function(obj){return typeof obj==="function"};_.isFinite=function(obj){return isFinite(obj)&&!isNaN(parseFloat(obj))};_.isNaN=function(obj){return _.isNumber(obj)&&obj!=+obj};_.isBoolean=function(obj){return obj===true||obj===false||toString.call(obj)=="[object Boolean]"};_.isNull=function(obj){return obj===
null};_.isUndefined=function(obj){return obj===void 0};_.has=function(obj,key){return hasOwnProperty.call(obj,key)};_.noConflict=function(){root._=previousUnderscore;return this};_.identity=function(value){return value};_.times=function(n,iterator,context){var accum=Array(Math.max(0,n));for(var i=0;i<n;i++)accum[i]=iterator.call(context,i);return accum};_.random=function(min,max){if(max==null){max=min;min=0}return min+Math.floor(Math.random()*(max-min+1))};var entityMap={escape:{"&":"&amp;","<":"&lt;",
">":"&gt;",'"':"&quot;","'":"&#x27;"}};entityMap.unescape=_.invert(entityMap.escape);var entityRegexes={escape:new RegExp("["+_.keys(entityMap.escape).join("")+"]","g"),unescape:new RegExp("("+_.keys(entityMap.unescape).join("|")+")","g")};_.each(["escape","unescape"],function(method){_[method]=function(string){if(string==null)return"";return(""+string).replace(entityRegexes[method],function(match){return entityMap[method][match]})}});_.result=function(object,property){if(object==null)return void 0;
var value=object[property];return _.isFunction(value)?value.call(object):value};_.mixin=function(obj){each(_.functions(obj),function(name){var func=_[name]=obj[name];_.prototype[name]=function(){var args=[this._wrapped];push.apply(args,arguments);return result.call(this,func.apply(_,args))}})};var idCounter=0;_.uniqueId=function(prefix){var id=++idCounter+"";return prefix?prefix+id:id};_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var noMatch=
/(.)^/;var escapes={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};var escaper=/\\|'|\r|\n|\t|\u2028|\u2029/g;_.template=function(text,data,settings){var render;settings=_.defaults({},settings,_.templateSettings);var matcher=new RegExp([(settings.escape||noMatch).source,(settings.interpolate||noMatch).source,(settings.evaluate||noMatch).source].join("|")+"|$","g");var index=0;var source="__p+='";text.replace(matcher,function(match,escape,interpolate,evaluate,offset){source+=
text.slice(index,offset).replace(escaper,function(match){return"\\"+escapes[match]});if(escape)source+="'+\n((__t=("+escape+"))==null?'':_.escape(__t))+\n'";if(interpolate)source+="'+\n((__t=("+interpolate+"))==null?'':__t)+\n'";if(evaluate)source+="';\n"+evaluate+"\n__p+='";index=offset+match.length;return match});source+="';\n";if(!settings.variable)source="with(obj||{}){\n"+source+"}\n";source="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+source+
"return __p;\n";try{render=new Function(settings.variable||"obj","_",source)}catch(e$34){e$34.source=source;throw e$34;}if(data)return render(data,_);var template=function(data){return render.call(this,data,_)};template.source="function("+(settings.variable||"obj")+"){\n"+source+"}";return template};_.chain=function(obj){return _(obj).chain()};var result=function(obj){return this._chain?_(obj).chain():obj};_.mixin(_);each(["pop","push","reverse","shift","sort","splice","unshift"],function(name){var method=
ArrayProto[name];_.prototype[name]=function(){var obj=this._wrapped;method.apply(obj,arguments);if((name=="shift"||name=="splice")&&obj.length===0)delete obj[0];return result.call(this,obj)}});each(["concat","join","slice"],function(name){var method=ArrayProto[name];_.prototype[name]=function(){return result.call(this,method.apply(this._wrapped,arguments))}});_.extend(_.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);
(function(){var root=this;var previousBackbone=root.Backbone;var array=[];var push=array.push;var slice=array.slice;var splice=array.splice;var Backbone;if(typeof exports!=="undefined")Backbone=exports;else Backbone=root.Backbone={};Backbone.VERSION="0.9.10";var _=root._;if(!_&&typeof require!=="undefined")_=require("underscore");Backbone.$=root.jQuery||root.Zepto||root.ender;Backbone.noConflict=function(){root.Backbone=previousBackbone;return this};Backbone.emulateHTTP=false;Backbone.emulateJSON=
false;var eventSplitter=/\s+/;var eventsApi=function(obj,action,name,rest){if(!name)return true;if(typeof name==="object")for(var key in name)obj[action].apply(obj,[key,name[key]].concat(rest));else if(eventSplitter.test(name)){var names=name.split(eventSplitter);for(var i=0,l=names.length;i<l;i++)obj[action].apply(obj,[names[i]].concat(rest))}else return true};var triggerEvents=function(events,args){var ev,i=-1,l=events.length;switch(args.length){case 0:while(++i<l)(ev=events[i]).callback.call(ev.ctx);
return;case 1:while(++i<l)(ev=events[i]).callback.call(ev.ctx,args[0]);return;case 2:while(++i<l)(ev=events[i]).callback.call(ev.ctx,args[0],args[1]);return;case 3:while(++i<l)(ev=events[i]).callback.call(ev.ctx,args[0],args[1],args[2]);return;default:while(++i<l)(ev=events[i]).callback.apply(ev.ctx,args)}};var Events=Backbone.Events={on:function(name,callback,context){if(!(eventsApi(this,"on",name,[callback,context])&&callback))return this;this._events||(this._events={});var list=this._events[name]||
(this._events[name]=[]);list.push({callback:callback,context:context,ctx:context||this});return this},once:function(name,callback,context){if(!(eventsApi(this,"once",name,[callback,context])&&callback))return this;var self=this;var once=_.once(function(){self.off(name,once);callback.apply(this,arguments)});once._callback=callback;this.on(name,once,context);return this},off:function(name,callback,context){var list,ev,events,names,i,l,j,k;if(!this._events||!eventsApi(this,"off",name,[callback,context]))return this;
if(!name&&!callback&&!context){this._events={};return this}names=name?[name]:_.keys(this._events);for(i=0,l=names.length;i<l;i++){name=names[i];if(list=this._events[name]){events=[];if(callback||context)for(j=0,k=list.length;j<k;j++){ev=list[j];if(callback&&callback!==ev.callback&&callback!==ev.callback._callback||context&&context!==ev.context)events.push(ev)}this._events[name]=events}}return this},trigger:function(name){if(!this._events)return this;var args=slice.call(arguments,1);if(!eventsApi(this,
"trigger",name,args))return this;var events=this._events[name];var allEvents=this._events.all;if(events)triggerEvents(events,args);if(allEvents)triggerEvents(allEvents,arguments);return this},listenTo:function(obj,name,callback){var listeners=this._listeners||(this._listeners={});var id=obj._listenerId||(obj._listenerId=_.uniqueId("l"));listeners[id]=obj;obj.on(name,typeof name==="object"?this:callback,this);return this},stopListening:function(obj,name,callback){var listeners=this._listeners;if(!listeners)return;
if(obj){obj.off(name,typeof name==="object"?this:callback,this);if(!name&&!callback)delete listeners[obj._listenerId]}else{if(typeof name==="object")callback=this;for(var id in listeners)listeners[id].off(name,callback,this);this._listeners={}}return this}};Events.bind=Events.on;Events.unbind=Events.off;_.extend(Backbone,Events);var Model=Backbone.Model=function(attributes,options){var defaults;var attrs=attributes||{};this.cid=_.uniqueId("c");this.attributes={};if(options&&options.collection)this.collection=
options.collection;if(options&&options.parse)attrs=this.parse(attrs,options)||{};if(defaults=_.result(this,"defaults"))attrs=_.defaults({},attrs,defaults);this.set(attrs,options);this.changed={};this.initialize.apply(this,arguments)};_.extend(Model.prototype,Events,{changed:null,idAttribute:"id",initialize:function(){},toJSON:function(options){return _.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(attr){return this.attributes[attr]},escape:function(attr){return _.escape(this.get(attr))},
has:function(attr){return this.get(attr)!=null},set:function(key,val,options){var attr,attrs,unset,changes,silent,changing,prev,current;if(key==null)return this;if(typeof key==="object"){attrs=key;options=val}else(attrs={})[key]=val;options||(options={});if(!this._validate(attrs,options))return false;unset=options.unset;silent=options.silent;changes=[];changing=this._changing;this._changing=true;if(!changing){this._previousAttributes=_.clone(this.attributes);this.changed={}}current=this.attributes,
prev=this._previousAttributes;if(this.idAttribute in attrs)this.id=attrs[this.idAttribute];for(attr in attrs){val=attrs[attr];if(!_.isEqual(current[attr],val))changes.push(attr);if(!_.isEqual(prev[attr],val))this.changed[attr]=val;else delete this.changed[attr];unset?delete current[attr]:current[attr]=val}if(!silent){if(changes.length)this._pending=true;for(var i=0,l=changes.length;i<l;i++)this.trigger("change:"+changes[i],this,current[changes[i]],options)}if(changing)return this;if(!silent)while(this._pending){this._pending=
false;this.trigger("change",this,options)}this._pending=false;this._changing=false;return this},unset:function(attr,options){return this.set(attr,void 0,_.extend({},options,{unset:true}))},clear:function(options){var attrs={};for(var key in this.attributes)attrs[key]=void 0;return this.set(attrs,_.extend({},options,{unset:true}))},hasChanged:function(attr){if(attr==null)return!_.isEmpty(this.changed);return _.has(this.changed,attr)},changedAttributes:function(diff){if(!diff)return this.hasChanged()?
_.clone(this.changed):false;var val,changed=false;var old=this._changing?this._previousAttributes:this.attributes;for(var attr in diff){if(_.isEqual(old[attr],val=diff[attr]))continue;(changed||(changed={}))[attr]=val}return changed},previous:function(attr){if(attr==null||!this._previousAttributes)return null;return this._previousAttributes[attr]},previousAttributes:function(){return _.clone(this._previousAttributes)},fetch:function(options){options=options?_.clone(options):{};if(options.parse===
void 0)options.parse=true;var success=options.success;options.success=function(model,resp,options){if(!model.set(model.parse(resp,options),options))return false;if(success)success(model,resp,options)};return this.sync("read",this,options)},save:function(key,val,options){var attrs,success,method,xhr,attributes=this.attributes;if(key==null||typeof key==="object"){attrs=key;options=val}else(attrs={})[key]=val;if(attrs&&(!options||!options.wait)&&!this.set(attrs,options))return false;options=_.extend({validate:true},
options);if(!this._validate(attrs,options))return false;if(attrs&&options.wait)this.attributes=_.extend({},attributes,attrs);if(options.parse===void 0)options.parse=true;success=options.success;options.success=function(model,resp,options){model.attributes=attributes;var serverAttrs=model.parse(resp,options);if(options.wait)serverAttrs=_.extend(attrs||{},serverAttrs);if(_.isObject(serverAttrs)&&!model.set(serverAttrs,options))return false;if(success)success(model,resp,options)};method=this.isNew()?
"create":options.patch?"patch":"update";if(method==="patch")options.attrs=attrs;xhr=this.sync(method,this,options);if(attrs&&options.wait)this.attributes=attributes;return xhr},destroy:function(options){options=options?_.clone(options):{};var model=this;var success=options.success;var destroy=function(){model.trigger("destroy",model,model.collection,options)};options.success=function(model,resp,options){if(options.wait||model.isNew())destroy();if(success)success(model,resp,options)};if(this.isNew()){options.success(this,
null,options);return false}var xhr=this.sync("delete",this,options);if(!options.wait)destroy();return xhr},url:function(){var base=_.result(this,"urlRoot")||_.result(this.collection,"url")||urlError();if(this.isNew())return base;return base+(base.charAt(base.length-1)==="/"?"":"/")+encodeURIComponent(this.id)},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return this.id==null},isValid:function(options){return!this.validate||
!this.validate(this.attributes,options)},_validate:function(attrs,options){if(!options.validate||!this.validate)return true;attrs=_.extend({},this.attributes,attrs);var error=this.validationError=this.validate(attrs,options)||null;if(!error)return true;this.trigger("invalid",this,error,options||{});return false}});var Collection=Backbone.Collection=function(models,options){options||(options={});if(options.model)this.model=options.model;if(options.comparator!==void 0)this.comparator=options.comparator;
this.models=[];this._reset();this.initialize.apply(this,arguments);if(models)this.reset(models,_.extend({silent:true},options))};_.extend(Collection.prototype,Events,{model:Model,initialize:function(){},toJSON:function(options){return this.map(function(model){return model.toJSON(options)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(models,options){models=_.isArray(models)?models.slice():[models];options||(options={});var i,l,model,attrs,existing,doSort,add,at,sort,sortAttr;
add=[];at=options.at;sort=this.comparator&&at==null&&options.sort!=false;sortAttr=_.isString(this.comparator)?this.comparator:null;for(i=0,l=models.length;i<l;i++){if(!(model=this._prepareModel(attrs=models[i],options))){this.trigger("invalid",this,attrs,options);continue}if(existing=this.get(model)){if(options.merge){existing.set(attrs===model?model.attributes:attrs,options);if(sort&&!doSort&&existing.hasChanged(sortAttr))doSort=true}continue}add.push(model);model.on("all",this._onModelEvent,this);
this._byId[model.cid]=model;if(model.id!=null)this._byId[model.id]=model}if(add.length){if(sort)doSort=true;this.length+=add.length;if(at!=null)splice.apply(this.models,[at,0].concat(add));else push.apply(this.models,add)}if(doSort)this.sort({silent:true});if(options.silent)return this;for(i=0,l=add.length;i<l;i++)(model=add[i]).trigger("add",model,this,options);if(doSort)this.trigger("sort",this,options);return this},remove:function(models,options){models=_.isArray(models)?models.slice():[models];
options||(options={});var i,l,index,model;for(i=0,l=models.length;i<l;i++){model=this.get(models[i]);if(!model)continue;delete this._byId[model.id];delete this._byId[model.cid];index=this.indexOf(model);this.models.splice(index,1);this.length--;if(!options.silent){options.index=index;model.trigger("remove",model,this,options)}this._removeReference(model)}return this},push:function(model,options){model=this._prepareModel(model,options);this.add(model,_.extend({at:this.length},options));return model},
pop:function(options){var model=this.at(this.length-1);this.remove(model,options);return model},unshift:function(model,options){model=this._prepareModel(model,options);this.add(model,_.extend({at:0},options));return model},shift:function(options){var model=this.at(0);this.remove(model,options);return model},slice:function(begin,end){return this.models.slice(begin,end)},get:function(obj){if(obj==null)return void 0;this._idAttr||(this._idAttr=this.model.prototype.idAttribute);return this._byId[obj.id||
obj.cid||obj[this._idAttr]||obj]},at:function(index){return this.models[index]},where:function(attrs){if(_.isEmpty(attrs))return[];return this.filter(function(model){for(var key in attrs)if(attrs[key]!==model.get(key))return false;return true})},sort:function(options){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");options||(options={});if(_.isString(this.comparator)||this.comparator.length===1)this.models=this.sortBy(this.comparator,this);else this.models.sort(_.bind(this.comparator,
this));if(!options.silent)this.trigger("sort",this,options);return this},pluck:function(attr){return _.invoke(this.models,"get",attr)},update:function(models,options){options=_.extend({add:true,merge:true,remove:true},options);if(options.parse)models=this.parse(models,options);var model,i,l,existing;var add=[],remove=[],modelMap={};if(!_.isArray(models))models=models?[models]:[];if(options.add&&!options.remove)return this.add(models,options);for(i=0,l=models.length;i<l;i++){model=models[i];existing=
this.get(model);if(options.remove&&existing)modelMap[existing.cid]=true;if(options.add&&!existing||options.merge&&existing)add.push(model)}if(options.remove)for(i=0,l=this.models.length;i<l;i++){model=this.models[i];if(!modelMap[model.cid])remove.push(model)}if(remove.length)this.remove(remove,options);if(add.length)this.add(add,options);return this},reset:function(models,options){options||(options={});if(options.parse)models=this.parse(models,options);for(var i=0,l=this.models.length;i<l;i++)this._removeReference(this.models[i]);
options.previousModels=this.models.slice();this._reset();if(models)this.add(models,_.extend({silent:true},options));if(!options.silent)this.trigger("reset",this,options);return this},fetch:function(options){options=options?_.clone(options):{};if(options.parse===void 0)options.parse=true;var success=options.success;options.success=function(collection,resp,options){var method=options.update?"update":"reset";collection[method](resp,options);if(success)success(collection,resp,options)};return this.sync("read",
this,options)},create:function(model,options){options=options?_.clone(options):{};if(!(model=this._prepareModel(model,options)))return false;if(!options.wait)this.add(model,options);var collection=this;var success=options.success;options.success=function(model,resp,options){if(options.wait)collection.add(model,options);if(success)success(model,resp,options)};model.save(null,options);return model},parse:function(resp,options){return resp},clone:function(){return new this.constructor(this.models)},
_reset:function(){this.length=0;this.models.length=0;this._byId={}},_prepareModel:function(attrs,options){if(attrs instanceof Model){if(!attrs.collection)attrs.collection=this;return attrs}options||(options={});options.collection=this;var model=new this.model(attrs,options);if(!model._validate(attrs,options))return false;return model},_removeReference:function(model){if(this===model.collection)delete model.collection;model.off("all",this._onModelEvent,this)},_onModelEvent:function(event,model,collection,
options){if((event==="add"||event==="remove")&&collection!==this)return;if(event==="destroy")this.remove(model,options);if(model&&event==="change:"+model.idAttribute){delete this._byId[model.previous(model.idAttribute)];if(model.id!=null)this._byId[model.id]=model}this.trigger.apply(this,arguments)},sortedIndex:function(model,value,context){value||(value=this.comparator);var iterator=_.isFunction(value)?value:function(model){return model.get(value)};return _.sortedIndex(this.models,model,iterator,
context)}});var methods=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];_.each(methods,function(method){Collection.prototype[method]=function(){var args=slice.call(arguments);args.unshift(this.models);return _[method].apply(_,
args)}});var attributeMethods=["groupBy","countBy","sortBy"];_.each(attributeMethods,function(method){Collection.prototype[method]=function(value,context){var iterator=_.isFunction(value)?value:function(model){return model.get(value)};return _[method](this.models,iterator,context)}});var Router=Backbone.Router=function(options){options||(options={});if(options.routes)this.routes=options.routes;this._bindRoutes();this.initialize.apply(this,arguments)};var optionalParam=/\((.*?)\)/g;var namedParam=
/(\(\?)?:\w+/g;var splatParam=/\*\w+/g;var escapeRegExp=/[\-{}\[\]+?.,\\\^$|#\s]/g;_.extend(Router.prototype,Events,{initialize:function(){},route:function(route,name,callback){if(!_.isRegExp(route))route=this._routeToRegExp(route);if(!callback)callback=this[name];Backbone.history.route(route,_.bind(function(fragment){var args=this._extractParameters(route,fragment);callback&&callback.apply(this,args);this.trigger.apply(this,["route:"+name].concat(args));this.trigger("route",name,args);Backbone.history.trigger("route",
this,name,args)},this));return this},navigate:function(fragment,options){Backbone.history.navigate(fragment,options);return this},_bindRoutes:function(){if(!this.routes)return;var route,routes=_.keys(this.routes);while((route=routes.pop())!=null)this.route(route,this.routes[route])},_routeToRegExp:function(route){route=route.replace(escapeRegExp,"\\$&").replace(optionalParam,"(?:$1)?").replace(namedParam,function(match,optional){return optional?match:"([^/]+)"}).replace(splatParam,"(.*?)");return new RegExp("^"+
route+"$")},_extractParameters:function(route,fragment){return route.exec(fragment).slice(1)}});var History=Backbone.History=function(){this.handlers=[];_.bindAll(this,"checkUrl");if(typeof window!=="undefined"){this.location=window.location;this.history=window.history}};var routeStripper=/^[#\/]|\s+$/g;var rootStripper=/^\/+|\/+$/g;var isExplorer=/msie [\w.]+/;var trailingSlash=/\/$/;History.started=false;_.extend(History.prototype,Events,{interval:50,getHash:function(window){var match=(window||
this).location.href.match(/#(.*)$/);return match?match[1]:""},getFragment:function(fragment,forcePushState){if(fragment==null)if(this._hasPushState||!this._wantsHashChange||forcePushState){fragment=this.location.pathname;var root=this.root.replace(trailingSlash,"");if(!fragment.indexOf(root))fragment=fragment.substr(root.length)}else fragment=this.getHash();return fragment.replace(routeStripper,"")},start:function(options){if(History.started)throw new Error("Backbone.history has already been started");
History.started=true;this.options=_.extend({},{root:"/"},this.options,options);this.root=this.options.root;this._wantsHashChange=this.options.hashChange!==false;this._wantsPushState=!!this.options.pushState;this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var fragment=this.getFragment();var docMode=document.documentMode;var oldIE=isExplorer.exec(navigator.userAgent.toLowerCase())&&(!docMode||docMode<=7);this.root=("/"+this.root+"/").replace(rootStripper,"/");if(oldIE&&
this._wantsHashChange){this.iframe=Backbone.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow;this.navigate(fragment)}if(this._hasPushState)Backbone.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&!oldIE)Backbone.$(window).on("hashchange",this.checkUrl);else if(this._wantsHashChange)this._checkUrlInterval=setInterval(this.checkUrl,this.interval);this.fragment=fragment;var loc=this.location;var atRoot=loc.pathname.replace(/[^\/]$/,
"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!atRoot){this.fragment=this.getFragment(null,true);this.location.replace(this.root+this.location.search+"#"+this.fragment);return true}else if(this._wantsPushState&&this._hasPushState&&atRoot&&loc.hash){this.fragment=this.getHash().replace(routeStripper,"");this.history.replaceState({},document.title,this.root+this.fragment+loc.search)}if(!this.options.silent)return this.loadUrl()},stop:function(){Backbone.$(window).off("popstate",
this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);History.started=false},route:function(route,callback){this.handlers.unshift({route:route,callback:callback})},checkUrl:function(e){var current=this.getFragment();if(current===this.fragment&&this.iframe)current=this.getFragment(this.getHash(this.iframe));if(current===this.fragment)return false;if(this.iframe)this.navigate(current);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(fragmentOverride){var fragment=
this.fragment=this.getFragment(fragmentOverride);var matched=_.any(this.handlers,function(handler){if(handler.route.test(fragment)){handler.callback(fragment);return true}});return matched},navigate:function(fragment,options){if(!History.started)return false;if(!options||options===true)options={trigger:options};fragment=this.getFragment(fragment||"");if(this.fragment===fragment)return;this.fragment=fragment;var url=this.root+fragment;if(this._hasPushState)this.history[options.replace?"replaceState":
"pushState"]({},document.title,url);else if(this._wantsHashChange){this._updateHash(this.location,fragment,options.replace);if(this.iframe&&fragment!==this.getFragment(this.getHash(this.iframe))){if(!options.replace)this.iframe.document.open().close();this._updateHash(this.iframe.location,fragment,options.replace)}}else return this.location.assign(url);if(options.trigger)this.loadUrl(fragment)},_updateHash:function(location,fragment,replace){if(replace){var href=location.href.replace(/(javascript:|#).*$/,
"");location.replace(href+"#"+fragment)}else location.hash="#"+fragment}});Backbone.history=new History;var View=Backbone.View=function(options){this.cid=_.uniqueId("view");this._configure(options||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()};var delegateEventSplitter=/^(\S+)\s*(.*)$/;var viewOptions=["model","collection","el","id","attributes","className","tagName","events"];_.extend(View.prototype,Events,{tagName:"div",$:function(selector){return this.$el.find(selector)},
initialize:function(){},render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(element,delegate){if(this.$el)this.undelegateEvents();this.$el=element instanceof Backbone.$?element:Backbone.$(element);this.el=this.$el[0];if(delegate!==false)this.delegateEvents();return this},delegateEvents:function(events){if(!(events||(events=_.result(this,"events"))))return;this.undelegateEvents();for(var key in events){var method=events[key];if(!_.isFunction(method))method=
this[events[key]];if(!method)throw new Error('Method "'+events[key]+'" does not exist');var match=key.match(delegateEventSplitter);var eventName=match[1],selector=match[2];method=_.bind(method,this);eventName+=".delegateEvents"+this.cid;if(selector==="")this.$el.on(eventName,method);else this.$el.on(eventName,selector,method)}},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid)},_configure:function(options){if(this.options)options=_.extend({},_.result(this,"options"),options);_.extend(this,
_.pick(options,viewOptions));this.options=options},_ensureElement:function(){if(!this.el){var attrs=_.extend({},_.result(this,"attributes"));if(this.id)attrs.id=_.result(this,"id");if(this.className)attrs["class"]=_.result(this,"className");var $el=Backbone.$("<"+_.result(this,"tagName")+">").attr(attrs);this.setElement($el,false)}else this.setElement(_.result(this,"el"),false)}});var methodMap={"create":"POST","update":"PUT","patch":"PATCH","delete":"DELETE","read":"GET"};Backbone.sync=function(method,
model,options){var type=methodMap[method];_.defaults(options||(options={}),{emulateHTTP:Backbone.emulateHTTP,emulateJSON:Backbone.emulateJSON});var params={type:type,dataType:"json"};if(!options.url)params.url=_.result(model,"url")||urlError();if(options.data==null&&model&&(method==="create"||method==="update"||method==="patch")){params.contentType="application/json";params.data=JSON.stringify(options.attrs||model.toJSON(options))}if(options.emulateJSON){params.contentType="application/x-www-form-urlencoded";
params.data=params.data?{model:params.data}:{}}if(options.emulateHTTP&&(type==="PUT"||type==="DELETE"||type==="PATCH")){params.type="POST";if(options.emulateJSON)params.data._method=type;var beforeSend=options.beforeSend;options.beforeSend=function(xhr){xhr.setRequestHeader("X-HTTP-Method-Override",type);if(beforeSend)return beforeSend.apply(this,arguments)}}if(params.type!=="GET"&&!options.emulateJSON)params.processData=false;var success=options.success;options.success=function(resp){if(success)success(model,
resp,options);model.trigger("sync",model,resp,options)};var error=options.error;options.error=function(xhr){if(error)error(model,xhr,options);model.trigger("error",model,xhr,options)};var xhr=options.xhr=Backbone.ajax(_.extend(params,options));model.trigger("request",model,xhr,options);return xhr};Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)};var extend=function(protoProps,staticProps){var parent=this;var child;if(protoProps&&_.has(protoProps,"constructor"))child=protoProps.constructor;
else child=function(){return parent.apply(this,arguments)};_.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};Surrogate.prototype=parent.prototype;child.prototype=new Surrogate;if(protoProps)_.extend(child.prototype,protoProps);child.__super__=parent.prototype;return child};Model.extend=Collection.extend=Router.extend=View.extend=History.extend=extend;var urlError=function(){throw new Error('A "url" property or function must be specified');}}).call(this);
var HR=typeof HR==="undefined"?{}:console.log("Error: namespace HR is taken");HR.GlobalDispatcher=_.extend({},Backbone.Events);
HR.Hrbase=Backbone.Model.extend({constructor:function(attributes,options){var _hrbase=this;_hrbase._constructed=false;_hrbase._active=false;_hrbase._ready=false;_hrbase._loaderActive=false;_hrbase._useLoader=true;_hrbase._intervals=[];_hrbase._timeouts=[];var _hrbaseDefaults={requires:[],type:"hrbase",sourceEl:null,loaderEl:null,loaderDelay:250,loaderClass:"",setReady:true,setActive:true,debugMode:true,cidAttr:"data-hrbase-cid"};if(defaults=_hrbase.defaults)_hrbase.attributes=_.extend(_hrbaseDefaults,
typeof _hrbase.defaults==="function"?_hrbase.defaults():_hrbase.defaults,attributes);else _hrbase.attributes=_.extend(_hrbaseDefaults,attributes);_hrbase.onError();if(_hrbase.attributes.requires.length>0)for(var i=0;i<_hrbase.attributes.requires.length;i++){var _oObj=_hrbase.attributes.requires[i];var _obj=_oObj;if(typeof _obj!=="function"&&typeof _obj!=="object")return _hrbase.error("Required dependency not found or invalid ["+_oObj+"]")}if(_hrbase.attributes.sourceEl){_hrbase.attributes.$sourceEl=
$(_hrbase.attributes.sourceEl);if(_hrbase.attributes.$sourceEl.length!==1)return _hrbase.error("Attribute $sourceEl is invalid. Construct class aborted.")}if(_hrbase.attributes.loaderEl)_hrbase.attributes.$loaderEl=$(_hrbase.attributes.loaderEl);else if(_hrbase.attributes.sourceEl)_hrbase.attributes.$loaderEl=$(_hrbase.attributes.sourceEl);else _hrbase._useLoader=false;if(_hrbase._useLoader){if(!_hrbase.attributes.loaderClass)_hrbase.attributes.loaderClass=_hrbase.attributes.type.toLowerCase()+"_loading";
if(typeof _hrbase.attributes.loaderClass!=="string")return _hrbase.error("loaderClass type ["+typeof _hrbase.attributes.loaderClass+"]is not of type string. . Construct class aborted.")}attributes=_hrbase.attributes;Backbone.Model.prototype.constructor.apply(_hrbase,[attributes,options]);if(_hrbase.attributes.setActive)_hrbase._setActive();_hrbase.on("destroy",function(){_hrbase.deactivate()});if(_hrbase.attributes.setReady)_hrbase._setReady();else if(_hrbase._useLoader)_hrbase._addClassLoader();
_hrbase.on("readyChange",function(){if(_hrbase._useLoader)if(_hrbase._ready)_hrbase._removeClassLoader();else _hrbase._addClassLoader();_hrbase.onReadyChange(_hrbase._ready)});_hrbase._constructed=true;_hrbase.onConstructed()},defaults:function(){return{}},_unsetReady:function(){var _hrbase=this;if(!_hrbase._ready)return _hrbase.warn("Cannot set _hrbase._ready to false because it already is.");if(_hrbase._useLoader)_hrbase.clearTimeout(_hrbase._loadDelayTimer);_hrbase._ready=false;_hrbase.trigger("readyChange",
_hrbase,{ready:_hrbase._ready});return _hrbase},_setReady:function(){var _hrbase=this;if(_hrbase._ready)return _hrbase.warn("Cannot set _hrbase._ready to true because it already is.");if(_hrbase._useLoader)_hrbase.clearTimeout(_hrbase._loadDelayTimer);_hrbase._ready=true;_hrbase.trigger("readyChange",_hrbase,{ready:_hrbase._ready});return _hrbase},_setActive:function(){var _hrbase=this;_hrbase._active=true;return _hrbase},_addClassLoader:function(){var _hrbase=this;if(!_hrbase._useLoader)return _hrbase.error("Cannot add class loader because useLoader is set to false.");
if(_hrbase.attributes.$loaderEl.length!==1)return _hrbase.error("Cannot add class loader because $classLoader length does not equal 1.");if(_hrbase.isReady())return _hrbase.error("Cannot add class loader because the class is ready.");_hrbase._loadDelayTimer=_hrbase.setTimeout(function(){_hrbase.attributes.$loaderEl.addClass(_hrbase.attributes.loaderClass).addClass("class_loading");_hrbase._loaderActive=true},_hrbase.attributes.loaderDelay);return _hrbase},_removeClassLoader:function(){var _hrbase=
this;if(!_hrbase._useLoader)return _hrbase.error("Cannot remove class loader because useLoader is set to false.");if(_hrbase.attributes.$loaderEl.length!==1)return _hrbase.error("Cannot remove class loader because $classLoader length does not equal 1.");if(!_hrbase.isReady)return _hrbase.error("Cannot remove class loader because the class is not ready yet.");_hrbase.attributes.$loaderEl.removeClass(_hrbase.attributes.loaderClass).removeClass("class_loading");_hrbase._loaderActive=false;return _hrbase},
_msgPrefix:function(){var _hrbase=this;return typeof _hrbase.cid==="undefined"?_hrbase.attributes.type+": ":_hrbase.attributes.type+"_"+_hrbase.cid+": "},doValidate:function(attr){var _hrbase=this;var error=_hrbase.validate(_hrbase.attributes);if(error)_hrbase.trigger("error",_hrbase,error);return _hrbase},onError:function(){var _hrbase=this;_hrbase.on("error",function(model,error){model.logError(error)});return _hrbase},onConstructed:function(){},onReadyChange:function(ready){},activate:function(options){var _hrbase=
this;if(!_hrbase._constructed)return _hrbase.error("Cannot activate class because it has not been constructed.");_hrbase.trigger("activate",_hrbase,options);_hrbase._setActive();_hrbase.trigger("activateComplete",_hrbase,options);return _hrbase},reactivate:function(){var _hrbase=this;if(!_hrbase._constructed)return _hrbase.error("Cannot reactivate class because it has not been constructed.");if(!_hrbase._active)_hrbase.activate();_hrbase.deactivate();_hrbase.activate();return _hrbase},deactivate:function(options){var _hrbase=
this;if(!_hrbase._constructed)return _hrbase.error("Cannot deactivate class because it has not been constructed.");_hrbase.trigger("deactivate",_hrbase);if(_hrbase._intervals.length>0)_hrbase.clearAllIntervals();if(_hrbase._timeouts.length>0)_hrbase.clearAllTimeouts();_hrbase._active=false;_hrbase.trigger("deactivateComplete",_hrbase);return _hrbase},isReady:function(){return this._ready},isActive:function(){return this._active},isLoaderActive:function(){return this._loaderActive},isConstructed:function(obj){return obj instanceof
HR.Hrbase},getType:function(){return this.attributes.type},alert:function(msg){var _hrbase=this;if(!_hrbase.attributes.debugMode)return false;alert(_hrbase._msgPrefix()+msg)},log:function(msg,obj,type){var _hrbase=this;if(!_hrbase.attributes.debugMode)return false;if(typeof msg==="object"){obj=msg;msg=""}if(typeof obj!=="object")obj="";if(typeof console==="object")if(type==="error"&&typeof console.error==="function")console.error(_hrbase._msgPrefix()+msg,obj);else if(type==="warn"&&typeof console.warn===
"function")console.warn(_hrbase._msgPrefix()+msg,obj);else if(typeof console.log==="function")console.log(_hrbase._msgPrefix()+msg,obj)},error:function(msg,obj){var _hrbase=this;if(!_hrbase.attributes.debugMode)return false;_hrbase.log("Error - "+msg,obj,"error")},warn:function(msg,obj){var _hrbase=this;if(!_hrbase.attributes.debugMode)return false;_hrbase.log("Warning - "+msg,obj,"warn")},logError:function(msg,obj){var _hrbase=this;_hrbase.error(msg,obj)},logWarning:function(msg,obj){var _hrbase=
this;_hrbase.warn(msg,obj)},setInterval:function(fn,duration){var _hrbase=this;if(typeof fn!=="function")return _hrbase.error("setInterval() fn provided is not a function");var _duration=duration||1;var interval=setInterval(fn,duration);_hrbase._intervals.push(interval);return interval},clearInterval:function(id){var _hrbase=this;window.clearInterval(id)},clearAllIntervals:function(){var _hrbase=this;if(_hrbase._intervals.length===0)return false;$.each(_hrbase._intervals,function(){_hrbase.clearInterval(this)});
_hrbase._intervals=[];return true},setTimeout:function(fn,duration){var _hrbase=this;if(typeof fn!=="function")return _hrbase.error("setTimeout() fn provided is not a function");var _duration=duration||1;var timeout=setTimeout(fn,duration);_hrbase._timeouts.push(timeout);return timeout},clearTimeout:function(id){var _hrbase=this;clearTimeout(id)},clearAllTimeouts:function(){var _hrbase=this;if(_hrbase._timeouts.length===0)return false;$.each(_hrbase._timeouts,function(){_hrbase.clearTimeout(this)});
_hrbase._timeouts=[];return true}});
(function(name,context,definition){typeof module!="undefined"?module.exports=definition(name,context):typeof define=="function"&&typeof define.amd=="object"?define(definition):context[name]=definition(name,context)})("categorizr",this,function(name,context){function _setDeviceBooleans(){var i=deviceTypes.length;while(i--)categorizr["is"+deviceTypes[i]]=is(deviceTypes[i].toLowerCase()),is$&&(context.$["is"+deviceTypes[i]]=is(deviceTypes[i].toLowerCase()))}function _setClassName(){isBrowser&&(docElement.className=
docElement.className.replace(/(^|\s)desktop|tablet|tv|mobile(\s|$)/,"$1$2")+(" "+device))}function _update(){_setDeviceBooleans(),_setClassName(),eventEmitter&&context.$(context).trigger("deviceChange",[{type:device}])}var key,isBrowser=context!=null&&context==context.window,isNode=!isBrowser,is$=isBrowser&&context.$,eventEmitter=function(){var e;return is$&&(e=context.$("").trigger),e}(),docElement=isNode?null:document.documentElement,deviceTypes="Tv Desktop Tablet Mobile".split(" "),test=function(ua){return ua.match(/GoogleTV|SmartTV|Internet.TV|NetCast|NETTV|AppleTV|boxee|Kylo|Roku|DLNADOC|CE\-HTML/i)?
"tv":ua.match(/Xbox|PLAYSTATION.3|Wii/i)?"tv":ua.match(/iPad/i)||ua.match(/tablet/i)&&!ua.match(/RX-34/i)||ua.match(/FOLIO/i)?"tablet":ua.match(/Linux/i)&&ua.match(/Android/i)&&!ua.match(/Fennec|mobi|HTC.Magic|HTCX06HT|Nexus.One|SC-02B|fone.945/i)?"tablet":ua.match(/Kindle/i)||ua.match(/Mac.OS/i)&&ua.match(/Silk/i)?"tablet":ua.match(/GT-P10|SC-01C|SHW-M180S|SGH-T849|SCH-I800|SHW-M180L|SPH-P100|SGH-I987|zt180|HTC(.Flyer|_Flyer)|Sprint.ATP51|ViewPad7|pandigital(sprnova|nova)|Ideos.S7|Dell.Streak.7|Advent.Vega|A101IT|A70BHT|MID7015|Next2|nook/i)||
ua.match(/MB511/i)&&ua.match(/RUTEM/i)?"tablet":ua.match(/BOLT|Fennec|Iris|Maemo|Minimo|Mobi|mowser|NetFront|Novarra|Prism|RX-34|Skyfire|Tear|XV6875|XV6975|Google.Wireless.Transcoder/i)?"mobile":ua.match(/Opera/i)&&ua.match(/Windows.NT.5/i)&&ua.match(/HTC|Xda|Mini|Vario|SAMSUNG\-GT\-i8000|SAMSUNG\-SGH\-i9/i)?"mobile":ua.match(/Windows.(NT|XP|ME|9)/)&&!ua.match(/Phone/i)||ua.match(/Win(9|.9|NT)/i)?"desktop":ua.match(/Macintosh|PowerPC/i)&&!ua.match(/Silk/i)?"desktop":ua.match(/Linux/i)&&ua.match(/X11/i)?
"desktop":ua.match(/Solaris|SunOS|BSD/i)?"desktop":ua.match(/Bot|Crawler|Spider|Yahoo|ia_archiver|Covario-IDS|findlinks|DataparkSearch|larbin|Mediapartners-Google|NG-Search|Snappy|Teoma|Jeeves|TinEye/i)&&!ua.match(/Mobile/i)?"desktop":"mobile"},device=test(context.navigator?context.navigator.userAgent:context.request?context.request.headers["user-agent"]:"No User-Agent Provided"),is=function(type){return device===type},categorizr=function(){var args=[].slice.call(arguments,0);return args.length===
2&&device===args[0]?(device=args[1],_update()):args.length===1&&typeof args[0]=="string"&&(device=args[0],_update()),device};categorizr.is=is,categorizr.test=test,_update();if(is$){for(key in categorizr)Object.hasOwnProperty.call(categorizr,key)&&(context.$[key=="test"?"testUserAgent":key=="is"?"isDeviceType":key]=categorizr[key]);context.$.categorizr=categorizr}return categorizr});
(function(window,document,$){var isInputSupported="placeholder"in document.createElement("input");var isTextareaSupported="placeholder"in document.createElement("textarea");var prototype=$.fn;var valHooks=$.valHooks;var propHooks=$.propHooks;var hooks;var placeholder;if(isInputSupported&&isTextareaSupported){placeholder=prototype.placeholder=function(){return this};placeholder.input=placeholder.textarea=true}else{placeholder=prototype.placeholder=function(){var $this=this;$this.filter((isInputSupported?
"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":clearPlaceholder,"blur.placeholder":setPlaceholder}).data("placeholder-enabled",true).trigger("blur.placeholder");return $this};placeholder.input=isInputSupported;placeholder.textarea=isTextareaSupported;hooks={"get":function(element){var $element=$(element);var $passwordInput=$element.data("placeholder-password");if($passwordInput)return $passwordInput[0].value;return $element.data("placeholder-enabled")&&$element.hasClass("placeholder")?
"":element.value},"set":function(element,value){var $element=$(element);var $passwordInput=$element.data("placeholder-password");if($passwordInput)return $passwordInput[0].value=value;if(!$element.data("placeholder-enabled"))return element.value=value;if(value==""){element.value=value;if(element!=safeActiveElement())setPlaceholder.call(element)}else if($element.hasClass("placeholder"))clearPlaceholder.call(element,true,value)||(element.value=value);else element.value=value;return $element}};if(!isInputSupported){valHooks.input=
hooks;propHooks.value=hooks}if(!isTextareaSupported){valHooks.textarea=hooks;propHooks.value=hooks}$(function(){$(document).delegate("form","submit.placeholder",function(){var $inputs=$(".placeholder",this).each(clearPlaceholder);setTimeout(function(){$inputs.each(setPlaceholder)},10)})});$(window).bind("beforeunload.placeholder",function(){$(".placeholder").each(function(){this.value=""})})}function args(elem){var newAttrs={};var rinlinejQuery=/^jQuery\d+$/;$.each(elem.attributes,function(i,attr){if(attr.specified&&
!rinlinejQuery.test(attr.name))newAttrs[attr.name]=attr.value});return newAttrs}function clearPlaceholder(event,value){var input=this;var $input=$(input);if(input.value==$input.attr("placeholder")&&$input.hasClass("placeholder"))if($input.data("placeholder-password")){$input=$input.hide().next().show().attr("id",$input.removeAttr("id").data("placeholder-id"));if(event===true)return $input[0].value=value;$input.focus()}else{input.value="";$input.removeClass("placeholder");input==safeActiveElement()&&
input.select()}}function setPlaceholder(){var $replacement;var input=this;var $input=$(input);var id=this.id;if(input.value==""){if(input.type=="password"){if(!$input.data("placeholder-textinput")){try{$replacement=$input.clone().attr({"type":"text"})}catch(e$35){$replacement=$("<input>").attr($.extend(args(this),{"type":"text"}))}$replacement.removeAttr("name").data({"placeholder-password":$input,"placeholder-id":id}).bind("focus.placeholder",clearPlaceholder);$input.data({"placeholder-textinput":$replacement,
"placeholder-id":id}).before($replacement)}$input=$input.removeAttr("id").hide().prev().attr("id",id).show()}$input.addClass("placeholder");$input[0].value=$input.attr("placeholder")}else $input.removeClass("placeholder")}function safeActiveElement(){try{return document.activeElement}catch(err){}}})(this,document,jQuery);
if("undefined"!=typeof jQuery)(function($){$.imgpreload=function(imgs,settings){settings=$.extend({},$.fn.imgpreload.defaults,settings instanceof Function?{all:settings}:settings);if("string"==typeof imgs)imgs=new Array(imgs);var loaded=new Array;$.each(imgs,function(i,elem){var img=new Image;var url=elem;var img_obj=img;if("string"!=typeof elem){url=$(elem).attr("src");img_obj=elem}$(img).bind("load error",function(e){loaded.push(img_obj);$.data(img_obj,"loaded","error"==e.type?false:true);if(settings.each instanceof
Function)settings.each.call(img_obj);if(loaded.length>=imgs.length&&settings.all instanceof Function)settings.all.call(loaded);$(this).unbind("load error")});img.src=url})};$.fn.imgpreload=function(settings){$.imgpreload(this,settings);return this};$.fn.imgpreload.defaults={each:null,all:null}})(jQuery);
HR.ImgSwapper=HR.Hrbase.extend({defaults:function(){return _.extend(_.result(HR.ImgSwapper.__super__,"defaults"),{type:"ImgSwapper",imgDataAttr:"hrb-imgdata",defaultToDesktop:true,noLoadClass:"desktop-only",imageCount:$("img").length,isTablet:HR.Utils.isTablet.any(),isMobile:HR.Utils.isMobile.any(),isDesktop:HR.Utils.isDesktop(),mobileSuffix:"m",tabletSuffix:"t",desktopSuffix:"d",retinaSuffix:"@2x",imagePath:"img/",isRetina:window.devicePixelRatio>1.75,debugDesktopOnly:false,_imgElAttr:"",_images:null,
_imageCount:0})},validate:function(attrs,options){},initialize:function(){var _hrbase=this;_hrbase._config();_hrbase.doValidate();_hrbase._setup();_hrbase.loadImages()},_config:function(){var _hrbase=this;_hrbase.attributes._imgElAttr="data-"+_hrbase.attributes.imgDataAttr;_hrbase.attributes._images=$("["+_hrbase.attributes._imgElAttr+"]");_hrbase.attributes._imageCount=_hrbase.attributes._images.length},_setup:function(){var _hrbase=this},_addSuffix:function(suffix,src,dash){var _hrbase=this;var _src=
src;var _splitSrc=_src.split(".");if(_splitSrc.length!==2)return _hrbase.warn("Unexpected result in _addSuffix()");if(suffix!==_hrbase.get("retinaSuffix"))_splitSrc[0]+="-"+suffix;else _splitSrc[0]+="-"+suffix;return _splitSrc[0]+"."+_splitSrc[1]},_swapImage:function(suffix,$img){var _hrbase=this;if($img.length!==1)return _hrbase.error("$img provided to swapImage is invalid");var imageData=$img.data(_hrbase.get("imgDataAttr"));var src=_hrbase._addSuffix(_hrbase.get("desktopSuffix"),imageData.src);
if(!_hrbase.get("debugDesktopOnly")){if(suffix===_hrbase.get("mobileSuffix")){if(imageData.devices.m===1)src=_hrbase._addSuffix(suffix,imageData.src)}else if(suffix===_hrbase.get("tabletSuffix"))if(imageData.devices.t===1)src=_hrbase._addSuffix(suffix,imageData.src);if(imageData.devices.r===1&&_hrbase.get("isRetina"))src=_hrbase._addSuffix(_hrbase.get("retinaSuffix"),src)}$img.attr("src",src).attr("src")},_removeImg:function($img){var _hrbase=this;if($img.length!==1)return _hrbase.error("$img in _removeImage does not have a length of 1.");
$img.remove()},_loadReplacement:function($img){var _hrbase=this;if($img.length!==1)return _hrbase.error("$img provided to swapImage is invalid");var suffix=_hrbase.get("desktopSuffix");if(_hrbase.get("isTablet"))suffix=_hrbase.get("tabletSuffix");else if(_hrbase.get("isMobile"))suffix=_hrbase.get("mobileSuffix");_hrbase._swapImage(suffix,$img)},loadImages:function(){var _hrbase=this;var imgs=_hrbase.get("_images");$.each(imgs,function(key,img){var $img=$(img);var imageData=$img.data(_hrbase.get("imgDataAttr"));
var desktopOnly=$img.hasClass(_hrbase.get("noLoadClass"));if(typeof imageData!=="undefined")if(_hrbase.get("isDesktop")&&imageData.hideImage.d)return _hrbase._removeImg($img);else if(_hrbase.get("isTablet")&&imageData.hideImage.t)return _hrbase._removeImg($img);else if(_hrbase.get("isMobile")&&imageData.hideImage.m)return _hrbase._removeImg($img);else _hrbase._loadReplacement($img);else return _hrbase.error("Unexpected result in loadImages. imageData is undefined.")})}});
HR.Device=HR.Hrbase.extend({defaults:function(){return _.extend(_.result(HR.Device.__super__,"defaults"),{type:"Device",child:null,childReady:false,childDevice:null,childReadyInterval:false})},onConstructed:function(){var _hrbase=this;_hrbase.attributes.childReadyInterval=_hrbase.setInterval(function(){if(_hrbase.checkChildReady()){_hrbase.clearInterval(_hrbase.get("childReadyInterval"));_hrbase.set("childReady",true)}},60)},getLastChild:function(){if(_hrbase.get("child"))return _hrbase.get("child").getLastChild();
else return _hrbase.get("child")},childReady:function(){var _hrbase=this;return _hrbase.get("childReady")},getChildDeviceObj:function(){return null},checkChildReady:function(){var _hrbase=this;if(_hrbase.get("child")===null){if(_hrbase.isReady())return true}else if(_hrbase.get("child").childReady()&&_hrbase.get("child").isReady())return true;else return false}});
HR.Global=HR.Hrbase.extend({defaults:function(){return _.extend(_.result(HR.Global.__super__,"defaults"),{type:"Global",requires:[jQuery],setReady:false,sourceEl:"body",invokeAttr:"data-hrbase-invoke",mInvokeAttr:"data-hrbase-minvoke",dInvokeAttr:"data-hrbase-dinvoke",readReviewsLink:"#BVRRRatingSummaryLinkReadID a",readReviewsTab:"#reviews-anchor",navHoverDelay:400,_childDeviceObj:null,_readyInterval:null,_assetsLoaded:false,_mobile:false})},validate:function(attrs,options){},initialize:function(){var _hrbase=
this;_hrbase._config();_hrbase.doValidate();_hrbase._setup();_hrbase._setBinds();_hrbase._invokeClasses();_hrbase._readyChecker();$(window).load(function(){_hrbase._assetsLoaded=true});_hrbase.codeDump()},_config:function(){var _hrbase=this;_hrbase.attributes._mobile=categorizr.isMobile},_setup:function(){var _hrbase=this;_hrbase._replaceInvokeAttr();var $navTabsContainer=$(".nav-tabs-container .nav-tabs");if($navTabsContainer.length>0){var $navTabs=$navTabsContainer.find(".max-space-tab");$.each($navTabs,
function(index){var _href=$(this).find("a").attr("href");if(_href!=null&&_href.length>1){var _id=_href.substr(1);$(this).find("a").attr("id",_id+"-anchor")}});$(".nav-tabs-container").each(function(t){var tabsDiv=$(this).parent().find(".tab-content");$(tabsDiv).find(">div").attr({"class":"tab-pane tabPanel","role":"tabpanel","aria-hidden":"true"}).hide();var tabsList=$(this).find("ul:first").attr({"class":"nav nav-tabs tabsList","role":"tablist"});$(tabsList).find("li>a").each(function(a){var tabId=
$(this).attr("href").slice(1)+"-anchor";$(".tab-content").find("#"+$(this).attr("href").slice(1)).find("h3:first").attr("id",tabId);$(this).attr({"id":tabId,"role":"tab","aria-selected":"false"}).parent().attr("role","presentation");$(tabsDiv).find(".tabPanel").eq(a).attr("aria-labelledby",tabId);$(this).click(function(e,callback){e.preventDefault();$(tabsList).find(">li.active").removeClass("active").find(">a").attr({"aria-selected":"false"});$(".tab-content").find(">div.active").removeClass("active");
$(tabsDiv).find(".tabPanel:visible").attr("aria-hidden","true").hide();$(tabsDiv).find(".tabPanel").eq($(this).parent().index()).attr("aria-hidden","false").show();$(this).attr({"aria-selected":"true"}).parent().addClass("active");$(".tab-content").find("#"+$(this).attr("href").slice(1)).addClass("active");$(this).focus();if(callback)callback(e)})});var _tab=null;$(tabsList).delegate("a","keydown",function(e){switch(e.which){case 37:case 38:if($(this).parent().prev().length!=0)_tab=$(this).parent().prev().find(">a");
else _tab=$(tabsList).find("li:last>a");$(_tab).focus();break;case 39:case 40:if($(this).parent().next().length!=0)_tab=$(this).parent().next().find(">a");else _tab=$(tabsList).find("li:first>a");$(_tab).focus();break;case 13:case 32:if(_tab){$(_tab).click();$(_tab).focus();e.preventDefault()}break}});var _loc=document.location.href;if(_loc.indexOf("#")>-1&&_loc.substring(_loc.indexOf("#"),_loc.length).length>1){var _href=_loc.substring(_loc.indexOf("#"),_loc.length);$(".nav.nav-tabs.tabsList").children("li").find("a[href='"+
_href+"']").trigger("click",function(e){$(".max-space-tab.active").focus();e.stopImmediatePropagation();e.preventDefault();e.stopPropagation();$("html, body").animate({scrollTop:"0px"})})}else{$(tabsDiv).find(".tabPanel:first").attr("aria-hidden","false").show();$(tabsList).find("li:first").addClass("active").find(">a").attr({"aria-selected":"true"});$(".tab-content").find("div:first").addClass("active")}});$.each($navTabsContainer,function(){var $this=$(this);var $children=$this.children(".max-space-tab");
$this.addClass("tabs-"+$children.length)})}},_setBinds:function(){var _hrbase=this},_invokeClasses:function(){var _hrbase=this;HR.instances.imgSwapper=new HR.ImgSwapper;_hrbase.attributes._childDeviceObj=HR.instances.deviceObj=_hrbase._getDeviceObj()},_replaceInvokeAttr:function(){var _hrbase=this;var _searchAttr=_hrbase.attributes._mobile?_hrbase.attributes.mInvokeAttr:_hrbase.attributes.dInvokeAttr;$("["+_searchAttr+"]").each(function(){var $this=$(this);$this.attr(_hrbase.attributes.invokeAttr,
$this.attr(_searchAttr));$this.removeAttr(_searchAttr)})},_getDeviceObj:function(){if(categorizr.isMobile)return new HR.Phone;else if(categorizr.isDesktop||categorizr.isTablet)return new HR.DesktopTablet;else{_hrbase.warn("Unexpected result in _getDeviceObj. Device type was not identified.");return new HR.DesktopTablet}},_readyChecker:function(){var _hrbase=this;_hrbase._readyInterval=_hrbase.setInterval(function(){if(_hrbase._assetsLoaded&&_hrbase.get("_childDeviceObj").isReady()){_hrbase._setReady();
_hrbase.clearInterval(_hrbase._readyInterval)}},60)},codeDump:function(){var _hrbase=this;if(navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1){var safariBugFix=$("body");safariBugFix.hide();safariBugFix.offsetHeight;safariBugFix.show()}$(".js-disclaimer-link").click(function(e){var listing=$(".js-disclaimer-list");if(!listing.hasClass("open")){listing.show();listing.addClass("open");$(".js-disclaimer-link-title span").removeClass("icon-caret-right").addClass("icon-caret-down")}});
$(".js-disclaimer-link-title").click(function(e){var listing=$(".js-disclaimer-list");var caret=$(".js-disclaimer-link-title span");listing.toggleClass("open");listing.toggle();if(caret.hasClass("icon-caret-right"))caret.removeClass("icon-caret-right").addClass("icon-caret-down");else caret.removeClass("icon-caret-down").addClass("icon-caret-right");e.preventDefault()});$("input").placeholder();if(categorizr.isDesktop){var _hoverInTimer,_hoverOutTimer;$(".meganav > li").hover(function(){var _this=
this;$(".menu.megadown").children("ul").show();$(".megadown").css("display","none");$(this).focus();$(".meganav li").css("background","none");$(".meganav > li").removeClass("meganav-hover");$(this).find(" > a").removeClass("menu-link-active");$(this).find(" > a").removeClass("menu-link");$(this).find(".megadown").attr("aria-hidden","false");_hoverInTimer=_hrbase.setTimeout(function(){_hrbase.log("fadeIn...");$(".megadown",_this).fadeIn(200)},_hrbase.get("navHoverDelay"))},function(){var _this=this;
$(this).blur();$(this).find(".megadown").attr("aria-hidden","true");$(this).removeClass("meganav-hover");_hrbase.clearTimeout(_hoverInTimer);_hoverOutTimer=_hrbase.setTimeout(function(){$(".megadown",_this).fadeOut(100)},_hrbase.get("navHoverDelay"))})}else if(categorizr.isTablet){var getHref=function(className){if(className.indexOf("section-file-online")>-1)return _file_online_href;else if(className.indexOf("section-download-software")>-1)return _download_software_href;else if(className.indexOf("section-file-in-an-office")>
-1)return _file_in_an_office_href;else if(className.indexOf("section-manage-your-money")>-1)return _manage_your_money_href;else if(className.indexOf("section-manage-your-health")>-1)return _manage_your_health_href;else if(className.indexOf("section-get-answers")>-1)return _get_answers_href;else if(className.indexOf("section-corp-comm")>-1)return _corp_comm_href};var _file_online_href=$("#topnav .meganav li.section-file-online > a ").attr("href");var _download_software_href=$("#topnav .meganav li.section-download-software > a ").attr("href");
var _file_in_an_office_href=$("#topnav .meganav li.section-file-in-an-office > a ").attr("href");var _manage_your_money_href=$("#topnav .meganav li.section-manage-your-money > a ").attr("href");var _manage_your_health_href=$("#topnav .meganav li.section-manage-your-health > a ").attr("href");var _get_answers_href=$("#topnav .meganav li.section-get-answers > a").attr("href");var _corp_comm_href=$("#topnav .meganav li.section-corp-comm > a").attr("href");$("#topnav .meganav li.section-file-online > a ,#topnav .meganav li.section-download-software > a , #topnav .meganav li.section-file-in-an-office > a , #topnav .meganav li.section-manage-your-money > a , #topnav .meganav li.section-manage-your-health > a , #topnav .meganav li.section-get-answers > a , #topnav .meganav li.section-corp-comm > a").attr("href",
"javascript:void(0)");$("#topnav .meganav > li").addClass("no-bg");$(".menu.megadown ul").css("display","block");var _this=null;var _hide=false;$(document).on("click touchend",function(e){$(".menu.megadown ul").css("display","block");if(_this!=null){var _ul=$(e.target).closest("ul");var _className=$(_ul).attr("class");if(_className==null||_className.indexOf("meganav")==-1){$(".megadown",$(_this).parent()).fadeOut(100);$(_this).parent().removeClass("arrow-bg");_hide=true}}});$(".meganav > li > a").on("click",
function(e){if(_this!=null&&_hide==false){$(_this).parent().removeClass("arrow-bg");if($(_this).parent().attr("class")==$(this).parent().attr("class")){window.location.href=getHref($(_this).parent().attr("class"));$(".megadown",$(_this).parent()).fadeOut(100);_this=null;return}else $(".megadown",$(_this).parent()).fadeOut(100)}$(this).parent().addClass("arrow-bg");_this=this;_hide=false;_hoverInTimer=_hrbase.setTimeout(function(){_hrbase.log("fadeIn click...");$(".megadown",$(_this).parent()).fadeIn(200)},
_hrbase.get("navHoverDelay"))})}$(".meganav .media").css({"cursor":"pointer"});$(".media").hover(function(){$(this).find(".media-headline").css("color","#7cc144");$(this).find(".icn-mega-nav").addClass("over")},function(){$(this).find(".media-headline").css("color","#666");$(this).find(".icn-mega-nav").removeClass("over")});$(".back-editions-select").on("change",function(){var option=$(this).find(":selected").val();window.location="/tax-software/"+option});$(".year-software-updates-select").on("change",
function(){$(".year-software-updates-links").hide();var selectedYear=$(this).find(":selected").val();$("#year-software-updates-"+selectedYear).show()});$(".year-updates-select").on("change",function(){$(".year-updates-links").hide();var selectedYear=$(this).find(":selected").val();$("#year-updates-"+selectedYear).show()});$(".accordion-group a").click(function(){if($(this).hasClass("in"))$(this).removeClass("in");else{$("#accordion2 .accordion-group a.in").removeClass("in");$(this).addClass("in")}});
function highlightYear(){var urlName=window.location.pathname;var index=urlName.lastIndexOf("/");var num=urlName.slice(index+1,index+5);if($(".year-squares li").hasClass("back-edition-"+num))$(".back-edition-"+num).addClass("year-squares-green")}highlightYear();$(".close-article").on("click",function(e){var article=$(this).parent();article.hide();article.prev().show();e.preventDefault()});$(".modal-backdrop, #demo .close").on("click",function(){$("#demo iframe").attr("src",$("#demo iframe").attr("src"));
if(navigator.appVersion.indexOf("MSIE")!=-1)location.reload()});if(typeof initBV==="function")initBV(bazaarVoiceCallback);function bazaarVoiceCallback(){return}}});
HR.DesktopTablet=HR.Device.extend({defaults:function(){return _.extend(_.result(HR.DesktopTablet.__super__,"defaults"),{type:"DesktopTablet",requires:[$.fn.imgpreload],desktopTabletClass:"desktopTablet",articles:null,sections:null,pageViewport:$("body")})},validate:function(attrs,options){var _hrbase=this},initialize:function(){var _hrbase=this;_hrbase.log("Welcome to desktopTablet");_hrbase._config();_hrbase.doValidate();_hrbase._setup();_hrbase._setBinds();_hrbase._codeDump()},_config:function(){var _hrbase=
this;_hrbase._invokeClasses()},_setup:function(){var _hrbase=this},_setBinds:function(){var _hrbase=this},_hideUrlBar:function(){var _hrbase=this;window.scrollTo(0,1)},_invokeClasses:function(){var _hrbase=this;_hrbase.set("childDevice",_hrbase.getDeviceObj())},_codeDump:function(){},binds:{setReadyChangeEvent:function(context){var _hrbase=context;_hrbase.on("readyChange",function(e,data){if(data.ready)HR.GlobalDispatcher.trigger("deviceObjReady",_hrbase)})}},getDeviceObj:function(){var _hrbase=this;
if(categorizr.isTablet)return new HR.Tablet;else if(categorizr.isDesktop)return new HR.Desktop;else{_hrbase.error("Unexpected result in getDeviceObj. Device not detected.");return new Desktop}}});
HR.Desktop=HR.Hrbase.extend({defaults:function(){return _.extend(_.result(HR.Desktop.__super__,"defaults"),{type:"Desktop",requires:[$.fn.imgpreload],global:HR.instances.global})},validate:function(attrs,options){if(_.has(attrs,"global")&&attrs.global)if(attrs.global.length!==1)return"global must have a length of 1"},initialize:function(){var _hrbase=this;_hrbase.log("Welcome to Desktop js");_hrbase._config();_hrbase.doValidate();_hrbase._setup();_hrbase._setBinds()},_config:function(){var _hrbase=
this},_setup:function(){var _hrbase=this},_setBinds:function(){var _hrbase=this},binds:{}});
HR.Tablet=HR.Hrbase.extend({defaults:function(){return _.extend(_.result(HR.Tablet.__super__,"defaults"),{type:"Tablet",desktopTabletClass:"tablet",requires:[$.fn.imgpreload],global:HR.instances.global})},validate:function(attrs,options){if(_.has(attrs,"global")&&attrs.global)if(attrs.global.length!==1)return"global must have a length of 1"},initialize:function(){var _hrbase=this;_hrbase.log("Welcome to tablet js");_hrbase._config();_hrbase.doValidate();_hrbase._setup();_hrbase._setBinds()},_config:function(){var _hrbase=
this;_hrbase._invokeClasses()},_hideUrlBar:function(){var _hrbase=this;window.scrollTo(0,1)},_setup:function(){var _hrbase=this;$("body").addClass(_hrbase.get("desktopTabletClass"));var addEvent=window.attachEvent||window.addEventListener;var event=window.attachEvent?"onload":"load";addEvent(event,function(){_hrbase.setTimeout(function(){_hrbase._hideUrlBar()},0)})},_setBinds:function(){var _hrbase=this},_invokeClasses:function(){var _hrbase=this;_hrbase.set("childDevice",_hrbase.getDeviceObj())},
binds:{},getDeviceObj:function(){var _hrbase=this;if(HR.Utils.isTablet.iPad())return new HR.Ipad;else return new HR.DefaultTablet}});
HR.DefaultTablet=HR.Hrbase.extend({defaults:function(){return _.extend(_.result(HR.DefaultTablet.__super__,"defaults"),{type:"DefaultTablet",requires:[$.fn.imgpreload],global:HR.instances.global})},validate:function(attrs,options){if(_.has(attrs,"global")&&attrs.global)if(attrs.global.length!==1)return"global must have a length of 1"},initialize:function(){var _hrbase=this;_hrbase._config();_hrbase.doValidate();_hrbase._setup();_hrbase._setBinds()},_config:function(){var _hrbase=this;_hrbase.log("Welcome to defaultTablet js")},
_setup:function(){var _hrbase=this},_setBinds:function(){var _hrbase=this},binds:{}});
HR.Ipad=HR.Hrbase.extend({defaults:function(){return _.extend(_.result(HR.Ipad.__super__,"defaults"),{type:"Ipad",ipadClass:"iPad",requires:[$.fn.imgpreload],global:HR.instances.global})},validate:function(attrs,options){if(_.has(attrs,"global")&&attrs.global)if(attrs.global.length!==1)return"global must have a length of 1"},initialize:function(){var _hrbase=this;_hrbase.log("Welcome to ipad js");_hrbase._config();_hrbase.doValidate();_hrbase._setup();_hrbase._setBinds()},_config:function(){var _hrbase=
this;_hrbase._invokeClasses()},_setup:function(){var _hrbase=this;$("body").addClass(_hrbase.get("ipadClass"))},_invokeClasses:function(){var _hrbase=this},_setBinds:function(){var _hrbase=this},binds:{}});
HR.Phone=HR.Device.extend({defaults:function(){return _.extend(_.result(HR.Phone.__super__,"defaults"),{type:"Phone",requires:[$.fn.imgpreload],phoneClass:"phone",articles:null,sections:null,pageViewport:$("body")})},validate:function(attrs,options){var _hrbase=this},initialize:function(){var _hrbase=this;_hrbase.log("Welcome to Phone js");_hrbase._config();_hrbase.doValidate();_hrbase._setup();_hrbase._setBinds();_hrbase._codeDump()},_config:function(){var _hrbase=this;_hrbase._invokeClasses()},
_setup:function(){var _hrbase=this;$("body").addClass(_hrbase.get("phoneClass"));window.addEventListener("load",function(){_hrbase.setTimeout(function(){_hrbase._hideUrlBar()},0)})},_setBinds:function(){var _hrbase=this},_hideUrlBar:function(){var _hrbase=this;window.scrollTo(0,1)},_codeDump:function(){var _hrbase=this},_invokeClasses:function(){var _hrbase=this;_hrbase.getDeviceObj()},binds:{setReadyChangeEvent:function(context){var _hrbase=context;_hrbase.on("readyChange",function(e,data){if(data.ready)HR.GlobalDispatcher.trigger("deviceObjReady",
_hrbase)})}},getDeviceObj:function(){var _hrbase=this;if(HR.Utils.isMobile.iOS())return new HR.Iphone;else return new HR.DefaultPhone}});
HR.DefaultPhone=HR.Hrbase.extend({defaults:function(){return _.extend(_.result(HR.DefaultPhone.__super__,"defaults"),{type:"DefaultPhone",requires:[$.fn.imgpreload],global:HR.instances.global})},validate:function(attrs,options){if(_.has(attrs,"global")&&attrs.global)if(attrs.global.length!==1)return"global must have a length of 1"},initialize:function(){var _hrbase=this;_hrbase._config();_hrbase.doValidate();_hrbase._setup();_hrbase._setBinds()},_config:function(){var _hrbase=this;_hrbase.log("Welcome to DefaultPhone js")},
_setup:function(){var _hrbase=this},_setBinds:function(){var _hrbase=this},binds:{}});
HR.Iphone=HR.Device.extend({defaults:function(){return _.extend(_.result(HR.Iphone.__super__,"defaults"),{type:"Iphone",requires:[$.fn.imgpreload],iphoneClass:"iphone",articles:null,sections:null,pageViewport:$("body")})},validate:function(attrs,options){var _hrbase=this},initialize:function(){var _hrbase=this;_hrbase.log("Welcome to iPhone js");_hrbase._config();_hrbase.doValidate();_hrbase._setup();_hrbase._setBinds();_hrbase._codeDump()},_config:function(){var _hrbase=this},_setup:function(){var _hrbase=
this;$("body").addClass(_hrbase.get("iphoneClass"));window.addEventListener("load",function(){_hrbase.setTimeout(function(){_hrbase._hideUrlBar()},0)})},_setBinds:function(){var _hrbase=this},_hideUrlBar:function(){var _hrbase=this;window.scrollTo(0,1)},_codeDump:function(){},binds:{setReadyChangeEvent:function(context){var _hrbase=context;_hrbase.on("readyChange",function(e,data){if(data.ready)HR.GlobalDispatcher.trigger("deviceObjReady",_hrbase)})}}});
HR.Utils={isMobile:{android:function(){return navigator.userAgent.match(/Android/i)},blackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return categorizr.isMobile}},isTablet:{iPad:function(){return navigator.userAgent.match(/iPad/i)!=null},any:function(){return categorizr.isTablet}},
isDesktop:function(){return!HR.Utils.isMobile.any()&&!HR.Utils.isTablet.any()},getKeyCodes:function(keycode){return{BACKSPACE:8,TAB:9,ENTER:13,COMMAND:15,SHIFT:16,CONTROL:17,ALTERNATE:18,PAUSE:19,CAPS_LOCK:20,NUMPAD:21,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,NUMBER_0:48,NUMBER_1:49,NUMBER_2:50,NUMBER_3:51,NUMBER_4:52,NUMBER_5:53,NUMBER_6:54,NUMBER_7:55,NUMBER_8:56,NUMBER_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,
L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,LEFT_WINDOW_KEY:91,RIGHT_WINDOW_KEY:92,SELECT_KEY:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_ENTER:108,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,
SEMICOLON:186,EQUAL:187,COMMA:188,MINUS:189,PERIOD:190,SLASH:191,BACKQUOTE:192,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221,QUOTE:222}}};$(function(){HR.instances={};HR.instances.global=new HR.Global});